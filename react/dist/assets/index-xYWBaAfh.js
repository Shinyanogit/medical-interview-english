function ZE(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function e_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mv={exports:{}},gu={},Vv={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tl=Symbol.for("react.element"),t_=Symbol.for("react.portal"),n_=Symbol.for("react.fragment"),s_=Symbol.for("react.strict_mode"),r_=Symbol.for("react.profiler"),i_=Symbol.for("react.provider"),a_=Symbol.for("react.context"),o_=Symbol.for("react.forward_ref"),l_=Symbol.for("react.suspense"),c_=Symbol.for("react.memo"),u_=Symbol.for("react.lazy"),Vf=Symbol.iterator;function h_(t){return t===null||typeof t!="object"?null:(t=Vf&&t[Vf]||t["@@iterator"],typeof t=="function"?t:null)}var Fv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hv=Object.assign,Uv={};function va(t,e,n){this.props=t,this.context=e,this.refs=Uv,this.updater=n||Fv}va.prototype.isReactComponent={};va.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};va.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Bv(){}Bv.prototype=va.prototype;function bm(t,e,n){this.props=t,this.context=e,this.refs=Uv,this.updater=n||Fv}var Im=bm.prototype=new Bv;Im.constructor=bm;Hv(Im,va.prototype);Im.isPureReactComponent=!0;var Ff=Array.isArray,qv=Object.prototype.hasOwnProperty,Em={current:null},zv={key:!0,ref:!0,__self:!0,__source:!0};function $v(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)qv.call(e,s)&&!zv.hasOwnProperty(s)&&(r[s]=e[s]);var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){for(var u=Array(c),h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}if(t&&t.defaultProps)for(s in c=t.defaultProps,c)r[s]===void 0&&(r[s]=c[s]);return{$$typeof:tl,type:t,key:i,ref:o,props:r,_owner:Em.current}}function d_(t,e){return{$$typeof:tl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _m(t){return typeof t=="object"&&t!==null&&t.$$typeof===tl}function m_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Hf=/\/+/g;function ch(t,e){return typeof t=="object"&&t!==null&&t.key!=null?m_(""+t.key):e.toString(36)}function nc(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tl:case t_:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+ch(o,0):s,Ff(r)?(n="",t!=null&&(n=t.replace(Hf,"$&/")+"/"),nc(r,e,n,"",function(h){return h})):r!=null&&(_m(r)&&(r=d_(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Hf,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",Ff(t))for(var c=0;c<t.length;c++){i=t[c];var u=s+ch(i,c);o+=nc(i,e,n,u,r)}else if(u=h_(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=s+ch(i,c++),o+=nc(i,e,n,u,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nl(t,e,n){if(t==null)return t;var s=[],r=0;return nc(t,s,"","",function(i){return e.call(n,i,r++)}),s}function p_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},sc={transition:null},f_={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:sc,ReactCurrentOwner:Em};function Jv(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Nl,forEach:function(t,e,n){Nl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nl(t,function(){e++}),e},toArray:function(t){return Nl(t,function(e){return e})||[]},only:function(t){if(!_m(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=va;ve.Fragment=n_;ve.Profiler=r_;ve.PureComponent=bm;ve.StrictMode=s_;ve.Suspense=l_;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f_;ve.act=Jv;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Hv({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Em.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)qv.call(e,u)&&!zv.hasOwnProperty(u)&&(s[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}return{$$typeof:tl,type:t.type,key:r,ref:i,props:s,_owner:o}};ve.createContext=function(t){return t={$$typeof:a_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:i_,_context:t},t.Consumer=t};ve.createElement=$v;ve.createFactory=function(t){var e=$v.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:o_,render:t}};ve.isValidElement=_m;ve.lazy=function(t){return{$$typeof:u_,_payload:{_status:-1,_result:t},_init:p_}};ve.memo=function(t,e){return{$$typeof:c_,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=sc.transition;sc.transition={};try{t()}finally{sc.transition=e}};ve.unstable_act=Jv;ve.useCallback=function(t,e){return Qt.current.useCallback(t,e)};ve.useContext=function(t){return Qt.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};ve.useEffect=function(t,e){return Qt.current.useEffect(t,e)};ve.useId=function(){return Qt.current.useId()};ve.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return Qt.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};ve.useRef=function(t){return Qt.current.useRef(t)};ve.useState=function(t){return Qt.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return Qt.current.useTransition()};ve.version="18.3.1";Vv.exports=ve;var I=Vv.exports;const yu=e_(I),g_=ZE({__proto__:null,default:yu},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_=I,v_=Symbol.for("react.element"),w_=Symbol.for("react.fragment"),x_=Object.prototype.hasOwnProperty,b_=y_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I_={key:!0,ref:!0,__self:!0,__source:!0};function Wv(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)x_.call(e,s)&&!I_.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:v_,type:t,key:i,ref:o,props:r,_owner:b_.current}}gu.Fragment=w_;gu.jsx=Wv;gu.jsxs=Wv;Mv.exports=gu;var a=Mv.exports,Xh={},Gv={exports:{}},In={},Kv={exports:{}},Qv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,M){var J=V.length;V.push(M);e:for(;0<J;){var ne=J-1>>>1,Z=V[ne];if(0<r(Z,M))V[ne]=M,V[J]=Z,J=ne;else break e}}function n(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var M=V[0],J=V.pop();if(J!==M){V[0]=J;e:for(var ne=0,Z=V.length,Be=Z>>>1;ne<Be;){var Ve=2*(ne+1)-1,Xe=V[Ve],Te=Ve+1,Ze=V[Te];if(0>r(Xe,J))Te<Z&&0>r(Ze,Xe)?(V[ne]=Ze,V[Te]=J,ne=Te):(V[ne]=Xe,V[Ve]=J,ne=Ve);else if(Te<Z&&0>r(Ze,J))V[ne]=Ze,V[Te]=J,ne=Te;else break e}}return M}function r(V,M){var J=V.sortIndex-M.sortIndex;return J!==0?J:V.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],m=1,p=null,g=3,E=!1,C=!1,w=!1,k=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(V){for(var M=n(h);M!==null;){if(M.callback===null)s(h);else if(M.startTime<=V)s(h),M.sortIndex=M.expirationTime,e(u,M);else break;M=n(h)}}function R(V){if(w=!1,j(V),!C)if(n(u)!==null)C=!0,Re(L);else{var M=n(h);M!==null&&De(R,M.startTime-V)}}function L(V,M){C=!1,w&&(w=!1,y(v),v=-1),E=!0;var J=g;try{for(j(M),p=n(u);p!==null&&(!(p.expirationTime>M)||V&&!P());){var ne=p.callback;if(typeof ne=="function"){p.callback=null,g=p.priorityLevel;var Z=ne(p.expirationTime<=M);M=t.unstable_now(),typeof Z=="function"?p.callback=Z:p===n(u)&&s(u),j(M)}else s(u);p=n(u)}if(p!==null)var Be=!0;else{var Ve=n(h);Ve!==null&&De(R,Ve.startTime-M),Be=!1}return Be}finally{p=null,g=J,E=!1}}var U=!1,S=null,v=-1,N=5,T=-1;function P(){return!(t.unstable_now()-T<N)}function A(){if(S!==null){var V=t.unstable_now();T=V;var M=!0;try{M=S(!0,V)}finally{M?_():(U=!1,S=null)}}else U=!1}var _;if(typeof x=="function")_=function(){x(A)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ye=re.port2;re.port1.onmessage=A,_=function(){ye.postMessage(null)}}else _=function(){k(A,0)};function Re(V){S=V,U||(U=!0,_())}function De(V,M){v=k(function(){V(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){C||E||(C=!0,Re(L))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(V){switch(g){case 1:case 2:case 3:var M=3;break;default:M=g}var J=g;g=M;try{return V()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,M){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var J=g;g=V;try{return M()}finally{g=J}},t.unstable_scheduleCallback=function(V,M,J){var ne=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ne+J:ne):J=ne,V){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=J+Z,V={id:m++,callback:M,priorityLevel:V,startTime:J,expirationTime:Z,sortIndex:-1},J>ne?(V.sortIndex=J,e(h,V),n(u)===null&&V===n(h)&&(w?(y(v),v=-1):w=!0,De(R,J-ne))):(V.sortIndex=Z,e(u,V),C||E||(C=!0,Re(L))),V},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(V){var M=g;return function(){var J=g;g=M;try{return V.apply(this,arguments)}finally{g=J}}}})(Qv);Kv.exports=Qv;var E_=Kv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __=I,bn=E_;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yv=new Set,So={};function yi(t,e){ra(t,e),ra(t+"Capture",e)}function ra(t,e){for(So[t]=e,t=0;t<e.length;t++)Yv.add(e[t])}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zh=Object.prototype.hasOwnProperty,k_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uf={},Bf={};function S_(t){return Zh.call(Bf,t)?!0:Zh.call(Uf,t)?!1:k_.test(t)?Bf[t]=!0:(Uf[t]=!0,!1)}function T_(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function N_(t,e,n,s){if(e===null||typeof e>"u"||T_(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yt(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new Yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new Yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new Yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new Yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new Yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new Yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new Yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new Yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new Yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var km=/[\-:]([a-z])/g;function Sm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(km,Sm);Ct[e]=new Yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(km,Sm);Ct[e]=new Yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(km,Sm);Ct[e]=new Yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new Yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new Yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Tm(t,e,n,s){var r=Ct.hasOwnProperty(e)?Ct[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(N_(e,n,r,s)&&(n=null),s||r===null?S_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Os=__.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jl=Symbol.for("react.element"),Li=Symbol.for("react.portal"),Mi=Symbol.for("react.fragment"),Nm=Symbol.for("react.strict_mode"),ed=Symbol.for("react.profiler"),Xv=Symbol.for("react.provider"),Zv=Symbol.for("react.context"),jm=Symbol.for("react.forward_ref"),td=Symbol.for("react.suspense"),nd=Symbol.for("react.suspense_list"),Cm=Symbol.for("react.memo"),Qs=Symbol.for("react.lazy"),ew=Symbol.for("react.offscreen"),qf=Symbol.iterator;function Ua(t){return t===null||typeof t!="object"?null:(t=qf&&t[qf]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,uh;function Ya(t){if(uh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uh=e&&e[1]||""}return`
`+uh+t}var hh=!1;function dh(t,e){if(!t||hh)return"";hh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var s=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){s=h}t.call(e.prototype)}else{try{throw Error()}catch(h){s=h}t()}}catch(h){if(h&&s&&typeof h.stack=="string"){for(var r=h.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,c=i.length-1;1<=o&&0<=c&&r[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(r[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||r[o]!==i[c]){var u=`
`+r[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{hh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ya(t):""}function j_(t){switch(t.tag){case 5:return Ya(t.type);case 16:return Ya("Lazy");case 13:return Ya("Suspense");case 19:return Ya("SuspenseList");case 0:case 2:case 15:return t=dh(t.type,!1),t;case 11:return t=dh(t.type.render,!1),t;case 1:return t=dh(t.type,!0),t;default:return""}}function sd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mi:return"Fragment";case Li:return"Portal";case ed:return"Profiler";case Nm:return"StrictMode";case td:return"Suspense";case nd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zv:return(t.displayName||"Context")+".Consumer";case Xv:return(t._context.displayName||"Context")+".Provider";case jm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cm:return e=t.displayName||null,e!==null?e:sd(t.type)||"Memo";case Qs:e=t._payload,t=t._init;try{return sd(t(e))}catch{}}return null}function C_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sd(e);case 8:return e===Nm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Er(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function A_(t){var e=tw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cl(t){t._valueTracker||(t._valueTracker=A_(t))}function nw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=tw(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function kc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rd(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zf(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Er(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sw(t,e){e=e.checked,e!=null&&Tm(t,"checked",e,!1)}function id(t,e){sw(t,e);var n=Er(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ad(t,e.type,n):e.hasOwnProperty("defaultValue")&&ad(t,e.type,Er(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $f(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ad(t,e,n){(e!=="number"||kc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xa=Array.isArray;function Gi(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Er(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function od(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(Xa(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Er(n)}}function rw(t,e){var n=Er(e.value),s=Er(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function Wf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ld(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Al,aw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Al=Al||document.createElement("div"),Al.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Al.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function To(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var lo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},P_=["Webkit","ms","Moz","O"];Object.keys(lo).forEach(function(t){P_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),lo[e]=lo[t]})});function ow(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||lo.hasOwnProperty(t)&&lo[t]?(""+e).trim():e+"px"}function lw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=ow(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var R_=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cd(t,e){if(e){if(R_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function ud(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hd=null;function Am(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dd=null,Ki=null,Qi=null;function Gf(t){if(t=rl(t)){if(typeof dd!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Iu(e),dd(t.stateNode,t.type,e))}}function cw(t){Ki?Qi?Qi.push(t):Qi=[t]:Ki=t}function uw(){if(Ki){var t=Ki,e=Qi;if(Qi=Ki=null,Gf(t),e)for(t=0;t<e.length;t++)Gf(e[t])}}function hw(t,e){return t(e)}function dw(){}var mh=!1;function mw(t,e,n){if(mh)return t(e,n);mh=!0;try{return hw(t,e,n)}finally{mh=!1,(Ki!==null||Qi!==null)&&(dw(),uw())}}function No(t,e){var n=t.stateNode;if(n===null)return null;var s=Iu(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var md=!1;if(Ts)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){md=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{md=!1}function D_(t,e,n,s,r,i,o,c,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var co=!1,Sc=null,Tc=!1,pd=null,O_={onError:function(t){co=!0,Sc=t}};function L_(t,e,n,s,r,i,o,c,u){co=!1,Sc=null,D_.apply(O_,arguments)}function M_(t,e,n,s,r,i,o,c,u){if(L_.apply(this,arguments),co){if(co){var h=Sc;co=!1,Sc=null}else throw Error(q(198));Tc||(Tc=!0,pd=h)}}function vi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kf(t){if(vi(t)!==t)throw Error(q(188))}function V_(t){var e=t.alternate;if(!e){if(e=vi(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Kf(r),t;if(i===s)return Kf(r),e;i=i.sibling}throw Error(q(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,c=r.child;c;){if(c===n){o=!0,n=r,s=i;break}if(c===s){o=!0,s=r,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,s=r;break}if(c===s){o=!0,s=i,n=r;break}c=c.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==s)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function fw(t){return t=V_(t),t!==null?gw(t):null}function gw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gw(t);if(e!==null)return e;t=t.sibling}return null}var yw=bn.unstable_scheduleCallback,Qf=bn.unstable_cancelCallback,F_=bn.unstable_shouldYield,H_=bn.unstable_requestPaint,tt=bn.unstable_now,U_=bn.unstable_getCurrentPriorityLevel,Pm=bn.unstable_ImmediatePriority,vw=bn.unstable_UserBlockingPriority,Nc=bn.unstable_NormalPriority,B_=bn.unstable_LowPriority,ww=bn.unstable_IdlePriority,vu=null,ss=null;function q_(t){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(vu,t,void 0,(t.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:J_,z_=Math.log,$_=Math.LN2;function J_(t){return t>>>=0,t===0?32:31-(z_(t)/$_|0)|0}var Pl=64,Rl=4194304;function Za(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jc(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~r;c!==0?s=Za(c):(i&=o,i!==0&&(s=Za(i)))}else o=n&~r,o!==0?s=Za(o):i!==0&&(s=Za(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-zn(e),r=1<<n,s|=t[n],e&=~r;return s}function W_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G_(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-zn(i),c=1<<o,u=r[o];u===-1?(!(c&n)||c&s)&&(r[o]=W_(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function fd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xw(){var t=Pl;return Pl<<=1,!(Pl&4194240)&&(Pl=64),t}function ph(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zn(e),t[e]=n}function K_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-zn(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function Rm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-zn(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var je=0;function bw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Iw,Dm,Ew,_w,kw,gd=!1,Dl=[],cr=null,ur=null,hr=null,jo=new Map,Co=new Map,Xs=[],Q_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yf(t,e){switch(t){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":jo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Co.delete(e.pointerId)}}function qa(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=rl(e),e!==null&&Dm(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Y_(t,e,n,s,r){switch(e){case"focusin":return cr=qa(cr,t,e,n,s,r),!0;case"dragenter":return ur=qa(ur,t,e,n,s,r),!0;case"mouseover":return hr=qa(hr,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return jo.set(i,qa(jo.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Co.set(i,qa(Co.get(i)||null,t,e,n,s,r)),!0}return!1}function Sw(t){var e=Yr(t.target);if(e!==null){var n=vi(e);if(n!==null){if(e=n.tag,e===13){if(e=pw(n),e!==null){t.blockedOn=e,kw(t.priority,function(){Ew(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);hd=s,n.target.dispatchEvent(s),hd=null}else return e=rl(n),e!==null&&Dm(e),t.blockedOn=n,!1;e.shift()}return!0}function Xf(t,e,n){rc(t)&&n.delete(e)}function X_(){gd=!1,cr!==null&&rc(cr)&&(cr=null),ur!==null&&rc(ur)&&(ur=null),hr!==null&&rc(hr)&&(hr=null),jo.forEach(Xf),Co.forEach(Xf)}function za(t,e){t.blockedOn===e&&(t.blockedOn=null,gd||(gd=!0,bn.unstable_scheduleCallback(bn.unstable_NormalPriority,X_)))}function Ao(t){function e(r){return za(r,t)}if(0<Dl.length){za(Dl[0],t);for(var n=1;n<Dl.length;n++){var s=Dl[n];s.blockedOn===t&&(s.blockedOn=null)}}for(cr!==null&&za(cr,t),ur!==null&&za(ur,t),hr!==null&&za(hr,t),jo.forEach(e),Co.forEach(e),n=0;n<Xs.length;n++)s=Xs[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Xs.length&&(n=Xs[0],n.blockedOn===null);)Sw(n),n.blockedOn===null&&Xs.shift()}var Yi=Os.ReactCurrentBatchConfig,Cc=!0;function Z_(t,e,n,s){var r=je,i=Yi.transition;Yi.transition=null;try{je=1,Om(t,e,n,s)}finally{je=r,Yi.transition=i}}function ek(t,e,n,s){var r=je,i=Yi.transition;Yi.transition=null;try{je=4,Om(t,e,n,s)}finally{je=r,Yi.transition=i}}function Om(t,e,n,s){if(Cc){var r=yd(t,e,n,s);if(r===null)_h(t,e,s,Ac,n),Yf(t,s);else if(Y_(r,t,e,n,s))s.stopPropagation();else if(Yf(t,s),e&4&&-1<Q_.indexOf(t)){for(;r!==null;){var i=rl(r);if(i!==null&&Iw(i),i=yd(t,e,n,s),i===null&&_h(t,e,s,Ac,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else _h(t,e,s,null,n)}}var Ac=null;function yd(t,e,n,s){if(Ac=null,t=Am(s),t=Yr(t),t!==null)if(e=vi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ac=t,null}function Tw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(U_()){case Pm:return 1;case vw:return 4;case Nc:case B_:return 16;case ww:return 536870912;default:return 16}default:return 16}}var rr=null,Lm=null,ic=null;function Nw(){if(ic)return ic;var t,e=Lm,n=e.length,s,r="value"in rr?rr.value:rr.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return ic=r.slice(t,1<s?1-s:void 0)}function ac(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ol(){return!0}function Zf(){return!1}function En(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ol:Zf,this.isPropagationStopped=Zf,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ol)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ol)},persist:function(){},isPersistent:Ol}),e}var wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mm=En(wa),sl=Ge({},wa,{view:0,detail:0}),tk=En(sl),fh,gh,$a,wu=Ge({},sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$a&&($a&&t.type==="mousemove"?(fh=t.screenX-$a.screenX,gh=t.screenY-$a.screenY):gh=fh=0,$a=t),fh)},movementY:function(t){return"movementY"in t?t.movementY:gh}}),eg=En(wu),nk=Ge({},wu,{dataTransfer:0}),sk=En(nk),rk=Ge({},sl,{relatedTarget:0}),yh=En(rk),ik=Ge({},wa,{animationName:0,elapsedTime:0,pseudoElement:0}),ak=En(ik),ok=Ge({},wa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lk=En(ok),ck=Ge({},wa,{data:0}),tg=En(ck),uk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dk[t])?!!e[t]:!1}function Vm(){return mk}var pk=Ge({},sl,{key:function(t){if(t.key){var e=uk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ac(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vm,charCode:function(t){return t.type==="keypress"?ac(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ac(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fk=En(pk),gk=Ge({},wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ng=En(gk),yk=Ge({},sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vm}),vk=En(yk),wk=Ge({},wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),xk=En(wk),bk=Ge({},wu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ik=En(bk),Ek=[9,13,27,32],Fm=Ts&&"CompositionEvent"in window,uo=null;Ts&&"documentMode"in document&&(uo=document.documentMode);var _k=Ts&&"TextEvent"in window&&!uo,jw=Ts&&(!Fm||uo&&8<uo&&11>=uo),sg=" ",rg=!1;function Cw(t,e){switch(t){case"keyup":return Ek.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Aw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vi=!1;function kk(t,e){switch(t){case"compositionend":return Aw(e);case"keypress":return e.which!==32?null:(rg=!0,sg);case"textInput":return t=e.data,t===sg&&rg?null:t;default:return null}}function Sk(t,e){if(Vi)return t==="compositionend"||!Fm&&Cw(t,e)?(t=Nw(),ic=Lm=rr=null,Vi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jw&&e.locale!=="ko"?null:e.data;default:return null}}var Tk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ig(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Tk[t.type]:e==="textarea"}function Pw(t,e,n,s){cw(s),e=Pc(e,"onChange"),0<e.length&&(n=new Mm("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var ho=null,Po=null;function Nk(t){qw(t,0)}function xu(t){var e=Ui(t);if(nw(e))return t}function jk(t,e){if(t==="change")return e}var Rw=!1;if(Ts){var vh;if(Ts){var wh="oninput"in document;if(!wh){var ag=document.createElement("div");ag.setAttribute("oninput","return;"),wh=typeof ag.oninput=="function"}vh=wh}else vh=!1;Rw=vh&&(!document.documentMode||9<document.documentMode)}function og(){ho&&(ho.detachEvent("onpropertychange",Dw),Po=ho=null)}function Dw(t){if(t.propertyName==="value"&&xu(Po)){var e=[];Pw(e,Po,t,Am(t)),mw(Nk,e)}}function Ck(t,e,n){t==="focusin"?(og(),ho=e,Po=n,ho.attachEvent("onpropertychange",Dw)):t==="focusout"&&og()}function Ak(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xu(Po)}function Pk(t,e){if(t==="click")return xu(e)}function Rk(t,e){if(t==="input"||t==="change")return xu(e)}function Dk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wn=typeof Object.is=="function"?Object.is:Dk;function Ro(t,e){if(Wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Zh.call(e,r)||!Wn(t[r],e[r]))return!1}return!0}function lg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cg(t,e){var n=lg(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lg(n)}}function Ow(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ow(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Lw(){for(var t=window,e=kc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=kc(t.document)}return e}function Hm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ok(t){var e=Lw(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ow(n.ownerDocument.documentElement,n)){if(s!==null&&Hm(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=cg(n,i);var o=cg(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Lk=Ts&&"documentMode"in document&&11>=document.documentMode,Fi=null,vd=null,mo=null,wd=!1;function ug(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wd||Fi==null||Fi!==kc(s)||(s=Fi,"selectionStart"in s&&Hm(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),mo&&Ro(mo,s)||(mo=s,s=Pc(vd,"onSelect"),0<s.length&&(e=new Mm("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Fi)))}function Ll(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hi={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionend:Ll("Transition","TransitionEnd")},xh={},Mw={};Ts&&(Mw=document.createElement("div").style,"AnimationEvent"in window||(delete Hi.animationend.animation,delete Hi.animationiteration.animation,delete Hi.animationstart.animation),"TransitionEvent"in window||delete Hi.transitionend.transition);function bu(t){if(xh[t])return xh[t];if(!Hi[t])return t;var e=Hi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Mw)return xh[t]=e[n];return t}var Vw=bu("animationend"),Fw=bu("animationiteration"),Hw=bu("animationstart"),Uw=bu("transitionend"),Bw=new Map,hg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(t,e){Bw.set(t,e),yi(e,[t])}for(var bh=0;bh<hg.length;bh++){var Ih=hg[bh],Mk=Ih.toLowerCase(),Vk=Ih[0].toUpperCase()+Ih.slice(1);Ar(Mk,"on"+Vk)}Ar(Vw,"onAnimationEnd");Ar(Fw,"onAnimationIteration");Ar(Hw,"onAnimationStart");Ar("dblclick","onDoubleClick");Ar("focusin","onFocus");Ar("focusout","onBlur");Ar(Uw,"onTransitionEnd");ra("onMouseEnter",["mouseout","mouseover"]);ra("onMouseLeave",["mouseout","mouseover"]);ra("onPointerEnter",["pointerout","pointerover"]);ra("onPointerLeave",["pointerout","pointerover"]);yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yi("onBeforeInput",["compositionend","keypress","textInput","paste"]);yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fk=new Set("cancel close invalid load scroll toggle".split(" ").concat(eo));function dg(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,M_(s,e,void 0,t),t.currentTarget=null}function qw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var c=s[o],u=c.instance,h=c.currentTarget;if(c=c.listener,u!==i&&r.isPropagationStopped())break e;dg(r,c,h),i=u}else for(o=0;o<s.length;o++){if(c=s[o],u=c.instance,h=c.currentTarget,c=c.listener,u!==i&&r.isPropagationStopped())break e;dg(r,c,h),i=u}}}if(Tc)throw t=pd,Tc=!1,pd=null,t}function Fe(t,e){var n=e[_d];n===void 0&&(n=e[_d]=new Set);var s=t+"__bubble";n.has(s)||(zw(e,t,2,!1),n.add(s))}function Eh(t,e,n){var s=0;e&&(s|=4),zw(n,t,s,e)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function Do(t){if(!t[Ml]){t[Ml]=!0,Yv.forEach(function(n){n!=="selectionchange"&&(Fk.has(n)||Eh(n,!1,t),Eh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ml]||(e[Ml]=!0,Eh("selectionchange",!1,e))}}function zw(t,e,n,s){switch(Tw(e)){case 1:var r=Z_;break;case 4:r=ek;break;default:r=Om}n=r.bind(null,e,n,t),r=void 0,!md||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function _h(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var c=s.stateNode.containerInfo;if(c===r||c.nodeType===8&&c.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;o=o.return}for(;c!==null;){if(o=Yr(c),o===null)return;if(u=o.tag,u===5||u===6){s=i=o;continue e}c=c.parentNode}}s=s.return}mw(function(){var h=i,m=Am(n),p=[];e:{var g=Bw.get(t);if(g!==void 0){var E=Mm,C=t;switch(t){case"keypress":if(ac(n)===0)break e;case"keydown":case"keyup":E=fk;break;case"focusin":C="focus",E=yh;break;case"focusout":C="blur",E=yh;break;case"beforeblur":case"afterblur":E=yh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=eg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=sk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=vk;break;case Vw:case Fw:case Hw:E=ak;break;case Uw:E=xk;break;case"scroll":E=tk;break;case"wheel":E=Ik;break;case"copy":case"cut":case"paste":E=lk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=ng}var w=(e&4)!==0,k=!w&&t==="scroll",y=w?g!==null?g+"Capture":null:g;w=[];for(var x=h,j;x!==null;){j=x;var R=j.stateNode;if(j.tag===5&&R!==null&&(j=R,y!==null&&(R=No(x,y),R!=null&&w.push(Oo(x,R,j)))),k)break;x=x.return}0<w.length&&(g=new E(g,C,null,n,m),p.push({event:g,listeners:w}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",g&&n!==hd&&(C=n.relatedTarget||n.fromElement)&&(Yr(C)||C[Ns]))break e;if((E||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,E?(C=n.relatedTarget||n.toElement,E=h,C=C?Yr(C):null,C!==null&&(k=vi(C),C!==k||C.tag!==5&&C.tag!==6)&&(C=null)):(E=null,C=h),E!==C)){if(w=eg,R="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(w=ng,R="onPointerLeave",y="onPointerEnter",x="pointer"),k=E==null?g:Ui(E),j=C==null?g:Ui(C),g=new w(R,x+"leave",E,n,m),g.target=k,g.relatedTarget=j,R=null,Yr(m)===h&&(w=new w(y,x+"enter",C,n,m),w.target=j,w.relatedTarget=k,R=w),k=R,E&&C)t:{for(w=E,y=C,x=0,j=w;j;j=Ai(j))x++;for(j=0,R=y;R;R=Ai(R))j++;for(;0<x-j;)w=Ai(w),x--;for(;0<j-x;)y=Ai(y),j--;for(;x--;){if(w===y||y!==null&&w===y.alternate)break t;w=Ai(w),y=Ai(y)}w=null}else w=null;E!==null&&mg(p,g,E,w,!1),C!==null&&k!==null&&mg(p,k,C,w,!0)}}e:{if(g=h?Ui(h):window,E=g.nodeName&&g.nodeName.toLowerCase(),E==="select"||E==="input"&&g.type==="file")var L=jk;else if(ig(g))if(Rw)L=Rk;else{L=Ak;var U=Ck}else(E=g.nodeName)&&E.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=Pk);if(L&&(L=L(t,h))){Pw(p,L,n,m);break e}U&&U(t,g,h),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&ad(g,"number",g.value)}switch(U=h?Ui(h):window,t){case"focusin":(ig(U)||U.contentEditable==="true")&&(Fi=U,vd=h,mo=null);break;case"focusout":mo=vd=Fi=null;break;case"mousedown":wd=!0;break;case"contextmenu":case"mouseup":case"dragend":wd=!1,ug(p,n,m);break;case"selectionchange":if(Lk)break;case"keydown":case"keyup":ug(p,n,m)}var S;if(Fm)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Vi?Cw(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(jw&&n.locale!=="ko"&&(Vi||v!=="onCompositionStart"?v==="onCompositionEnd"&&Vi&&(S=Nw()):(rr=m,Lm="value"in rr?rr.value:rr.textContent,Vi=!0)),U=Pc(h,v),0<U.length&&(v=new tg(v,t,null,n,m),p.push({event:v,listeners:U}),S?v.data=S:(S=Aw(n),S!==null&&(v.data=S)))),(S=_k?kk(t,n):Sk(t,n))&&(h=Pc(h,"onBeforeInput"),0<h.length&&(m=new tg("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:h}),m.data=S))}qw(p,e)})}function Oo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pc(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=No(t,n),i!=null&&s.unshift(Oo(t,i,r)),i=No(t,e),i!=null&&s.push(Oo(t,i,r))),t=t.return}return s}function Ai(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mg(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var c=n,u=c.alternate,h=c.stateNode;if(u!==null&&u===s)break;c.tag===5&&h!==null&&(c=h,r?(u=No(n,i),u!=null&&o.unshift(Oo(n,u,c))):r||(u=No(n,i),u!=null&&o.push(Oo(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Hk=/\r\n?/g,Uk=/\u0000|\uFFFD/g;function pg(t){return(typeof t=="string"?t:""+t).replace(Hk,`
`).replace(Uk,"")}function Vl(t,e,n){if(e=pg(e),pg(t)!==e&&n)throw Error(q(425))}function Rc(){}var xd=null,bd=null;function Id(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ed=typeof setTimeout=="function"?setTimeout:void 0,Bk=typeof clearTimeout=="function"?clearTimeout:void 0,fg=typeof Promise=="function"?Promise:void 0,qk=typeof queueMicrotask=="function"?queueMicrotask:typeof fg<"u"?function(t){return fg.resolve(null).then(t).catch(zk)}:Ed;function zk(t){setTimeout(function(){throw t})}function kh(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),Ao(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Ao(e)}function dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xa=Math.random().toString(36).slice(2),ns="__reactFiber$"+xa,Lo="__reactProps$"+xa,Ns="__reactContainer$"+xa,_d="__reactEvents$"+xa,$k="__reactListeners$"+xa,Jk="__reactHandles$"+xa;function Yr(t){var e=t[ns];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ns]||n[ns]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gg(t);t!==null;){if(n=t[ns])return n;t=gg(t)}return e}t=n,n=t.parentNode}return null}function rl(t){return t=t[ns]||t[Ns],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ui(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Iu(t){return t[Lo]||null}var kd=[],Bi=-1;function Pr(t){return{current:t}}function Ue(t){0>Bi||(t.current=kd[Bi],kd[Bi]=null,Bi--)}function Me(t,e){Bi++,kd[Bi]=t.current,t.current=e}var _r={},Bt=Pr(_r),cn=Pr(!1),ii=_r;function ia(t,e){var n=t.type.contextTypes;if(!n)return _r;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function un(t){return t=t.childContextTypes,t!=null}function Dc(){Ue(cn),Ue(Bt)}function yg(t,e,n){if(Bt.current!==_r)throw Error(q(168));Me(Bt,e),Me(cn,n)}function $w(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(q(108,C_(t)||"Unknown",r));return Ge({},n,s)}function Oc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_r,ii=Bt.current,Me(Bt,t),Me(cn,cn.current),!0}function vg(t,e,n){var s=t.stateNode;if(!s)throw Error(q(169));n?(t=$w(t,e,ii),s.__reactInternalMemoizedMergedChildContext=t,Ue(cn),Ue(Bt),Me(Bt,t)):Ue(cn),Me(cn,n)}var ws=null,Eu=!1,Sh=!1;function Jw(t){ws===null?ws=[t]:ws.push(t)}function Wk(t){Eu=!0,Jw(t)}function Rr(){if(!Sh&&ws!==null){Sh=!0;var t=0,e=je;try{var n=ws;for(je=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}ws=null,Eu=!1}catch(r){throw ws!==null&&(ws=ws.slice(t+1)),yw(Pm,Rr),r}finally{je=e,Sh=!1}}return null}var qi=[],zi=0,Lc=null,Mc=0,Cn=[],An=0,ai=null,bs=1,Is="";function Gr(t,e){qi[zi++]=Mc,qi[zi++]=Lc,Lc=t,Mc=e}function Ww(t,e,n){Cn[An++]=bs,Cn[An++]=Is,Cn[An++]=ai,ai=t;var s=bs;t=Is;var r=32-zn(s)-1;s&=~(1<<r),n+=1;var i=32-zn(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,bs=1<<32-zn(e)+r|n<<r|s,Is=i+t}else bs=1<<i|n<<r|s,Is=t}function Um(t){t.return!==null&&(Gr(t,1),Ww(t,1,0))}function Bm(t){for(;t===Lc;)Lc=qi[--zi],qi[zi]=null,Mc=qi[--zi],qi[zi]=null;for(;t===ai;)ai=Cn[--An],Cn[An]=null,Is=Cn[--An],Cn[An]=null,bs=Cn[--An],Cn[An]=null}var xn=null,vn=null,qe=!1,Bn=null;function Gw(t,e){var n=Rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xn=t,vn=dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ai!==null?{id:bs,overflow:Is}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xn=t,vn=null,!0):!1;default:return!1}}function Sd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Td(t){if(qe){var e=vn;if(e){var n=e;if(!wg(t,e)){if(Sd(t))throw Error(q(418));e=dr(n.nextSibling);var s=xn;e&&wg(t,e)?Gw(s,n):(t.flags=t.flags&-4097|2,qe=!1,xn=t)}}else{if(Sd(t))throw Error(q(418));t.flags=t.flags&-4097|2,qe=!1,xn=t}}}function xg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xn=t}function Fl(t){if(t!==xn)return!1;if(!qe)return xg(t),qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Id(t.type,t.memoizedProps)),e&&(e=vn)){if(Sd(t))throw Kw(),Error(q(418));for(;e;)Gw(t,e),e=dr(e.nextSibling)}if(xg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=xn?dr(t.stateNode.nextSibling):null;return!0}function Kw(){for(var t=vn;t;)t=dr(t.nextSibling)}function aa(){vn=xn=null,qe=!1}function qm(t){Bn===null?Bn=[t]:Bn.push(t)}var Gk=Os.ReactCurrentBatchConfig;function Ja(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var s=n.stateNode}if(!s)throw Error(q(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=r.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function Hl(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bg(t){var e=t._init;return e(t._payload)}function Qw(t){function e(y,x){if(t){var j=y.deletions;j===null?(y.deletions=[x],y.flags|=16):j.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function s(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function r(y,x){return y=gr(y,x),y.index=0,y.sibling=null,y}function i(y,x,j){return y.index=j,t?(j=y.alternate,j!==null?(j=j.index,j<x?(y.flags|=2,x):j):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function c(y,x,j,R){return x===null||x.tag!==6?(x=Rh(j,y.mode,R),x.return=y,x):(x=r(x,j),x.return=y,x)}function u(y,x,j,R){var L=j.type;return L===Mi?m(y,x,j.props.children,R,j.key):x!==null&&(x.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Qs&&bg(L)===x.type)?(R=r(x,j.props),R.ref=Ja(y,x,j),R.return=y,R):(R=mc(j.type,j.key,j.props,null,y.mode,R),R.ref=Ja(y,x,j),R.return=y,R)}function h(y,x,j,R){return x===null||x.tag!==4||x.stateNode.containerInfo!==j.containerInfo||x.stateNode.implementation!==j.implementation?(x=Dh(j,y.mode,R),x.return=y,x):(x=r(x,j.children||[]),x.return=y,x)}function m(y,x,j,R,L){return x===null||x.tag!==7?(x=si(j,y.mode,R,L),x.return=y,x):(x=r(x,j),x.return=y,x)}function p(y,x,j){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Rh(""+x,y.mode,j),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case jl:return j=mc(x.type,x.key,x.props,null,y.mode,j),j.ref=Ja(y,null,x),j.return=y,j;case Li:return x=Dh(x,y.mode,j),x.return=y,x;case Qs:var R=x._init;return p(y,R(x._payload),j)}if(Xa(x)||Ua(x))return x=si(x,y.mode,j,null),x.return=y,x;Hl(y,x)}return null}function g(y,x,j,R){var L=x!==null?x.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return L!==null?null:c(y,x,""+j,R);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case jl:return j.key===L?u(y,x,j,R):null;case Li:return j.key===L?h(y,x,j,R):null;case Qs:return L=j._init,g(y,x,L(j._payload),R)}if(Xa(j)||Ua(j))return L!==null?null:m(y,x,j,R,null);Hl(y,j)}return null}function E(y,x,j,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return y=y.get(j)||null,c(x,y,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case jl:return y=y.get(R.key===null?j:R.key)||null,u(x,y,R,L);case Li:return y=y.get(R.key===null?j:R.key)||null,h(x,y,R,L);case Qs:var U=R._init;return E(y,x,j,U(R._payload),L)}if(Xa(R)||Ua(R))return y=y.get(j)||null,m(x,y,R,L,null);Hl(x,R)}return null}function C(y,x,j,R){for(var L=null,U=null,S=x,v=x=0,N=null;S!==null&&v<j.length;v++){S.index>v?(N=S,S=null):N=S.sibling;var T=g(y,S,j[v],R);if(T===null){S===null&&(S=N);break}t&&S&&T.alternate===null&&e(y,S),x=i(T,x,v),U===null?L=T:U.sibling=T,U=T,S=N}if(v===j.length)return n(y,S),qe&&Gr(y,v),L;if(S===null){for(;v<j.length;v++)S=p(y,j[v],R),S!==null&&(x=i(S,x,v),U===null?L=S:U.sibling=S,U=S);return qe&&Gr(y,v),L}for(S=s(y,S);v<j.length;v++)N=E(S,y,v,j[v],R),N!==null&&(t&&N.alternate!==null&&S.delete(N.key===null?v:N.key),x=i(N,x,v),U===null?L=N:U.sibling=N,U=N);return t&&S.forEach(function(P){return e(y,P)}),qe&&Gr(y,v),L}function w(y,x,j,R){var L=Ua(j);if(typeof L!="function")throw Error(q(150));if(j=L.call(j),j==null)throw Error(q(151));for(var U=L=null,S=x,v=x=0,N=null,T=j.next();S!==null&&!T.done;v++,T=j.next()){S.index>v?(N=S,S=null):N=S.sibling;var P=g(y,S,T.value,R);if(P===null){S===null&&(S=N);break}t&&S&&P.alternate===null&&e(y,S),x=i(P,x,v),U===null?L=P:U.sibling=P,U=P,S=N}if(T.done)return n(y,S),qe&&Gr(y,v),L;if(S===null){for(;!T.done;v++,T=j.next())T=p(y,T.value,R),T!==null&&(x=i(T,x,v),U===null?L=T:U.sibling=T,U=T);return qe&&Gr(y,v),L}for(S=s(y,S);!T.done;v++,T=j.next())T=E(S,y,v,T.value,R),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?v:T.key),x=i(T,x,v),U===null?L=T:U.sibling=T,U=T);return t&&S.forEach(function(A){return e(y,A)}),qe&&Gr(y,v),L}function k(y,x,j,R){if(typeof j=="object"&&j!==null&&j.type===Mi&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case jl:e:{for(var L=j.key,U=x;U!==null;){if(U.key===L){if(L=j.type,L===Mi){if(U.tag===7){n(y,U.sibling),x=r(U,j.props.children),x.return=y,y=x;break e}}else if(U.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Qs&&bg(L)===U.type){n(y,U.sibling),x=r(U,j.props),x.ref=Ja(y,U,j),x.return=y,y=x;break e}n(y,U);break}else e(y,U);U=U.sibling}j.type===Mi?(x=si(j.props.children,y.mode,R,j.key),x.return=y,y=x):(R=mc(j.type,j.key,j.props,null,y.mode,R),R.ref=Ja(y,x,j),R.return=y,y=R)}return o(y);case Li:e:{for(U=j.key;x!==null;){if(x.key===U)if(x.tag===4&&x.stateNode.containerInfo===j.containerInfo&&x.stateNode.implementation===j.implementation){n(y,x.sibling),x=r(x,j.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=Dh(j,y.mode,R),x.return=y,y=x}return o(y);case Qs:return U=j._init,k(y,x,U(j._payload),R)}if(Xa(j))return C(y,x,j,R);if(Ua(j))return w(y,x,j,R);Hl(y,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,x!==null&&x.tag===6?(n(y,x.sibling),x=r(x,j),x.return=y,y=x):(n(y,x),x=Rh(j,y.mode,R),x.return=y,y=x),o(y)):n(y,x)}return k}var oa=Qw(!0),Yw=Qw(!1),Vc=Pr(null),Fc=null,$i=null,zm=null;function $m(){zm=$i=Fc=null}function Jm(t){var e=Vc.current;Ue(Vc),t._currentValue=e}function Nd(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Xi(t,e){Fc=t,zm=$i=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ln=!0),t.firstContext=null)}function On(t){var e=t._currentValue;if(zm!==t)if(t={context:t,memoizedValue:e,next:null},$i===null){if(Fc===null)throw Error(q(308));$i=t,Fc.dependencies={lanes:0,firstContext:t}}else $i=$i.next=t;return e}var Xr=null;function Wm(t){Xr===null?Xr=[t]:Xr.push(t)}function Xw(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,Wm(e)):(n.next=r.next,r.next=n),e.interleaved=n,js(t,s)}function js(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ys=!1;function Gm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ks(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mr(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,_e&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,js(t,n)}return r=s.interleaved,r===null?(e.next=e,Wm(s)):(e.next=r.next,r.next=e),s.interleaved=e,js(t,n)}function oc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Rm(t,n)}}function Ig(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hc(t,e,n,s){var r=t.updateQueue;Ys=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,c=r.shared.pending;if(c!==null){r.shared.pending=null;var u=c,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=h:c.next=h,m.lastBaseUpdate=u))}if(i!==null){var p=r.baseState;o=0,m=h=u=null,c=i;do{var g=c.lane,E=c.eventTime;if((s&g)===g){m!==null&&(m=m.next={eventTime:E,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var C=t,w=c;switch(g=e,E=n,w.tag){case 1:if(C=w.payload,typeof C=="function"){p=C.call(E,p,g);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=w.payload,g=typeof C=="function"?C.call(E,p,g):C,g==null)break e;p=Ge({},p,g);break e;case 2:Ys=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=r.effects,g===null?r.effects=[c]:g.push(c))}else E={eventTime:E,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(h=m=E,u=p):m=m.next=E,o|=g;if(c=c.next,c===null){if(c=r.shared.pending,c===null)break;g=c,c=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);if(m===null&&(u=p),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);li|=o,t.lanes=o,t.memoizedState=p}}function Eg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(q(191,r));r.call(s)}}}var il={},rs=Pr(il),Mo=Pr(il),Vo=Pr(il);function Zr(t){if(t===il)throw Error(q(174));return t}function Km(t,e){switch(Me(Vo,e),Me(Mo,t),Me(rs,il),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ld(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ld(e,t)}Ue(rs),Me(rs,e)}function la(){Ue(rs),Ue(Mo),Ue(Vo)}function ex(t){Zr(Vo.current);var e=Zr(rs.current),n=ld(e,t.type);e!==n&&(Me(Mo,t),Me(rs,n))}function Qm(t){Mo.current===t&&(Ue(rs),Ue(Mo))}var $e=Pr(0);function Uc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Th=[];function Ym(){for(var t=0;t<Th.length;t++)Th[t]._workInProgressVersionPrimary=null;Th.length=0}var lc=Os.ReactCurrentDispatcher,Nh=Os.ReactCurrentBatchConfig,oi=0,We=null,ht=null,It=null,Bc=!1,po=!1,Fo=0,Kk=0;function Lt(){throw Error(q(321))}function Xm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wn(t[n],e[n]))return!1;return!0}function Zm(t,e,n,s,r,i){if(oi=i,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lc.current=t===null||t.memoizedState===null?Zk:eS,t=n(s,r),po){i=0;do{if(po=!1,Fo=0,25<=i)throw Error(q(301));i+=1,It=ht=null,e.updateQueue=null,lc.current=tS,t=n(s,r)}while(po)}if(lc.current=qc,e=ht!==null&&ht.next!==null,oi=0,It=ht=We=null,Bc=!1,e)throw Error(q(300));return t}function ep(){var t=Fo!==0;return Fo=0,t}function es(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?We.memoizedState=It=t:It=It.next=t,It}function Ln(){if(ht===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=It===null?We.memoizedState:It.next;if(e!==null)It=e,ht=t;else{if(t===null)throw Error(q(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},It===null?We.memoizedState=It=t:It=It.next=t}return It}function Ho(t,e){return typeof e=="function"?e(t):e}function jh(t){var e=Ln(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var s=ht,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var c=o=null,u=null,h=i;do{var m=h.lane;if((oi&m)===m)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),s=h.hasEagerState?h.eagerState:t(s,h.action);else{var p={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(c=u=p,o=s):u=u.next=p,We.lanes|=m,li|=m}h=h.next}while(h!==null&&h!==i);u===null?o=s:u.next=c,Wn(s,e.memoizedState)||(ln=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=u,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,We.lanes|=i,li|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ch(t){var e=Ln(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);Wn(i,e.memoizedState)||(ln=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function tx(){}function nx(t,e){var n=We,s=Ln(),r=e(),i=!Wn(s.memoizedState,r);if(i&&(s.memoizedState=r,ln=!0),s=s.queue,tp(ix.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||It!==null&&It.memoizedState.tag&1){if(n.flags|=2048,Uo(9,rx.bind(null,n,s,r,e),void 0,null),Et===null)throw Error(q(349));oi&30||sx(n,e,r)}return r}function sx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rx(t,e,n,s){e.value=n,e.getSnapshot=s,ax(e)&&ox(t)}function ix(t,e,n){return n(function(){ax(e)&&ox(t)})}function ax(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wn(t,n)}catch{return!0}}function ox(t){var e=js(t,1);e!==null&&$n(e,t,1,-1)}function _g(t){var e=es();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:t},e.queue=t,t=t.dispatch=Xk.bind(null,We,t),[e.memoizedState,t]}function Uo(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function lx(){return Ln().memoizedState}function cc(t,e,n,s){var r=es();We.flags|=t,r.memoizedState=Uo(1|e,n,void 0,s===void 0?null:s)}function _u(t,e,n,s){var r=Ln();s=s===void 0?null:s;var i=void 0;if(ht!==null){var o=ht.memoizedState;if(i=o.destroy,s!==null&&Xm(s,o.deps)){r.memoizedState=Uo(e,n,i,s);return}}We.flags|=t,r.memoizedState=Uo(1|e,n,i,s)}function kg(t,e){return cc(8390656,8,t,e)}function tp(t,e){return _u(2048,8,t,e)}function cx(t,e){return _u(4,2,t,e)}function ux(t,e){return _u(4,4,t,e)}function hx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dx(t,e,n){return n=n!=null?n.concat([t]):null,_u(4,4,hx.bind(null,e,t),n)}function np(){}function mx(t,e){var n=Ln();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Xm(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function px(t,e){var n=Ln();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Xm(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function fx(t,e,n){return oi&21?(Wn(n,e)||(n=xw(),We.lanes|=n,li|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ln=!0),t.memoizedState=n)}function Qk(t,e){var n=je;je=n!==0&&4>n?n:4,t(!0);var s=Nh.transition;Nh.transition={};try{t(!1),e()}finally{je=n,Nh.transition=s}}function gx(){return Ln().memoizedState}function Yk(t,e,n){var s=fr(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},yx(t))vx(e,n);else if(n=Xw(t,e,n,s),n!==null){var r=Kt();$n(n,t,s,r),wx(n,e,s)}}function Xk(t,e,n){var s=fr(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(yx(t))vx(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(r.hasEagerState=!0,r.eagerState=c,Wn(c,o)){var u=e.interleaved;u===null?(r.next=r,Wm(e)):(r.next=u.next,u.next=r),e.interleaved=r;return}}catch{}finally{}n=Xw(t,e,r,s),n!==null&&(r=Kt(),$n(n,t,s,r),wx(n,e,s))}}function yx(t){var e=t.alternate;return t===We||e!==null&&e===We}function vx(t,e){po=Bc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function wx(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Rm(t,n)}}var qc={readContext:On,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},Zk={readContext:On,useCallback:function(t,e){return es().memoizedState=[t,e===void 0?null:e],t},useContext:On,useEffect:kg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cc(4194308,4,hx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cc(4194308,4,t,e)},useInsertionEffect:function(t,e){return cc(4,2,t,e)},useMemo:function(t,e){var n=es();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=es();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=Yk.bind(null,We,t),[s.memoizedState,t]},useRef:function(t){var e=es();return t={current:t},e.memoizedState=t},useState:_g,useDebugValue:np,useDeferredValue:function(t){return es().memoizedState=t},useTransition:function(){var t=_g(!1),e=t[0];return t=Qk.bind(null,t[1]),es().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=We,r=es();if(qe){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Et===null)throw Error(q(349));oi&30||sx(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,kg(ix.bind(null,s,i,t),[t]),s.flags|=2048,Uo(9,rx.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=es(),e=Et.identifierPrefix;if(qe){var n=Is,s=bs;n=(s&~(1<<32-zn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Kk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eS={readContext:On,useCallback:mx,useContext:On,useEffect:tp,useImperativeHandle:dx,useInsertionEffect:cx,useLayoutEffect:ux,useMemo:px,useReducer:jh,useRef:lx,useState:function(){return jh(Ho)},useDebugValue:np,useDeferredValue:function(t){var e=Ln();return fx(e,ht.memoizedState,t)},useTransition:function(){var t=jh(Ho)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:tx,useSyncExternalStore:nx,useId:gx,unstable_isNewReconciler:!1},tS={readContext:On,useCallback:mx,useContext:On,useEffect:tp,useImperativeHandle:dx,useInsertionEffect:cx,useLayoutEffect:ux,useMemo:px,useReducer:Ch,useRef:lx,useState:function(){return Ch(Ho)},useDebugValue:np,useDeferredValue:function(t){var e=Ln();return ht===null?e.memoizedState=t:fx(e,ht.memoizedState,t)},useTransition:function(){var t=Ch(Ho)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:tx,useSyncExternalStore:nx,useId:gx,unstable_isNewReconciler:!1};function Hn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jd(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ku={isMounted:function(t){return(t=t._reactInternals)?vi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Kt(),r=fr(t),i=ks(s,r);i.payload=e,n!=null&&(i.callback=n),e=mr(t,i,r),e!==null&&($n(e,t,r,s),oc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Kt(),r=fr(t),i=ks(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=mr(t,i,r),e!==null&&($n(e,t,r,s),oc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),s=fr(t),r=ks(n,s);r.tag=2,e!=null&&(r.callback=e),e=mr(t,r,s),e!==null&&($n(e,t,s,n),oc(e,t,s))}};function Sg(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ro(n,s)||!Ro(r,i):!0}function xx(t,e,n){var s=!1,r=_r,i=e.contextType;return typeof i=="object"&&i!==null?i=On(i):(r=un(e)?ii:Bt.current,s=e.contextTypes,i=(s=s!=null)?ia(t,r):_r),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ku,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Tg(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&ku.enqueueReplaceState(e,e.state,null)}function Cd(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Gm(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=On(i):(i=un(e)?ii:Bt.current,r.context=ia(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(jd(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ku.enqueueReplaceState(r,r.state,null),Hc(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ca(t,e){try{var n="",s=e;do n+=j_(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function Ah(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ad(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nS=typeof WeakMap=="function"?WeakMap:Map;function bx(t,e,n){n=ks(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){$c||($c=!0,Ud=s),Ad(t,e)},n}function Ix(t,e,n){n=ks(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){Ad(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ad(t,e),typeof s!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ng(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new nS;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=gS.bind(null,t,e,n),e.then(t,t))}function jg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Cg(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ks(-1,1),e.tag=2,mr(n,e,1))),n.lanes|=1),t)}var sS=Os.ReactCurrentOwner,ln=!1;function Gt(t,e,n,s){e.child=t===null?Yw(e,null,n,s):oa(e,t.child,n,s)}function Ag(t,e,n,s,r){n=n.render;var i=e.ref;return Xi(e,r),s=Zm(t,e,n,s,i,r),n=ep(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Cs(t,e,r)):(qe&&n&&Um(e),e.flags|=1,Gt(t,e,s,r),e.child)}function Pg(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!up(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Ex(t,e,i,s,r)):(t=mc(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ro,n(o,s)&&t.ref===e.ref)return Cs(t,e,r)}return e.flags|=1,t=gr(i,s),t.ref=e.ref,t.return=e,e.child=t}function Ex(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Ro(i,s)&&t.ref===e.ref)if(ln=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,Cs(t,e,r)}return Pd(t,e,n,s,r)}function _x(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Wi,gn),gn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(Wi,gn),gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Me(Wi,gn),gn|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,Me(Wi,gn),gn|=s;return Gt(t,e,r,n),e.child}function kx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pd(t,e,n,s,r){var i=un(n)?ii:Bt.current;return i=ia(e,i),Xi(e,r),n=Zm(t,e,n,s,i,r),s=ep(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Cs(t,e,r)):(qe&&s&&Um(e),e.flags|=1,Gt(t,e,n,r),e.child)}function Rg(t,e,n,s,r){if(un(n)){var i=!0;Oc(e)}else i=!1;if(Xi(e,r),e.stateNode===null)uc(t,e),xx(e,n,s),Cd(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=On(h):(h=un(n)?ii:Bt.current,h=ia(e,h));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==s||u!==h)&&Tg(e,o,s,h),Ys=!1;var g=e.memoizedState;o.state=g,Hc(e,s,o,r),u=e.memoizedState,c!==s||g!==u||cn.current||Ys?(typeof m=="function"&&(jd(e,n,m,s),u=e.memoizedState),(c=Ys||Sg(e,n,c,s,g,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=u),o.props=s,o.state=u,o.context=h,s=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,Zw(t,e),c=e.memoizedProps,h=e.type===e.elementType?c:Hn(e.type,c),o.props=h,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=On(u):(u=un(n)?ii:Bt.current,u=ia(e,u));var E=n.getDerivedStateFromProps;(m=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||g!==u)&&Tg(e,o,s,u),Ys=!1,g=e.memoizedState,o.state=g,Hc(e,s,o,r);var C=e.memoizedState;c!==p||g!==C||cn.current||Ys?(typeof E=="function"&&(jd(e,n,E,s),C=e.memoizedState),(h=Ys||Sg(e,n,h,s,g,C,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,C,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,C,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=C),o.props=s,o.state=C,o.context=u,s=h):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),s=!1)}return Rd(t,e,n,s,i,r)}function Rd(t,e,n,s,r,i){kx(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&vg(e,n,!1),Cs(t,e,i);s=e.stateNode,sS.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=oa(e,t.child,null,i),e.child=oa(e,null,c,i)):Gt(t,e,c,i),e.memoizedState=s.state,r&&vg(e,n,!0),e.child}function Sx(t){var e=t.stateNode;e.pendingContext?yg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yg(t,e.context,!1),Km(t,e.containerInfo)}function Dg(t,e,n,s,r){return aa(),qm(r),e.flags|=256,Gt(t,e,n,s),e.child}var Dd={dehydrated:null,treeContext:null,retryLane:0};function Od(t){return{baseLanes:t,cachePool:null,transitions:null}}function Tx(t,e,n){var s=e.pendingProps,r=$e.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(r&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Me($e,r&1),t===null)return Td(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Nu(o,s,0,null),t=si(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Od(n),e.memoizedState=Dd,t):sp(e,o));if(r=t.memoizedState,r!==null&&(c=r.dehydrated,c!==null))return rS(t,e,o,s,c,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,c=r.sibling;var u={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=u,e.deletions=null):(s=gr(r,u),s.subtreeFlags=r.subtreeFlags&14680064),c!==null?i=gr(c,i):(i=si(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?Od(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Dd,s}return i=t.child,t=i.sibling,s=gr(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function sp(t,e){return e=Nu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ul(t,e,n,s){return s!==null&&qm(s),oa(e,t.child,null,n),t=sp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rS(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=Ah(Error(q(422))),Ul(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=Nu({mode:"visible",children:s.children},r,0,null),i=si(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&oa(e,t.child,null,o),e.child.memoizedState=Od(o),e.memoizedState=Dd,i);if(!(e.mode&1))return Ul(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var c=s.dgst;return s=c,i=Error(q(419)),s=Ah(i,s,void 0),Ul(t,e,o,s)}if(c=(o&t.childLanes)!==0,ln||c){if(s=Et,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,js(t,r),$n(s,t,r,-1))}return cp(),s=Ah(Error(q(421))),Ul(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=yS.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,vn=dr(r.nextSibling),xn=e,qe=!0,Bn=null,t!==null&&(Cn[An++]=bs,Cn[An++]=Is,Cn[An++]=ai,bs=t.id,Is=t.overflow,ai=e),e=sp(e,s.children),e.flags|=4096,e)}function Og(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Nd(t.return,e,n)}function Ph(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Nx(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Gt(t,e,s.children,n),s=$e.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Og(t,n,e);else if(t.tag===19)Og(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Me($e,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Uc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Ph(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Uc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Ph(e,!0,n,null,i);break;case"together":Ph(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),li|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function iS(t,e,n){switch(e.tag){case 3:Sx(e),aa();break;case 5:ex(e);break;case 1:un(e.type)&&Oc(e);break;case 4:Km(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;Me(Vc,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Me($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?Tx(t,e,n):(Me($e,$e.current&1),t=Cs(t,e,n),t!==null?t.sibling:null);Me($e,$e.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return Nx(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Me($e,$e.current),s)break;return null;case 22:case 23:return e.lanes=0,_x(t,e,n)}return Cs(t,e,n)}var jx,Ld,Cx,Ax;jx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ld=function(){};Cx=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Zr(rs.current);var i=null;switch(n){case"input":r=rd(t,r),s=rd(t,s),i=[];break;case"select":r=Ge({},r,{value:void 0}),s=Ge({},s,{value:void 0}),i=[];break;case"textarea":r=od(t,r),s=od(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Rc)}cd(n,s);var o;n=null;for(h in r)if(!s.hasOwnProperty(h)&&r.hasOwnProperty(h)&&r[h]!=null)if(h==="style"){var c=r[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(So.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in s){var u=s[h];if(c=r!=null?r[h]:void 0,s.hasOwnProperty(h)&&u!==c&&(u!=null||c!=null))if(h==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(So.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Fe("scroll",t),i||c===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};Ax=function(t,e,n,s){n!==s&&(e.flags|=4)};function Wa(t,e){if(!qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function aS(t,e,n){var s=e.pendingProps;switch(Bm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return un(e.type)&&Dc(),Mt(e),null;case 3:return s=e.stateNode,la(),Ue(cn),Ue(Bt),Ym(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Fl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bn!==null&&(zd(Bn),Bn=null))),Ld(t,e),Mt(e),null;case 5:Qm(e);var r=Zr(Vo.current);if(n=e.type,t!==null&&e.stateNode!=null)Cx(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(q(166));return Mt(e),null}if(t=Zr(rs.current),Fl(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[ns]=e,s[Lo]=i,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",s),Fe("close",s);break;case"iframe":case"object":case"embed":Fe("load",s);break;case"video":case"audio":for(r=0;r<eo.length;r++)Fe(eo[r],s);break;case"source":Fe("error",s);break;case"img":case"image":case"link":Fe("error",s),Fe("load",s);break;case"details":Fe("toggle",s);break;case"input":zf(s,i),Fe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Fe("invalid",s);break;case"textarea":Jf(s,i),Fe("invalid",s)}cd(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?s.textContent!==c&&(i.suppressHydrationWarning!==!0&&Vl(s.textContent,c,t),r=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Vl(s.textContent,c,t),r=["children",""+c]):So.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Fe("scroll",s)}switch(n){case"input":Cl(s),$f(s,i,!0);break;case"textarea":Cl(s),Wf(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Rc)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[ns]=e,t[Lo]=s,jx(t,e,!1,!1),e.stateNode=t;e:{switch(o=ud(n,s),n){case"dialog":Fe("cancel",t),Fe("close",t),r=s;break;case"iframe":case"object":case"embed":Fe("load",t),r=s;break;case"video":case"audio":for(r=0;r<eo.length;r++)Fe(eo[r],t);r=s;break;case"source":Fe("error",t),r=s;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),r=s;break;case"details":Fe("toggle",t),r=s;break;case"input":zf(t,s),r=rd(t,s),Fe("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Ge({},s,{value:void 0}),Fe("invalid",t);break;case"textarea":Jf(t,s),r=od(t,s),Fe("invalid",t);break;default:r=s}cd(n,r),c=r;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?lw(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&aw(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&To(t,u):typeof u=="number"&&To(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(So.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Fe("scroll",t):u!=null&&Tm(t,i,u,o))}switch(n){case"input":Cl(t),$f(t,s,!1);break;case"textarea":Cl(t),Wf(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Er(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?Gi(t,!!s.multiple,i,!1):s.defaultValue!=null&&Gi(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Rc)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)Ax(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(q(166));if(n=Zr(Vo.current),Zr(rs.current),Fl(e)){if(s=e.stateNode,n=e.memoizedProps,s[ns]=e,(i=s.nodeValue!==n)&&(t=xn,t!==null))switch(t.tag){case 3:Vl(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vl(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[ns]=e,e.stateNode=s}return Mt(e),null;case 13:if(Ue($e),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&vn!==null&&e.mode&1&&!(e.flags&128))Kw(),aa(),e.flags|=98560,i=!1;else if(i=Fl(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[ns]=e}else aa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),i=!1}else Bn!==null&&(zd(Bn),Bn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?pt===0&&(pt=3):cp())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return la(),Ld(t,e),t===null&&Do(e.stateNode.containerInfo),Mt(e),null;case 10:return Jm(e.type._context),Mt(e),null;case 17:return un(e.type)&&Dc(),Mt(e),null;case 19:if(Ue($e),i=e.memoizedState,i===null)return Mt(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Wa(i,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Uc(t),o!==null){for(e.flags|=128,Wa(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Me($e,$e.current&1|2),e.child}t=t.sibling}i.tail!==null&&tt()>ua&&(e.flags|=128,s=!0,Wa(i,!1),e.lanes=4194304)}else{if(!s)if(t=Uc(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!qe)return Mt(e),null}else 2*tt()-i.renderingStartTime>ua&&n!==1073741824&&(e.flags|=128,s=!0,Wa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=tt(),e.sibling=null,n=$e.current,Me($e,s?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return lp(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?gn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function oS(t,e){switch(Bm(e),e.tag){case 1:return un(e.type)&&Dc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return la(),Ue(cn),Ue(Bt),Ym(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qm(e),null;case 13:if(Ue($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));aa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue($e),null;case 4:return la(),null;case 10:return Jm(e.type._context),null;case 22:case 23:return lp(),null;case 24:return null;default:return null}}var Bl=!1,Ht=!1,lS=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Ji(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ye(t,e,s)}else n.current=null}function Md(t,e,n){try{n()}catch(s){Ye(t,e,s)}}var Lg=!1;function cS(t,e){if(xd=Cc,t=Lw(),Hm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,h=0,m=0,p=t,g=null;t:for(;;){for(var E;p!==n||r!==0&&p.nodeType!==3||(c=o+r),p!==i||s!==0&&p.nodeType!==3||(u=o+s),p.nodeType===3&&(o+=p.nodeValue.length),(E=p.firstChild)!==null;)g=p,p=E;for(;;){if(p===t)break t;if(g===n&&++h===r&&(c=o),g===i&&++m===s&&(u=o),(E=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=E}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(bd={focusedElem:t,selectionRange:n},Cc=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var w=C.memoizedProps,k=C.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?w:Hn(e.type,w),k);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(R){Ye(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return C=Lg,Lg=!1,C}function fo(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Md(e,n,i)}r=r.next}while(r!==s)}}function Su(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Vd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Px(t){var e=t.alternate;e!==null&&(t.alternate=null,Px(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ns],delete e[Lo],delete e[_d],delete e[$k],delete e[Jk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Rx(t){return t.tag===5||t.tag===3||t.tag===4}function Mg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fd(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rc));else if(s!==4&&(t=t.child,t!==null))for(Fd(t,e,n),t=t.sibling;t!==null;)Fd(t,e,n),t=t.sibling}function Hd(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Hd(t,e,n),t=t.sibling;t!==null;)Hd(t,e,n),t=t.sibling}var St=null,Un=!1;function Gs(t,e,n){for(n=n.child;n!==null;)Dx(t,e,n),n=n.sibling}function Dx(t,e,n){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(vu,n)}catch{}switch(n.tag){case 5:Ht||Ji(n,e);case 6:var s=St,r=Un;St=null,Gs(t,e,n),St=s,Un=r,St!==null&&(Un?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Un?(t=St,n=n.stateNode,t.nodeType===8?kh(t.parentNode,n):t.nodeType===1&&kh(t,n),Ao(t)):kh(St,n.stateNode));break;case 4:s=St,r=Un,St=n.stateNode.containerInfo,Un=!0,Gs(t,e,n),St=s,Un=r;break;case 0:case 11:case 14:case 15:if(!Ht&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Md(n,e,o),r=r.next}while(r!==s)}Gs(t,e,n);break;case 1:if(!Ht&&(Ji(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(c){Ye(n,e,c)}Gs(t,e,n);break;case 21:Gs(t,e,n);break;case 22:n.mode&1?(Ht=(s=Ht)||n.memoizedState!==null,Gs(t,e,n),Ht=s):Gs(t,e,n);break;default:Gs(t,e,n)}}function Vg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lS),e.forEach(function(s){var r=vS.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Fn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:St=c.stateNode,Un=!1;break e;case 3:St=c.stateNode.containerInfo,Un=!0;break e;case 4:St=c.stateNode.containerInfo,Un=!0;break e}c=c.return}if(St===null)throw Error(q(160));Dx(i,o,r),St=null,Un=!1;var u=r.alternate;u!==null&&(u.return=null),r.return=null}catch(h){Ye(r,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ox(e,t),e=e.sibling}function Ox(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fn(e,t),Xn(t),s&4){try{fo(3,t,t.return),Su(3,t)}catch(w){Ye(t,t.return,w)}try{fo(5,t,t.return)}catch(w){Ye(t,t.return,w)}}break;case 1:Fn(e,t),Xn(t),s&512&&n!==null&&Ji(n,n.return);break;case 5:if(Fn(e,t),Xn(t),s&512&&n!==null&&Ji(n,n.return),t.flags&32){var r=t.stateNode;try{To(r,"")}catch(w){Ye(t,t.return,w)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&sw(r,i),ud(c,o);var h=ud(c,i);for(o=0;o<u.length;o+=2){var m=u[o],p=u[o+1];m==="style"?lw(r,p):m==="dangerouslySetInnerHTML"?aw(r,p):m==="children"?To(r,p):Tm(r,m,p,h)}switch(c){case"input":id(r,i);break;case"textarea":rw(r,i);break;case"select":var g=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?Gi(r,!!i.multiple,E,!1):g!==!!i.multiple&&(i.defaultValue!=null?Gi(r,!!i.multiple,i.defaultValue,!0):Gi(r,!!i.multiple,i.multiple?[]:"",!1))}r[Lo]=i}catch(w){Ye(t,t.return,w)}}break;case 6:if(Fn(e,t),Xn(t),s&4){if(t.stateNode===null)throw Error(q(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(w){Ye(t,t.return,w)}}break;case 3:if(Fn(e,t),Xn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ao(e.containerInfo)}catch(w){Ye(t,t.return,w)}break;case 4:Fn(e,t),Xn(t);break;case 13:Fn(e,t),Xn(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(ap=tt())),s&4&&Vg(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Ht=(h=Ht)||m,Fn(e,t),Ht=h):Fn(e,t),Xn(t),s&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(Y=t,m=t.child;m!==null;){for(p=Y=m;Y!==null;){switch(g=Y,E=g.child,g.tag){case 0:case 11:case 14:case 15:fo(4,g,g.return);break;case 1:Ji(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){s=g,n=g.return;try{e=s,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(w){Ye(s,n,w)}}break;case 5:Ji(g,g.return);break;case 22:if(g.memoizedState!==null){Hg(p);continue}}E!==null?(E.return=g,Y=E):Hg(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{r=p.stateNode,h?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=ow("display",o))}catch(w){Ye(t,t.return,w)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(w){Ye(t,t.return,w)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Fn(e,t),Xn(t),s&4&&Vg(t);break;case 21:break;default:Fn(e,t),Xn(t)}}function Xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Rx(n)){var s=n;break e}n=n.return}throw Error(q(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(To(r,""),s.flags&=-33);var i=Mg(t);Hd(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,c=Mg(t);Fd(t,c,o);break;default:throw Error(q(161))}}catch(u){Ye(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uS(t,e,n){Y=t,Lx(t)}function Lx(t,e,n){for(var s=(t.mode&1)!==0;Y!==null;){var r=Y,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||Bl;if(!o){var c=r.alternate,u=c!==null&&c.memoizedState!==null||Ht;c=Bl;var h=Ht;if(Bl=o,(Ht=u)&&!h)for(Y=r;Y!==null;)o=Y,u=o.child,o.tag===22&&o.memoizedState!==null?Ug(r):u!==null?(u.return=o,Y=u):Ug(r);for(;i!==null;)Y=i,Lx(i),i=i.sibling;Y=r,Bl=c,Ht=h}Fg(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,Y=i):Fg(t)}}function Fg(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ht||Su(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Ht)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Hn(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Eg(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Eg(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&Ao(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Ht||e.flags&512&&Vd(e)}catch(g){Ye(e,e.return,g)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Hg(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Ug(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Su(4,e)}catch(u){Ye(e,n,u)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(u){Ye(e,r,u)}}var i=e.return;try{Vd(e)}catch(u){Ye(e,i,u)}break;case 5:var o=e.return;try{Vd(e)}catch(u){Ye(e,o,u)}}}catch(u){Ye(e,e.return,u)}if(e===t){Y=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Y=c;break}Y=e.return}}var hS=Math.ceil,zc=Os.ReactCurrentDispatcher,rp=Os.ReactCurrentOwner,Dn=Os.ReactCurrentBatchConfig,_e=0,Et=null,rt=null,jt=0,gn=0,Wi=Pr(0),pt=0,Bo=null,li=0,Tu=0,ip=0,go=null,an=null,ap=0,ua=1/0,vs=null,$c=!1,Ud=null,pr=null,ql=!1,ir=null,Jc=0,yo=0,Bd=null,hc=-1,dc=0;function Kt(){return _e&6?tt():hc!==-1?hc:hc=tt()}function fr(t){return t.mode&1?_e&2&&jt!==0?jt&-jt:Gk.transition!==null?(dc===0&&(dc=xw()),dc):(t=je,t!==0||(t=window.event,t=t===void 0?16:Tw(t.type)),t):1}function $n(t,e,n,s){if(50<yo)throw yo=0,Bd=null,Error(q(185));nl(t,n,s),(!(_e&2)||t!==Et)&&(t===Et&&(!(_e&2)&&(Tu|=n),pt===4&&Zs(t,jt)),hn(t,s),n===1&&_e===0&&!(e.mode&1)&&(ua=tt()+500,Eu&&Rr()))}function hn(t,e){var n=t.callbackNode;G_(t,e);var s=jc(t,t===Et?jt:0);if(s===0)n!==null&&Qf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&Qf(n),e===1)t.tag===0?Wk(Bg.bind(null,t)):Jw(Bg.bind(null,t)),qk(function(){!(_e&6)&&Rr()}),n=null;else{switch(bw(s)){case 1:n=Pm;break;case 4:n=vw;break;case 16:n=Nc;break;case 536870912:n=ww;break;default:n=Nc}n=zx(n,Mx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Mx(t,e){if(hc=-1,dc=0,_e&6)throw Error(q(327));var n=t.callbackNode;if(Zi()&&t.callbackNode!==n)return null;var s=jc(t,t===Et?jt:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Wc(t,s);else{e=s;var r=_e;_e|=2;var i=Fx();(Et!==t||jt!==e)&&(vs=null,ua=tt()+500,ni(t,e));do try{pS();break}catch(c){Vx(t,c)}while(!0);$m(),zc.current=i,_e=r,rt!==null?e=0:(Et=null,jt=0,e=pt)}if(e!==0){if(e===2&&(r=fd(t),r!==0&&(s=r,e=qd(t,r))),e===1)throw n=Bo,ni(t,0),Zs(t,s),hn(t,tt()),n;if(e===6)Zs(t,s);else{if(r=t.current.alternate,!(s&30)&&!dS(r)&&(e=Wc(t,s),e===2&&(i=fd(t),i!==0&&(s=i,e=qd(t,i))),e===1))throw n=Bo,ni(t,0),Zs(t,s),hn(t,tt()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(q(345));case 2:Kr(t,an,vs);break;case 3:if(Zs(t,s),(s&130023424)===s&&(e=ap+500-tt(),10<e)){if(jc(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){Kt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Ed(Kr.bind(null,t,an,vs),e);break}Kr(t,an,vs);break;case 4:if(Zs(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-zn(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=tt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*hS(s/1960))-s,10<s){t.timeoutHandle=Ed(Kr.bind(null,t,an,vs),s);break}Kr(t,an,vs);break;case 5:Kr(t,an,vs);break;default:throw Error(q(329))}}}return hn(t,tt()),t.callbackNode===n?Mx.bind(null,t):null}function qd(t,e){var n=go;return t.current.memoizedState.isDehydrated&&(ni(t,e).flags|=256),t=Wc(t,e),t!==2&&(e=an,an=n,e!==null&&zd(e)),t}function zd(t){an===null?an=t:an.push.apply(an,t)}function dS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Wn(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zs(t,e){for(e&=~ip,e&=~Tu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zn(e),s=1<<n;t[n]=-1,e&=~s}}function Bg(t){if(_e&6)throw Error(q(327));Zi();var e=jc(t,0);if(!(e&1))return hn(t,tt()),null;var n=Wc(t,e);if(t.tag!==0&&n===2){var s=fd(t);s!==0&&(e=s,n=qd(t,s))}if(n===1)throw n=Bo,ni(t,0),Zs(t,e),hn(t,tt()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Kr(t,an,vs),hn(t,tt()),null}function op(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(ua=tt()+500,Eu&&Rr())}}function ci(t){ir!==null&&ir.tag===0&&!(_e&6)&&Zi();var e=_e;_e|=1;var n=Dn.transition,s=je;try{if(Dn.transition=null,je=1,t)return t()}finally{je=s,Dn.transition=n,_e=e,!(_e&6)&&Rr()}}function lp(){gn=Wi.current,Ue(Wi)}function ni(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Bk(n)),rt!==null)for(n=rt.return;n!==null;){var s=n;switch(Bm(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Dc();break;case 3:la(),Ue(cn),Ue(Bt),Ym();break;case 5:Qm(s);break;case 4:la();break;case 13:Ue($e);break;case 19:Ue($e);break;case 10:Jm(s.type._context);break;case 22:case 23:lp()}n=n.return}if(Et=t,rt=t=gr(t.current,null),jt=gn=e,pt=0,Bo=null,ip=Tu=li=0,an=go=null,Xr!==null){for(e=0;e<Xr.length;e++)if(n=Xr[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}Xr=null}return t}function Vx(t,e){do{var n=rt;try{if($m(),lc.current=qc,Bc){for(var s=We.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Bc=!1}if(oi=0,It=ht=We=null,po=!1,Fo=0,rp.current=null,n===null||n.return===null){pt=1,Bo=e,rt=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=jt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,m=c,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var E=jg(o);if(E!==null){E.flags&=-257,Cg(E,o,c,i,e),E.mode&1&&Ng(i,h,e),e=E,u=h;var C=e.updateQueue;if(C===null){var w=new Set;w.add(u),e.updateQueue=w}else C.add(u);break e}else{if(!(e&1)){Ng(i,h,e),cp();break e}u=Error(q(426))}}else if(qe&&c.mode&1){var k=jg(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Cg(k,o,c,i,e),qm(ca(u,c));break e}}i=u=ca(u,c),pt!==4&&(pt=2),go===null?go=[i]:go.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=bx(i,u,e);Ig(i,y);break e;case 1:c=u;var x=i.type,j=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(pr===null||!pr.has(j)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=Ix(i,c,e);Ig(i,R);break e}}i=i.return}while(i!==null)}Ux(n)}catch(L){e=L,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(!0)}function Fx(){var t=zc.current;return zc.current=qc,t===null?qc:t}function cp(){(pt===0||pt===3||pt===2)&&(pt=4),Et===null||!(li&268435455)&&!(Tu&268435455)||Zs(Et,jt)}function Wc(t,e){var n=_e;_e|=2;var s=Fx();(Et!==t||jt!==e)&&(vs=null,ni(t,e));do try{mS();break}catch(r){Vx(t,r)}while(!0);if($m(),_e=n,zc.current=s,rt!==null)throw Error(q(261));return Et=null,jt=0,pt}function mS(){for(;rt!==null;)Hx(rt)}function pS(){for(;rt!==null&&!F_();)Hx(rt)}function Hx(t){var e=qx(t.alternate,t,gn);t.memoizedProps=t.pendingProps,e===null?Ux(t):rt=e,rp.current=null}function Ux(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oS(n,e),n!==null){n.flags&=32767,rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,rt=null;return}}else if(n=aS(n,e,gn),n!==null){rt=n;return}if(e=e.sibling,e!==null){rt=e;return}rt=e=t}while(e!==null);pt===0&&(pt=5)}function Kr(t,e,n){var s=je,r=Dn.transition;try{Dn.transition=null,je=1,fS(t,e,n,s)}finally{Dn.transition=r,je=s}return null}function fS(t,e,n,s){do Zi();while(ir!==null);if(_e&6)throw Error(q(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(K_(t,i),t===Et&&(rt=Et=null,jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ql||(ql=!0,zx(Nc,function(){return Zi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Dn.transition,Dn.transition=null;var o=je;je=1;var c=_e;_e|=4,rp.current=null,cS(t,n),Ox(n,t),Ok(bd),Cc=!!xd,bd=xd=null,t.current=n,uS(n),H_(),_e=c,je=o,Dn.transition=i}else t.current=n;if(ql&&(ql=!1,ir=t,Jc=r),i=t.pendingLanes,i===0&&(pr=null),q_(n.stateNode),hn(t,tt()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if($c)throw $c=!1,t=Ud,Ud=null,t;return Jc&1&&t.tag!==0&&Zi(),i=t.pendingLanes,i&1?t===Bd?yo++:(yo=0,Bd=t):yo=0,Rr(),null}function Zi(){if(ir!==null){var t=bw(Jc),e=Dn.transition,n=je;try{if(Dn.transition=null,je=16>t?16:t,ir===null)var s=!1;else{if(t=ir,ir=null,Jc=0,_e&6)throw Error(q(331));var r=_e;for(_e|=4,Y=t.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var h=c[u];for(Y=h;Y!==null;){var m=Y;switch(m.tag){case 0:case 11:case 15:fo(8,m,i)}var p=m.child;if(p!==null)p.return=m,Y=p;else for(;Y!==null;){m=Y;var g=m.sibling,E=m.return;if(Px(m),m===h){Y=null;break}if(g!==null){g.return=E,Y=g;break}Y=E}}}var C=i.alternate;if(C!==null){var w=C.child;if(w!==null){C.child=null;do{var k=w.sibling;w.sibling=null,w=k}while(w!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fo(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Y=y;break e}Y=i.return}}var x=t.current;for(Y=x;Y!==null;){o=Y;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,Y=j;else e:for(o=x;Y!==null;){if(c=Y,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Su(9,c)}}catch(L){Ye(c,c.return,L)}if(c===o){Y=null;break e}var R=c.sibling;if(R!==null){R.return=c.return,Y=R;break e}Y=c.return}}if(_e=r,Rr(),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(vu,t)}catch{}s=!0}return s}finally{je=n,Dn.transition=e}}return!1}function qg(t,e,n){e=ca(n,e),e=bx(t,e,1),t=mr(t,e,1),e=Kt(),t!==null&&(nl(t,1,e),hn(t,e))}function Ye(t,e,n){if(t.tag===3)qg(t,t,n);else for(;e!==null;){if(e.tag===3){qg(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(pr===null||!pr.has(s))){t=ca(n,t),t=Ix(e,t,1),e=mr(e,t,1),t=Kt(),e!==null&&(nl(e,1,t),hn(e,t));break}}e=e.return}}function gS(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,Et===t&&(jt&n)===n&&(pt===4||pt===3&&(jt&130023424)===jt&&500>tt()-ap?ni(t,0):ip|=n),hn(t,e)}function Bx(t,e){e===0&&(t.mode&1?(e=Rl,Rl<<=1,!(Rl&130023424)&&(Rl=4194304)):e=1);var n=Kt();t=js(t,e),t!==null&&(nl(t,e,n),hn(t,n))}function yS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Bx(t,n)}function vS(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(q(314))}s!==null&&s.delete(e),Bx(t,n)}var qx;qx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||cn.current)ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ln=!1,iS(t,e,n);ln=!!(t.flags&131072)}else ln=!1,qe&&e.flags&1048576&&Ww(e,Mc,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;uc(t,e),t=e.pendingProps;var r=ia(e,Bt.current);Xi(e,n),r=Zm(null,e,s,t,r,n);var i=ep();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,un(s)?(i=!0,Oc(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Gm(e),r.updater=ku,e.stateNode=r,r._reactInternals=e,Cd(e,s,t,n),e=Rd(null,e,s,!0,i,n)):(e.tag=0,qe&&i&&Um(e),Gt(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(uc(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=xS(s),t=Hn(s,t),r){case 0:e=Pd(null,e,s,t,n);break e;case 1:e=Rg(null,e,s,t,n);break e;case 11:e=Ag(null,e,s,t,n);break e;case 14:e=Pg(null,e,s,Hn(s.type,t),n);break e}throw Error(q(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Hn(s,r),Pd(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Hn(s,r),Rg(t,e,s,r,n);case 3:e:{if(Sx(e),t===null)throw Error(q(387));s=e.pendingProps,i=e.memoizedState,r=i.element,Zw(t,e),Hc(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=ca(Error(q(423)),e),e=Dg(t,e,s,n,r);break e}else if(s!==r){r=ca(Error(q(424)),e),e=Dg(t,e,s,n,r);break e}else for(vn=dr(e.stateNode.containerInfo.firstChild),xn=e,qe=!0,Bn=null,n=Yw(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(aa(),s===r){e=Cs(t,e,n);break e}Gt(t,e,s,n)}e=e.child}return e;case 5:return ex(e),t===null&&Td(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,Id(s,r)?o=null:i!==null&&Id(s,i)&&(e.flags|=32),kx(t,e),Gt(t,e,o,n),e.child;case 6:return t===null&&Td(e),null;case 13:return Tx(t,e,n);case 4:return Km(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=oa(e,null,s,n):Gt(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Hn(s,r),Ag(t,e,s,r,n);case 7:return Gt(t,e,e.pendingProps,n),e.child;case 8:return Gt(t,e,e.pendingProps.children,n),e.child;case 12:return Gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,Me(Vc,s._currentValue),s._currentValue=o,i!==null)if(Wn(i.value,o)){if(i.children===r.children&&!cn.current){e=Cs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===s){if(i.tag===1){u=ks(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?u.next=u:(u.next=m.next,m.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Nd(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(q(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Nd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Gt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Xi(e,n),r=On(r),s=s(r),e.flags|=1,Gt(t,e,s,n),e.child;case 14:return s=e.type,r=Hn(s,e.pendingProps),r=Hn(s.type,r),Pg(t,e,s,r,n);case 15:return Ex(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Hn(s,r),uc(t,e),e.tag=1,un(s)?(t=!0,Oc(e)):t=!1,Xi(e,n),xx(e,s,r),Cd(e,s,r,n),Rd(null,e,s,!0,t,n);case 19:return Nx(t,e,n);case 22:return _x(t,e,n)}throw Error(q(156,e.tag))};function zx(t,e){return yw(t,e)}function wS(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,e,n,s){return new wS(t,e,n,s)}function up(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xS(t){if(typeof t=="function")return up(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jm)return 11;if(t===Cm)return 14}return 2}function gr(t,e){var n=t.alternate;return n===null?(n=Rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mc(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")up(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Mi:return si(n.children,r,i,e);case Nm:o=8,r|=8;break;case ed:return t=Rn(12,n,e,r|2),t.elementType=ed,t.lanes=i,t;case td:return t=Rn(13,n,e,r),t.elementType=td,t.lanes=i,t;case nd:return t=Rn(19,n,e,r),t.elementType=nd,t.lanes=i,t;case ew:return Nu(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Xv:o=10;break e;case Zv:o=9;break e;case jm:o=11;break e;case Cm:o=14;break e;case Qs:o=16,s=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Rn(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function si(t,e,n,s){return t=Rn(7,t,s,e),t.lanes=n,t}function Nu(t,e,n,s){return t=Rn(22,t,s,e),t.elementType=ew,t.lanes=n,t.stateNode={isHidden:!1},t}function Rh(t,e,n){return t=Rn(6,t,null,e),t.lanes=n,t}function Dh(t,e,n){return e=Rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bS(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ph(0),this.expirationTimes=ph(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ph(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function hp(t,e,n,s,r,i,o,c,u){return t=new bS(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Rn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gm(i),t}function IS(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Li,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function $x(t){if(!t)return _r;t=t._reactInternals;e:{if(vi(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(un(n))return $w(t,n,e)}return e}function Jx(t,e,n,s,r,i,o,c,u){return t=hp(n,s,!0,t,r,i,o,c,u),t.context=$x(null),n=t.current,s=Kt(),r=fr(n),i=ks(s,r),i.callback=e??null,mr(n,i,r),t.current.lanes=r,nl(t,r,s),hn(t,s),t}function ju(t,e,n,s){var r=e.current,i=Kt(),o=fr(r);return n=$x(n),e.context===null?e.context=n:e.pendingContext=n,e=ks(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=mr(r,e,o),t!==null&&($n(t,r,o,i),oc(t,r,o)),o}function Gc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dp(t,e){zg(t,e),(t=t.alternate)&&zg(t,e)}function ES(){return null}var Wx=typeof reportError=="function"?reportError:function(t){console.error(t)};function mp(t){this._internalRoot=t}Cu.prototype.render=mp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));ju(t,e,null,null)};Cu.prototype.unmount=mp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ci(function(){ju(null,t,null,null)}),e[Ns]=null}};function Cu(t){this._internalRoot=t}Cu.prototype.unstable_scheduleHydration=function(t){if(t){var e=_w();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xs.length&&e!==0&&e<Xs[n].priority;n++);Xs.splice(n,0,t),n===0&&Sw(t)}};function pp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Au(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $g(){}function _S(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var h=Gc(o);i.call(h)}}var o=Jx(e,s,t,0,null,!1,!1,"",$g);return t._reactRootContainer=o,t[Ns]=o.current,Do(t.nodeType===8?t.parentNode:t),ci(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var c=s;s=function(){var h=Gc(u);c.call(h)}}var u=hp(t,0,!1,null,null,!1,!1,"",$g);return t._reactRootContainer=u,t[Ns]=u.current,Do(t.nodeType===8?t.parentNode:t),ci(function(){ju(e,u,n,s)}),u}function Pu(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var c=r;r=function(){var u=Gc(o);c.call(u)}}ju(e,o,t,r)}else o=_S(n,e,t,r,s);return Gc(o)}Iw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Za(e.pendingLanes);n!==0&&(Rm(e,n|1),hn(e,tt()),!(_e&6)&&(ua=tt()+500,Rr()))}break;case 13:ci(function(){var s=js(t,1);if(s!==null){var r=Kt();$n(s,t,1,r)}}),dp(t,1)}};Dm=function(t){if(t.tag===13){var e=js(t,134217728);if(e!==null){var n=Kt();$n(e,t,134217728,n)}dp(t,134217728)}};Ew=function(t){if(t.tag===13){var e=fr(t),n=js(t,e);if(n!==null){var s=Kt();$n(n,t,e,s)}dp(t,e)}};_w=function(){return je};kw=function(t,e){var n=je;try{return je=t,e()}finally{je=n}};dd=function(t,e,n){switch(e){case"input":if(id(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=Iu(s);if(!r)throw Error(q(90));nw(s),id(s,r)}}}break;case"textarea":rw(t,n);break;case"select":e=n.value,e!=null&&Gi(t,!!n.multiple,e,!1)}};hw=op;dw=ci;var kS={usingClientEntryPoint:!1,Events:[rl,Ui,Iu,cw,uw,op]},Ga={findFiberByHostInstance:Yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SS={bundleType:Ga.bundleType,version:Ga.version,rendererPackageName:Ga.rendererPackageName,rendererConfig:Ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Os.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fw(t),t===null?null:t.stateNode},findFiberByHostInstance:Ga.findFiberByHostInstance||ES,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{vu=zl.inject(SS),ss=zl}catch{}}In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kS;In.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pp(e))throw Error(q(200));return IS(t,e,null,n)};In.createRoot=function(t,e){if(!pp(t))throw Error(q(299));var n=!1,s="",r=Wx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=hp(t,1,!1,null,null,n,!1,s,r),t[Ns]=e.current,Do(t.nodeType===8?t.parentNode:t),new mp(e)};In.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=fw(e),t=t===null?null:t.stateNode,t};In.flushSync=function(t){return ci(t)};In.hydrate=function(t,e,n){if(!Au(e))throw Error(q(200));return Pu(null,t,e,!0,n)};In.hydrateRoot=function(t,e,n){if(!pp(t))throw Error(q(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=Wx;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Jx(e,null,t,1,n??null,r,!1,i,o),t[Ns]=e.current,Do(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Cu(e)};In.render=function(t,e,n){if(!Au(e))throw Error(q(200));return Pu(null,t,e,!1,n)};In.unmountComponentAtNode=function(t){if(!Au(t))throw Error(q(40));return t._reactRootContainer?(ci(function(){Pu(null,null,t,!1,function(){t._reactRootContainer=null,t[Ns]=null})}),!0):!1};In.unstable_batchedUpdates=op;In.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Au(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return Pu(t,e,n,!1,s)};In.version="18.3.1-next-f1338f8080-20240426";function Gx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gx)}catch(t){console.error(t)}}Gx(),Gv.exports=In;var TS=Gv.exports,Jg=TS;Xh.createRoot=Jg.createRoot,Xh.hydrateRoot=Jg.hydrateRoot;const Kx=I.createContext(void 0);function Wg(t){const e=window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="auto"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n)}const NS=({children:t})=>{const[e,n]=I.useState(()=>localStorage.getItem("theme")||"auto");I.useEffect(()=>{Wg(e),localStorage.setItem("theme",e)},[e]),I.useEffect(()=>{const r=window.matchMedia("(prefers-color-scheme: dark)"),i=()=>{(localStorage.getItem("theme")||"auto")==="auto"&&Wg("auto")};return r.addEventListener("change",i),()=>r.removeEventListener("change",i)},[]);const s=I.useMemo(()=>({theme:e,setTheme:n}),[e]);return a.jsx(Kx.Provider,{value:s,children:t})};function jS(){const t=I.useContext(Kx);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t}const Qx=I.createContext(void 0),CS=({children:t})=>{const[e,n]=I.useState(()=>localStorage.getItem("layout")||"auto"),s=I.useMemo(()=>({layout:e,setLayout:r=>{localStorage.setItem("layout",r),n(r)}}),[e]);return a.jsx(Qx.Provider,{value:s,children:t})};function Ls(){const t=I.useContext(Qx);if(!t)throw new Error("useLayout must be used within LayoutProvider");return t}const AS=()=>{};var Gg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},PS=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],c=t[n++],u=((r&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Xx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,c=o?t[r+1]:0,u=r+2<t.length,h=u?t[r+2]:0,m=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|h>>6,E=h&63;u||(E=64,o||(g=64)),s.push(n[m],n[p],n[g],n[E])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Yx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||c==null||h==null||p==null)throw new RS;const g=i<<2|c>>4;if(s.push(g),h!==64){const E=c<<4&240|h>>2;if(s.push(E),p!==64){const C=h<<6&192|p;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class RS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DS=function(t){const e=Yx(t);return Xx.encodeByteArray(e,!0)},Kc=function(t){return DS(t).replace(/\./g,"")},Zx=function(t){try{return Xx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=()=>OS().__FIREBASE_DEFAULTS__,MS=()=>{if(typeof process>"u"||typeof Gg>"u")return;const t=Gg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},VS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Zx(t[1]);return e&&JSON.parse(e)},Ru=()=>{try{return AS()||LS()||MS()||VS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eb=t=>{var e,n;return(n=(e=Ru())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},FS=t=>{const e=eb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},tb=()=>{var t;return(t=Ru())==null?void 0:t.config},nb=t=>{var e;return(e=Ru())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sb(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Kc(JSON.stringify(n)),Kc(JSON.stringify(o)),""].join(".")}const vo={};function BS(){const t={prod:[],emulator:[]};for(const e of Object.keys(vo))vo[e]?t.emulator.push(e):t.prod.push(e);return t}function qS(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Kg=!1;function rb(t,e){if(typeof window>"u"||typeof document>"u"||!ba(window.location.host)||vo[t]===e||vo[t]||Kg)return;vo[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=BS().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,E){g.setAttribute("width","24"),g.setAttribute("id",E),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Kg=!0,o()},g}function m(g,E){g.setAttribute("id",E),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=qS(s),E=n("text"),C=document.getElementById(E)||document.createElement("span"),w=n("learnmore"),k=document.getElementById(w)||document.createElement("a"),y=n("preprendIcon"),x=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const j=g.element;c(j),m(k,w);const R=h();u(x,y),j.append(x,C,k,R),document.body.appendChild(j)}i?(C.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function $S(){var e;const t=(e=Ru())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function GS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KS(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function QS(){return!$S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YS(){try{return typeof indexedDB=="object"}catch{return!1}}function XS(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="FirebaseError";class Ms extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=ZS,Object.setPrototypeOf(this,Ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,al.prototype.create)}}class al{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?eT(i,s):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new Ms(r,c,s)}}function eT(t,e){return t.replace(tT,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const tT=/\{\$([^}]+)}/g;function nT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ui(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Qg(i)&&Qg(o)){if(!ui(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Qg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function to(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function no(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function sT(t,e){const n=new rT(t,e);return n.subscribe.bind(n)}class rT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");iT(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Oh),r.error===void 0&&(r.error=Oh),r.complete===void 0&&(r.complete=Oh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Oh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){return t&&t._delegate?t._delegate:t}class hi{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new HS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lT(e))try{this.getOrInitializeService({instanceIdentifier:Qr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qr){return this.instances.has(e)}getOptions(e=Qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);s===c&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:oT(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Qr){return this.component?this.component.multipleInstances?e:Qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oT(t){return t===Qr?void 0:t}function lT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const uT={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},hT=we.INFO,dT={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},mT=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=dT[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fp{constructor(e){this.name=e,this._logLevel=hT,this._logHandler=mT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const pT=(t,e)=>e.some(n=>t instanceof n);let Yg,Xg;function fT(){return Yg||(Yg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gT(){return Xg||(Xg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ib=new WeakMap,$d=new WeakMap,ab=new WeakMap,Lh=new WeakMap,gp=new WeakMap;function yT(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(yr(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ib.set(n,t)}).catch(()=>{}),gp.set(e,t),e}function vT(t){if($d.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});$d.set(t,e)}let Jd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $d.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ab.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wT(t){Jd=t(Jd)}function xT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Mh(this),e,...n);return ab.set(s,e.sort?e.sort():[e]),yr(s)}:gT().includes(t)?function(...e){return t.apply(Mh(this),e),yr(ib.get(this))}:function(...e){return yr(t.apply(Mh(this),e))}}function bT(t){return typeof t=="function"?xT(t):(t instanceof IDBTransaction&&vT(t),pT(t,fT())?new Proxy(t,Jd):t)}function yr(t){if(t instanceof IDBRequest)return yT(t);if(Lh.has(t))return Lh.get(t);const e=bT(t);return e!==t&&(Lh.set(t,e),gp.set(e,t)),e}const Mh=t=>gp.get(t);function IT(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),c=yr(o);return s&&o.addEventListener("upgradeneeded",u=>{s(yr(o.result),u.oldVersion,u.newVersion,yr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const ET=["get","getKey","getAll","getAllKeys","count"],_T=["put","add","delete","clear"],Vh=new Map;function Zg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vh.get(e))return Vh.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=_T.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||ET.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,r?"readwrite":"readonly");let h=u.store;return s&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),r&&u.done]))[0]};return Vh.set(e,i),i}wT(t=>({...t,get:(e,n,s)=>Zg(e,n)||t.get(e,n,s),has:(e,n)=>!!Zg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ST(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function ST(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wd="@firebase/app",ey="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new fp("@firebase/app"),TT="@firebase/app-compat",NT="@firebase/analytics-compat",jT="@firebase/analytics",CT="@firebase/app-check-compat",AT="@firebase/app-check",PT="@firebase/auth",RT="@firebase/auth-compat",DT="@firebase/database",OT="@firebase/data-connect",LT="@firebase/database-compat",MT="@firebase/functions",VT="@firebase/functions-compat",FT="@firebase/installations",HT="@firebase/installations-compat",UT="@firebase/messaging",BT="@firebase/messaging-compat",qT="@firebase/performance",zT="@firebase/performance-compat",$T="@firebase/remote-config",JT="@firebase/remote-config-compat",WT="@firebase/storage",GT="@firebase/storage-compat",KT="@firebase/firestore",QT="@firebase/ai",YT="@firebase/firestore-compat",XT="firebase",ZT="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="[DEFAULT]",e0={[Wd]:"fire-core",[TT]:"fire-core-compat",[jT]:"fire-analytics",[NT]:"fire-analytics-compat",[AT]:"fire-app-check",[CT]:"fire-app-check-compat",[PT]:"fire-auth",[RT]:"fire-auth-compat",[DT]:"fire-rtdb",[OT]:"fire-data-connect",[LT]:"fire-rtdb-compat",[MT]:"fire-fn",[VT]:"fire-fn-compat",[FT]:"fire-iid",[HT]:"fire-iid-compat",[UT]:"fire-fcm",[BT]:"fire-fcm-compat",[qT]:"fire-perf",[zT]:"fire-perf-compat",[$T]:"fire-rc",[JT]:"fire-rc-compat",[WT]:"fire-gcs",[GT]:"fire-gcs-compat",[KT]:"fire-fst",[YT]:"fire-fst-compat",[QT]:"fire-vertex","fire-js":"fire-js",[XT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new Map,t0=new Map,Kd=new Map;function ty(t,e){try{t.container.addComponent(e)}catch(n){As.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ha(t){const e=t.name;if(Kd.has(e))return As.debug(`There were multiple attempts to register component ${e}.`),!1;Kd.set(e,t);for(const n of Qc.values())ty(n,t);for(const n of t0.values())ty(n,t);return!0}function yp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vr=new al("app","Firebase",n0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=ZT;function ob(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Gd,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw vr.create("bad-app-name",{appName:String(r)});if(n||(n=tb()),!n)throw vr.create("no-options");const i=Qc.get(r);if(i){if(ui(n,i.options)&&ui(s,i.config))return i;throw vr.create("duplicate-app",{appName:r})}const o=new cT(r);for(const u of Kd.values())o.addComponent(u);const c=new s0(n,s,o);return Qc.set(r,c),c}function lb(t=Gd){const e=Qc.get(t);if(!e&&t===Gd&&tb())return ob();if(!e)throw vr.create("no-app",{appName:t});return e}function wr(t,e,n){let s=e0[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),As.warn(o.join(" "));return}ha(new hi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="firebase-heartbeat-database",i0=1,qo="firebase-heartbeat-store";let Fh=null;function cb(){return Fh||(Fh=IT(r0,i0,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qo)}catch(n){console.warn(n)}}}}).catch(t=>{throw vr.create("idb-open",{originalErrorMessage:t.message})})),Fh}async function a0(t){try{const n=(await cb()).transaction(qo),s=await n.objectStore(qo).get(ub(t));return await n.done,s}catch(e){if(e instanceof Ms)As.warn(e.message);else{const n=vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});As.warn(n.message)}}}async function ny(t,e){try{const s=(await cb()).transaction(qo,"readwrite");await s.objectStore(qo).put(e,ub(t)),await s.done}catch(n){if(n instanceof Ms)As.warn(n.message);else{const s=vr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});As.warn(s.message)}}}function ub(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=1024,l0=30;class c0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new h0(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=sy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>l0){const o=d0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){As.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sy(),{heartbeatsToSend:s,unsentEntries:r}=u0(this._heartbeatsCache.heartbeats),i=Kc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return As.warn(n),""}}}function sy(){return new Date().toISOString().substring(0,10)}function u0(t,e=o0){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),ry(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ry(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class h0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YS()?XS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await a0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ny(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ny(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ry(t){return Kc(JSON.stringify({version:2,heartbeats:t})).length}function d0(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t){ha(new hi("platform-logger",e=>new kT(e),"PRIVATE")),ha(new hi("heartbeat",e=>new c0(e),"PRIVATE")),wr(Wd,ey,t),wr(Wd,ey,"esm2020"),wr("fire-js","")}m0("");function hb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p0=hb,db=new al("auth","Firebase",hb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new fp("@firebase/auth");function f0(t,...e){Yc.logLevel<=we.WARN&&Yc.warn(`Auth (${Ia}): ${t}`,...e)}function pc(t,...e){Yc.logLevel<=we.ERROR&&Yc.error(`Auth (${Ia}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t,...e){throw wp(t,...e)}function Jn(t,...e){return wp(t,...e)}function vp(t,e,n){const s={...p0(),[e]:n};return new al("auth","Firebase",s).create(e,{appName:t.name})}function Ss(t){return vp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function g0(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Mn(t,"argument-error"),vp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wp(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return db.create(t,...e)}function he(t,e,...n){if(!t)throw wp(e,...n)}function Es(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pc(e),new Error(e)}function Ps(t,e){t||Es(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function y0(){return iy()==="http:"||iy()==="https:"}function iy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(y0()||WS()||"connection"in navigator)?navigator.onLine:!0}function w0(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ps(n>e,"Short delay should be less than long delay!"),this.isMobile=zS()||GS()}get(){return v0()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(t,e){Ps(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],I0=new ll(3e4,6e4);function Dr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Or(t,e,n,s,r={}){return pb(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const c=ol({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:u,...i};return JS()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&ba(t.emulatorConfig.host)&&(h.credentials="include"),mb.fetch()(await fb(t,t.config.apiHost,n,c),h)})}async function pb(t,e,n){t._canInitEmulator=!1;const s={...x0,...e};try{const r=new _0(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw $l(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw $l(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw $l(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw $l(t,"user-disabled",o);const m=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw vp(t,m,h);Mn(t,m)}}catch(r){if(r instanceof Ms)throw r;Mn(t,"network-request-failed",{message:String(r)})}}async function cl(t,e,n,s,r={}){const i=await Or(t,e,n,s,r);return"mfaPendingCredential"in i&&Mn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function fb(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?xp(t.config,r):`${t.config.apiScheme}://${r}`;return b0.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function E0(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _0{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Jn(this.auth,"network-request-failed")),I0.get())})}}function $l(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Jn(t,e,s);return r.customData._tokenResponse=n,r}function ay(t){return t!==void 0&&t.enterprise!==void 0}class k0{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return E0(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function S0(t,e){return Or(t,"GET","/v2/recaptchaConfig",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T0(t,e){return Or(t,"POST","/v1/accounts:delete",e)}async function Xc(t,e){return Or(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function N0(t,e=!1){const n=zt(t),s=await n.getIdToken(e),r=bp(s);he(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:wo(Hh(r.auth_time)),issuedAtTime:wo(Hh(r.iat)),expirationTime:wo(Hh(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Hh(t){return Number(t)*1e3}function bp(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return pc("JWT malformed, contained fewer than 3 sections"),null;try{const r=Zx(n);return r?JSON.parse(r):(pc("Failed to decode base64 JWT payload"),null)}catch(r){return pc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function oy(t){const e=bp(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ms&&j0(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function j0({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wo(this.lastLoginAt),this.creationTime=wo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zc(t){var p;const e=t.auth,n=await t.getIdToken(),s=await zo(t,Xc(e,{idToken:n}));he(s==null?void 0:s.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=(p=r.providerUserInfo)!=null&&p.length?gb(r.providerUserInfo):[],o=P0(t.providerData,i),c=t.isAnonymous,u=!(t.email&&r.passwordHash)&&!(o!=null&&o.length),h=c?u:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Yd(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function A0(t){const e=zt(t);await Zc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function P0(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function gb(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R0(t,e){const n=await pb(t,{},async()=>{const s=ol({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await fb(t,r,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:s};return t.emulatorConfig&&ba(t.emulatorConfig.host)&&(u.credentials="include"),mb.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function D0(t,e){return Or(t,"POST","/v2/accounts:revokeToken",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=oy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await R0(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new ea;return s&&(he(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(he(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(he(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ea,this.toJSON())}_performRefresh(){return Es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qn{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new C0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Yd(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await zo(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return N0(this,e)}reload(){return A0(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Zc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(Ss(this.auth));const e=await this.getIdToken();return await zo(this,T0(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:E,providerData:C,stsTokenManager:w}=n;he(p&&w,e,"internal-error");const k=ea.fromJSON(this.name,w);he(typeof p=="string",e,"internal-error"),Ks(s,e.name),Ks(r,e.name),he(typeof g=="boolean",e,"internal-error"),he(typeof E=="boolean",e,"internal-error"),Ks(i,e.name),Ks(o,e.name),Ks(c,e.name),Ks(u,e.name),Ks(h,e.name),Ks(m,e.name);const y=new qn({uid:p,auth:e,email:r,emailVerified:g,displayName:s,isAnonymous:E,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:k,createdAt:h,lastLoginAt:m});return C&&Array.isArray(C)&&(y.providerData=C.map(x=>({...x}))),u&&(y._redirectEventId=u),y}static async _fromIdTokenResponse(e,n,s=!1){const r=new ea;r.updateFromServerResponse(n);const i=new qn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Zc(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];he(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?gb(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),c=new ea;c.updateFromIdToken(s);const u=new qn({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Yd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=new Map;function _s(t){Ps(t instanceof Function,"Expected a class definition");let e=ly.get(t);return e?(Ps(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ly.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yb.type="NONE";const cy=yb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t,e,n){return`firebase:${t}:${e}:${n}`}class ta{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=fc(this.userKey,r.apiKey,i),this.fullPersistenceKey=fc("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Xc(this.auth,{idToken:e}).catch(()=>{});return n?qn._fromGetAccountInfoResponse(this.auth,n,e):null}return qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new ta(_s(cy),e,s);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=r[0]||_s(cy);const o=fc(s,e.config.apiKey,e.name);let c=null;for(const h of n)try{const m=await h._get(o);if(m){let p;if(typeof m=="string"){const g=await Xc(e,{idToken:m}).catch(()=>{});if(!g)break;p=await qn._fromGetAccountInfoResponse(e,g,m)}else p=qn._fromJSON(e,m);h!==i&&(c=p),i=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ta(i,e,s):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new ta(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Eb(e))return"Blackberry";if(_b(e))return"Webos";if(wb(e))return"Safari";if((e.includes("chrome/")||xb(e))&&!e.includes("edge/"))return"Chrome";if(Ib(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function vb(t=qt()){return/firefox\//i.test(t)}function wb(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xb(t=qt()){return/crios\//i.test(t)}function bb(t=qt()){return/iemobile/i.test(t)}function Ib(t=qt()){return/android/i.test(t)}function Eb(t=qt()){return/blackberry/i.test(t)}function _b(t=qt()){return/webos/i.test(t)}function Ip(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function O0(t=qt()){var e;return Ip(t)&&!!((e=window.navigator)!=null&&e.standalone)}function L0(){return KS()&&document.documentMode===10}function kb(t=qt()){return Ip(t)||Ib(t)||_b(t)||Eb(t)||/windows phone/i.test(t)||bb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(t,e=[]){let n;switch(t){case"Browser":n=uy(qt());break;case"Worker":n=`${uy(qt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ia}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V0(t,e={}){return Or(t,"GET","/v2/passwordPolicy",Dr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=6;class H0{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??F0,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hy(this),this.idTokenSubscription=new hy(this),this.beforeStateQueue=new M0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=db,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_s(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await ta.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Xc(this,{idToken:e}),s=await qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(yn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w0()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yn(this.app))return Promise.reject(Ss(this));const n=e?zt(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(Ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yn(this.app)?Promise.reject(Ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await V0(this),n=new H0(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new al("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await D0(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_s(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await ta.create(this,[_s(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,r);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&f0(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Lr(t){return zt(t)}class hy{constructor(e){this.auth=e,this.observer=null,this.addObserver=sT(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function B0(t){Du=t}function Tb(t){return Du.loadJS(t)}function q0(){return Du.recaptchaEnterpriseScript}function z0(){return Du.gapiScript}function $0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class J0{constructor(){this.enterprise=new W0}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class W0{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const G0="recaptcha-enterprise",Nb="NO_RECAPTCHA";class K0{constructor(e){this.type=G0,this.auth=Lr(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{S0(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new k0(u);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(u=>{c(u)})})}function r(i,o,c){const u=window.grecaptcha;ay(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(Nb)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new J0().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(c=>{if(!n&&ay(window.grecaptcha))r(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=q0();u.length!==0&&(u+=c),Tb(u).then(()=>{r(c,i,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function dy(t,e,n,s=!1,r=!1){const i=new K0(t);let o;if(r)o=Nb;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return s?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Xd(t,e,n,s,r){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await dy(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await dy(t,e,n,n==="getOobCode");return s(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t,e){const n=yp(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(ui(i,e??{}))return r;Mn(r,"already-initialized")}return n.initialize({options:e})}function Y0(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(_s);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function X0(t,e,n){const s=Lr(t);he(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=jb(e),{host:o,port:c}=Z0(e),u=c===null?"":`:${c}`,h={url:`${i}//${o}${u}/`},m=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){he(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),he(ui(h,s.config.emulator)&&ui(m,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=h,s.emulatorConfig=m,s.settings.appVerificationDisabledForTesting=!0,ba(o)?(sb(`${i}//${o}${u}`),rb("Auth",!0)):eN()}function jb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Z0(t){const e=jb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:my(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:my(o)}}}function my(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function eN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Es("not implemented")}_getIdTokenResponse(e){return Es("not implemented")}_linkToIdToken(e,n){return Es("not implemented")}_getReauthenticationResolver(e){return Es("not implemented")}}async function tN(t,e){return Or(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(t,e){return cl(t,"POST","/v1/accounts:signInWithPassword",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sN(t,e){return cl(t,"POST","/v1/accounts:signInWithEmailLink",Dr(t,e))}async function rN(t,e){return cl(t,"POST","/v1/accounts:signInWithEmailLink",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends Ep{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new $o(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new $o(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xd(e,n,"signInWithPassword",nN);case"emailLink":return sN(e,{email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xd(e,s,"signUpPassword",tN);case"emailLink":return rN(e,{idToken:n,email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(t,e){return cl(t,"POST","/v1/accounts:signInWithIdp",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="http://localhost";class di extends Ep{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new di(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new di(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return na(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,na(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,na(e,n)}buildRequest(){const e={requestUri:iN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ol(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oN(t){const e=to(no(t)).link,n=e?to(no(e)).deep_link_id:null,s=to(no(t)).deep_link_id;return(s?to(no(s)).link:null)||s||n||e||t}class _p{constructor(e){const n=to(no(e)),s=n.apiKey??null,r=n.oobCode??null,i=aN(n.mode??null);he(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=oN(e);try{return new _p(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){this.providerId=Ea.PROVIDER_ID}static credential(e,n){return $o._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=_p.parseLink(n);return he(s,"argument-error"),$o._fromEmailAndCode(e,s.code,s.tenantId)}}Ea.PROVIDER_ID="password";Ea.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ea.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends kp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends ul{constructor(){super("facebook.com")}static credential(e){return di._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return er.credential(e.oauthAccessToken)}catch{return null}}}er.FACEBOOK_SIGN_IN_METHOD="facebook.com";er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends ul{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return di._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return xs.credential(n,s)}catch{return null}}}xs.GOOGLE_SIGN_IN_METHOD="google.com";xs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends ul{constructor(){super("github.com")}static credential(e){return di._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.GITHUB_SIGN_IN_METHOD="github.com";tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends ul{constructor(){super("twitter.com")}static credential(e,n){return di._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return nr.credential(n,s)}catch{return null}}}nr.TWITTER_SIGN_IN_METHOD="twitter.com";nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(t,e){return cl(t,"POST","/v1/accounts:signUp",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await qn._fromIdTokenResponse(e,s,r),o=py(s);return new mi({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=py(s);return new mi({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function py(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends Ms{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,eu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new eu(e,n,s,r)}}function Cb(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?eu._fromErrorAndOperation(t,i,e,s):i})}async function cN(t,e,n=!1){const s=await zo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return mi._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(t,e,n=!1){const{auth:s}=t;if(yn(s.app))return Promise.reject(Ss(s));const r="reauthenticate";try{const i=await zo(t,Cb(s,r,e,t),n);he(i.idToken,s,"internal-error");const o=bp(i.idToken);he(o,s,"internal-error");const{sub:c}=o;return he(t.uid===c,s,"user-mismatch"),mi._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Mn(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ab(t,e,n=!1){if(yn(t.app))return Promise.reject(Ss(t));const s="signIn",r=await Cb(t,s,e),i=await mi._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function hN(t,e){return Ab(Lr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pb(t){const e=Lr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dN(t,e,n){if(yn(t.app))return Promise.reject(Ss(t));const s=Lr(t),o=await Xd(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lN).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Pb(t),u}),c=await mi._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(c.user),c}function mN(t,e,n){return yn(t.app)?Promise.reject(Ss(t)):hN(zt(t),Ea.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Pb(t),s})}function pN(t,e,n,s){return zt(t).onIdTokenChanged(e,n,s)}function fN(t,e,n){return zt(t).beforeAuthStateChanged(e,n)}function gN(t,e,n,s){return zt(t).onAuthStateChanged(e,n,s)}function yN(t){return zt(t).signOut()}const tu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tu,"1"),this.storage.removeItem(tu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=1e3,wN=10;class Db extends Rb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);L0()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,wN):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},vN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Db.type="LOCAL";const xN=Db;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob extends Rb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ob.type="SESSION";const Lb=Ob;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Ou(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const c=Array.from(o).map(async h=>h(n.origin,i)),u=await bN(c);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ou.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const h=Sp("",20);r.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(p){const g=p;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(m),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(){return window}function EN(t){is().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(){return typeof is().WorkerGlobalScope<"u"&&typeof is().importScripts=="function"}async function _N(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function SN(){return Mb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="firebaseLocalStorageDb",TN=1,nu="firebaseLocalStorage",Fb="fbase_key";class hl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Lu(t,e){return t.transaction([nu],e?"readwrite":"readonly").objectStore(nu)}function NN(){const t=indexedDB.deleteDatabase(Vb);return new hl(t).toPromise()}function Zd(){const t=indexedDB.open(Vb,TN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(nu,{keyPath:Fb})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(nu)?e(s):(s.close(),await NN(),e(await Zd()))})})}async function fy(t,e,n){const s=Lu(t,!0).put({[Fb]:e,value:n});return new hl(s).toPromise()}async function jN(t,e){const n=Lu(t,!1).get(e),s=await new hl(n).toPromise();return s===void 0?null:s.value}function gy(t,e){const n=Lu(t,!0).delete(e);return new hl(n).toPromise()}const CN=800,AN=3;class Hb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>AN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ou._getInstance(SN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await _N(),!this.activeServiceWorker)return;this.sender=new IN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zd();return await fy(e,tu,"1"),await gy(e,tu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>fy(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>jN(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Lu(r,!1).getAll();return new hl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Hb.type="LOCAL";const PN=Hb;new ll(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(t,e){return e?_s(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp extends Ep{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return na(e,this._buildIdpRequest())}_linkToIdToken(e,n){return na(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return na(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function RN(t){return Ab(t.auth,new Tp(t),t.bypassAuthState)}function DN(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),uN(n,new Tp(t),t.bypassAuthState)}async function ON(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),cN(n,new Tp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RN;case"linkViaPopup":case"linkViaRedirect":return ON;case"reauthViaPopup":case"reauthViaRedirect":return DN;default:Mn(this.auth,"internal-error")}}resolve(e){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new ll(2e3,1e4);async function MN(t,e,n){if(yn(t.app))return Promise.reject(Jn(t,"operation-not-supported-in-this-environment"));const s=Lr(t);g0(t,e,kp);const r=Ub(s,n);return new ei(s,"signInViaPopup",e,r).executeNotNull()}class ei extends Bb{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,ei.currentPopupAction&&ei.currentPopupAction.cancel(),ei.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){Ps(this.filter.length===1,"Popup operations only handle one event");const e=Sp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ei.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LN.get())};e()}}ei.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="pendingRedirect",gc=new Map;class FN extends Bb{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=gc.get(this.auth._key());if(!e){try{const s=await HN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}gc.set(this.auth._key(),e)}return this.bypassAuthState||gc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HN(t,e){const n=qN(e),s=BN(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function UN(t,e){gc.set(t._key(),e)}function BN(t){return _s(t._redirectPersistence)}function qN(t){return fc(VN,t.config.apiKey,t.name)}async function zN(t,e,n=!1){if(yn(t.app))return Promise.reject(Ss(t));const s=Lr(t),r=Ub(s,e),o=await new FN(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=10*60*1e3;class JN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!qb(e)){const r=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Jn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$N&&this.cachedEventUids.clear(),this.cachedEventUids.has(yy(e))}saveEventToCache(e){this.cachedEventUids.add(yy(e)),this.lastProcessedEventTime=Date.now()}}function yy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function WN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e={}){return Or(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QN=/^https?/;async function YN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await GN(t);for(const n of e)try{if(XN(n))return}catch{}Mn(t,"unauthorized-domain")}function XN(t){const e=Qd(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!QN.test(n))return!1;if(KN.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=new ll(3e4,6e4);function vy(){const t=is().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ej(t){return new Promise((e,n)=>{var r,i,o;function s(){vy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vy(),n(Jn(t,"network-request-failed"))},timeout:ZN.get()})}if((i=(r=is().gapi)==null?void 0:r.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=is().gapi)!=null&&o.load)s();else{const c=$0("iframefcb");return is()[c]=()=>{gapi.load?s():n(Jn(t,"network-request-failed"))},Tb(`${z0()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw yc=null,e})}let yc=null;function tj(t){return yc=yc||ej(t),yc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=new ll(5e3,15e3),sj="__/auth/iframe",rj="emulator/auth/iframe",ij={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oj(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?xp(e,rj):`https://${t.config.authDomain}/${sj}`,s={apiKey:e.apiKey,appName:t.name,v:Ia},r=aj.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${ol(s).slice(1)}`}async function lj(t){const e=await tj(t),n=is().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:oj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ij,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Jn(t,"network-request-failed"),c=is().setTimeout(()=>{i(o)},nj.get());function u(){is().clearTimeout(c),r(s)}s.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uj=500,hj=600,dj="_blank",mj="http://localhost";class wy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pj(t,e,n,s=uj,r=hj){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const u={...cj,width:s.toString(),height:r.toString(),top:i,left:o},h=qt().toLowerCase();n&&(c=xb(h)?dj:n),vb(h)&&(e=e||mj,u.scrollbars="yes");const m=Object.entries(u).reduce((g,[E,C])=>`${g}${E}=${C},`,"");if(O0(h)&&c!=="_self")return fj(e||"",c),new wy(null);const p=window.open(e||"",c,m);he(p,t,"popup-blocked");try{p.focus()}catch{}return new wy(p)}function fj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj="__/auth/handler",yj="emulator/auth/handler",vj=encodeURIComponent("fac");async function xy(t,e,n,s,r,i){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Ia,eventId:r};if(e instanceof kp){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",nT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof ul){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),h=u?`#${vj}=${encodeURIComponent(u)}`:"";return`${wj(t)}?${ol(c).slice(1)}${h}`}function wj({config:t}){return t.emulator?xp(t,yj):`https://${t.authDomain}/${gj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="webStorageSupport";class xj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lb,this._completeRedirectFn=zN,this._overrideRedirectResult=UN}async _openPopup(e,n,s,r){var o;Ps((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await xy(e,n,s,Qd(),r);return pj(e,i,Sp())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await xy(e,n,s,Qd(),r);return EN(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Ps(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await lj(e),s=new JN(e);return n.register("authEvent",r=>(he(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Uh,{type:Uh},r=>{var o;const i=(o=r==null?void 0:r[0])==null?void 0:o[Uh];i!==void 0&&n(!!i),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=YN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kb()||wb()||Ip()}}const bj=xj;var by="@firebase/auth",Iy="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _j(t){ha(new hi("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=s.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sb(t)},h=new U0(s,r,i,u);return Y0(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ha(new hi("auth-internal",e=>{const n=Lr(e.getProvider("auth").getImmediate());return(s=>new Ij(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wr(by,Iy,Ej(t)),wr(by,Iy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=5*60,Sj=nb("authIdTokenMaxAge")||kj;let Ey=null;const Tj=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Sj)return;const r=n==null?void 0:n.token;Ey!==r&&(Ey=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Nj(t=lb()){const e=yp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Q0(t,{popupRedirectResolver:bj,persistence:[PN,xN,Lb]}),s=nb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=Tj(i.toString());fN(n,o,()=>o(n.currentUser)),pN(n,c=>o(c))}}const r=eb("auth");return r&&X0(n,`http://${r}`),n}function jj(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}B0({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Jn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",jj().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_j("Browser");var _y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xr,zb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,v){function N(){}N.prototype=v.prototype,S.F=v.prototype,S.prototype=new N,S.prototype.constructor=S,S.D=function(T,P,A){for(var _=Array(arguments.length-2),re=2;re<arguments.length;re++)_[re-2]=arguments[re];return v.prototype[P].apply(T,_)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,v,N){N||(N=0);const T=Array(16);if(typeof v=="string")for(var P=0;P<16;++P)T[P]=v.charCodeAt(N++)|v.charCodeAt(N++)<<8|v.charCodeAt(N++)<<16|v.charCodeAt(N++)<<24;else for(P=0;P<16;++P)T[P]=v[N++]|v[N++]<<8|v[N++]<<16|v[N++]<<24;v=S.g[0],N=S.g[1],P=S.g[2];let A=S.g[3],_;_=v+(A^N&(P^A))+T[0]+3614090360&4294967295,v=N+(_<<7&4294967295|_>>>25),_=A+(P^v&(N^P))+T[1]+3905402710&4294967295,A=v+(_<<12&4294967295|_>>>20),_=P+(N^A&(v^N))+T[2]+606105819&4294967295,P=A+(_<<17&4294967295|_>>>15),_=N+(v^P&(A^v))+T[3]+3250441966&4294967295,N=P+(_<<22&4294967295|_>>>10),_=v+(A^N&(P^A))+T[4]+4118548399&4294967295,v=N+(_<<7&4294967295|_>>>25),_=A+(P^v&(N^P))+T[5]+1200080426&4294967295,A=v+(_<<12&4294967295|_>>>20),_=P+(N^A&(v^N))+T[6]+2821735955&4294967295,P=A+(_<<17&4294967295|_>>>15),_=N+(v^P&(A^v))+T[7]+4249261313&4294967295,N=P+(_<<22&4294967295|_>>>10),_=v+(A^N&(P^A))+T[8]+1770035416&4294967295,v=N+(_<<7&4294967295|_>>>25),_=A+(P^v&(N^P))+T[9]+2336552879&4294967295,A=v+(_<<12&4294967295|_>>>20),_=P+(N^A&(v^N))+T[10]+4294925233&4294967295,P=A+(_<<17&4294967295|_>>>15),_=N+(v^P&(A^v))+T[11]+2304563134&4294967295,N=P+(_<<22&4294967295|_>>>10),_=v+(A^N&(P^A))+T[12]+1804603682&4294967295,v=N+(_<<7&4294967295|_>>>25),_=A+(P^v&(N^P))+T[13]+4254626195&4294967295,A=v+(_<<12&4294967295|_>>>20),_=P+(N^A&(v^N))+T[14]+2792965006&4294967295,P=A+(_<<17&4294967295|_>>>15),_=N+(v^P&(A^v))+T[15]+1236535329&4294967295,N=P+(_<<22&4294967295|_>>>10),_=v+(P^A&(N^P))+T[1]+4129170786&4294967295,v=N+(_<<5&4294967295|_>>>27),_=A+(N^P&(v^N))+T[6]+3225465664&4294967295,A=v+(_<<9&4294967295|_>>>23),_=P+(v^N&(A^v))+T[11]+643717713&4294967295,P=A+(_<<14&4294967295|_>>>18),_=N+(A^v&(P^A))+T[0]+3921069994&4294967295,N=P+(_<<20&4294967295|_>>>12),_=v+(P^A&(N^P))+T[5]+3593408605&4294967295,v=N+(_<<5&4294967295|_>>>27),_=A+(N^P&(v^N))+T[10]+38016083&4294967295,A=v+(_<<9&4294967295|_>>>23),_=P+(v^N&(A^v))+T[15]+3634488961&4294967295,P=A+(_<<14&4294967295|_>>>18),_=N+(A^v&(P^A))+T[4]+3889429448&4294967295,N=P+(_<<20&4294967295|_>>>12),_=v+(P^A&(N^P))+T[9]+568446438&4294967295,v=N+(_<<5&4294967295|_>>>27),_=A+(N^P&(v^N))+T[14]+3275163606&4294967295,A=v+(_<<9&4294967295|_>>>23),_=P+(v^N&(A^v))+T[3]+4107603335&4294967295,P=A+(_<<14&4294967295|_>>>18),_=N+(A^v&(P^A))+T[8]+1163531501&4294967295,N=P+(_<<20&4294967295|_>>>12),_=v+(P^A&(N^P))+T[13]+2850285829&4294967295,v=N+(_<<5&4294967295|_>>>27),_=A+(N^P&(v^N))+T[2]+4243563512&4294967295,A=v+(_<<9&4294967295|_>>>23),_=P+(v^N&(A^v))+T[7]+1735328473&4294967295,P=A+(_<<14&4294967295|_>>>18),_=N+(A^v&(P^A))+T[12]+2368359562&4294967295,N=P+(_<<20&4294967295|_>>>12),_=v+(N^P^A)+T[5]+4294588738&4294967295,v=N+(_<<4&4294967295|_>>>28),_=A+(v^N^P)+T[8]+2272392833&4294967295,A=v+(_<<11&4294967295|_>>>21),_=P+(A^v^N)+T[11]+1839030562&4294967295,P=A+(_<<16&4294967295|_>>>16),_=N+(P^A^v)+T[14]+4259657740&4294967295,N=P+(_<<23&4294967295|_>>>9),_=v+(N^P^A)+T[1]+2763975236&4294967295,v=N+(_<<4&4294967295|_>>>28),_=A+(v^N^P)+T[4]+1272893353&4294967295,A=v+(_<<11&4294967295|_>>>21),_=P+(A^v^N)+T[7]+4139469664&4294967295,P=A+(_<<16&4294967295|_>>>16),_=N+(P^A^v)+T[10]+3200236656&4294967295,N=P+(_<<23&4294967295|_>>>9),_=v+(N^P^A)+T[13]+681279174&4294967295,v=N+(_<<4&4294967295|_>>>28),_=A+(v^N^P)+T[0]+3936430074&4294967295,A=v+(_<<11&4294967295|_>>>21),_=P+(A^v^N)+T[3]+3572445317&4294967295,P=A+(_<<16&4294967295|_>>>16),_=N+(P^A^v)+T[6]+76029189&4294967295,N=P+(_<<23&4294967295|_>>>9),_=v+(N^P^A)+T[9]+3654602809&4294967295,v=N+(_<<4&4294967295|_>>>28),_=A+(v^N^P)+T[12]+3873151461&4294967295,A=v+(_<<11&4294967295|_>>>21),_=P+(A^v^N)+T[15]+530742520&4294967295,P=A+(_<<16&4294967295|_>>>16),_=N+(P^A^v)+T[2]+3299628645&4294967295,N=P+(_<<23&4294967295|_>>>9),_=v+(P^(N|~A))+T[0]+4096336452&4294967295,v=N+(_<<6&4294967295|_>>>26),_=A+(N^(v|~P))+T[7]+1126891415&4294967295,A=v+(_<<10&4294967295|_>>>22),_=P+(v^(A|~N))+T[14]+2878612391&4294967295,P=A+(_<<15&4294967295|_>>>17),_=N+(A^(P|~v))+T[5]+4237533241&4294967295,N=P+(_<<21&4294967295|_>>>11),_=v+(P^(N|~A))+T[12]+1700485571&4294967295,v=N+(_<<6&4294967295|_>>>26),_=A+(N^(v|~P))+T[3]+2399980690&4294967295,A=v+(_<<10&4294967295|_>>>22),_=P+(v^(A|~N))+T[10]+4293915773&4294967295,P=A+(_<<15&4294967295|_>>>17),_=N+(A^(P|~v))+T[1]+2240044497&4294967295,N=P+(_<<21&4294967295|_>>>11),_=v+(P^(N|~A))+T[8]+1873313359&4294967295,v=N+(_<<6&4294967295|_>>>26),_=A+(N^(v|~P))+T[15]+4264355552&4294967295,A=v+(_<<10&4294967295|_>>>22),_=P+(v^(A|~N))+T[6]+2734768916&4294967295,P=A+(_<<15&4294967295|_>>>17),_=N+(A^(P|~v))+T[13]+1309151649&4294967295,N=P+(_<<21&4294967295|_>>>11),_=v+(P^(N|~A))+T[4]+4149444226&4294967295,v=N+(_<<6&4294967295|_>>>26),_=A+(N^(v|~P))+T[11]+3174756917&4294967295,A=v+(_<<10&4294967295|_>>>22),_=P+(v^(A|~N))+T[2]+718787259&4294967295,P=A+(_<<15&4294967295|_>>>17),_=N+(A^(P|~v))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(P+(_<<21&4294967295|_>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+A&4294967295}s.prototype.v=function(S,v){v===void 0&&(v=S.length);const N=v-this.blockSize,T=this.C;let P=this.h,A=0;for(;A<v;){if(P==0)for(;A<=N;)r(this,S,A),A+=this.blockSize;if(typeof S=="string"){for(;A<v;)if(T[P++]=S.charCodeAt(A++),P==this.blockSize){r(this,T),P=0;break}}else for(;A<v;)if(T[P++]=S[A++],P==this.blockSize){r(this,T),P=0;break}}this.h=P,this.o+=v},s.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;v=this.o*8;for(var N=S.length-8;N<S.length;++N)S[N]=v&255,v/=256;for(this.v(S),S=Array(16),v=0,N=0;N<4;++N)for(let T=0;T<32;T+=8)S[v++]=this.g[N]>>>T&255;return S};function i(S,v){var N=c;return Object.prototype.hasOwnProperty.call(N,S)?N[S]:N[S]=v(S)}function o(S,v){this.h=v;const N=[];let T=!0;for(let P=S.length-1;P>=0;P--){const A=S[P]|0;T&&A==v||(N[P]=A,T=!1)}this.g=N}var c={};function u(S){return-128<=S&&S<128?i(S,function(v){return new o([v|0],v<0?-1:0)}):new o([S|0],S<0?-1:0)}function h(S){if(isNaN(S)||!isFinite(S))return p;if(S<0)return k(h(-S));const v=[];let N=1;for(let T=0;S>=N;T++)v[T]=S/N|0,N*=4294967296;return new o(v,0)}function m(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return k(m(S.substring(1),v));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=h(Math.pow(v,8));let T=p;for(let A=0;A<S.length;A+=8){var P=Math.min(8,S.length-A);const _=parseInt(S.substring(A,A+P),v);P<8?(P=h(Math.pow(v,P)),T=T.j(P).add(h(_))):(T=T.j(N),T=T.add(h(_)))}return T}var p=u(0),g=u(1),E=u(16777216);t=o.prototype,t.m=function(){if(w(this))return-k(this).m();let S=0,v=1;for(let N=0;N<this.g.length;N++){const T=this.i(N);S+=(T>=0?T:4294967296+T)*v,v*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(C(this))return"0";if(w(this))return"-"+k(this).toString(S);const v=h(Math.pow(S,6));var N=this;let T="";for(;;){const P=R(N,v).g;N=y(N,P.j(v));let A=((N.g.length>0?N.g[0]:N.h)>>>0).toString(S);if(N=P,C(N))return A+T;for(;A.length<6;)A="0"+A;T=A+T}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function C(S){if(S.h!=0)return!1;for(let v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function w(S){return S.h==-1}t.l=function(S){return S=y(this,S),w(S)?-1:C(S)?0:1};function k(S){const v=S.g.length,N=[];for(let T=0;T<v;T++)N[T]=~S.g[T];return new o(N,~S.h).add(g)}t.abs=function(){return w(this)?k(this):this},t.add=function(S){const v=Math.max(this.g.length,S.g.length),N=[];let T=0;for(let P=0;P<=v;P++){let A=T+(this.i(P)&65535)+(S.i(P)&65535),_=(A>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);T=_>>>16,A&=65535,_&=65535,N[P]=_<<16|A}return new o(N,N[N.length-1]&-2147483648?-1:0)};function y(S,v){return S.add(k(v))}t.j=function(S){if(C(this)||C(S))return p;if(w(this))return w(S)?k(this).j(k(S)):k(k(this).j(S));if(w(S))return k(this.j(k(S)));if(this.l(E)<0&&S.l(E)<0)return h(this.m()*S.m());const v=this.g.length+S.g.length,N=[];for(var T=0;T<2*v;T++)N[T]=0;for(T=0;T<this.g.length;T++)for(let P=0;P<S.g.length;P++){const A=this.i(T)>>>16,_=this.i(T)&65535,re=S.i(P)>>>16,ye=S.i(P)&65535;N[2*T+2*P]+=_*ye,x(N,2*T+2*P),N[2*T+2*P+1]+=A*ye,x(N,2*T+2*P+1),N[2*T+2*P+1]+=_*re,x(N,2*T+2*P+1),N[2*T+2*P+2]+=A*re,x(N,2*T+2*P+2)}for(S=0;S<v;S++)N[S]=N[2*S+1]<<16|N[2*S];for(S=v;S<2*v;S++)N[S]=0;return new o(N,0)};function x(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function j(S,v){this.g=S,this.h=v}function R(S,v){if(C(v))throw Error("division by zero");if(C(S))return new j(p,p);if(w(S))return v=R(k(S),v),new j(k(v.g),k(v.h));if(w(v))return v=R(S,k(v)),new j(k(v.g),v.h);if(S.g.length>30){if(w(S)||w(v))throw Error("slowDivide_ only works with positive integers.");for(var N=g,T=v;T.l(S)<=0;)N=L(N),T=L(T);var P=U(N,1),A=U(T,1);for(T=U(T,2),N=U(N,2);!C(T);){var _=A.add(T);_.l(S)<=0&&(P=P.add(N),A=_),T=U(T,1),N=U(N,1)}return v=y(S,P.j(v)),new j(P,v)}for(P=p;S.l(v)>=0;){for(N=Math.max(1,Math.floor(S.m()/v.m())),T=Math.ceil(Math.log(N)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),A=h(N),_=A.j(v);w(_)||_.l(S)>0;)N-=T,A=h(N),_=A.j(v);C(A)&&(A=g),P=P.add(A),S=y(S,_)}return new j(P,S)}t.B=function(S){return R(this,S).h},t.and=function(S){const v=Math.max(this.g.length,S.g.length),N=[];for(let T=0;T<v;T++)N[T]=this.i(T)&S.i(T);return new o(N,this.h&S.h)},t.or=function(S){const v=Math.max(this.g.length,S.g.length),N=[];for(let T=0;T<v;T++)N[T]=this.i(T)|S.i(T);return new o(N,this.h|S.h)},t.xor=function(S){const v=Math.max(this.g.length,S.g.length),N=[];for(let T=0;T<v;T++)N[T]=this.i(T)^S.i(T);return new o(N,this.h^S.h)};function L(S){const v=S.g.length+1,N=[];for(let T=0;T<v;T++)N[T]=S.i(T)<<1|S.i(T-1)>>>31;return new o(N,S.h)}function U(S,v){const N=v>>5;v%=32;const T=S.g.length-N,P=[];for(let A=0;A<T;A++)P[A]=v>0?S.i(A+N)>>>v|S.i(A+N+1)<<32-v:S.i(A+N);return new o(P,S.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,zb=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,xr=o}).apply(typeof _y<"u"?_y:typeof self<"u"?self:typeof window<"u"?window:{});var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $b,so,Jb,vc,em,Wb,Gb,Kb;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jl=="object"&&Jl];for(var d=0;d<l.length;++d){var f=l[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var s=n(this);function r(l,d){if(d)e:{var f=s;l=l.split(".");for(var b=0;b<l.length-1;b++){var D=l[b];if(!(D in f))break e;f=f[D]}l=l[l.length-1],b=f[l],d=d(b),d!=b&&d!=null&&e(f,l,{configurable:!0,writable:!0,value:d})}}r("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(l){return l||function(d){var f=[],b;for(b in d)Object.prototype.hasOwnProperty.call(d,b)&&f.push([b,d[b]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function u(l,d,f){return l.call.apply(l.bind,arguments)}function h(l,d,f){return h=u,h.apply(null,arguments)}function m(l,d){var f=Array.prototype.slice.call(arguments,1);return function(){var b=f.slice();return b.push.apply(b,arguments),l.apply(this,b)}}function p(l,d){function f(){}f.prototype=d.prototype,l.Z=d.prototype,l.prototype=new f,l.prototype.constructor=l,l.Ob=function(b,D,O){for(var $=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)$[ge-2]=arguments[ge];return d.prototype[D].apply(b,$)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function E(l){const d=l.length;if(d>0){const f=Array(d);for(let b=0;b<d;b++)f[b]=l[b];return f}return[]}function C(l,d){for(let b=1;b<arguments.length;b++){const D=arguments[b];var f=typeof D;if(f=f!="object"?f:D?Array.isArray(D)?"array":f:"null",f=="array"||f=="object"&&typeof D.length=="number"){f=l.length||0;const O=D.length||0;l.length=f+O;for(let $=0;$<O;$++)l[f+$]=D[$]}else l.push(D)}}class w{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function k(l){o.setTimeout(()=>{throw l},0)}function y(){var l=S;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class x{constructor(){this.h=this.g=null}add(d,f){const b=j.get();b.set(d,f),this.h?this.h.next=b:this.g=b,this.h=b}}var j=new w(()=>new R,l=>l.reset());class R{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let L,U=!1,S=new x,v=()=>{const l=Promise.resolve(void 0);L=()=>{l.then(N)}};function N(){for(var l;l=y();){try{l.h.call(l.g)}catch(f){k(f)}var d=j;d.j(l),d.h<100&&(d.h++,l.next=d.g,d.g=l)}U=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const f=()=>{};o.addEventListener("test",f,d),o.removeEventListener("test",f,d)}catch{}return l}();function _(l){return/^[\s\xa0]*$/.test(l)}function re(l,d){P.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,d)}p(re,P),re.prototype.init=function(l,d){const f=this.type=l.type,b=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget,d||(f=="mouseover"?d=l.fromElement:f=="mouseout"&&(d=l.toElement)),this.relatedTarget=d,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&re.Z.h.call(this)},re.prototype.h=function(){re.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),Re=0;function De(l,d,f,b,D){this.listener=l,this.proxy=null,this.src=d,this.type=f,this.capture=!!b,this.ha=D,this.key=++Re,this.da=this.fa=!1}function V(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function M(l,d,f){for(const b in l)d.call(f,l[b],b,l)}function J(l,d){for(const f in l)d.call(void 0,l[f],f,l)}function ne(l){const d={};for(const f in l)d[f]=l[f];return d}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Be(l,d){let f,b;for(let D=1;D<arguments.length;D++){b=arguments[D];for(f in b)l[f]=b[f];for(let O=0;O<Z.length;O++)f=Z[O],Object.prototype.hasOwnProperty.call(b,f)&&(l[f]=b[f])}}function Ve(l){this.src=l,this.g={},this.h=0}Ve.prototype.add=function(l,d,f,b,D){const O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);const $=Te(l,d,b,D);return $>-1?(d=l[$],f||(d.fa=!1)):(d=new De(d,this.src,O,!!b,D),d.fa=f,l.push(d)),d};function Xe(l,d){const f=d.type;if(f in l.g){var b=l.g[f],D=Array.prototype.indexOf.call(b,d,void 0),O;(O=D>=0)&&Array.prototype.splice.call(b,D,1),O&&(V(d),l.g[f].length==0&&(delete l.g[f],l.h--))}}function Te(l,d,f,b){for(let D=0;D<l.length;++D){const O=l[D];if(!O.da&&O.listener==d&&O.capture==!!f&&O.ha==b)return D}return-1}var Ze="closure_lm_"+(Math.random()*1e6|0),nt={};function _t(l,d,f,b,D){if(Array.isArray(d)){for(let O=0;O<d.length;O++)_t(l,d[O],f,b,D);return null}return f=Fs(f),l&&l[ye]?l.J(d,f,c(b)?!!b.capture:!1,D):Vs(l,d,f,!1,b,D)}function Vs(l,d,f,b,D,O){if(!d)throw Error("Invalid event type");const $=c(D)?!!D.capture:!!D;let ge=$t(l);if(ge||(l[Ze]=ge=new Ve(l)),f=ge.add(d,f,b,$,O),f.proxy)return f;if(b=dn(),f.proxy=b,b.src=l,b.listener=f,l.addEventListener)A||(D=$),D===void 0&&(D=!1),l.addEventListener(d.toString(),b,D);else if(l.attachEvent)l.attachEvent(_n(d.toString()),b);else if(l.addListener&&l.removeListener)l.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return f}function dn(){function l(f){return d.call(l.src,l.listener,f)}const d=mn;return l}function Vn(l,d,f,b,D){if(Array.isArray(d))for(var O=0;O<d.length;O++)Vn(l,d[O],f,b,D);else b=c(b)?!!b.capture:!!b,f=Fs(f),l&&l[ye]?(l=l.i,O=String(d).toString(),O in l.g&&(d=l.g[O],f=Te(d,f,b,D),f>-1&&(V(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete l.g[O],l.h--)))):l&&(l=$t(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Te(d,f,b,D)),(f=l>-1?d[l]:null)&&Xt(f))}function Xt(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[ye])Xe(d.i,l);else{var f=l.type,b=l.proxy;d.removeEventListener?d.removeEventListener(f,b,l.capture):d.detachEvent?d.detachEvent(_n(f),b):d.addListener&&d.removeListener&&d.removeListener(b),(f=$t(d))?(Xe(f,l),f.h==0&&(f.src=null,d[Ze]=null)):V(l)}}}function _n(l){return l in nt?nt[l]:nt[l]="on"+l}function mn(l,d){if(l.da)l=!0;else{d=new re(d,this);const f=l.listener,b=l.ha||l.src;l.fa&&Xt(l),l=f.call(b,d)}return l}function $t(l){return l=l[Ze],l instanceof Ve?l:null}var Jt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Fs(l){return typeof l=="function"?l:(l[Jt]||(l[Jt]=function(d){return l.handleEvent(d)}),l[Jt])}function Oe(){T.call(this),this.i=new Ve(this),this.M=this,this.G=null}p(Oe,T),Oe.prototype[ye]=!0,Oe.prototype.removeEventListener=function(l,d,f,b){Vn(this,l,d,f,b)};function Le(l,d){var f,b=l.G;if(b)for(f=[];b;b=b.G)f.push(b);if(l=l.M,b=d.type||d,typeof d=="string")d=new P(d,l);else if(d instanceof P)d.target=d.target||l;else{var D=d;d=new P(b,l),Be(d,D)}D=!0;let O,$;if(f)for($=f.length-1;$>=0;$--)O=d.g=f[$],D=kn(O,b,!0,d)&&D;if(O=d.g=l,D=kn(O,b,!0,d)&&D,D=kn(O,b,!1,d)&&D,f)for($=0;$<f.length;$++)O=d.g=f[$],D=kn(O,b,!1,d)&&D}Oe.prototype.N=function(){if(Oe.Z.N.call(this),this.i){var l=this.i;for(const d in l.g){const f=l.g[d];for(let b=0;b<f.length;b++)V(f[b]);delete l.g[d],l.h--}}this.G=null},Oe.prototype.J=function(l,d,f,b){return this.i.add(String(l),d,!1,f,b)},Oe.prototype.K=function(l,d,f,b){return this.i.add(String(l),d,!0,f,b)};function kn(l,d,f,b){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();let D=!0;for(let O=0;O<d.length;++O){const $=d[O];if($&&!$.da&&$.capture==f){const ge=$.listener,ut=$.ha||$.src;$.fa&&Xe(l.i,$),D=ge.call(ut,b)!==!1&&D}}return D&&!b.defaultPrevented}function Pt(l,d){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=h(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(l,d||0)}function ms(l){l.g=Pt(()=>{l.g=null,l.i&&(l.i=!1,ms(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class W extends T{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:ms(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(l){T.call(this),this.h=l,this.g={}}p(oe,T);var ze=[];function yt(l){M(l.g,function(d,f){this.g.hasOwnProperty(f)&&Xt(d)},l),l.g={}}oe.prototype.N=function(){oe.Z.N.call(this),yt(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ne=o.JSON.stringify,Rt=o.JSON.parse,Zt=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Hs(){}function Ei(){}var Gn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ja(){P.call(this,"d")}p(ja,P);function Ca(){P.call(this,"c")}p(Ca,P);var ps={},_i=null;function fs(){return _i=_i||new Oe}ps.Ia="serverreachability";function ki(l){P.call(this,ps.Ia,l)}p(ki,P);function Sn(l){const d=fs();Le(d,new ki(d))}ps.STAT_EVENT="statevent";function Aa(l,d){P.call(this,ps.STAT_EVENT,l),this.stat=d}p(Aa,P);function ot(l){const d=fs();Le(d,new Aa(d,l))}ps.Ja="timingevent";function Si(l,d){P.call(this,ps.Ja,l),this.size=d}p(Si,P);function Fr(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},d)}function Hr(){this.g=!0}Hr.prototype.ua=function(){this.g=!1};function th(l,d,f,b,D,O){l.info(function(){if(l.g)if(O){var $="",ge=O.split("&");for(let Pe=0;Pe<ge.length;Pe++){var ut=ge[Pe].split("=");if(ut.length>1){const xt=ut[0];ut=ut[1];const Yn=xt.split("_");$=Yn.length>=2&&Yn[1]=="type"?$+(xt+"="+ut+"&"):$+(xt+"=redacted&")}}}else $=null;else $=O;return"XMLHTTP REQ ("+b+") [attempt "+D+"]: "+d+`
`+f+`
`+$})}function nh(l,d,f,b,D,O,$){l.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+D+"]: "+d+`
`+f+`
`+O+" "+$})}function X(l,d,f,b){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+te(l,f)+(b?" "+b:"")})}function G(l,d){l.info(function(){return"TIMEOUT: "+d})}Hr.prototype.info=function(){};function te(l,d){if(!l.g)return d;if(!d)return null;try{const O=JSON.parse(d);if(O){for(l=0;l<O.length;l++)if(Array.isArray(O[l])){var f=O[l];if(!(f.length<2)){var b=f[1];if(Array.isArray(b)&&!(b.length<1)){var D=b[0];if(D!="noop"&&D!="stop"&&D!="close")for(let $=1;$<b.length;$++)b[$]=""}}}}return Ne(O)}catch{return d}}var me={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},z={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ke;function vt(){}p(vt,Hs),vt.prototype.g=function(){return new XMLHttpRequest},ke=new vt;function lt(l){return encodeURIComponent(String(l))}function Tn(l){var d=1;l=l.split(":");const f=[];for(;d>0&&l.length;)f.push(l.shift()),d--;return l.length&&f.push(l.join(":")),f}function Dt(l,d,f,b){this.j=l,this.i=d,this.l=f,this.S=b||1,this.V=new oe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Us}function Us(){this.i=null,this.g="",this.h=!1}var Bs={},gs={};function ys(l,d,f){l.M=1,l.A=xl(Ot(d)),l.u=f,l.R=!0,le(l,null)}function le(l,d){l.F=Date.now(),en(l),l.B=Ot(l.A);var f=l.B,b=l.S;Array.isArray(b)||(b=[String(b)]),gf(f.i,"t",b),l.C=0,f=l.j.L,l.h=new Us,l.g=Df(l.j,f?d:null,!l.u),l.P>0&&(l.O=new W(h(l.Y,l,l.g),l.P)),d=l.V,f=l.g,b=l.ba;var D="readystatechange";Array.isArray(D)||(D&&(ze[0]=D.toString()),D=ze);for(let O=0;O<D.length;O++){const $=_t(f,D[O],b||d.handleEvent,!1,d.h||d);if(!$)break;d.g[$.key]=$}d=l.J?ne(l.J):{},l.u?(l.v||(l.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,d)):(l.v="GET",l.g.ea(l.B,l.v,null,d)),Sn(),th(l.i,l.v,l.B,l.l,l.S,l.u)}Dt.prototype.ba=function(l){l=l.target;const d=this.O;d&&$s(l)==3?d.j():this.Y(l)},Dt.prototype.Y=function(l){try{if(l==this.g)e:{const ge=$s(this.g),ut=this.g.ya(),Pe=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||Ef(this.g)))){this.K||ge!=4||ut==7||(ut==8||Pe<=0?Sn(3):Sn(2)),Ti(this);var d=this.g.ca();this.X=d;var f=Ce(this);if(this.o=d==200,nh(this.i,this.v,this.B,this.l,this.S,ge,d),this.o){if(this.U&&!this.L){t:{if(this.g){var b,D=this.g;if((b=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(b)){var O=b;break t}}O=null}if(l=O)X(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ni(this,l);else{this.o=!1,this.m=3,ot(12),Kn(this),qs(this);break e}}if(this.R){l=!0;let xt;for(;!this.K&&this.C<f.length;)if(xt=Ur(this,f),xt==gs){ge==4&&(this.m=4,ot(14),l=!1),X(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==Bs){this.m=4,ot(15),X(this.i,this.l,f,"[Invalid Chunk]"),l=!1;break}else X(this.i,this.l,xt,null),Ni(this,xt);if(kt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||f.length!=0||this.h.h||(this.m=1,ot(16),l=!1),this.o=this.o&&l,!l)X(this.i,this.l,f,"[Invalid Chunked Response]"),Kn(this),qs(this);else if(f.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),oh($),$.P=!0,ot(11))}}else X(this.i,this.l,f,null),Ni(this,f);ge==4&&Kn(this),this.o&&!this.K&&(ge==4?Cf(this.j,this):(this.o=!1,en(this)))}else YE(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,ot(12)):(this.m=0,ot(13)),Kn(this),qs(this)}}}catch{}finally{}};function Ce(l){if(!kt(l))return l.g.la();const d=Ef(l.g);if(d==="")return"";let f="";const b=d.length,D=$s(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Kn(l),qs(l),"";l.h.i=new o.TextDecoder}for(let O=0;O<b;O++)l.h.h=!0,f+=l.h.i.decode(d[O],{stream:!(D&&O==b-1)});return d.length=0,l.h.g+=f,l.C=0,l.h.g}function kt(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function Ur(l,d){var f=l.C,b=d.indexOf(`
`,f);return b==-1?gs:(f=Number(d.substring(f,b)),isNaN(f)?Bs:(b+=1,b+f>d.length?gs:(d=d.slice(b,b+f),l.C=b+f,d)))}Dt.prototype.cancel=function(){this.K=!0,Kn(this)};function en(l){l.T=Date.now()+l.H,Pa(l,l.H)}function Pa(l,d){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Fr(h(l.aa,l),d)}function Ti(l){l.D&&(o.clearTimeout(l.D),l.D=null)}Dt.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(G(this.i,this.B),this.M!=2&&(Sn(),ot(17)),Kn(this),this.m=2,qs(this)):Pa(this,this.T-l)};function qs(l){l.j.I==0||l.K||Cf(l.j,l)}function Kn(l){Ti(l);var d=l.O;d&&typeof d.dispose=="function"&&d.dispose(),l.O=null,yt(l.V),l.g&&(d=l.g,l.g=null,d.abort(),d.dispose())}function Ni(l,d){try{var f=l.j;if(f.I!=0&&(f.g==l||ue(f.h,l))){if(!l.L&&ue(f.h,l)&&f.I==3){try{var b=f.Ba.g.parse(d)}catch{b=null}if(Array.isArray(b)&&b.length==3){var D=b;if(D[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<l.F)kl(f),El(f);else break e;ah(f),ot(18)}}else f.xa=D[1],0<f.xa-f.K&&D[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Fr(h(f.Va,f),6e3));ce(f.h)<=1&&f.ta&&(f.ta=void 0)}else $r(f,11)}else if((l.L||f.g==l)&&kl(f),!_(d))for(D=f.Ba.g.parse(d),d=0;d<D.length;d++){let Pe=D[d];const xt=Pe[0];if(!(xt<=f.K))if(f.K=xt,Pe=Pe[1],f.I==2)if(Pe[0]=="c"){f.M=Pe[1],f.ba=Pe[2];const Yn=Pe[3];Yn!=null&&(f.ka=Yn,f.j.info("VER="+f.ka));const Jr=Pe[4];Jr!=null&&(f.za=Jr,f.j.info("SVER="+f.za));const Js=Pe[5];Js!=null&&typeof Js=="number"&&Js>0&&(b=1.5*Js,f.O=b,f.j.info("backChannelRequestTimeoutMs_="+b)),b=f;const Ws=l.g;if(Ws){const Tl=Ws.g?Ws.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tl){var O=b.h;O.g||Tl.indexOf("spdy")==-1&&Tl.indexOf("quic")==-1&&Tl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(ie(O,O.h),O.h=null))}if(b.G){const lh=Ws.g?Ws.g.getResponseHeader("X-HTTP-Session-Id"):null;lh&&(b.wa=lh,Ae(b.J,b.G,lh))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-l.F,f.j.info("Handshake RTT: "+f.T+"ms")),b=f;var $=l;if(b.na=Rf(b,b.L?b.ba:null,b.W),$.L){Br(b.h,$);var ge=$,ut=b.O;ut&&(ge.H=ut),ge.D&&(Ti(ge),en(ge)),b.g=$}else Nf(b);f.i.length>0&&_l(f)}else Pe[0]!="stop"&&Pe[0]!="close"||$r(f,7);else f.I==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?$r(f,7):ih(f):Pe[0]!="noop"&&f.l&&f.l.qa(Pe),f.A=0)}}Sn(4)}catch{}}var wl=class{constructor(l,d){this.g=l,this.map=d}};function Ra(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Q(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ce(l){return l.h?1:l.g?l.g.size:0}function ue(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function ie(l,d){l.g?l.g.add(d):l.h=d}function Br(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}Ra.prototype.cancel=function(){if(this.i=qr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function qr(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const f of l.g.values())d=d.concat(f.G);return d}return E(l.i)}var tn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ct(l,d){if(l){l=l.split("&");for(let f=0;f<l.length;f++){const b=l[f].indexOf("=");let D,O=null;b>=0?(D=l[f].substring(0,b),O=l[f].substring(b+1)):D=l[f],d(D,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function nn(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;l instanceof nn?(this.l=l.l,Qn(this,l.j),this.o=l.o,this.g=l.g,wt(this,l.u),this.h=l.h,Wt(this,yf(l.i)),this.m=l.m):l&&(d=String(l).match(tn))?(this.l=!1,Qn(this,d[1]||"",!0),this.o=Da(d[2]||""),this.g=Da(d[3]||"",!0),wt(this,d[4]),this.h=Da(d[5]||"",!0),Wt(this,d[6]||"",!0),this.m=Da(d[7]||"")):(this.l=!1,this.i=new La(null,this.l))}nn.prototype.toString=function(){const l=[];var d=this.j;d&&l.push(Oa(d,df,!0),":");var f=this.g;return(f||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Oa(d,df,!0),"@"),l.push(lt(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&l.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&l.push("/"),l.push(Oa(f,f.charAt(0)=="/"?BE:UE,!0))),(f=this.i.toString())&&l.push("?",f),(f=this.m)&&l.push("#",Oa(f,zE)),l.join("")},nn.prototype.resolve=function(l){const d=Ot(this);let f=!!l.j;f?Qn(d,l.j):f=!!l.o,f?d.o=l.o:f=!!l.g,f?d.g=l.g:f=l.u!=null;var b=l.h;if(f)wt(d,l.u);else if(f=!!l.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var D=d.h.lastIndexOf("/");D!=-1&&(b=d.h.slice(0,D+1)+b)}if(D=b,D==".."||D==".")b="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){b=D.lastIndexOf("/",0)==0,D=D.split("/");const O=[];for(let $=0;$<D.length;){const ge=D[$++];ge=="."?b&&$==D.length&&O.push(""):ge==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),b&&$==D.length&&O.push("")):(O.push(ge),b=!0)}b=O.join("/")}else b=D}return f?d.h=b:f=l.i.toString()!=="",f?Wt(d,yf(l.i)):f=!!l.m,f&&(d.m=l.m),d};function Ot(l){return new nn(l)}function Qn(l,d,f){l.j=f?Da(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function wt(l,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);l.u=d}else l.u=null}function Wt(l,d,f){d instanceof La?(l.i=d,$E(l.i,l.l)):(f||(d=Oa(d,qE)),l.i=new La(d,l.l))}function Ae(l,d,f){l.i.set(d,f)}function xl(l){return Ae(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Da(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Oa(l,d,f){return typeof l=="string"?(l=encodeURI(l).replace(d,HE),f&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function HE(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var df=/[#\/\?@]/g,UE=/[#\?:]/g,BE=/[#\?]/g,qE=/[#\?@]/g,zE=/#/g;function La(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function zr(l){l.g||(l.g=new Map,l.h=0,l.i&&ct(l.i,function(d,f){l.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=La.prototype,t.add=function(l,d){zr(this),this.i=null,l=ji(this,l);let f=this.g.get(l);return f||this.g.set(l,f=[]),f.push(d),this.h+=1,this};function mf(l,d){zr(l),d=ji(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function pf(l,d){return zr(l),d=ji(l,d),l.g.has(d)}t.forEach=function(l,d){zr(this),this.g.forEach(function(f,b){f.forEach(function(D){l.call(d,D,b,this)},this)},this)};function ff(l,d){zr(l);let f=[];if(typeof d=="string")pf(l,d)&&(f=f.concat(l.g.get(ji(l,d))));else for(l=Array.from(l.g.values()),d=0;d<l.length;d++)f=f.concat(l[d]);return f}t.set=function(l,d){return zr(this),this.i=null,l=ji(this,l),pf(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=ff(this,l),l.length>0?String(l[0]):d):d};function gf(l,d,f){mf(l,d),f.length>0&&(l.i=null,l.g.set(ji(l,d),E(f)),l.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(let b=0;b<d.length;b++){var f=d[b];const D=lt(f);f=ff(this,f);for(let O=0;O<f.length;O++){let $=D;f[O]!==""&&($+="="+lt(f[O])),l.push($)}}return this.i=l.join("&")};function yf(l){const d=new La;return d.i=l.i,l.g&&(d.g=new Map(l.g),d.h=l.h),d}function ji(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function $E(l,d){d&&!l.j&&(zr(l),l.i=null,l.g.forEach(function(f,b){const D=b.toLowerCase();b!=D&&(mf(this,b),gf(this,D,f))},l)),l.j=d}function JE(l,d){const f=new Hr;if(o.Image){const b=new Image;b.onload=m(zs,f,"TestLoadImage: loaded",!0,d,b),b.onerror=m(zs,f,"TestLoadImage: error",!1,d,b),b.onabort=m(zs,f,"TestLoadImage: abort",!1,d,b),b.ontimeout=m(zs,f,"TestLoadImage: timeout",!1,d,b),o.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=l}else d(!1)}function WE(l,d){const f=new Hr,b=new AbortController,D=setTimeout(()=>{b.abort(),zs(f,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:b.signal}).then(O=>{clearTimeout(D),O.ok?zs(f,"TestPingServer: ok",!0,d):zs(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),zs(f,"TestPingServer: error",!1,d)})}function zs(l,d,f,b,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),b(f)}catch{}}function GE(){this.g=new Zt}function sh(l){this.i=l.Sb||null,this.h=l.ab||!1}p(sh,Hs),sh.prototype.g=function(){return new bl(this.i,this.h)};function bl(l,d){Oe.call(this),this.H=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(bl,Oe),t=bl.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=d,this.readyState=1,Va(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(d.body=l),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ma(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Va(this)),this.g&&(this.readyState=3,Va(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vf(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function vf(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Ma(this):Va(this),this.readyState==3&&vf(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Ma(this))},t.Na=function(l){this.g&&(this.response=l,Ma(this))},t.ga=function(){this.g&&Ma(this)};function Ma(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Va(l)}t.setRequestHeader=function(l,d){this.A.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,l.push(f[0]+": "+f[1]),f=d.next();return l.join(`\r
`)};function Va(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(bl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function wf(l){let d="";return M(l,function(f,b){d+=b,d+=":",d+=f,d+=`\r
`}),d}function rh(l,d,f){e:{for(b in f){var b=!1;break e}b=!0}b||(f=wf(f),typeof l=="string"?f!=null&&lt(f):Ae(l,d,f))}function Qe(l){Oe.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Qe,Oe);var KE=/^https?$/i,QE=["POST","PUT"];t=Qe.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,d,f,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ke.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(O){xf(this,O);return}if(l=f||"",f=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var D in b)f.set(D,b[D]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const O of b.keys())f.set(O,b.get(O));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),D=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(QE,d,void 0)>=0)||b||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,$]of f)this.g.setRequestHeader(O,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(O){xf(this,O)}};function xf(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.o=5,bf(l),Il(l)}function bf(l){l.A||(l.A=!0,Le(l,"complete"),Le(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,Le(this,"complete"),Le(this,"abort"),Il(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Il(this,!0)),Qe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?If(this):this.Xa())},t.Xa=function(){If(this)};function If(l){if(l.h&&typeof i<"u"){if(l.v&&$s(l)==4)setTimeout(l.Ca.bind(l),0);else if(Le(l,"readystatechange"),$s(l)==4){l.h=!1;try{const O=l.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var b;if(b=O===0){let $=String(l.D).match(tn)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),b=!KE.test($?$.toLowerCase():"")}f=b}if(f)Le(l,"complete"),Le(l,"success");else{l.o=6;try{var D=$s(l)>2?l.g.statusText:""}catch{D=""}l.l=D+" ["+l.ca()+"]",bf(l)}}finally{Il(l)}}}}function Il(l,d){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const f=l.g;l.g=null,d||Le(l,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function $s(l){return l.g?l.g.readyState:0}t.ca=function(){try{return $s(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),Rt(d)}};function Ef(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function YE(l){const d={};l=(l.g&&$s(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<l.length;b++){if(_(l[b]))continue;var f=Tn(l[b]);const D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=d[D]||[];d[D]=O,O.push(f)}J(d,function(b){return b.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fa(l,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[l]||d}function _f(l){this.za=0,this.i=[],this.j=new Hr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fa("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fa("baseRetryDelayMs",5e3,l),this.Za=Fa("retryDelaySeedMs",1e4,l),this.Ta=Fa("forwardChannelMaxRetries",2,l),this.va=Fa("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Ra(l&&l.concurrentRequestLimit),this.Ba=new GE,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=_f.prototype,t.ka=8,t.I=1,t.connect=function(l,d,f,b){ot(0),this.W=l,this.H=d||{},f&&b!==void 0&&(this.H.OSID=f,this.H.OAID=b),this.F=this.X,this.J=Rf(this,null,this.W),_l(this)};function ih(l){if(kf(l),l.I==3){var d=l.V++,f=Ot(l.J);if(Ae(f,"SID",l.M),Ae(f,"RID",d),Ae(f,"TYPE","terminate"),Ha(l,f),d=new Dt(l,l.j,d),d.M=2,d.A=xl(Ot(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=d.A,f=!0),f||(d.g=Df(d.j,null),d.g.ea(d.A)),d.F=Date.now(),en(d)}Pf(l)}function El(l){l.g&&(oh(l),l.g.cancel(),l.g=null)}function kf(l){El(l),l.v&&(o.clearTimeout(l.v),l.v=null),kl(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function _l(l){if(!Q(l.h)&&!l.m){l.m=!0;var d=l.Ea;L||v(),U||(L(),U=!0),S.add(d,l),l.D=0}}function XE(l,d){return ce(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=d.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Fr(h(l.Ea,l,d),Af(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const D=new Dt(this,this.j,l);let O=this.o;if(this.U&&(O?(O=ne(O),Be(O,this.U)):O=this.U),this.u!==null||this.R||(D.J=O,O=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var b=this.i[f];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(d+=b,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Tf(this,D,d),f=Ot(this.J),Ae(f,"RID",l),Ae(f,"CVER",22),this.G&&Ae(f,"X-HTTP-Session-Id",this.G),Ha(this,f),O&&(this.R?d="headers="+lt(wf(O))+"&"+d:this.u&&rh(f,this.u,O)),ie(this.h,D),this.Ra&&Ae(f,"TYPE","init"),this.S?(Ae(f,"$req",d),Ae(f,"SID","null"),D.U=!0,ys(D,f,null)):ys(D,f,d),this.I=2}}else this.I==3&&(l?Sf(this,l):this.i.length==0||Q(this.h)||Sf(this))};function Sf(l,d){var f;d?f=d.l:f=l.V++;const b=Ot(l.J);Ae(b,"SID",l.M),Ae(b,"RID",f),Ae(b,"AID",l.K),Ha(l,b),l.u&&l.o&&rh(b,l.u,l.o),f=new Dt(l,l.j,f,l.D+1),l.u===null&&(f.J=l.o),d&&(l.i=d.G.concat(l.i)),d=Tf(l,f,1e3),f.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),ie(l.h,f),ys(f,b,d)}function Ha(l,d){l.H&&M(l.H,function(f,b){Ae(d,b,f)}),l.l&&M({},function(f,b){Ae(d,b,f)})}function Tf(l,d,f){f=Math.min(l.i.length,f);const b=l.l?h(l.l.Ka,l.l,l):null;e:{var D=l.i;let ge=-1;for(;;){const ut=["count="+f];ge==-1?f>0?(ge=D[0].g,ut.push("ofs="+ge)):ge=0:ut.push("ofs="+ge);let Pe=!0;for(let xt=0;xt<f;xt++){var O=D[xt].g;const Yn=D[xt].map;if(O-=ge,O<0)ge=Math.max(0,D[xt].g-100),Pe=!1;else try{O="req"+O+"_"||"";try{var $=Yn instanceof Map?Yn:Object.entries(Yn);for(const[Jr,Js]of $){let Ws=Js;c(Js)&&(Ws=Ne(Js)),ut.push(O+Jr+"="+encodeURIComponent(Ws))}}catch(Jr){throw ut.push(O+"type="+encodeURIComponent("_badmap")),Jr}}catch{b&&b(Yn)}}if(Pe){$=ut.join("&");break e}}$=void 0}return l=l.i.splice(0,f),d.G=l,$}function Nf(l){if(!l.g&&!l.v){l.Y=1;var d=l.Da;L||v(),U||(L(),U=!0),S.add(d,l),l.A=0}}function ah(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Fr(h(l.Da,l),Af(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,jf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Fr(h(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ot(10),El(this),jf(this))};function oh(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function jf(l){l.g=new Dt(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var d=Ot(l.na);Ae(d,"RID","rpc"),Ae(d,"SID",l.M),Ae(d,"AID",l.K),Ae(d,"CI",l.F?"0":"1"),!l.F&&l.ia&&Ae(d,"TO",l.ia),Ae(d,"TYPE","xmlhttp"),Ha(l,d),l.u&&l.o&&rh(d,l.u,l.o),l.O&&(l.g.H=l.O);var f=l.g;l=l.ba,f.M=1,f.A=xl(Ot(d)),f.u=null,f.R=!0,le(f,l)}t.Va=function(){this.C!=null&&(this.C=null,El(this),ah(this),ot(19))};function kl(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Cf(l,d){var f=null;if(l.g==d){kl(l),oh(l),l.g=null;var b=2}else if(ue(l.h,d))f=d.G,Br(l.h,d),b=1;else return;if(l.I!=0){if(d.o)if(b==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var D=l.D;b=fs(),Le(b,new Si(b,f)),_l(l)}else Nf(l);else if(D=d.m,D==3||D==0&&d.X>0||!(b==1&&XE(l,d)||b==2&&ah(l)))switch(f&&f.length>0&&(d=l.h,d.i=d.i.concat(f)),D){case 1:$r(l,5);break;case 4:$r(l,10);break;case 3:$r(l,6);break;default:$r(l,2)}}}function Af(l,d){let f=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(f*=2),f*d}function $r(l,d){if(l.j.info("Error code "+d),d==2){var f=h(l.bb,l),b=l.Ua;const D=!b;b=new nn(b||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Qn(b,"https"),xl(b),D?JE(b.toString(),f):WE(b.toString(),f)}else ot(2);l.I=0,l.l&&l.l.pa(d),Pf(l),kf(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Pf(l){if(l.I=0,l.ja=[],l.l){const d=qr(l.h);(d.length!=0||l.i.length!=0)&&(C(l.ja,d),C(l.ja,l.i),l.h.i.length=0,E(l.i),l.i.length=0),l.l.oa()}}function Rf(l,d,f){var b=f instanceof nn?Ot(f):new nn(f);if(b.g!="")d&&(b.g=d+"."+b.g),wt(b,b.u);else{var D=o.location;b=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;const O=new nn(null);b&&Qn(O,b),d&&(O.g=d),D&&wt(O,D),f&&(O.h=f),b=O}return f=l.G,d=l.wa,f&&d&&Ae(b,f,d),Ae(b,"VER",l.ka),Ha(l,b),b}function Df(l,d,f){if(d&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Aa&&!l.ma?new Qe(new sh({ab:f})):new Qe(l.ma),d.Fa(l.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Of(){}t=Of.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Sl(){}Sl.prototype.g=function(l,d){return new pn(l,d)};function pn(l,d){Oe.call(this),this.g=new _f(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(l?l["X-WebChannel-Client-Profile"]=d.sa:l={"X-WebChannel-Client-Profile":d.sa}),this.g.U=l,(l=d&&d.Qb)&&!_(l)&&(this.g.u=l),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Ci(this)}p(pn,Oe),pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){ih(this.g)},pn.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var f={};f.__data__=l,l=f}else this.v&&(f={},f.__data__=Ne(l),l=f);d.i.push(new wl(d.Ya++,l)),d.I==3&&_l(d)},pn.prototype.N=function(){this.g.l=null,delete this.j,ih(this.g),delete this.g,pn.Z.N.call(this)};function Lf(l){ja.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const f in d){l=f;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}p(Lf,ja);function Mf(){Ca.call(this),this.status=1}p(Mf,Ca);function Ci(l){this.g=l}p(Ci,Of),Ci.prototype.ra=function(){Le(this.g,"a")},Ci.prototype.qa=function(l){Le(this.g,new Lf(l))},Ci.prototype.pa=function(l){Le(this.g,new Mf)},Ci.prototype.oa=function(){Le(this.g,"b")},Sl.prototype.createWebChannel=Sl.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,Kb=function(){return new Sl},Gb=function(){return fs()},Wb=ps,em={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},me.NO_ERROR=0,me.TIMEOUT=8,me.HTTP_ERROR=6,vc=me,z.COMPLETE="complete",Jb=z,Ei.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",Oe.prototype.listen=Oe.prototype.J,so=Ei,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa,$b=Qe}).apply(typeof Jl<"u"?Jl:typeof self<"u"?self:typeof window<"u"?window:{});const ky="@firebase/firestore",Sy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _a="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new fp("@firebase/firestore");function Pi(){return pi.logLevel}function K(t,...e){if(pi.logLevel<=we.DEBUG){const n=e.map(Np);pi.debug(`Firestore (${_a}): ${t}`,...n)}}function Rs(t,...e){if(pi.logLevel<=we.ERROR){const n=e.map(Np);pi.error(`Firestore (${_a}): ${t}`,...n)}}function da(t,...e){if(pi.logLevel<=we.WARN){const n=e.map(Np);pi.warn(`Firestore (${_a}): ${t}`,...n)}}function Np(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Qb(t,s,n)}function Qb(t,e,n){let s=`FIRESTORE (${_a}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Rs(s),new Error(s)}function Se(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||Qb(e,r,s)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Ms{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Cj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}}class Aj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Pj{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0,42304);let s=this.i;const r=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let i=new br;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new br,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},c=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new br)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Se(typeof s.accessToken=="string",31837,{l:s}),new Yb(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class Rj{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Dj{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new Rj(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ty{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Oj{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Se(this.o===void 0,3512);const s=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ty(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ty(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=Lj(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function xe(t,e){return t<e?-1:t>e?1:0}function tm(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Bh(r)===Bh(i)?xe(r,i):Bh(r)?1:-1}return xe(t.length,e.length)}const Mj=55296,Vj=57343;function Bh(t){const e=t.charCodeAt(0);return e>=Mj&&e<=Vj}function ma(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="__name__";class ts{constructor(e,n,s){n===void 0?n=0:n>e.length&&de(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&de(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return ts.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ts?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=ts.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return xe(e.length,n.length)}static compareSegments(e,n){const s=ts.isNumericId(e),r=ts.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?ts.extractNumericId(e).compare(ts.extractNumericId(n)):tm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xr.fromString(e.substring(4,e.length-2))}}class Je extends ts{construct(e,n,s){return new Je(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ee(B.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Je(n)}static emptyPath(){return new Je([])}}const Fj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends ts{construct(e,n,s){return new Nt(e,n,s)}static isValidIdentifier(e){return Fj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ny}static keyField(){return new Nt([Ny])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new ee(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new ee(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ee(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(s+=c,r++):(i(),r++)}if(i(),o)throw new ee(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Je.fromString(e))}static fromName(e){return new ae(Je.fromString(e).popFirst(5))}static empty(){return new ae(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(t,e,n){if(!n)throw new ee(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Uj(t,e,n,s){if(e===!0&&s===!0)throw new ee(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jy(t){if(!ae.isDocumentKey(t))throw new ee(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Xb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Cp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de(12329,{type:typeof t})}function fi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cp(t);throw new ee(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t,e){const n={typeString:t};return e&&(n.value=e),n}function dl(t,e){if(!Xb(t))throw new ee(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new ee(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy=-62135596800,Ay=1e6;class He{static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Ay);return new He(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Cy)throw new ee(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ay}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:He._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(dl(e,He._jsonSchema))return new He(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Cy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}He._jsonSchemaVersion="firestore/timestamp/1.0",He._jsonSchema={type:it("string",He._jsonSchemaVersion),seconds:it("number"),nanoseconds:it("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{static fromTimestamp(e){return new pe(e)}static min(){return new pe(new He(0,0))}static max(){return new pe(new He(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=-1;function Bj(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=pe.fromTimestamp(s===1e9?new He(n+1,0):new He(n,s));return new kr(r,ae.empty(),e)}function qj(t){return new kr(t.readTime,t.key,Jo)}class kr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new kr(pe.min(),ae.empty(),Jo)}static max(){return new kr(pe.max(),ae.empty(),Jo)}}function zj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==$j)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,s)=>{n(e)})}static reject(e){return new H((n,s)=>{s(e)})}static waitFor(e){return new H((n,s)=>{let r=0,i=0,o=!1;e.forEach(c=>{++r,c.next(()=>{++i,o&&i===r&&n()},u=>s(u))}),o=!0,i===r&&n()})}static or(e){let n=H.resolve(!1);for(const s of e)n=n.next(r=>r?H.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new H((s,r)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(m=>{o[h]=m,++c,c===i&&s(o)},m=>r(m))}})}static doWhile(e,n){return new H((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function Wj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Sa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap=-1;function Vu(t){return t==null}function su(t){return t===0&&1/t==-1/0}function Gj(t){return typeof t=="number"&&Number.isInteger(t)&&!su(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="";function Kj(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Py(e)),e=Qj(t.get(n),e);return Py(e)}function Qj(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case Zb:n+="";break;default:n+=i}}return n}function Py(t){return t+Zb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Mr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function eI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wl(this.root,e,this.comparator,!0)}}class Wl{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Tt.RED,this.left=r??Tt.EMPTY,this.right=i??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Tt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Tt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dy(this.data.getIterator())}getIteratorFrom(e){return new Dy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class Dy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new wn([])}unionWith(e){let n=new gt(Nt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ma(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new tI("Invalid base64 string: "+i):i}}(e);return new At(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new At(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}At.EMPTY_BYTE_STRING=new At("");const Yj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sr(t){if(Se(!!t,39018),typeof t=="string"){let e=0;const n=Yj.exec(t);if(Se(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Tr(t){return typeof t=="string"?At.fromBase64String(t):At.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="server_timestamp",sI="__type__",rI="__previous_value__",iI="__local_write_time__";function Pp(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sI])==null?void 0:s.stringValue)===nI}function Fu(t){const e=t.mapValue.fields[rI];return Pp(e)?Fu(e):e}function Wo(t){const e=Sr(t.mapValue.fields[iI].timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e,n,s,r,i,o,c,u,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=m}}const ru="(default)";class Go{constructor(e,n){this.projectId=e,this.database=n||ru}static empty(){return new Go("","")}get isDefaultDatabase(){return this.database===ru}isEqual(e){return e instanceof Go&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="__type__",Zj="__max__",Gl={mapValue:{}},oI="__vector__",iu="value";function Nr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Pp(t)?4:tC(t)?9007199254740991:eC(t)?10:11:de(28295,{value:t})}function hs(t,e){if(t===e)return!0;const n=Nr(t);if(n!==Nr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wo(t).isEqual(Wo(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Sr(r.timestampValue),c=Sr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Tr(r.bytesValue).isEqual(Tr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return et(r.geoPointValue.latitude)===et(i.geoPointValue.latitude)&&et(r.geoPointValue.longitude)===et(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return et(r.integerValue)===et(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=et(r.doubleValue),c=et(i.doubleValue);return o===c?su(o)===su(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return ma(t.arrayValue.values||[],e.arrayValue.values||[],hs);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Ry(o)!==Ry(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!hs(o[u],c[u])))return!1;return!0}(t,e);default:return de(52216,{left:t})}}function Ko(t,e){return(t.values||[]).find(n=>hs(n,e))!==void 0}function pa(t,e){if(t===e)return 0;const n=Nr(t),s=Nr(e);if(n!==s)return xe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=et(i.integerValue||i.doubleValue),u=et(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Oy(t.timestampValue,e.timestampValue);case 4:return Oy(Wo(t),Wo(e));case 5:return tm(t.stringValue,e.stringValue);case 6:return function(i,o){const c=Tr(i),u=Tr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const m=xe(c[h],u[h]);if(m!==0)return m}return xe(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=xe(et(i.latitude),et(o.latitude));return c!==0?c:xe(et(i.longitude),et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ly(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,E,C,w;const c=i.fields||{},u=o.fields||{},h=(g=c[iu])==null?void 0:g.arrayValue,m=(E=u[iu])==null?void 0:E.arrayValue,p=xe(((C=h==null?void 0:h.values)==null?void 0:C.length)||0,((w=m==null?void 0:m.values)==null?void 0:w.length)||0);return p!==0?p:Ly(h,m)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Gl.mapValue&&o===Gl.mapValue)return 0;if(i===Gl.mapValue)return 1;if(o===Gl.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),h=o.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const g=tm(u[p],m[p]);if(g!==0)return g;const E=pa(c[u[p]],h[m[p]]);if(E!==0)return E}return xe(u.length,m.length)}(t.mapValue,e.mapValue);default:throw de(23264,{he:n})}}function Oy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=Sr(t),s=Sr(e),r=xe(n.seconds,s.seconds);return r!==0?r:xe(n.nanos,s.nanos)}function Ly(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=pa(n[r],s[r]);if(i)return i}return xe(n.length,s.length)}function fa(t){return nm(t)}function nm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Sr(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Tr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=nm(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${nm(n.fields[o])}`;return r+"}"}(t.mapValue):de(61005,{value:t})}function wc(t){switch(Nr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fu(t);return e?16+wc(e):16;case 5:return 2*t.stringValue.length;case 6:return Tr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+wc(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return Mr(s.fields,(i,o)=>{r+=i.length+wc(o)}),r}(t.mapValue);default:throw de(13486,{value:t})}}function sm(t){return!!t&&"integerValue"in t}function Rp(t){return!!t&&"arrayValue"in t}function My(t){return!!t&&"nullValue"in t}function Vy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xc(t){return!!t&&"mapValue"in t}function eC(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[aI])==null?void 0:s.stringValue)===oI}function xo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Mr(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=xo(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xo(t.arrayValue.values[n]);return e}return{...t}}function tC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Zj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!xc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xo(n)}setAll(e){let n=Nt.emptyPath(),s={},r=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,s,r),s={},r=[],n=c.popLast()}o?s[c.lastSegment()]=xo(o):r.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());xc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];xc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Mr(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new on(xo(this.value))}}function lI(t){const e=[];return Mr(t.fields,(n,s)=>{const r=new Nt([n]);if(xc(s)){const i=lI(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,s,r,i,o,c){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Ut(e,0,pe.min(),pe.min(),pe.min(),on.empty(),0)}static newFoundDocument(e,n,s,r){return new Ut(e,1,n,pe.min(),s,r,0)}static newNoDocument(e,n){return new Ut(e,2,n,pe.min(),pe.min(),on.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,pe.min(),pe.min(),on.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n){this.position=e,this.inclusive=n}}function Fy(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=ae.comparator(ae.fromName(o.referenceValue),n.key):s=pa(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Hy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n="asc"){this.field=e,this.dir=n}}function nC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{}class dt extends cI{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new rC(e,n,s):n==="array-contains"?new oC(e,s):n==="in"?new lC(e,s):n==="not-in"?new cC(e,s):n==="array-contains-any"?new uC(e,s):new dt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new iC(e,s):new aC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(pa(n,this.value)):n!==null&&Nr(this.value)===Nr(n)&&this.matchesComparison(pa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ds extends cI{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ds(e,n)}matches(e){return uI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uI(t){return t.op==="and"}function hI(t){return sC(t)&&uI(t)}function sC(t){for(const e of t.filters)if(e instanceof ds)return!1;return!0}function rm(t){if(t instanceof dt)return t.field.canonicalString()+t.op.toString()+fa(t.value);if(hI(t))return t.filters.map(e=>rm(e)).join(",");{const e=t.filters.map(n=>rm(n)).join(",");return`${t.op}(${e})`}}function dI(t,e){return t instanceof dt?function(s,r){return r instanceof dt&&s.op===r.op&&s.field.isEqual(r.field)&&hs(s.value,r.value)}(t,e):t instanceof ds?function(s,r){return r instanceof ds&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,c)=>i&&dI(o,r.filters[c]),!0):!1}(t,e):void de(19439)}function mI(t){return t instanceof dt?function(n){return`${n.field.canonicalString()} ${n.op} ${fa(n.value)}`}(t):t instanceof ds?function(n){return n.op.toString()+" {"+n.getFilters().map(mI).join(" ,")+"}"}(t):"Filter"}class rC extends dt{constructor(e,n,s){super(e,n,s),this.key=ae.fromName(s.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class iC extends dt{constructor(e,n){super(e,"in",n),this.keys=pI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class aC extends dt{constructor(e,n){super(e,"not-in",n),this.keys=pI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function pI(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>ae.fromName(s.referenceValue))}class oC extends dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rp(n)&&Ko(n.arrayValue,this.value)}}class lC extends dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ko(this.value.arrayValue,n)}}class cC extends dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ko(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ko(this.value.arrayValue,n)}}class uC extends dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Ko(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n=null,s=[],r=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function Uy(t,e=null,n=[],s=[],r=null,i=null,o=null){return new hC(t,e,n,s,r,i,o)}function Dp(t){const e=fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>rm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Vu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>fa(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>fa(s)).join(",")),e.Te=n}return e.Te}function Op(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!dI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Hy(t.startAt,e.startAt)&&Hy(t.endAt,e.endAt)}function im(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n=null,s=[],r=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function dC(t,e,n,s,r,i,o,c){return new Hu(t,e,n,s,r,i,o,c)}function Lp(t){return new Hu(t)}function By(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mC(t){return t.collectionGroup!==null}function bo(t){const e=fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new gt(Nt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ou(i,s))}),n.has(Nt.keyField().canonicalString())||e.Ie.push(new ou(Nt.keyField(),s))}return e.Ie}function as(t){const e=fe(t);return e.Ee||(e.Ee=pC(e,bo(t))),e.Ee}function pC(t,e){if(t.limitType==="F")return Uy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new ou(r.field,i)});const n=t.endAt?new au(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new au(t.startAt.position,t.startAt.inclusive):null;return Uy(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function am(t,e,n){return new Hu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uu(t,e){return Op(as(t),as(e))&&t.limitType===e.limitType}function fI(t){return`${Dp(as(t))}|lt:${t.limitType}`}function Ri(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>mI(r)).join(", ")}]`),Vu(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>fa(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>fa(r)).join(",")),`Target(${s})`}(as(t))}; limitType=${t.limitType})`}function Bu(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):ae.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of bo(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,c,u){const h=Fy(o,c,u);return o.inclusive?h<=0:h<0}(s.startAt,bo(s),r)||s.endAt&&!function(o,c,u){const h=Fy(o,c,u);return o.inclusive?h>=0:h>0}(s.endAt,bo(s),r))}(t,e)}function fC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gI(t){return(e,n)=>{let s=!1;for(const r of bo(t)){const i=gC(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function gC(t,e,n){const s=t.field.isKeyField()?ae.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),h=c.data.field(i);return u!==null&&h!==null?pa(u,h):de(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return de(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Mr(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return eI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new Ke(ae.comparator);function Ds(){return yC}const yI=new Ke(ae.comparator);function ro(...t){let e=yI;for(const n of t)e=e.insert(n.key,n);return e}function vI(t){let e=yI;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function ti(){return Io()}function wI(){return Io()}function Io(){return new wi(t=>t.toString(),(t,e)=>t.isEqual(e))}const vC=new Ke(ae.comparator),wC=new gt(ae.comparator);function be(...t){let e=wC;for(const n of t)e=e.add(n);return e}const xC=new gt(xe);function bC(){return xC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:su(e)?"-0":e}}function xI(t){return{integerValue:""+t}}function IC(t,e){return Gj(e)?xI(e):Mp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(){this._=void 0}}function EC(t,e,n){return t instanceof lu?function(r,i){const o={fields:{[sI]:{stringValue:nI},[iI]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Pp(i)&&(i=Fu(i)),i&&(o.fields[rI]=i),{mapValue:o}}(n,e):t instanceof Qo?II(t,e):t instanceof Yo?EI(t,e):function(r,i){const o=bI(r,i),c=qy(o)+qy(r.Ae);return sm(o)&&sm(r.Ae)?xI(c):Mp(r.serializer,c)}(t,e)}function _C(t,e,n){return t instanceof Qo?II(t,e):t instanceof Yo?EI(t,e):n}function bI(t,e){return t instanceof cu?function(s){return sm(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class lu extends qu{}class Qo extends qu{constructor(e){super(),this.elements=e}}function II(t,e){const n=_I(e);for(const s of t.elements)n.some(r=>hs(r,s))||n.push(s);return{arrayValue:{values:n}}}class Yo extends qu{constructor(e){super(),this.elements=e}}function EI(t,e){let n=_I(e);for(const s of t.elements)n=n.filter(r=>!hs(r,s));return{arrayValue:{values:n}}}class cu extends qu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function qy(t){return et(t.integerValue||t.doubleValue)}function _I(t){return Rp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function kC(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof Qo&&r instanceof Qo||s instanceof Yo&&r instanceof Yo?ma(s.elements,r.elements,hs):s instanceof cu&&r instanceof cu?hs(s.Ae,r.Ae):s instanceof lu&&r instanceof lu}(t.transform,e.transform)}class SC{constructor(e,n){this.version=e,this.transformResults=n}}class os{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new os}static exists(e){return new os(void 0,e)}static updateTime(e){return new os(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zu{}function kI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new TI(t.key,os.none()):new ml(t.key,t.data,os.none());{const n=t.data,s=on.empty();let r=new gt(Nt.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Vr(t.key,s,new wn(r.toArray()),os.none())}}function TC(t,e,n){t instanceof ml?function(r,i,o){const c=r.value.clone(),u=$y(r.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Vr?function(r,i,o){if(!bc(r.precondition,i))return void i.convertToUnknownDocument(o.version);const c=$y(r.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(SI(r)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Eo(t,e,n,s){return t instanceof ml?function(i,o,c,u){if(!bc(i.precondition,o))return c;const h=i.value.clone(),m=Jy(i.fieldTransforms,u,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,s):t instanceof Vr?function(i,o,c,u){if(!bc(i.precondition,o))return c;const h=Jy(i.fieldTransforms,u,o),m=o.data;return m.setAll(SI(i)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,s):function(i,o,c){return bc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function NC(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=bI(s.transform,r||null);i!=null&&(n===null&&(n=on.empty()),n.set(s.field,i))}return n||null}function zy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&ma(s,r,(i,o)=>kC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ml extends zu{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Vr extends zu{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function SI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function $y(t,e,n){const s=new Map;Se(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,c=e.data.field(i.field);s.set(i.field,_C(o,c,n[r]))}return s}function Jy(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,EC(i,o,e))}return s}class TI extends zu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jC extends zu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&TC(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Eo(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Eo(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=wI();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(r.key)?null:c;const u=kI(o,c);u!==null&&s.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(pe.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&ma(this.mutations,e.mutations,(n,s)=>zy(n,s))&&ma(this.baseMutations,e.baseMutations,(n,s)=>zy(n,s))}}class Vp{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Se(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return vC}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Vp(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,Ie;function RC(t){switch(t){case B.OK:return de(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return de(15467,{code:t})}}function NI(t){if(t===void 0)return Rs("GRPC error has no .code"),B.UNKNOWN;switch(t){case st.OK:return B.OK;case st.CANCELLED:return B.CANCELLED;case st.UNKNOWN:return B.UNKNOWN;case st.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case st.INTERNAL:return B.INTERNAL;case st.UNAVAILABLE:return B.UNAVAILABLE;case st.UNAUTHENTICATED:return B.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case st.NOT_FOUND:return B.NOT_FOUND;case st.ALREADY_EXISTS:return B.ALREADY_EXISTS;case st.PERMISSION_DENIED:return B.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case st.ABORTED:return B.ABORTED;case st.OUT_OF_RANGE:return B.OUT_OF_RANGE;case st.UNIMPLEMENTED:return B.UNIMPLEMENTED;case st.DATA_LOSS:return B.DATA_LOSS;default:return de(39323,{code:t})}}(Ie=st||(st={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new xr([4294967295,4294967295],0);function Wy(t){const e=DC().encode(t),n=new zb;return n.update(e),new Uint8Array(n.digest())}function Gy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new xr([n,s],0),new xr([r,i],0)]}class Fp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new io(`Invalid padding: ${n}`);if(s<0)throw new io(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new io(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new io(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=xr.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(xr.fromNumber(s)));return r.compare(OC)===1&&(r=new xr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Wy(e),[s,r]=Gy(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Fp(i,r,n);return s.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=Wy(e),[s,r]=Gy(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class io extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,pl.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new $u(pe.min(),r,new Ke(xe),Ds(),be())}}class pl{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new pl(s,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class jI{constructor(e,n){this.targetId=e,this.Ce=n}}class CI{constructor(e,n,s=At.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Ky{constructor(){this.ve=0,this.Fe=Qy(),this.Me=At.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),n=be(),s=be();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:de(38017,{changeType:i})}}),new pl(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Qy()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Se(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ds(),this.Je=Kl(),this.He=Kl(),this.Ye=new Ke(xe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:de(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(im(i))if(s===0){const o=new ae(i.path);this.et(n,o,Ut.newNoDocument(o,pe.min()))}else Se(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,c;try{o=Tr(s).toUint8Array()}catch(u){if(u instanceof tI)return da("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Fp(o,r,i)}catch(u){return da(u instanceof io?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const c=this.ot(o);if(c){if(i.current&&im(c.target)){const u=new ae(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Ut.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=be();this.He.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new $u(e,n,this.Ye,this.je,s);return this.je=Ds(),this.Je=Kl(),this.He=Kl(),this.Ye=new Ke(xe),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ky,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new gt(xe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new gt(xe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ky),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Kl(){return new Ke(ae.comparator)}function Qy(){return new Ke(ae.comparator)}const MC={asc:"ASCENDING",desc:"DESCENDING"},VC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FC={and:"AND",or:"OR"};class HC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function om(t,e){return t.useProto3Json||Vu(e)?e:{value:e}}function uu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UC(t,e){return uu(t,e.toTimestamp())}function ls(t){return Se(!!t,49232),pe.fromTimestamp(function(n){const s=Sr(n);return new He(s.seconds,s.nanos)}(t))}function Hp(t,e){return lm(t,e).canonicalString()}function lm(t,e){const n=function(r){return new Je(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function PI(t){const e=Je.fromString(t);return Se(MI(e),10190,{key:e.toString()}),e}function cm(t,e){return Hp(t.databaseId,e.path)}function qh(t,e){const n=PI(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(DI(n))}function RI(t,e){return Hp(t.databaseId,e)}function BC(t){const e=PI(t);return e.length===4?Je.emptyPath():DI(e)}function um(t){return new Je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DI(t){return Se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Yy(t,e,n){return{name:cm(t,e),fields:n.value.mapValue.fields}}function qC(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:de(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(h,m){return h.useProto3Json?(Se(m===void 0||typeof m=="string",58123),At.fromBase64String(m||"")):(Se(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),At.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const m=h.code===void 0?B.UNKNOWN:NI(h.code);return new ee(m,h.message||"")}(o);n=new CI(s,r,i,c||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=qh(t,s.document.name),i=ls(s.document.updateTime),o=s.document.createTime?ls(s.document.createTime):pe.min(),c=new on({mapValue:{fields:s.document.fields}}),u=Ut.newFoundDocument(r,i,o,c),h=s.targetIds||[],m=s.removedTargetIds||[];n=new Ic(h,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=qh(t,s.document),i=s.readTime?ls(s.readTime):pe.min(),o=Ut.newNoDocument(r,i),c=s.removedTargetIds||[];n=new Ic([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=qh(t,s.document),i=s.removedTargetIds||[];n=new Ic([],i,r,null)}else{if(!("filter"in e))return de(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new PC(r,i),c=s.targetId;n=new jI(c,o)}}return n}function zC(t,e){let n;if(e instanceof ml)n={update:Yy(t,e.key,e.value)};else if(e instanceof TI)n={delete:cm(t,e.key)};else if(e instanceof Vr)n={update:Yy(t,e.key,e.data),updateMask:ZC(e.fieldMask)};else{if(!(e instanceof jC))return de(16599,{Vt:e.type});n={verify:cm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const c=o.transform;if(c instanceof lu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Qo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Yo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof cu)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw de(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:UC(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:de(27497)}(t,e.precondition)),n}function $C(t,e){return t&&t.length>0?(Se(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?ls(r.updateTime):ls(i);return o.isEqual(pe.min())&&(o=ls(i)),new SC(o,r.transformResults||[])}(n,e))):[]}function JC(t,e){return{documents:[RI(t,e.path)]}}function WC(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=RI(t,r);const i=function(h){if(h.length!==0)return LI(ds.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(m=>function(g){return{field:Di(g.field),direction:QC(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=om(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:r}}function GC(t){let e=BC(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Se(s===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=OI(p);return g instanceof ds&&hI(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(C){return new ou(Oi(C.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,Vu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,E=p.values||[];return new au(E,g)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const g=!p.before,E=p.values||[];return new au(E,g)}(n.endAt)),dC(e,r,o,i,c,"F",u,h)}function KC(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Oi(n.unaryFilter.field);return dt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Oi(n.unaryFilter.field);return dt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Oi(n.unaryFilter.field);return dt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Oi(n.unaryFilter.field);return dt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}}(t):t.fieldFilter!==void 0?function(n){return dt.create(Oi(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ds.create(n.compositeFilter.filters.map(s=>OI(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return de(1026)}}(n.compositeFilter.op))}(t):de(30097,{filter:t})}function QC(t){return MC[t]}function YC(t){return VC[t]}function XC(t){return FC[t]}function Di(t){return{fieldPath:t.canonicalString()}}function Oi(t){return Nt.fromServerFormat(t.fieldPath)}function LI(t){return t instanceof dt?function(n){if(n.op==="=="){if(Vy(n.value))return{unaryFilter:{field:Di(n.field),op:"IS_NAN"}};if(My(n.value))return{unaryFilter:{field:Di(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vy(n.value))return{unaryFilter:{field:Di(n.field),op:"IS_NOT_NAN"}};if(My(n.value))return{unaryFilter:{field:Di(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Di(n.field),op:YC(n.op),value:n.value}}}(t):t instanceof ds?function(n){const s=n.getFilters().map(r=>LI(r));return s.length===1?s[0]:{compositeFilter:{op:XC(n.op),filters:s}}}(t):de(54877,{filter:t})}function ZC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function MI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,s,r,i=pe.min(),o=pe.min(),c=At.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.yt=e}}function tA(t){const e=GC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?am(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.Cn=new sA}addToCollectionParentIndex(e,n){return this.Cn.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(kr.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(kr.min())}updateCollectionGroup(e,n,s){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class sA{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new gt(Je.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new gt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VI=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(VI,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ga(0)}static cr(){return new ga(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="LruGarbageCollector",rA=1048576;function ev([t,e],[n,s]){const r=xe(t,n);return r===0?xe(e,s):r}class iA{constructor(e){this.Ir=e,this.buffer=new gt(ev),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();ev(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class aA{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){K(Zy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Sa(n)?K(Zy,"Ignoring IndexedDB error during garbage collection: ",n):await ka(n)}await this.Vr(3e5)})}}class oA{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return H.resolve(Mu.ce);const s=new iA(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(Xy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xy):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,c,u,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(s=p,c=Date.now(),this.removeTargets(e,s,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,s))).next(p=>(h=Date.now(),Pi()<=we.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${r} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-m}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p})))}}function lA(t,e){return new oA(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.changes=new wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?H.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Eo(s.mutation,r,wn.empty(),He.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,be()).next(()=>s))}getLocalViewOfDocuments(e,n,s=be()){const r=ti();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=ro();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=ti();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,be()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,s,r){let i=Ds();const o=Io(),c=function(){return Io()}();return n.forEach((u,h)=>{const m=s.get(h.key);r.has(h.key)&&(m===void 0||m.mutation instanceof Vr)?i=i.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),Eo(m.mutation,h,m.mutation.getFieldMask(),He.now())):o.set(h.key,wn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,m)=>o.set(h,m)),n.forEach((h,m)=>c.set(h,new uA(m,o.get(h)??null))),c))}recalculateAndSaveOverlays(e,n){const s=Io();let r=new Ke((o,c)=>o-c),i=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let m=s.get(u)||wn.empty();m=c.applyToLocalView(h,m),s.set(u,m);const p=(r.get(c.batchId)||be()).add(u);r=r.insert(c.batchId,p)})}).next(()=>{const o=[],c=r.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,m=u.value,p=wI();m.forEach(g=>{if(!i.has(g)){const E=kI(n.get(g),s.get(g));E!==null&&p.set(g,E),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return H.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):H.resolve(ti());let c=Jo,u=i;return o.next(h=>H.forEach(h,(m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(m)?H.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{u=u.insert(m,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,be())).next(m=>({batchId:c,changes:vI(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(s=>{let r=ro();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=ro();return this.indexManager.getCollectionParents(e,i).next(c=>H.forEach(c,u=>{const h=function(p,g){return new Hu(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,s,r).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((u,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,Ut.newInvalidDocument(m)))});let c=ro();return o.forEach((u,h)=>{const m=i.get(u);m!==void 0&&Eo(m.mutation,h,wn.empty(),He.now()),Bu(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return H.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ls(r.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:tA(r.bundledQuery),readTime:ls(r.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this.overlays=new Ke(ae.comparator),this.qr=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ti();return H.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),H.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),H.resolve()}getOverlaysForCollection(e,n,s){const r=ti(),i=n.length+1,o=new ae(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>s&&r.set(u.getKey(),u)}return H.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ke((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>s){let m=i.get(h.largestBatchId);m===null&&(m=ti(),i=i.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const c=ti(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,m)=>c.set(h,m)),!(c.size()>=r)););return H.resolve(c)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new AC(n,s));let i=this.qr.get(n);i===void 0&&(i=be(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.sessionToken=At.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this.Qr=new gt(bt.$r),this.Ur=new gt(bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new bt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new bt(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new ae(new Je([])),s=new bt(n,e),r=new bt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ae(new Je([])),s=new bt(n,e),r=new bt(n,e+1);let i=be();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new bt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class bt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ae.comparator(e.key,n.key)||xe(e.Yr,n.Yr)}static Kr(e,n){return xe(e.Yr,n.Yr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new gt(bt.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new CC(i,n,s,r);this.mutationQueue.push(o);for(const c of r)this.Zr=this.Zr.add(new bt(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return H.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?Ap:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new bt(n,0),r=new bt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const c=this.Xr(o.Yr);i.push(c)}),H.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new gt(xe);return n.forEach(r=>{const i=new bt(r,0),o=new bt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],c=>{s=s.add(c.Yr)})}),H.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;ae.isDocumentKey(i)||(i=i.child(""));const o=new bt(new ae(i),0);let c=new gt(xe);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!s.isPrefixOf(h)&&(h.length===r&&(c=c.add(u.Yr)),!0)},o),H.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Se(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return H.forEach(n.mutations,r=>{const i=new bt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new bt(n,0),r=this.Zr.firstAfterOrEqual(s);return H.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.ri=e,this.docs=function(){return new Ke(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return H.resolve(s?s.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let s=Ds();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ut.newInvalidDocument(r))}),H.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Ds();const o=n.path,c=new ae(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||zj(qj(m),s)<=0||(r.has(m.key)||Bu(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return H.resolve(i)}getAllFromCollectionGroup(e,n,s,r){de(9500)}ii(e,n){return H.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new yA(this)}getSize(e){return H.resolve(this.size)}}class yA extends cA{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),H.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.persistence=e,this.si=new wi(n=>Dp(n),Op),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.oi=0,this._i=new Up,this.targetCount=0,this.ai=ga.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),H.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ga(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Pr(n),H.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=n&&s.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),H.waitFor(i).next(()=>r)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return H.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),H.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),H.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return H.resolve(s)}containsKey(e,n){return H.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n){this.ui={},this.overlays={},this.ci=new Mu(0),this.li=!1,this.li=!0,this.hi=new pA,this.referenceDelegate=e(this),this.Pi=new vA(this),this.indexManager=new nA,this.remoteDocumentCache=function(r){return new gA(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new eA(n),this.Ii=new dA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new fA(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){K("MemoryPersistence","Starting transaction:",e);const r=new wA(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return H.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class wA extends Jj{constructor(e){super(),this.currentSequenceNumber=e}}class Bp{constructor(e){this.persistence=e,this.Ri=new Up,this.Vi=null}static mi(e){return new Bp(e)}get fi(){if(this.Vi)return this.Vi;throw de(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),H.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),H.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,s=>{const r=ae.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,pe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return H.or([()=>H.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class hu{constructor(e,n){this.persistence=e,this.pi=new wi(s=>Kj(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=lA(this,n)}static mi(e,n){return new hu(e,n)}Ei(){}di(e){return H.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return H.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?H.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(c=>{c||(s++,i.removeEntry(o,pe.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),H.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),H.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),H.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wc(e.data.value)),n}br(e,n,s){return H.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return H.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=be(),r=be();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new qp(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return QS()?8:Wj(qt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new xA;return this.Ss(e,n,o).next(c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(Pi()<=we.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Ri(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(Pi()<=we.DEBUG&&K("QueryEngine","Query:",Ri(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Pi()<=we.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Ri(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,as(n))):H.resolve())}ys(e,n){if(By(n))return H.resolve(null);let s=as(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=am(n,null,"F"),s=as(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=be(...i);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,s).next(u=>{const h=this.Ds(n,c);return this.Cs(n,h,o,u.readTime)?this.ys(e,am(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,s,r){return By(n)||r.isEqual(pe.min())?H.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?H.resolve(null):(Pi()<=we.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ri(n)),this.vs(e,o,n,Bj(r,Jo)).next(c=>c))})}Ds(e,n){let s=new gt(gI(e));return n.forEach((r,i)=>{Bu(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return Pi()<=we.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Ri(n)),this.ps.getDocumentsMatchingQuery(e,n,kr.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="LocalStore",IA=3e8;class EA{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Ke(xe),this.xs=new wi(i=>Dp(i),Op),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function _A(t,e,n,s){return new EA(t,e,n,s)}async function HI(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],c=[];let u=be();for(const h of r){o.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}for(const h of i){c.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(s,u).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:c}))})})}function kA(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,h,m){const p=h.batch,g=p.keys();let E=H.resolve();return g.forEach(C=>{E=E.next(()=>m.getEntry(u,C)).next(w=>{const k=h.docVersions.get(C);Se(k!==null,48541),w.version.compareTo(k)<0&&(p.applyToRemoteDocument(w,h),w.isValidDocument()&&(w.setReadTime(h.commitVersion),m.addEntry(w)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(c){let u=be();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function UI(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function SA(t,e){const n=fe(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const c=[];e.targetChanges.forEach((m,p)=>{const g=r.get(p);if(!g)return;c.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let E=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(At.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):m.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(m.resumeToken,s)),r=r.insert(p,E),function(w,k,y){return w.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=IA?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(g,E,m)&&c.push(n.Pi.updateTargetData(i,E))});let u=Ds(),h=be();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),c.push(TA(i,o,e.documentUpdates).next(m=>{u=m.ks,h=m.qs})),!s.isEqual(pe.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));c.push(m)}return H.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.Ms=r,i))}function TA(t,e,n){let s=be(),r=be();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Ds();return n.forEach((c,u)=>{const h=i.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(c)),u.isNoDocument()&&u.version.isEqual(pe.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):K(zp,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{ks:o,qs:r}})}function NA(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Ap),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function jA(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,H.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new ar(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function hm(t,e,n){const s=fe(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Sa(o))throw o;K(zp,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function tv(t,e,n){const s=fe(t);let r=pe.min(),i=be();return s.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,m){const p=fe(u),g=p.xs.get(m);return g!==void 0?H.resolve(p.Ms.get(g)):p.Pi.getTargetData(h,m)}(s,o,as(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:pe.min(),n?i:be())).next(c=>(CA(s,fC(e),c),{documents:c,Qs:i})))}function CA(t,e,n){let s=t.Os.get(e)||pe.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class nv{constructor(){this.activeTargetIds=bC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AA{constructor(){this.Mo=new nv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new nv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="ConnectivityMonitor";class rv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){K(sv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){K(sv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql=null;function dm(){return Ql===null?Ql=function(){return 268435456+Math.round(2147483648*Math.random())}():Ql++,"0x"+Ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="RestConnection",RA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===ru?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=dm(),c=this.zo(e,n.toUriEncodedString());K(zh,`Sending RPC '${e}' ${o}:`,c,s);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,i);const{host:h}=new URL(c),m=ba(h);return this.Jo(e,c,u,s,m).then(p=>(K(zh,`Received RPC '${e}' ${o}: `,p),p),p=>{throw da(zh,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",s),p})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_a}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=RA[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class LA extends DA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=dm();return new Promise((c,u)=>{const h=new $b;h.setWithCredentials(!0),h.listenOnce(Jb.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case vc.NO_ERROR:const p=h.getResponseJson();K(Vt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case vc.TIMEOUT:K(Vt,`RPC '${e}' ${o} timed out`),u(new ee(B.DEADLINE_EXCEEDED,"Request time out"));break;case vc.HTTP_ERROR:const g=h.getStatus();if(K(Vt,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const C=E==null?void 0:E.error;if(C&&C.status&&C.message){const w=function(y){const x=y.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(x)>=0?x:B.UNKNOWN}(C.status);u(new ee(w,C.message))}else u(new ee(B.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new ee(B.UNAVAILABLE,"Connection failed."));break;default:de(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{K(Vt,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(r);K(Vt,`RPC '${e}' ${o} sending request:`,r),h.send(n,"POST",m,s,15)})}T_(e,n,s){const r=dm(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Kb(),c=Gb(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const m=i.join("");K(Vt,`Creating RPC '${e}' stream ${r}: ${m}`,u);const p=o.createWebChannel(m,u);this.I_(p);let g=!1,E=!1;const C=new OA({Yo:k=>{E?K(Vt,`Not sending because RPC '${e}' stream ${r} is closed:`,k):(g||(K(Vt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),K(Vt,`RPC '${e}' stream ${r} sending:`,k),p.send(k))},Zo:()=>p.close()}),w=(k,y,x)=>{k.listen(y,j=>{try{x(j)}catch(R){setTimeout(()=>{throw R},0)}})};return w(p,so.EventType.OPEN,()=>{E||(K(Vt,`RPC '${e}' stream ${r} transport opened.`),C.o_())}),w(p,so.EventType.CLOSE,()=>{E||(E=!0,K(Vt,`RPC '${e}' stream ${r} transport closed`),C.a_(),this.E_(p))}),w(p,so.EventType.ERROR,k=>{E||(E=!0,da(Vt,`RPC '${e}' stream ${r} transport errored. Name:`,k.name,"Message:",k.message),C.a_(new ee(B.UNAVAILABLE,"The operation could not be completed")))}),w(p,so.EventType.MESSAGE,k=>{var y;if(!E){const x=k.data[0];Se(!!x,16349);const j=x,R=(j==null?void 0:j.error)||((y=j[0])==null?void 0:y.error);if(R){K(Vt,`RPC '${e}' stream ${r} received error:`,R);const L=R.status;let U=function(N){const T=st[N];if(T!==void 0)return NI(T)}(L),S=R.message;U===void 0&&(U=B.INTERNAL,S="Unknown error status: "+L+" with message "+R.message),E=!0,C.a_(new ee(U,S)),p.close()}else K(Vt,`RPC '${e}' stream ${r} received:`,x),C.u_(x)}}),w(c,Wb.STAT_EVENT,k=>{k.stat===em.PROXY?K(Vt,`RPC '${e}' stream ${r} detected buffering proxy`):k.stat===em.NOPROXY&&K(Vt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function $h(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(t){return new HC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&K("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="PersistentStream";class qI{constructor(e,n,s,r,i,o,c,u){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new BI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Rs(n.toString()),Rs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new ee(B.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return K(iv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(K(iv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class MA extends qI{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=qC(this.serializer,e),s=function(i){if(!("targetChange"in i))return pe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?pe.min():o.readTime?ls(o.readTime):pe.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=um(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=im(u)?{documents:JC(i,u)}:{query:WC(i,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=AI(i,o.resumeToken);const h=om(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(pe.min())>0){c.readTime=uu(i,o.snapshotVersion.toTimestamp());const h=om(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const s=KC(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=um(this.serializer),n.removeTarget=e,this.q_(n)}}class VA extends qI{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=$C(e.writeResults,e.commitTime),s=ls(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=um(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>zC(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{}class HA extends FA{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ee(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,lm(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ee(B.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,lm(n,s),r,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(B.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class UA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rs(n),this.aa=!1):K("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="RemoteStore";class BA{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{xi(this)&&(K(gi,"Restarting streams for network reachability change."),await async function(u){const h=fe(u);h.Ea.add(4),await fl(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Wu(h)}(this))})}),this.Ra=new UA(s,r)}}async function Wu(t){if(xi(t))for(const e of t.da)await e(!0)}async function fl(t){for(const e of t.da)await e(!1)}function zI(t,e){const n=fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Gp(n)?Wp(n):Ta(n).O_()&&Jp(n,e))}function $p(t,e){const n=fe(t),s=Ta(n);n.Ia.delete(e),s.O_()&&$I(n,e),n.Ia.size===0&&(s.O_()?s.L_():xi(n)&&n.Ra.set("Unknown"))}function Jp(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ta(t).Y_(e)}function $I(t,e){t.Va.Ue(e),Ta(t).Z_(e)}function Wp(t){t.Va=new LC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ta(t).start(),t.Ra.ua()}function Gp(t){return xi(t)&&!Ta(t).x_()&&t.Ia.size>0}function xi(t){return fe(t).Ea.size===0}function JI(t){t.Va=void 0}async function qA(t){t.Ra.set("Online")}async function zA(t){t.Ia.forEach((e,n)=>{Jp(t,e)})}async function $A(t,e){JI(t),Gp(t)?(t.Ra.ha(e),Wp(t)):t.Ra.set("Unknown")}async function JA(t,e,n){if(t.Ra.set("Online"),e instanceof CI&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const c of i.targetIds)r.Ia.has(c)&&(await r.remoteSyncer.rejectListen(c,o),r.Ia.delete(c),r.Va.removeTarget(c))}(t,e)}catch(s){K(gi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await du(t,s)}else if(e instanceof Ic?t.Va.Ze(e):e instanceof jI?t.Va.st(e):t.Va.tt(e),!n.isEqual(pe.min()))try{const s=await UI(t.localStore);n.compareTo(s)>=0&&await function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const m=i.Ia.get(h);m&&i.Ia.set(h,m.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,h)=>{const m=i.Ia.get(u);if(!m)return;i.Ia.set(u,m.withResumeToken(At.EMPTY_BYTE_STRING,m.snapshotVersion)),$I(i,u);const p=new ar(m.target,u,h,m.sequenceNumber);Jp(i,p)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(s){K(gi,"Failed to raise snapshot:",s),await du(t,s)}}async function du(t,e,n){if(!Sa(e))throw e;t.Ea.add(1),await fl(t),t.Ra.set("Offline"),n||(n=()=>UI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(gi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Wu(t)})}function WI(t,e){return e().catch(n=>du(t,n,e))}async function Gu(t){const e=fe(t),n=jr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ap;for(;WA(e);)try{const r=await NA(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,GA(e,r)}catch(r){await du(e,r)}GI(e)&&KI(e)}function WA(t){return xi(t)&&t.Ta.length<10}function GA(t,e){t.Ta.push(e);const n=jr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function GI(t){return xi(t)&&!jr(t).x_()&&t.Ta.length>0}function KI(t){jr(t).start()}async function KA(t){jr(t).ra()}async function QA(t){const e=jr(t);for(const n of t.Ta)e.ea(n.mutations)}async function YA(t,e,n){const s=t.Ta.shift(),r=Vp.from(s,e,n);await WI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Gu(t)}async function XA(t,e){e&&jr(t).X_&&await async function(s,r){if(function(o){return RC(o)&&o!==B.ABORTED}(r.code)){const i=s.Ta.shift();jr(s).B_(),await WI(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Gu(s)}}(t,e),GI(t)&&KI(t)}async function av(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),K(gi,"RemoteStore received new credentials");const s=xi(n);n.Ea.add(3),await fl(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Wu(n)}async function ZA(t,e){const n=fe(t);e?(n.Ea.delete(2),await Wu(n)):e||(n.Ea.add(2),await fl(n),n.Ra.set("Unknown"))}function Ta(t){return t.ma||(t.ma=function(n,s,r){const i=fe(n);return i.sa(),new MA(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:qA.bind(null,t),t_:zA.bind(null,t),r_:$A.bind(null,t),H_:JA.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Gp(t)?Wp(t):t.Ra.set("Unknown")):(await t.ma.stop(),JI(t))})),t.ma}function jr(t){return t.fa||(t.fa=function(n,s,r){const i=fe(n);return i.sa(),new VA(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:KA.bind(null,t),r_:XA.bind(null,t),ta:QA.bind(null,t),na:YA.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Gu(t)):(await t.fa.stop(),t.Ta.length>0&&(K(gi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,c=new Kp(e,n,o,r,i);return c.start(s),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qp(t,e){if(Rs("AsyncQueue",`${e}: ${t}`),Sa(t))return new ee(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{static emptySet(e){return new sa(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ae.comparator(n.key,s.key):(n,s)=>ae.comparator(n.key,s.key),this.keyedMap=ro(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof sa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new sa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(){this.ga=new Ke(ae.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):de(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class ya{constructor(e,n,s,r,i,o,c,u,h){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new ya(e,n,sa.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class t1{constructor(){this.queries=lv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=fe(n),i=r.queries;r.queries=lv(),i.forEach((o,c)=>{for(const u of c.Sa)u.onError(s)})})(this,new ee(B.ABORTED,"Firestore shutting down"))}}function lv(){return new wi(t=>fI(t),Uu)}async function n1(t,e){const n=fe(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new e1,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const c=Qp(o,`Initialization of query '${Ri(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Yp(n)}async function s1(t,e){const n=fe(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function r1(t,e){const n=fe(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(r)&&(s=!0);o.wa=r}}s&&Yp(n)}function i1(t,e,n){const s=fe(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function Yp(t){t.Ca.forEach(e=>{e.next()})}var mm,cv;(cv=mm||(mm={})).Ma="default",cv.Cache="cache";class a1{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new ya(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.key=e}}class YI{constructor(e){this.key=e}}class o1{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=be(),this.mutatedKeys=be(),this.eu=gI(e),this.tu=new sa(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new ov,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,c=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,p)=>{const g=r.get(m),E=Bu(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),w=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let k=!1;g&&E?g.data.isEqual(E.data)?C!==w&&(s.track({type:3,doc:E}),k=!0):this.su(g,E)||(s.track({type:2,doc:E}),k=!0,(u&&this.eu(E,u)>0||h&&this.eu(E,h)<0)&&(c=!0)):!g&&E?(s.track({type:0,doc:E}),k=!0):g&&!E&&(s.track({type:1,doc:g}),k=!0,(u||h)&&(c=!0)),k&&(E?(o=o.add(E),i=w?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),s.track({type:1,doc:m})}return{tu:o,iu:s,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(E,C){const w=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{Rt:k})}};return w(E)-w(C)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(s),r=r??!1;const c=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new ya(this.query,e.tu,i,o,e.mutatedKeys,u===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ov,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=be(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new YI(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new QI(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ya.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xp="SyncEngine";class l1{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class c1{constructor(e){this.key=e,this.hu=!1}}class u1{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new wi(c=>fI(c),Uu),this.Iu=new Map,this.Eu=new Set,this.du=new Ke(ae.comparator),this.Au=new Map,this.Ru=new Up,this.Vu={},this.mu=new Map,this.fu=ga.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function h1(t,e,n=!0){const s=sE(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await XI(s,e,n,!0),r}async function d1(t,e){const n=sE(t);await XI(n,e,!0,!1)}async function XI(t,e,n,s){const r=await jA(t.localStore,as(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return s&&(c=await m1(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&zI(t.remoteStore,r),c}async function m1(t,e,n,s,r){t.pu=(p,g,E)=>async function(w,k,y,x){let j=k.view.ru(y);j.Cs&&(j=await tv(w.localStore,k.query,!1).then(({documents:S})=>k.view.ru(S,j)));const R=x&&x.targetChanges.get(k.targetId),L=x&&x.targetMismatches.get(k.targetId)!=null,U=k.view.applyChanges(j,w.isPrimaryClient,R,L);return hv(w,k.targetId,U.au),U.snapshot}(t,p,g,E);const i=await tv(t.localStore,e,!0),o=new o1(e,i.Qs),c=o.ru(i.documents),u=pl.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),h=o.applyChanges(c,t.isPrimaryClient,u);hv(t,n,h.au);const m=new l1(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function p1(t,e,n){const s=fe(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!Uu(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await hm(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&$p(s.remoteStore,r.targetId),pm(s,r.targetId)}).catch(ka)):(pm(s,r.targetId),await hm(s.localStore,r.targetId,!0))}async function f1(t,e){const n=fe(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),$p(n.remoteStore,s.targetId))}async function g1(t,e,n){const s=E1(t);try{const r=await function(o,c){const u=fe(o),h=He.now(),m=c.reduce((E,C)=>E.add(C.key),be());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let C=Ds(),w=be();return u.Ns.getEntries(E,m).next(k=>{C=k,C.forEach((y,x)=>{x.isValidDocument()||(w=w.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,C)).next(k=>{p=k;const y=[];for(const x of c){const j=NC(x,p.get(x.key).overlayedDocument);j!=null&&y.push(new Vr(x.key,j,lI(j.value.mapValue),os.exists(!0)))}return u.mutationQueue.addMutationBatch(E,h,y,c)}).next(k=>{g=k;const y=k.applyToLocalDocumentSet(p,w);return u.documentOverlayCache.saveOverlays(E,k.batchId,y)})}).then(()=>({batchId:g.batchId,changes:vI(p)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,c,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new Ke(xe)),h=h.insert(c,u),o.Vu[o.currentUser.toKey()]=h}(s,r.batchId,n),await gl(s,r.changes),await Gu(s.remoteStore)}catch(r){const i=Qp(r,"Failed to persist write");n.reject(i)}}async function ZI(t,e){const n=fe(t);try{const s=await SA(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(Se(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Se(o.hu,14607):r.removedDocuments.size>0&&(Se(o.hu,42227),o.hu=!1))}),await gl(n,s,e)}catch(s){await ka(s)}}function uv(t,e,n){const s=fe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&r.push(c.snapshot)}),function(o,c){const u=fe(o);u.onlineState=c;let h=!1;u.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(c)&&(h=!0)}),h&&Yp(u)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function y1(t,e,n){const s=fe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Ke(ae.comparator);o=o.insert(i,Ut.newNoDocument(i,pe.min()));const c=be().add(i),u=new $u(pe.min(),new Map,new Ke(xe),o,c);await ZI(s,u),s.du=s.du.remove(i),s.Au.delete(e),Zp(s)}else await hm(s.localStore,e,!1).then(()=>pm(s,e,n)).catch(ka)}async function v1(t,e){const n=fe(t),s=e.batch.batchId;try{const r=await kA(n.localStore,e);tE(n,s,null),eE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await gl(n,r)}catch(r){await ka(r)}}async function w1(t,e,n){const s=fe(t);try{const r=await function(o,c){const u=fe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return u.mutationQueue.lookupMutationBatch(h,c).next(p=>(Se(p!==null,37113),m=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>u.localDocuments.getDocuments(h,m))})}(s.localStore,e);tE(s,e,n),eE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await gl(s,r)}catch(r){await ka(r)}}function eE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function tE(t,e,n){const s=fe(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function pm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||nE(t,s)})}function nE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&($p(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Zp(t))}function hv(t,e,n){for(const s of n)s instanceof QI?(t.Ru.addReference(s.key,e),x1(t,s)):s instanceof YI?(K(Xp,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||nE(t,s.key)):de(19791,{wu:s})}function x1(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(K(Xp,"New document in limbo: "+n),t.Eu.add(s),Zp(t))}function Zp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ae(Je.fromString(e)),s=t.fu.next();t.Au.set(s,new c1(n)),t.du=t.du.insert(n,s),zI(t.remoteStore,new ar(as(Lp(n.path)),s,"TargetPurposeLimboResolution",Mu.ce))}}async function gl(t,e,n){const s=fe(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((c,u)=>{o.push(s.pu(u,e,n).then(h=>{var m;if((h||n)&&s.isPrimaryClient){const p=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;s.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){r.push(h);const p=qp.As(u.targetId,h);i.push(p)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(u,h){const m=fe(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>H.forEach(h,g=>H.forEach(g.Es,E=>m.persistence.referenceDelegate.addReference(p,g.targetId,E)).next(()=>H.forEach(g.ds,E=>m.persistence.referenceDelegate.removeReference(p,g.targetId,E)))))}catch(p){if(!Sa(p))throw p;K(zp,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const E=m.Ms.get(g),C=E.snapshotVersion,w=E.withLastLimboFreeSnapshotVersion(C);m.Ms=m.Ms.insert(g,w)}}}(s.localStore,i))}async function b1(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){K(Xp,"User change. New user:",e.toKey());const s=await HI(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new ee(B.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await gl(n,s.Ls)}}function I1(t,e){const n=fe(t),s=n.Au.get(e);if(s&&s.hu)return be().add(s.key);{let r=be();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const c=n.Tu.get(o);r=r.unionWith(c.view.nu)}return r}}function sE(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y1.bind(null,e),e.Pu.H_=r1.bind(null,e.eventManager),e.Pu.yu=i1.bind(null,e.eventManager),e}function E1(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w1.bind(null,e),e}class mu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ju(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return _A(this.persistence,new bA,e.initialUser,this.serializer)}Cu(e){return new FI(Bp.mi,this.serializer)}Du(e){return new AA}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mu.provider={build:()=>new mu};class _1 extends mu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Se(this.persistence.referenceDelegate instanceof hu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new aA(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new FI(s=>hu.mi(s,n),this.serializer)}}class fm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>uv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=b1.bind(null,this.syncEngine),await ZA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new t1}()}createDatastore(e){const n=Ju(e.databaseInfo.databaseId),s=function(i){return new LA(i)}(e.databaseInfo);return function(i,o,c,u){return new HA(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,c){return new BA(s,r,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>uv(this.syncEngine,n,0),function(){return rv.v()?new rv:new PA}())}createSyncEngine(e,n){return function(r,i,o,c,u,h,m){const p=new u1(r,i,o,c,u,h);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=fe(r);K(gi,"RemoteStore shutting down."),i.Ea.add(5),await fl(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}fm.provider={build:()=>new fm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="FirestoreClient";class S1{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Ft.UNAUTHENTICATED,this.clientId=jp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{K(Cr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(K(Cr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Qp(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Jh(t,e){t.asyncQueue.verifyOperationInProgress(),K(Cr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await HI(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function dv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await T1(t);K(Cr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>av(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>av(e.remoteStore,r)),t._onlineComponents=e}async function T1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(Cr,"Using user provided OfflineComponentProvider");try{await Jh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===B.FAILED_PRECONDITION||r.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;da("Error using user provided cache. Falling back to memory cache: "+n),await Jh(t,new mu)}}else K(Cr,"Using default OfflineComponentProvider"),await Jh(t,new _1(void 0));return t._offlineComponents}async function rE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(Cr,"Using user provided OnlineComponentProvider"),await dv(t,t._uninitializedComponentsProvider._online)):(K(Cr,"Using default OnlineComponentProvider"),await dv(t,new fm))),t._onlineComponents}function N1(t){return rE(t).then(e=>e.syncEngine)}async function j1(t){const e=await rE(t),n=e.eventManager;return n.onListen=h1.bind(null,e.syncEngine),n.onUnlisten=p1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=d1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=f1.bind(null,e.syncEngine),n}function C1(t,e,n={}){const s=new br;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,h){const m=new k1({next:g=>{m.Nu(),o.enqueueAndForget(()=>s1(i,p));const E=g.docs.has(c);!E&&g.fromCache?h.reject(new ee(B.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&g.fromCache&&u&&u.source==="server"?h.reject(new ee(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new a1(Lp(c.path),m,{includeMetadataChanges:!0,qa:!0});return n1(i,p)}(await j1(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="firestore.googleapis.com",pv=!0;class fv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ee(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aE,this.ssl=pv}else this.host=e.host,this.ssl=e.ssl??pv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rA)throw new ee(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Uj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iE(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ef{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Cj;switch(s.type){case"firstParty":return new Dj(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ee(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=mv.get(n);s&&(K("ComponentProvider","Removing Datastore"),mv.delete(n),s.terminate())}(this),Promise.resolve()}}function A1(t,e,n,s={}){var h;t=fi(t,ef);const r=ba(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;r&&(sb(`https://${c}`),rb("Firestore",!0)),i.host!==aE&&i.host!==c&&da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:r,emulatorOptions:s};if(!ui(u,o)&&(t._setSettings(u),s.mockUserToken)){let m,p;if(typeof s.mockUserToken=="string")m=s.mockUserToken,p=Ft.MOCK_USER;else{m=US(s.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new ee(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ft(g)}t._authCredentials=new Aj(new Yb(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new tf(this.firestore,e,this._query)}}class ft{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(dl(n,ft._jsonSchema))return new ft(e,s||null,new ae(Je.fromString(n.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:it("string",ft._jsonSchemaVersion),referencePath:it("string")};class Xo extends tf{constructor(e,n,s){super(e,n,Lp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new ae(e))}withConverter(e){return new Xo(this.firestore,e,this._path)}}function Yl(t,e,...n){if(t=zt(t),arguments.length===1&&(e=jp.newId()),Hj("doc","path",e),t instanceof ef){const s=Je.fromString(e,...n);return jy(s),new ft(t,null,new ae(s))}{if(!(t instanceof ft||t instanceof Xo))throw new ee(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Je.fromString(e,...n));return jy(s),new ft(t.firestore,t instanceof Xo?t.converter:null,new ae(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="AsyncQueue";class yv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new BI(this,"async_queue_retry"),this._c=()=>{const s=$h();s&&K(gv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=$h();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=$h();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new br;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Sa(e))throw e;K(gv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Rs("INTERNAL UNHANDLED ERROR: ",vv(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Kp.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&de(47125,{Pc:vv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function vv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ku extends ef{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new yv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yv(e),this._firestoreClient=void 0,await e}}}function P1(t,e){const n=typeof t=="object"?t:lb(),s=typeof t=="string"?t:ru,r=yp(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=FS("firestore");i&&A1(r,...i)}return r}function oE(t){if(t._terminated)throw new ee(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||R1(t),t._firestoreClient}function R1(t){var s,r,i;const e=t._freezeSettings(),n=function(c,u,h,m){return new Xj(c,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,iE(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new S1(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pn(At.fromBase64String(e))}catch(n){throw new ee(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pn(At.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(dl(e,Pn._jsonSchema))return Pn.fromBase64String(e.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:it("string",Pn._jsonSchemaVersion),bytes:it("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cs._jsonSchemaVersion}}static fromJSON(e){if(dl(e,cs._jsonSchema))return new cs(e.latitude,e.longitude)}}cs._jsonSchemaVersion="firestore/geoPoint/1.0",cs._jsonSchema={type:it("string",cs._jsonSchemaVersion),latitude:it("number"),longitude:it("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:us._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(dl(e,us._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new us(e.vectorValues);throw new ee(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}us._jsonSchemaVersion="firestore/vectorValue/1.0",us._jsonSchema={type:it("string",us._jsonSchemaVersion),vectorValues:it("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=/^__.*__$/;class O1{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ml(e,this.data,n,this.fieldTransforms)}}class lE{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function cE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ac:t})}}class sf{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new sf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(cE(this.Ac)&&D1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class L1{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Ju(e)}Cc(e,n,s,r=!1){return new sf({Ac:e,methodName:n,Dc:s,path:Nt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uE(t){const e=t._freezeSettings(),n=Ju(t._databaseId);return new L1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function M1(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);rf("Data must be an object, but it was:",o,s);const c=hE(s,o);let u,h;if(i.merge)u=new wn(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=gm(e,p,n);if(!o.contains(g))throw new ee(B.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);mE(m,g)||m.push(g)}u=new wn(m),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new O1(new on(c),u,h)}class Yu extends nf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yu}}function V1(t,e,n,s){const r=t.Cc(1,e,n);rf("Data must be an object, but it was:",r,s);const i=[],o=on.empty();Mr(s,(u,h)=>{const m=af(e,u,n);h=zt(h);const p=r.yc(m);if(h instanceof Yu)i.push(m);else{const g=Xu(h,p);g!=null&&(i.push(m),o.set(m,g))}});const c=new wn(i);return new lE(o,c,r.fieldTransforms)}function F1(t,e,n,s,r,i){const o=t.Cc(1,e,n),c=[gm(e,s,n)],u=[r];if(i.length%2!=0)throw new ee(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(gm(e,i[g])),u.push(i[g+1]);const h=[],m=on.empty();for(let g=c.length-1;g>=0;--g)if(!mE(h,c[g])){const E=c[g];let C=u[g];C=zt(C);const w=o.yc(E);if(C instanceof Yu)h.push(E);else{const k=Xu(C,w);k!=null&&(h.push(E),m.set(E,k))}}const p=new wn(h);return new lE(m,p,o.fieldTransforms)}function Xu(t,e){if(dE(t=zt(t)))return rf("Unsupported field value:",e,t),hE(t,e);if(t instanceof nf)return function(s,r){if(!cE(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const c of s){let u=Xu(c,r.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=zt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return IC(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=He.fromDate(s);return{timestampValue:uu(r.serializer,i)}}if(s instanceof He){const i=new He(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:uu(r.serializer,i)}}if(s instanceof cs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Pn)return{bytesValue:AI(r.serializer,s._byteString)};if(s instanceof ft){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Hp(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof us)return function(o,c){return{mapValue:{fields:{[aI]:{stringValue:oI},[iu]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return Mp(c.serializer,h)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${Cp(s)}`)}(t,e)}function hE(t,e){const n={};return eI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mr(t,(s,r)=>{const i=Xu(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function dE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof cs||t instanceof Pn||t instanceof ft||t instanceof nf||t instanceof us)}function rf(t,e,n){if(!dE(n)||!Xb(n)){const s=Cp(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function gm(t,e,n){if((e=zt(e))instanceof Qu)return e._internalPath;if(typeof e=="string")return af(t,e);throw pu("Field path arguments must be of type string or ",t,!1,void 0,n)}const H1=new RegExp("[~\\*/\\[\\]]");function af(t,e,n){if(e.search(H1)>=0)throw pu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qu(...e.split("."))._internalPath}catch{throw pu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pu(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${s}`),o&&(u+=` in document ${r}`),u+=")"),new ee(B.INVALID_ARGUMENT,c+t+u)}function mE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new U1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class U1 extends pE{data(){return super.data()}}function fE(t,e){return typeof e=="string"?af(t,e):e instanceof Qu?e._internalPath:e._delegate._internalPath}class B1{convertValue(e,n="none"){switch(Nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Mr(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var s,r,i;const n=(i=(r=(s=e.fields)==null?void 0:s[iu].arrayValue)==null?void 0:r.values)==null?void 0:i.map(o=>et(o.doubleValue));return new us(n)}convertGeoPoint(e){return new cs(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Fu(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Wo(e));default:return null}}convertTimestamp(e){const n=Sr(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Je.fromString(e);Se(MI(s),9688,{name:e});const r=new Go(s.get(1),s.get(3)),i=new ae(s.popFirst(5));return r.isEqual(n)||Rs(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class ao{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ri extends pE{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(fE("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ri._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ri._jsonSchemaVersion="firestore/documentSnapshot/1.0",ri._jsonSchema={type:it("string",ri._jsonSchemaVersion),bundleSource:it("string","DocumentSnapshot"),bundleName:it("string"),bundle:it("string")};class Ec extends ri{data(e={}){return super.data(e)}}class _o{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ao(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Ec(this._firestore,this._userDataWriter,s.key,s,new ao(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>{const u=new Ec(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ao(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Ec(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ao(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,m=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:z1(c.type),doc:u,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function z1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t){t=fi(t,ft);const e=fi(t.firestore,Ku);return C1(oE(e),t._key).then(n=>W1(e,t,n))}_o._jsonSchemaVersion="firestore/querySnapshot/1.0",_o._jsonSchema={type:it("string",_o._jsonSchemaVersion),bundleSource:it("string","QuerySnapshot"),bundleName:it("string"),bundle:it("string")};class $1 extends B1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,n)}}function Wh(t,e,n){t=fi(t,ft);const s=fi(t.firestore,Ku),r=q1(t.converter,e);return gE(s,[M1(uE(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,os.none())])}function J1(t,e,n,...s){t=fi(t,ft);const r=fi(t.firestore,Ku),i=uE(r);let o;return o=typeof(e=zt(e))=="string"||e instanceof Qu?F1(i,"updateDoc",t._key,e,n,s):V1(i,"updateDoc",t._key,e),gE(r,[o.toMutation(t._key,os.exists(!0))])}function gE(t,e){return function(s,r){const i=new br;return s.asyncQueue.enqueueAndForget(async()=>g1(await N1(s),r,i)),i.promise}(oE(t),e)}function W1(t,e,n){const s=n.docs.get(e._key),r=new $1(t);return new ri(t,r,e._key,s,new ao(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){_a=r})(Ia),ha(new hi("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),c=new Ku(new Pj(s.getProvider("auth-internal")),new Oj(o,s.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ee(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Go(h.options.projectId,m)}(o,r),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),wr(ky,Sy,e),wr(ky,Sy,"esm2020")})();var G1="firebase",K1="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr(G1,K1,"app");const Q1={apiKey:"AIzaSyBDSsChB4e5ShbTO4c_uQeBW1a38CVSthI",authDomain:"medical-application-6bcb2.firebaseapp.com",projectId:"medical-application-6bcb2",storageBucket:"medical-application-6bcb2.firebasestorage.app",messagingSenderId:"958025231259",appId:"1:958025231259:web:d1675f0486d01cade24f3e"},yE=ob(Q1),Ka=Nj(yE),Xl=P1(yE),vE=I.createContext(void 0);function wE(){const t=I.useContext(vE);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function Y1({children:t}){const[e,n]=I.useState(null),[s,r]=I.useState(null),[i,o]=I.useState(!0),c=async w=>{var k,y;try{const x=Yl(Xl,"users",w.uid),j=await wv(x);if(j.exists()){const R=j.data();r({apiKeys:R.apiKeys||{},createdAt:(k=R.createdAt)==null?void 0:k.toDate(),updatedAt:(y=R.updatedAt)==null?void 0:y.toDate()})}else{const R={apiKeys:{},createdAt:new Date,updatedAt:new Date};await Wh(x,{apiKeys:{},createdAt:new Date,updatedAt:new Date}),r(R)}}catch(x){console.error("Error fetching user data:",x),r(null)}};I.useEffect(()=>gN(Ka,async k=>{n(k),k?await c(k):r(null),o(!1)}),[]);const C={currentUser:e,userData:s,loading:i,signUp:async(w,k)=>{const x=(await dN(Ka,w,k)).user,j=Yl(Xl,"users",x.uid);await Wh(j,{apiKeys:{},createdAt:new Date,updatedAt:new Date}),await c(x)},signIn:async(w,k)=>{await mN(Ka,w,k)},signInWithGoogle:async()=>{const w=new xs,y=(await MN(Ka,w)).user,x=Yl(Xl,"users",y.uid);(await wv(x)).exists()||await Wh(x,{apiKeys:{},createdAt:new Date,updatedAt:new Date}),await c(y)},logout:async()=>{await yN(Ka),r(null)},updateApiKeys:async w=>{if(!e)throw new Error("User must be logged in to update API keys");try{const k=Yl(Xl,"users",e.uid);await J1(k,{apiKeys:w,updatedAt:new Date}),r(y=>({...y,apiKeys:w,updatedAt:new Date}))}catch(k){throw console.error("Error updating API keys:",k),k}},refreshUserData:async()=>{e&&await c(e)}};return a.jsx(vE.Provider,{value:C,children:t})}const X1=[{roman:"I",id:"pain-by-location",label_ja:"",label_en:"Pain by Location",order:1},{roman:"II",id:"consciousness",label_ja:"",label_en:"Consciousness-Related Symptoms",order:2},{roman:"III",id:"systemic",label_ja:"",label_en:"Systemic Symptoms",order:3},{roman:"IV",id:"gastrointestinal",label_ja:"",label_en:"Gastrointestinal Symptoms",order:4},{roman:"V",id:"cardiopulmonary",label_ja:"",label_en:"Respiratory / Circulatory Symptoms",order:5},{roman:"VI",id:"neuro-psych",label_ja:"",label_en:"Neurologic / Psychiatric Symptoms",order:6},{roman:"VII",id:"other-common",label_ja:"",label_en:"Other Common Symptoms",order:7}],Z1=[{id:"abdominal-pain-3",nightNumber:3,titleJa:"",titleEn:"abdominal pain",categoryId:"pain-by-location",categoryRoman:"I",categoryOrder:1,symptomOrder:1,symptomLabelJa:"",symptomLabelEn:"abdominal pain",symptomVariant:null,patient:{name:"Ken Tanaka",age:78,gender:"male",demographicsJa:"78",demographicsEn:"78-year-old male",chiefComplaintJa:"",chiefComplaintEn:"abdominal pain, nausea",vitalsJa:" 148/84 92  20SpO 99% 37.8",vitalsEn:"Blood pressure 148/84, pulse 92 regular, respiratory rate 20, SpO 99%, body temperature 37.8"},caseNotes:{summaryEn:"78-year-old male with abdominal pain, nausea.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"  ",textEn:"Since I woke up this morning, I've been feeling sore and uncomfortable.It gradually became painful.This is the first pain I've ever had."},{label:"P",cue:"provoking or relieving factors",textJa:"  ",textEn:"I was able to eat breakfast, but I was unable to eat lunch due to abdominal pain and discomfort.There is no activity that is particularly easy."},{label:"Q",cue:"symptom quality or severity",textJa:" ",textEn:"There are waves, but the pain never completely goes away.I can feel it echoing when I walk."},{label:"R",cue:"location or radiation",textJa:" ",textEn:"Now I have pain in my lower right abdomen, and in the morning I had pain in the middle of my stomach."},{label:"S",cue:"associated symptoms",textJa:"37.8   ",textEn:"Body temperature before examination was 37.8.My head doesn't hurt.He hasn't defecated since yesterday morning.I have no appetite now."}],history:{pastMedicalHistory:["Past medical history It was pointed out that the patient had high blood pressure during a medical examination.I have never had abdominal surgery."],medications:["Medication history: I have not taken any medications."],allergies:[],familyHistory:[],socialHistory:["Preferences: Smoking: 1 pack/day from around 20 years old.","Food: I often eat chicken dishes.","Note: No one around me has the same symptoms."]},otherHistory:["1 cup of alcohol per day."]},{id:"chest-pain-1",nightNumber:1,titleJa:"",titleEn:"chest pain",categoryId:"pain-by-location",categoryRoman:"I",categoryOrder:1,symptomOrder:2,symptomLabelJa:"",symptomLabelEn:"chest pain",symptomVariant:null,patient:{name:"Hiroshi Yamamoto",age:56,gender:"male",demographicsJa:"56",demographicsEn:"56-year-old male",chiefComplaintJa:"",chiefComplaintEn:"chest pain",vitalsJa:" 160/96 120/ 20/ 36.2SpO 97%(3L/",vitalsEn:"Blood pressure 160/96, pulse 120/min, respiratory rate 20/min, body temperature 36.2, SpO 97% (nasal cannula 3L/min)"},caseNotes:{summaryEn:"56-year-old male with chest pain.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"  ",textEn:"It's my first time experiencing pain.When I woke up in the morning and was getting ready to go to work, I suddenly felt pain."},{label:"R",cue:"location or radiation",textJa:"1 ",textEn:"I can't point it with one finger and my anterior chest hurts.My left shoulder and throat also hurt."},{label:"S",cue:"associated symptoms",textJa:"",textEn:"I was breaking out in a cold sweat."},{label:"T",cue:"time course",textJa:"10",textEn:"The pain lasts for more than 10 minutes."}],history:{pastMedicalHistory:[],medications:[],allergies:[],familyHistory:["Family history Father had myocardial infarction.Past medical history: I have never had any illness.A health checkup indicated that she had high blood pressure, high blood sugar, and high cholesterol, but she did not seek medical attention."],socialHistory:["Preferences: Smoking 20 cigarettes/day from around age 20."]},otherHistory:[]},{id:"headache-1-12",nightNumber:12,titleJa:"",titleEn:"Headache",categoryId:"pain-by-location",categoryRoman:"I",categoryOrder:1,symptomOrder:3,symptomLabelJa:"",symptomLabelEn:"headache",symptomVariant:1,patient:{name:"Aya Nakamura",age:48,gender:"female",demographicsJa:"48",demographicsEn:"48-year-old female",chiefComplaintJa:"",chiefComplaintEn:"headache",vitalsJa:" 152/88 80/  16/SpO 9%(room air) 35.8",vitalsEn:"Blood pressure 152/88, pulse 80 beats/min, respiratory rate 16/min, SpO 95% (room air), body temperature 35.8."},caseNotes:{summaryEn:"48-year-old female with headache.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"  ",textEn:"Two days ago, when I was hanging the laundry, I suddenly felt a headache.It wasn't like I put any particular effort into it.Nothing like this has ever happened before."},{label:"P",cue:"provoking or relieving factors",textJa:" ",textEn:"The headache lasted for a long time and eventually stopped.I'm still nervous today."},{label:"Q",cue:"symptom quality or severity",textJa:" ",textEn:"The back of my head hurts.The pain suddenly worsened in an instant."},{label:"S",cue:"associated symptoms",textJa:"  ",textEn:"I don't have any trouble seeing.I haven't lost my mind.I felt nauseous and threw up."},{label:"O",cue:"symptom onset and context",textJa:"  , red flags      ",textEn:"Origin: A severe headache for the first time is a red flag for a stroke.Remember that the patient has had a stroke, and ask if he or she is straining.``When did your head start hurting?'' ``Did it happen suddenly?'' ``Does it hurt when you lift something heavy or strain?'' ``Have you ever had a headache like this before?''"},{label:"P",cue:"provoking or relieving factors",textJa:"   ",textEn:"Remission/exacerbation factors Does the pain continue or does it ever get better?"},{label:"Q",cue:"symptom quality or severity",textJa:"  1( )red flags20%   RCVS()   ",textEn:"Nature and Severity of Symptoms Headaches where the pain becomes strongest within 1 minute (thunderclap headache) are red flags.Approximately 20% of these are subarachnoid hemorrhage, and other causes include dissection of the internal carotid artery or vertebral artery, pituitary apoplexy, cerebral venous sinus thrombosis, migraine, and RCVS (reversible cerebral vasospasm syndrome).``Where does your head hurt?'' ``Did the pain suddenly get worse?''"},{label:"S",cue:"associated symptoms",textJa:"       ",textEn:"Accompanying symptoms: Double vision, ptosis, visual field abnormalities, etc. caused by subarachnoid hemorrhage should be ruled out.Also, check for impaired consciousness, as syncope may occur due to subarachnoid hemorrhage.``Are you having trouble seeing or seeing double?'' ``Are you fainting?''"}],history:{pastMedicalHistory:["Past medical history: I have never had any major illness, but I have only been told that my cholesterol is high.35:45","Medical history ``Have you ever had a major illness?'' [Approach] When you see a headache, first rule out subarachnoid hemorrhage  Differentiation of other headaches Migraine, tension-type headache, cluster headache, cerebral hemorrhage, meningitis, glaucoma, acute sinusitis, giant cell arteritis (temporal arteritis), drug-induced None Points to note when CT scans appear normal in subarachnoid hemorrhage but are unclearLook at the difference between the left and right sides of the Sylvian fissure.-Look at the cerebral columns.The back of the cerebral horn has venous sinuses and may appear white even when normal, so look at the front.Look at the left-right differences in the cerebral sulci on the parietal region.CT scans may reveal only minor findings, so a medical interview is important! Normal...?CT image of subarachnoid hemorrhage [Approach] When you see a headache, the first thing to do is to rule out subarachnoid hemorrhage.How to listen to the interview/intent: `` `` .'' `` .'' `` .'' `` .'' `` .'' `` .'' `` .'' are red flags, such as a stroke. , Ask the patient whether he or she is straining. , `` ``Does it get better?'' . '' .'' Headaches where the pain becomes strongest within minutes (thunderclap headache) are red flags. About 20% of these are subarachnoid headaches.,Other symptoms include dissection of the internal carotid artery or vertebral artery, pituitary apoplexy, cerebral venous sinus thrombosis, migraine, RCVS (reversible), etc.'' ,We want to rule out visual field abnormalities.Also, syncope can occur with SAH, so check for impaired consciousness.'' ,We want to decide whether to perform a physical examination or give priority to CT imaging.''"],medications:[],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:["My blood pressure was around 120 during a medical checkup, and I was never told it was high.","Purpose of the interview How to take the interview",'Medical Examination First of all, consider subarachnoid hemorrhage and decide whether to perform a physical examination or give priority to CT imaging."What is your usual blood pressure?"']},{id:"headache-2-13",nightNumber:13,titleJa:"",titleEn:"Headache ",categoryId:"pain-by-location",categoryRoman:"I",categoryOrder:1,symptomOrder:4,symptomLabelJa:"",symptomLabelEn:"headache",symptomVariant:2,patient:{name:"Yuki Sato",age:36,gender:"female",demographicsJa:"36",demographicsEn:"36-year-old female",chiefComplaintJa:"",chiefComplaintEn:"headache",vitalsJa:" 126/76 72/  12/SpO 98%(room air) 36.5",vitalsEn:"Blood pressure 126/76, pulse 72/min, respiratory rate 12/min, SpO 98% (room air), body temperature 36.5"},caseNotes:{summaryEn:"36-year-old female with headache.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"7   20 ",textEn:"I've been in pain since about 7am.It wasn't sudden, but the pain gradually started to get worse while I was getting ready for the morning, including taking a shower.It happens occasionally after I turned 20.This time isn't the worst."},{label:"P",cue:"provoking or relieving factors",textJa:"  ",textEn:"Before the headache, I feel a dazzling sensation and my vision becomes blurred.There are some zigzag parts that are difficult to see.I used to experience pain before menstruation or when the weather was bad."},{label:"Q",cue:"symptom quality or severity",textJa:"",textEn:"It's a throbbing pain."},{label:"R",cue:"location or radiation",textJa:"  ",textEn:"The right side of my head hurts.Last time I had pain on my right side.There were times when I had pain on my left side."},{label:"S",cue:"associated symptoms",textJa:"  ",textEn:"I have no appetite and feel sick.I felt bright and could hear the noise in the hospital waiting room."},{label:"T",cue:"time course",textJa:"",textEn:"It's not getting worse."}],history:{pastMedicalHistory:["Past medical history: At the age of 5, the patient underwent appendix surgery."],medications:[],allergies:[],familyHistory:["Family history: Mother has headaches.Drug-related: She does not take any medicines.In the past, when I had a headache, I took medicine and felt better."],socialHistory:["Preferences: I don't smoke.Occasional drinking.I drink three cups of espresso a day.","Note: There is a possibility that she is pregnant."]},otherHistory:["Nothing was said during the medical examination."]},{id:"lower-back-back-pain-22",nightNumber:22,titleJa:"",titleEn:"Lower back/back pain",categoryId:"pain-by-location",categoryRoman:"I",categoryOrder:1,symptomOrder:5,symptomLabelJa:"",symptomLabelEn:"Lower back/back pain",symptomVariant:null,patient:{name:"Takeshi Nakamura",age:56,gender:"male",demographicsJa:"56",demographicsEn:"56-year-old male",chiefComplaintJa:"",chiefComplaintEn:"chest back pain",vitalsJa:"194/104 mmHg198/110 mmHg 92  24SpO",vitalsEn:"Consciousness clear, blood pressure (upper extremity) 194/104 mmHg on the right side, 198/110 mmHg on the left side, pulse 92 beats, respiratory rate 24 beats, SpO"},caseNotes:{summaryEn:"56-year-old male with chest back pain.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"  ",textEn:"While doing office work, I suddenly felt pain in my chest and back and lost consciousness.This is my first time."},{label:"T",cue:"time course",textJa:"",textEn:"The pain continues even now."}],history:{pastMedicalHistory:["Medical history: I was told that my blood pressure was high, but I have not seen a doctor."],medications:[],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:[]},{id:"joint-pain-21",nightNumber:21,titleJa:"",titleEn:"joint pain",categoryId:"pain-by-location",categoryRoman:"I",categoryOrder:1,symptomOrder:6,symptomLabelJa:"",symptomLabelEn:"joint pain",symptomVariant:null,patient:{name:"Mika Taniguchi",age:42,gender:"female",demographicsJa:"42",demographicsEn:"42-year-old female",chiefComplaintJa:"",chiefComplaintEn:"Joint pain, fatigue",vitalsJa:" 134/80 mmHg88  18SpO 97% room air 36.0",vitalsEn:"Consciousness clear, blood pressure 134/80 mmHg, pulse 88 times regular, respiratory rate 18 times, SpO 97% room air, body temperature 36.0"},caseNotes:{summaryEn:"42-year-old female with Joint pain, fatigue.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"  ",textEn:"I've been having pain in my wrists and elbows for about six months now.Pain on both sides.I feel kind of tired."},{label:"P",cue:"provoking or relieving factors",textJa:" ",textEn:"It hurts more in the morning and is difficult to move in the morning.When I work, the pain is worse than in the morning."},{label:"Q",cue:"symptom quality or severity",textJa:" 30",textEn:"Pain and stiffness, difficulty grasping things.It lasts less than 30 minutes."},{label:"R",cue:"location or radiation",textJa:"  ",textEn:"I have pain in both my left and right wrists and elbow joints.It doesn't hurt, but it's hard to open the lid of a plastic bottle.Sometimes the inner joints of my fingers hurt."},{label:"S",cue:"associated symptoms",textJa:"  ",textEn:"He is eating and has not lost weight.I haven't taken his temperature, but he doesn't feel feverish.No night sweats."}],history:{pastMedicalHistory:["Medical history: I was told that my blood pressure was high."],medications:[],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:[]},{id:"consciousness-disorder-17",nightNumber:17,titleJa:"",titleEn:"consciousness disorder",categoryId:"consciousness",categoryRoman:"II",categoryOrder:2,symptomOrder:1,symptomLabelJa:"",symptomLabelEn:"consciousness disorder",symptomVariant:null,patient:{name:"Koji Saito",age:35,gender:"male",demographicsJa:"35",demographicsEn:"35-year-old male",chiefComplaintJa:"",chiefComplaintEn:"consciousness disorder",vitalsJa:" 156/88 mmHg  104/  16/SpO 99%(5L/ )",vitalsEn:"Blood pressure 156/88 mmHg, pulse 104 beats/min, respiratory rate 16/min, SpO 99% (masked 5 L/min oxygen administration),"},caseNotes:{summaryEn:"35-year-old male with consciousness disorder.",objectiveEn:"",planEn:""},presentIllness:[],history:{pastMedicalHistory:[],medications:[],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:[]},{id:"care-28",nightNumber:28,titleJa:"   ",titleEn:"Care",categoryId:"consciousness",categoryRoman:"II",categoryOrder:2,symptomOrder:2,symptomLabelJa:"   ",symptomLabelEn:"Care",symptomVariant:null,patient:{name:"Naoki Suzuki",age:66,gender:"male",demographicsJa:"66",demographicsEn:"66-year-old male",chiefComplaintJa:"",chiefComplaintEn:"Impaired consciousness, convulsions",vitalsJa:"JCS -, 140/90 mmHg92/  16/SpO 99%6L/ ",vitalsEn:"JCS -3, blood pressure 140/90 mmHg, heart rate 92/min, respiratory rate 16/min, SpO 99% (mask 6L/min oxygen"},caseNotes:{summaryEn:"66-year-old male with Impaired consciousness, convulsions.",objectiveEn:"",planEn:""},presentIllness:[],history:{pastMedicalHistory:[],medications:[],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:[]},{id:"syncope-18",nightNumber:18,titleJa:"",titleEn:"syncope",categoryId:"consciousness",categoryRoman:"II",categoryOrder:2,symptomOrder:3,symptomLabelJa:"",symptomLabelEn:"syncope",symptomVariant:null,patient:{name:"Yusuke Kobayashi",age:35,gender:"male",demographicsJa:"35",demographicsEn:"35-year-old male",chiefComplaintJa:"",chiefComplaintEn:"consciousness disorder",vitalsJa:" 132/68 mmHg  88/  18/SpO 95%(room air) 35.6",vitalsEn:"Blood pressure 132/68 mmHg, pulse 88 beats/min, respiratory rate 18/min, SpO 95% (room air), body temperature 35.6"},caseNotes:{summaryEn:"35-year-old male with consciousness disorder.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"  ",textEn:"I remember trying to go to the bathroom.When I woke up, I was lying on the floor, and I woke up when someone called out to me."},{label:"S",cue:"associated symptoms",textJa:"      ",textEn:"I didn't feel sick or have cold sweats.I wasn't hurt.I've been feeling lightheaded lately.I have no abdominal pain.There is no black stool.I haven't lost weight.There was no convulsion.(wife's answer)"},{label:"T",cue:"time course",textJa:" 23",textEn:"My wife called out to me and patted me on the face, and I immediately regained consciousness (after a few minutes)."},{label:"QB",cue:"detail",textJa:"107G6062 Dr  ",textEn:"107G6062 Dr.Yamanaka/Kamata radio talk Damage to tongue and oral mucosa (-)"},{label:"S",cue:"associated symptoms",textJa:"82    Ca",textEn:"An 82-year-old man visited our hospital due to loss of consciousness.Today, after drinking and having dinner, when I stood up to take a bath, I suddenly lost consciousness and collapsed.As soon as my wife called out to him, he regained consciousness.Recently, I noticed that I felt dizzy when getting up from a chair.He is taking Ca channel blockers for hypertension and painkillers for lower back pain."},{label:"O",cue:"symptom onset and context",textJa:"36.888/ 132/68 mmHg18/, SpO 95%(room air). 3mm   A&P     18 18   18_ II. II. ",textEn:"Body temperature was 36.8C, pulse rate was 88/min, blood pressure was 132/68 mmHg, respiratory rate was 18/min, and SpO2 was 95% (room air). Pupil diameter was 3 mm on both sides, and light reflex was normal.The palpebral conjunctiva is slightly pale.Auscultation revealed no abnormalities in heart sounds or respiratory sounds.No damage was observed to the tongue or mucous membranes.A&P Since orthostatic hypotension is suspected based on the above, perform an orthostatic test and observe the drop in blood pressure when standing.Because gastrointestinal bleeding, malignant tumor, and arrhythmia are also possible, upper gastrointestinal endoscopy, rectal examination, and electrocardiogram should also be considered.[Approach] Let's consider orthostatic hypotension while excluding serious diseases such as cardiovascular system Night 18 Syncope Night 18 Syncope Role play Night 18_ Syncope II. Symptoms related to consciousness  II. Symptoms related to consciousness "}],history:{pastMedicalHistory:["Past medical history: High blood pressure.I had lower back pain and went to orthopedic surgery."],medications:["Medication history: Ca antagonist, pain reliever for lower back pain."],allergies:[],familyHistory:[],socialHistory:["Preferences: I don't smoke.Occasional drinking.Palpebral conjunctiva slightly pale (+) Heart murmur (-) #Orthostatic hypotension #Gastrointestinal bleeding #Malignant tumor #Arrhythmia"]},otherHistory:[]},{id:"fever-1-5",nightNumber:5,titleJa:"",titleEn:"Fever",categoryId:"systemic",categoryRoman:"III",categoryOrder:3,symptomOrder:1,symptomLabelJa:"",symptomLabelEn:"fever",symptomVariant:1,patient:{name:"Kenta Watanabe",age:79,gender:"male",demographicsJa:"79",demographicsEn:"79-year-old male",chiefComplaintJa:"",chiefComplaintEn:"fever",vitalsJa:" 96/54 108 32SpO 91%(room air) 38.5",vitalsEn:"Consciousness clear, blood pressure 96/54, pulse 108 times, respiratory rate 32 times, SpO 91% (room air), body temperature 38.5"},caseNotes:{summaryEn:"79-year-old male with fever.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"4 3",textEn:"I was fine until 4 days ago.I have been feeling unwell for three days and have developed a fever."},{label:"Q",cue:"symptom quality or severity",textJa:"",textEn:"I have no appetite, about half of my usual appetite."},{label:"R",cue:"location or radiation",textJa:"",textEn:"No headache.There's no pain.My lower back has been hurting for a long time."},{label:"S",cue:"associated symptoms",textJa:" ",textEn:"I have a slight cough.I also produce sputum.My throat doesn't hurt.No runny nose."},{label:"T",cue:"time course",textJa:"",textEn:"It's getting worse and worse, and since yesterday I've been having trouble breathing."}],history:{pastMedicalHistory:["Past medical history: I have been seeing a doctor since I was in my 50s due to strained back."],medications:["Medication history: When my lower back hurts, I take medicine given to me by an orthopedic surgeon."],allergies:[],familyHistory:[],socialHistory:["Preferences: I smoked until I was 30 years old.I drink about 1 cup of Japanese sake every night.","Note: No one around me has the same symptoms."]},otherHistory:["I undergo a health checkup by the town every year.It was pointed out that my blood pressure was high.About 140/90."]},{id:"fever-2-6",nightNumber:6,titleJa:"",titleEn:"Fever ",categoryId:"systemic",categoryRoman:"III",categoryOrder:3,symptomOrder:2,symptomLabelJa:"",symptomLabelEn:"fever",symptomVariant:2,patient:{name:"Ryohei Kondo",age:70,gender:"male",demographicsJa:"70",demographicsEn:"70-year-old male",chiefComplaintJa:"",chiefComplaintEn:"fever",vitalsJa:" 124/80mmHg  72/  18/SpO 94% 37.6",vitalsEn:"Blood pressure 124/80mmHg, pulse 72/min, respiratory rate 18/min, SpO 94%, body temperature 37.6"},caseNotes:{summaryEn:"Associated Symptoms - When you see a fever, you often suspect an infection (pneumonia, cholangitis, appendicitis, ileus, urinary tract inflammation, skin infection, etc.). Ask about symptoms specific to infectious diseases.(Pneumonia  cough, sputum) - If infection is ruled out, malignant tumor or collagen disease is suspected. Malignant tumor  night sweats, weight loss  Collagen disease  skin rash, arthralgia, abdominal pain ``Apart from fever, do you have a sore throat or cough?'' ``Do you have any pain in your stomach or back?'' ``Do you have a rash on your skin?'' ``Do you have a feeling of residual urine?'' ``Do you have joint pain?'' ``Have you lost weight?'' ``Do people tell you that you've lost weight?''\"Do you sweat so much at night that you have to change your underwear?\"",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"2  ",textEn:"I had a fever for two weeks.I felt sluggish after getting a fever, but before that I was feeling normal."},{label:"S",cue:"associated symptoms",textJa:"           ",textEn:"I don't have a cough and my throat doesn't hurt.There's no pain.There is no rash or itching.There is no feeling of residual urine.I have no joint pain.My appetite has decreased a little.I haven't measured my weight.People around me don't tell me that I've lost weight.No night sweats.I get tired easily.There is no edema.There was no hematuria."}],history:{pastMedicalHistory:["Past medical history: High blood pressure, high cholesterol.2-3 years ago, I was diagnosed with a problem with my mitral valve.Medication history: Flomox, Calonal.Blood pressure medicine and cholesterol medicine.I do not take any supplements or herbal medicine."],medications:[],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:[]},{id:"general-fatigue-16",nightNumber:16,titleJa:"",titleEn:"General fatigue",categoryId:"systemic",categoryRoman:"III",categoryOrder:3,symptomOrder:3,symptomLabelJa:"",symptomLabelEn:"General fatigue",symptomVariant:null,patient:{name:"Haruka Nishimura",age:29,gender:"female",demographicsJa:"29",demographicsEn:"29-year-old female",chiefComplaintJa:" ",chiefComplaintEn:"Fatigue Headache",vitalsJa:" 96/48 mmHg  76/  12/SpO 99%(room air) 36.6",vitalsEn:"Blood pressure 96/48 mmHg, pulse 76/min, respiratory rate 12/min, SpO 99% (room air), body temperature 36.6"},caseNotes:{summaryEn:"29-year-old female with Fatigue Headache.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"2. 1 ",textEn:"I've been feeling sluggish for about two weeks. I haven't had any energy for a month.Symptoms occur while working."},{label:"Q",cue:"symptom quality or severity",textJa:"1 ",textEn:"For the past month, my head has been feeling heavy and my neck and shoulders have become stiff."},{label:"S",cue:"associated symptoms",textJa:"11    ",textEn:"I don't feel cold.Defecate once a day.Even though I have always been motivated, I end up feeling lazy and tired.Even when I read documents at work, I can't understand the content.I often get irritated.I don't have the courage to die, but I feel like a useless person."},{label:"T",cue:"time course",textJa:"MRI  2  ",textEn:"I had an MRI of my head and an X-ray of my neck taken at a local doctor, but no abnormalities were found.Still, I've been feeling very tired for the past two weeks and haven't been able to do anything around the house.I was also late."},{label:"QB",cue:"detail",textJa:"110H3132 Dr ()",textEn:"110H31, 32 Dr.Yamanaka/Kamata radio talk Enlarged thyroid ()"},{label:"O",cue:"symptom onset and context",textJa:"A&P",textEn:"A&P"},{label:"S",cue:"associated symptoms",textJa:"29 13  MRI",textEn:"A 29-year-old woman visited our hospital with complaints of general malaise and headache.He had noticed a feeling of heaviness in his head for a month, and it had worsened over the past three weeks.The patient visited our hospital because her fatigue did not improve and she also had symptoms of decreased concentration and insomnia.A head MRI was performed at a nearby hospital, but no abnormalities were found.There is no past medical history, and there is no possibility of pregnancy."},{label:"O",cue:"symptom onset and context",textJa:"158cm46kg 37.176/96/48 mmHg12/  A&P  B12TSH, free T4B12  B12 16 16   16_ III. III. ",textEn:"Height: 158cm, weight: 46kg.Clear consciousness.Body temperature: 37.1C, pulse rate: 76/min, blood pressure: 96/48 mmHg, respiratory rate: 12/min.Physical examination revealed no enlarged thyroid gland or obvious atrophy of the tongue papillae in the oral cavity.A&P  B12TSH, free T4B12 Since it takes time for the blood sample results to be known, the patient is given vitamin B12 and asked to return to the hospital at a later date.Night 16 - General malaise Night 16 - General malaise Role play Night 16_General malaise III. Systemic symptoms  III. Systemic symptoms "}],history:{pastMedicalHistory:["Medical history: I have never been sick."],medications:["Medication history: I am taking painkillers for headaches."],allergies:[],familyHistory:[],socialHistory:["Preferences: I don't smoke.I don't drink alcohol at all.Food: I don't feel hungry, and I'm eating some food.I don't think I'm a picky eater.I haven't been able to enjoy my hobbies lately.","Sleep I can't fall asleep."]},otherHistory:["Other: I had menstruation from 10 days ago to 6 days ago.There is no possibility of pregnancy.Tongue papillary atrophy (-) Oral erosion (-) #Depression #Hypothyroidism #Vitamin B12 deficiency"]},{id:"lymph-node-swelling-1-7",nightNumber:7,titleJa:"  ",titleEn:"Lymph node swelling",categoryId:"systemic",categoryRoman:"III",categoryOrder:3,symptomOrder:4,symptomLabelJa:"  ",symptomLabelEn:"lymph node swelling",symptomVariant:1,patient:{name:"Emi Fujimoto",age:14,gender:"female",demographicsJa:"14",demographicsEn:"14-year-old female",chiefComplaintJa:"",chiefComplaintEn:"Fever, cervical lymph node swelling",vitalsJa:" 130/80mmHg 92/  20/SpO 98%(room air),  38.9",vitalsEn:"Blood pressure 130/80mmHg, pulse 92/min, respiratory rate 20/min, SpO 98% (room air), body temperature 38.9,"},caseNotes:{summaryEn:"14-year-old female with Fever, cervical lymph node swelling.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"4 ",textEn:"I have had a fever for the past 4 days.Nothing like this has ever happened before."},{label:"Q",cue:"symptom quality or severity",textJa:" ",textEn:"My appetite is about half of normal.I don't think I've lost any weight."},{label:"S",cue:"associated symptoms",textJa:"  ",textEn:"Both eyelids are heavy and it is difficult to open the eyes.I feel like I have a lump on my neck.There is no cough, sputum, or difficulty breathing."}],history:{pastMedicalHistory:[],medications:[],allergies:[],familyHistory:[],socialHistory:["Note: No one around me has similar symptoms."]},otherHistory:[]},{id:"lymph-node-swelling-2-8",nightNumber:8,titleJa:"  ",titleEn:"Lymph node swelling",categoryId:"systemic",categoryRoman:"III",categoryOrder:3,symptomOrder:5,symptomLabelJa:"  ",symptomLabelEn:"lymph node swelling",symptomVariant:2,patient:{name:"Nozomi Takagi",age:60,gender:"female",demographicsJa:"60",demographicsEn:"60-year-old female",chiefComplaintJa:"",chiefComplaintEn:"Axillary lymphadenopathy",vitalsJa:" 112/78mmHg  84/  16/SpO 99%(room air) 37.8",vitalsEn:"Blood pressure 112/78mmHg, pulse 84/min, respiratory rate 16/min, SpO 99% (room air), body temperature 37.8."},caseNotes:{summaryEn:"60-year-old female with Axillary lymphadenopathy.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"1",textEn:"Symptoms have been appearing for 1 month."},{label:"Q",cue:"symptom quality or severity",textJa:" ",textEn:"There's no pain.I feel like the lump has gotten bigger."},{label:"S",cue:"associated symptoms",textJa:" 1",textEn:"I have an appetite.I haven't lost any weight in the past month."},{label:"O",cue:"symptom onset and context",textJa:" 1",textEn:"Since the onset pattern is long (more than 1 month), malignancy is considered."},{label:"Q",cue:"symptom quality or severity",textJa:"    ",textEn:"Nature and severity of symptoms The absence of pain suggests malignancy. ``Does the lump hurt when you touch it?'' ``Do you feel that the lump is getting bigger?''"},{label:"QB",cue:"detail",textJa:"114A60 Dr 8_ III. III. ",textEn:"114A60 Dr.Yamanaka/Kamata radio talk 8th night_Lymph node swelling  III. Systemic symptoms  III. Systemic symptoms "}],history:{pastMedicalHistory:["Past medical history: None in particular.","Medical history: Have you ever had any serious illness?"],medications:["Medication history: Nothing particular.Family history: I heard that my father had tuberculosis in the past.My mother underwent surgery for breast cancer.Note: I had a mammogram five years ago. None of my colleagues or friends have contracted tuberculosis.I have three cats.I haven't touched the cat outside.Weight loss (-) Night sweats (-) Cervical lymph node swelling (+) Inguinal lymph node swelling (+) Breast mass (-) Milk secretion (-) No hepatosplenomegaly No skin rash Aggressive interview","Medication history: Are you taking any medications?"],allergies:[],familyHistory:["Family history Suspect breast cancer ``Has anyone in your family ever had tuberculosis?'' ``Has anyone in your family had breast cancer?'' Other Suspect breast cancer Suspect cat scratch disease ``Have you been screened for breast cancer?'' ``When was the last time you had a mammogram?'' ``Has anyone at work or friends gotten tuberculosis?'' ``Do you have a cat?'' ``Have you been scratched by a cat outside recently?'' ApproachWe listen to the length of time the lump has been present, its size, pain, etc., and confirm whether it is malignant. What do night sweats and weight loss remind you of... 26:07"],socialHistory:[" Symptoms B of malignant lymphoma are [fever, weight loss, night sweats (night sweats)]  Definitions of words and interview 27:03"]},otherHistory:["Purpose of interview Doctor's interview","``How long have you had symptoms?''","Associated symptoms Reminiscent of tuberculosis or malignant lymphoma ``Do you have any appetite?'' ``Have you lost weight?'' ``Do you sweat so much that your underwear gets soaked when you sleep?''","Tuberculosis  Check your family history!","Definition of night sweats: So much sweat that you have to change your underwear at night.","Definition of weight loss Unintentional weight loss of 5% or more within 6 months to 1 year. Swollen axillary lymph nodes in women...cancer!?28:32 It may be due to metastasis of breast cancer.Check your family history and whether or not you have had a medical checkup, and palpate your breasts. Other identification 29:15","Cat scratch disease: There is often swelling in the axilla, so check for pets and scratches!","Differentiation based on tenderness Do not easily assume that if there is tenderness, it is an infection, and if there is no tenderness, it is a malignant disease.  Free talk Italy is a fun country!00:43 It's good to start clinical work while still a student 13:45 A case where the lymph nodes were not swollen and difficult to diagnose 43:00 Everything about Kikuchi disease 47:35"]},{id:"edema-9",nightNumber:9,titleJa:"",titleEn:"edema",categoryId:"systemic",categoryRoman:"III",categoryOrder:3,symptomOrder:6,symptomLabelJa:"",symptomLabelEn:"edema",symptomVariant:null,patient:{name:"Masato Fujii",age:75,gender:"male",demographicsJa:"75",demographicsEn:"75-year-old male",chiefComplaintJa:", ",chiefComplaintEn:"Dyspnea, lower leg edema",vitalsJa:" 138/86mmHg,  100/  24/SpO 88%(room air) 37.2",vitalsEn:"Blood pressure 138/86mmHg, pulse 100 beats/min, respiratory rate 24/min, SpO 88% (room air), body temperature 37.2."},caseNotes:{summaryEn:"75-year-old male with Dyspnea, lower leg edema.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"  23",textEn:"About a week ago, I had a sore throat and have been feeling unwell ever since.This is the first time I have had edema in my legs, and it has appeared in the past few days."},{label:"P",cue:"provoking or relieving factors",textJa:"",textEn:"Breathing is easier if you keep your body upright."},{label:"Q",cue:"symptom quality or severity",textJa:"37.5 12 ",textEn:"Fever is around 37.5.Since last night, I felt short of breath within an hour or two of going to sleep, so I couldn't sleep much."},{label:"S",cue:"associated symptoms",textJa:".   ",textEn:"A week ago, I had a sore throat, but I didn't cough much. I don't have diarrhea.I was able to eat, but I don't have much of an appetite right now.There was no chest pain or palpitations, only shortness of breath."},{label:"T",cue:"time course",textJa:"       3 ",textEn:"At first, I had a sore throat and a slight fever.To this day, I have become increasingly short of breath.My feet have also become swollen.Since yesterday I have been having difficulty breathing and can't sleep.Past medical history High blood pressure and high cholesterol were noted.About three years ago, I was diagnosed with heart valve disease."},{label:"S",cue:"associated symptoms",textJa:"75 1  3",textEn:"A 75-year-old man came to our hospital with chief complaints of dyspnea and lower leg edema.The patient had had a sore throat and slight fever for 1 week, and subsequently had dyspnea during movement, paroxysmal dyspnea at night, and orthopnea.His medical history includes hypertension and lipid abnormalities, and he was diagnosed with valvular heart disease 3 years ago."},{label:"O",cue:"symptom onset and context",textJa:" 138/86mmHg  100/  24/ SpO 88%(room air) 37.2  / coarse crackles   A&P  MR ",textEn:"Consciousness was clear, vital signs were blood pressure 138/86 mmHg, pulse 100 beats/min, respiratory rate 24 breaths/min, SpO 88% (room air), body temperature 37.2C.Physical examination revealed jugular vein distention and pitting edema in both lower extremities.During auscultation, sounds III and IV were heard, and a holosystolic murmur of IV/VI was heard with the strongest point at the apex of the heart.Coarse crackles were heard in the lower lung fields on both sides of the breath.No cold sensation was observed in the peripheral extremities.The liver was not palpable.As an A&P infection, the symptoms are mild, and based on the above symptoms and physical findings, we first consider bilateral heart failure due to MR.An electrocardiogram and blood samples are performed, and diuretics and oxygen are administered to treat symptoms of heart failure."}],history:{pastMedicalHistory:[],medications:["Medication history: I am taking one type of medication for high blood pressure."],allergies:[],familyHistory:[],socialHistory:["Notes: I like pickles, but I haven't been eating them too much lately.My normal blood pressure is around 110/60mmHg even though I am taking medication.Sore throat (+) Cold sensation in the extremities (-) Jugular vein distension (+) Pitching edema (+)"]},otherHistory:["Coarse crackles (+) Sound III, sound IV Apical holosystolic murmur (+) Hepatomegaly (-)"]},{id:"weight-gain-26",nightNumber:26,titleJa:"",titleEn:"weight gain",categoryId:"systemic",categoryRoman:"III",categoryOrder:3,symptomOrder:7,symptomLabelJa:"",symptomLabelEn:"weight gain",symptomVariant:null,patient:{name:"Daichi Aoki",age:22,gender:"male",demographicsJa:"22",demographicsEn:"22-year-old male",chiefComplaintJa:"",chiefComplaintEn:"weight gain",vitalsJa:" 110/70 mmHg 88 /  16 /",vitalsEn:"Blood pressure 110/70 mmHg, pulse 88 beats/min, respiratory rate 16 beats/min"},caseNotes:{summaryEn:"22-year-old male with weight gain.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"2 5 ",textEn:"My weight has increased.Two weeks ago, my face and legs started to swell.Appetite has decreased since 5 days ago.I haven't caught a cold or anything."},{label:"Q",cue:"symptom quality or severity",textJa:"220",textEn:"I have gained 20 kg in the past two weeks."},{label:"S",cue:"associated symptoms",textJa:" ",textEn:"Urine that used to be frothy now comes out.I have some diarrhea.I got tired easily."},{label:"T",cue:"time course",textJa:"25  ",textEn:"Two weeks ago, I noticed that my urine was foamy, and five days ago, I started urinating less frequently.I haven't urinated since this morning."},{label:"QB",cue:"detail",textJa:"115A26 Dr",textEn:"115A26 Dr.Yamanaka/Kamata radio talk"},{label:"S",cue:"associated symptoms",textJa:"22 2 2201 5",textEn:"A 22-year-old man came to our hospital with a chief complaint of weight gain.For the past 2 weeks, he had noticed foaming in his urine when he urinated and swelling of his face and whole body.The swelling gradually worsened and my weight increased by 20 kg in 2 weeks.Over the past week, the patient came to the hospital because her appetite had decreased, she started having diarrhea, and she was experiencing general fatigue.Regarding urination, his frequency has decreased since 5 days ago, and he has not urinated yet today."},{label:"O",cue:"symptom onset and context",textJa:" 110/70 mmHg  88 /  16 /   A&P   26 26    26_ III. III. ",textEn:"Upon arrival, the patient was conscious and clear, and his vital signs showed no abnormalities: blood pressure 110/70 mmHg, pulse 88 beats/min, and respiratory rate 16 breaths/min.Physical findings revealed no abnormality in heart sounds or breath sounds, and no abdominal hepatomegaly, but edema of both eyelids and pitting edema in the extremities were noted.A&P Because of the sudden weight gain, heart failure, kidney damage, liver damage, and abnormal thyroid function are suspected and excluded.First, a complete blood count and biochemical findings are examined with a blood test.A urine test will also be performed to check for protein in the urine.Night 26: Weight gain Night 26: Weight gain [Approach] Let's consider heart, liver, kidney, and thyroid abnormalities and drug-related causes.Role play Night 26_ Weight gain III. Systemic symptoms  III. Systemic symptoms "}],history:{pastMedicalHistory:[],medications:["Medication history: I have not taken any medications.Abdominal flatness, soft Tenderness (-) Eyelid edema (+) Lower leg edema (+) Systemic pitting edema (+) If you see edema - Points for differentiation - Is it bilateral or unilateral? 28:28 If it is unilateral, you should first suspect deep vein thrombosis.Furthermore, if the thrombus spreads and causes pulmonary artery embolism, this is a highly urgent disease that can be fatal and is therefore always included in the differential diagnosis.Cellulitis also basically causes unilateral edema.Is it pitting or non-pitting? 29:30 In the case of non-pitting edema, consider abnormal thyroid function.It occurs in both hyperthyroidism and hypothyroidism.Lymphedema is also a possibility."],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:["Fast edema and slow edema 30:42 Edema that returns from compression within 40 seconds is called fast edema, and is caused by hypoalbuminemia.In pathological conditions where venous pressure is increased, such as heart failure or venous insufficiency, the pressure does not return even after 40 seconds have passed after compression.","It becomes slow edema.If you notice any edema, take a good look at your feet!31:32 Drug-induced edema 35:11 - Edema is caused by drugs such as ACE inhibitors, Ca antagonists, NSAIDs, and licorice.There is more than one cause of edema!37:10 Free talk Charm of traditional crafts 0:40 Everyday life at Okuaizu Home Medical Center 40:30 Things to check during physical examination 18:44","Heart Check for coarse crackles in the lungs, presence of a heart murmur, regular rhythm, presence of lower leg edema, etc.","Liver When liver failure occurs due to hepatitis or some kind of liver disorder, hepatomegaly occurs.Therefore, check by palpation.Also check for pounding pain in the liver.","Although the suspicion of kidney stones is low, the presence or absence of percussion pain in the kidney should be checked."]},{id:"19",nightNumber:19,titleJa:"",titleEn:")",categoryId:"systemic",categoryRoman:"III",categoryOrder:3,symptomOrder:8,symptomLabelJa:"",symptomLabelEn:")",symptomVariant:null,patient:{name:"Toru Sasaki",age:67,gender:"male",demographicsJa:"67",demographicsEn:"67-year-old male",chiefComplaintJa:"",chiefComplaintEn:"weight loss",vitalsJa:" 172 60 106/46 mmHg 100 /  20/ 36.7",vitalsEn:"Height: 172 cm, weight: 60 kg, blood pressure: 106/46 mmHg, pulse rate: 100 beats/min, respiratory rate: 20 breaths/min, body temperature: 36.7C"},caseNotes:{summaryEn:"67-year-old male with weight loss.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"3  ",textEn:"About 3 months ago, I started noticing a decrease in appetite compared to usual.People around me started telling me that I had lost weight and that I was eating less."},{label:"S",cue:"associated symptoms",textJa:" 1 ",textEn:"While eating, I have no stomach pain or discomfort, but I have no appetite.Over the past week, I have started to notice that my body feels sluggish."},{label:"T",cue:"time course",textJa:"310",textEn:"In the past three months, I have lost 10 kg."}],history:{pastMedicalHistory:["Past medical history: Nothing particular except for mild obesity."],medications:[],allergies:[],familyHistory:[],socialHistory:["I am not taking any pharmaceutical drugs.Preferences: I don't smoke.Since I was around 30 years old, I had been drinking 5 cups of sake almost every day.I've been drinking less for the past two days."]},otherHistory:[]},{id:"loss-of-appetite-33",nightNumber:33,titleJa:"",titleEn:"loss of appetite",categoryId:"systemic",categoryRoman:"III",categoryOrder:3,symptomOrder:9,symptomLabelJa:"",symptomLabelEn:"loss of appetite",symptomVariant:null,patient:{name:"Aoi Matsuda",age:47,gender:"female",demographicsJa:"47",demographicsEn:"47-year-old female",chiefComplaintJa:"",chiefComplaintEn:"loss of appetite",vitalsJa:" 128/72mmHg  80 / 18 /SpO2 98%(room air)36.0 ",vitalsEn:"Consciousness was clear, blood pressure was 128/72 mmHg, pulse was 80 beats/min, breathing rate was 18 breaths/min, SpO2 was 98% (room air), and body temperature was 36.0 C."},caseNotes:{summaryEn:"47-year-old female with loss of appetite.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"2",textEn:"I have no appetite for the past 2 months."},{label:"Q",cue:"symptom quality or severity",textJa:"  ",textEn:"I'm not hungry.I don't get a stomach ache after eating it.I have never taken back what I ate.The amount I eat is decreasing."},{label:"S",cue:"associated symptoms",textJa:"23kg   2  ",textEn:"I lost 3 kg in 2 months.There is no black stool.There was no difficulty in breathing during daily life.The last two months have been very tiring.I don't have a fever.I haven't had any diarrhea.My stomach doesn't hurt."},{label:"S",cue:"associated symptoms",textJa:"4723kg  ",textEn:"A 47-year-old woman visited our hospital with a chief complaint of anorexia.Two months ago, he lost his appetite and lost 3 kg.There are no accompanying symptoms such as abdominal pain, diarrhea, or fever.No abnormalities were noted during past medical examinations.There was no black stool, and there were no symptoms of anemia such as shortness of breath."},{label:"O",cue:"symptom onset and context",textJa:"156cm46kg  128/72mmHg  80/  18 /SpO2 98% 36.0 A&P    Na ()CT 33 33   () ()   20:54    () 2         25:59    1       36:37 CT  CT    ",textEn:"Height: 156cm, weight: 46kg.Clear consciousness.Vitals: blood pressure 128/72 mmHg, pulse 80 beats/min, respiratory rate 18 breaths/min, SpO2 98%, body temperature 36.0C.A&P In addition to loss of appetite, I have lost weight, so I would first like to rule out the possibility of gastric cancer.Anorexia can also occur in pregnancy, depressive symptoms, sepsis due to infection, infectious gastroenteritis, and intestinal obstruction, so check for abdominal findings such as tenderness and liver pounding pain.Make sure that no mass lesion is palpable in the abdomen.Ketoacidosis, hyponatremia, and uremia due to diabetes can also cause these symptoms.Future tests include blood tests, Helicobacter pylori tests (if necessary), gastroscopy, abdominal ultrasound, and CT.Night 33: Anorexia Night 33: Anorexia Swollen cervical lymph nodes (-) Lower leg edema (-)  Questionnaire about anorexia 20:54 In general, symptoms of anorexia are most often caused by gastrointestinal lesions.Anorexia is particularly likely to occur if there is a lesion in the stomach.A disease that you do not want to overlook is malignant tumor. Ask whether or not screening tests for malignant tumors (endoscopy and gastrointestinal imaging tests) have been performed.- Based on weight loss and persistent symptoms of anorexia for 2 months, the patient should be examined with the possibility of malignancy in mind.If there is a gastrointestinal lesion, bleeding will occur. Ask if there are any symptoms of anemia.- Pathological conditions that cause sepsis, such as cholecystitis and appendicitis, may also lead to loss of appetite. Ask about pain and fever. Depression and anorexia 25:59 Depression can also cause symptoms of anorexia.Women are at higher risk of depression.In cases like this one, we often screen for depression. Screening will be conducted using two questions: whether you have been feeling depressed for more than a month and whether you have stopped enjoying things you used to enjoy.The first place for consultation is often a general internal medicine outpatient clinic rather than a psychiatry department. Follow up on people who are showing symptoms of depression. Flow of clinical examination 36:37 - In an emergency, CT examination is easier to access than gastroscopy. CT scan is performed from the chest to the pelvis to confirm the lesion.Heart sounds/breath sounds No abnormalities [Approach] First, exclude malignant tumors.Don't forget about mental illness."},{label:"QB",cue:"detail",textJa:"115A65 33_ III. III. ",textEn:"115A65 33rd night _ Anorexia III. Systemic symptoms  III. Systemic symptoms "}],history:{pastMedicalHistory:["Past medical history: I have never had any illness.Health checkup The patient undergoes a health checkup once a year, and no particular abnormalities have been noted.I haven't had a gastrocamera done.I haven't done a fecal occult blood test either.Medication history: I do not take any medications on a regular basis.I occasionally take multivitamin tablets (for a long time now)."],medications:[],allergies:[],familyHistory:[],socialHistory:["There is no possibility of pregnancy.Others I didn't feel particularly unmotivated, but I felt like I wasn't getting any better even after sleeping.It's not that I don't want to go to work.I am unable to enjoy my hobby of watching soccer because I am tired and fall asleep.Palpebral conjunctiva, bulbar conjunctiva abnormality (-) #Stomach cancer Dr.Yamanaka/Kamata radio talk Abdomen flat/soft Liver/spleen not palpable"]},otherHistory:[]},{id:"nausea-vomiting-15",nightNumber:15,titleJa:"",titleEn:"Nausea/vomiting",categoryId:"gastrointestinal",categoryRoman:"IV",categoryOrder:4,symptomOrder:1,symptomLabelJa:"",symptomLabelEn:"Nausea/vomiting",symptomVariant:null,patient:{name:"Kazuki Matsumoto",age:63,gender:"male",demographicsJa:"63",demographicsEn:"63-year-old male",chiefComplaintJa:"",chiefComplaintEn:"Abdominal pain, vomiting",vitalsJa:" 178/94  58/  20/36.5",vitalsEn:"Blood pressure 178/94, pulse 58 beats/min, respiratory rate 20 breaths/min, body temperature 36.5"},caseNotes:{summaryEn:"63-year-old male with Abdominal pain, vomiting.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"3 ",textEn:"Three hours ago, I started to feel a sharp pain around my navel and it started to tighten."},{label:"P",cue:"provoking or relieving factors",textJa:"",textEn:"The tension becomes easier when you lie down."},{label:"Q",cue:"symptom quality or severity",textJa:"3",textEn:"I vomited three times."},{label:"S",cue:"associated symptoms",textJa:" ",textEn:"No diarrhea.It feels unpleasant when I walk, but it doesn't resonate."}],history:{pastMedicalHistory:[],medications:[],allergies:[],familyHistory:[],socialHistory:["Preferences: Drinks about 2 cups a day.","Diet: I don't eat raw food.I haven't eaten out.Note: When I had similar symptoms in the past, they healed naturally.No one around me has similar symptoms."]},otherHistory:["Medical Examination I was once told that I had liver cirrhosis caused by alcohol.I was told that my blood pressure was high.I am not taking any pharmaceutical drugs.In the past, when I had a headache, I took medicine and felt better."]},{id:"melena-abdominal-pain-19",nightNumber:19,titleJa:"",titleEn:"Melena + abdominal pain",categoryId:"gastrointestinal",categoryRoman:"IV",categoryOrder:4,symptomOrder:2,symptomLabelJa:"",symptomLabelEn:"Melena + abdominal pain",symptomVariant:null,patient:{name:"Rina Yamazaki",age:72,gender:"female",demographicsJa:"72",demographicsEn:"72-year-old female",chiefComplaintJa:"",chiefComplaintEn:"Melena, abdominal pain",vitalsJa:" 142/92 mmHg 96  20SpO 96% room air 37.2",vitalsEn:"Consciousness clear, blood pressure 142/92 mmHg, pulse 96 times regular, respiratory rate 20 times, SpO 96% room air, body temperature 37.2"},caseNotes:{summaryEn:"72-year-old female with Melena, abdominal pain.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"2230    ",textEn:"When I tried to go to bed around 10pm, it started hurting about 30 minutes later.This is the first time something like this has happened.I felt normal until noon today, but I started feeling sluggish in the evening."},{label:"P",cue:"provoking or relieving factors",textJa:"",textEn:"There is no comfortable posture."},{label:"Q",cue:"symptom quality or severity",textJa:"5      105 8",textEn:"After feeling sick to my stomach, I had watery diarrhea about 5 times.In the end, I came to the hospital because I was bleeding bright red blood.The pain was sharp and was gradually getting worse.There are fluctuations between times of pain and times of ease.If the worst pain is given a score of 10, the current pain is given a score of 5.When I went to the bathroom at home, my score was 8."},{label:"R",cue:"location or radiation",textJa:" ",textEn:"The lower left side hurts.There is no pain in my back."}],history:{pastMedicalHistory:["Past medical history: The patient has been seeing his family doctor for high blood pressure and diabetes."],medications:[],allergies:[],familyHistory:[],socialHistory:["Meals: I ate rice normally.I ate croquettes today.I don't eat raw or ready-made foods."]},otherHistory:["Drug history: I am not taking any medications.Allergy history: There are no abnormalities in cholesterol levels or allergies.","During the medical checkup, I was told that my blood sugar was high.No particular abnormalities were noted on stool examination."]},{id:"blood-vomit-20",nightNumber:20,titleJa:"",titleEn:"Blood vomit",categoryId:"gastrointestinal",categoryRoman:"IV",categoryOrder:4,symptomOrder:3,symptomLabelJa:"",symptomLabelEn:"Blood vomit",symptomVariant:null,patient:{name:"Shota Kuroda",age:62,gender:"male",demographicsJa:"62",demographicsEn:"62-year-old male",chiefComplaintJa:"",chiefComplaintEn:"Blood vomit",vitalsJa:"",vitalsEn:""},caseNotes:{summaryEn:"62-year-old male with Blood vomit.",objectiveEn:"",planEn:""},presentIllness:[],history:{pastMedicalHistory:[],medications:[],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:[]},{id:"diarrhea-2",nightNumber:2,titleJa:"",titleEn:"diarrhea",categoryId:"gastrointestinal",categoryRoman:"IV",categoryOrder:4,symptomOrder:4,symptomLabelJa:"",symptomLabelEn:"diarrhea",symptomVariant:null,patient:{name:"Yuji Hasegawa",age:26,gender:"male",demographicsJa:"26",demographicsEn:"26-year-old male",chiefComplaintJa:"",chiefComplaintEn:"Diarrhea, bloody stool",vitalsJa:" 108/6476  18SpO 99% 37.1",vitalsEn:"Blood pressure 108/64, pulse 76 regular, respiratory rate 18, SpO 99%, body temperature 37.1"},caseNotes:{summaryEn:"26-year-old male with Diarrhea, bloody stool.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"312",textEn:"It started 3 months ago and has gotten worse in the past week or two."},{label:"Q",cue:"symptom quality or severity",textJa:"  ",textEn:"The stool is brownish and mucus, with some blood mixed in.No watery diarrhea.It's not black stool."},{label:"R",cue:"location or radiation",textJa:"",textEn:"Pain around the navel and lower abdomen."},{label:"S",cue:"associated symptoms",textJa:"      ",textEn:"My stomach hurts.I did not take my temperature, and although I felt sluggish, I went to work.I have lost some weight, and people around me say that I have lost weight.I don't feel lightheaded, but I do feel sluggish.I feel more out of breath than usual.When I feel the urge to go to the toilet, nothing happens."},{label:"T",cue:"time course",textJa:"",textEn:"I never wake up with diarrhea."}],history:{pastMedicalHistory:["Past medical history Although I was told to be careful about my cholesterol during a health checkup, I have not received any particular treatment."],medications:["Medication history: I have not taken any medications.I am not taking antibiotics.preference"],allergies:[],familyHistory:[],socialHistory:["Smoking: 10 cigarettes/day from around 20 years old.","Travel history: I have not been overseas in the past year.I haven't been camping or going to hot springs recently.","I have no sex with men."]},otherHistory:["Alcohol: Approximately two 500ml cans a day.I haven't been drinking since I started feeling sick.","Work history: Works in the printing industry, doing clerical work and transporting things."]},{id:"constipation-4",nightNumber:4,titleJa:"",titleEn:"constipation",categoryId:"gastrointestinal",categoryRoman:"IV",categoryOrder:4,symptomOrder:5,symptomLabelJa:"",symptomLabelEn:"constipation",symptomVariant:null,patient:{name:"Haruto Ono",age:50,gender:"male",demographicsJa:"50",demographicsEn:"50-year-old male",chiefComplaintJa:"",chiefComplaintEn:"constipation, diarrhea",vitalsJa:"118 /7280  16SpO 99% 36.5",vitalsEn:"Blood pressure 118/72, pulse 80/regular, respiratory rate 16, SpO 99%, body temperature 36.5"},caseNotes:{summaryEn:"A 50-year-old man came to our hospital complaining of recurrent diarrhea and constipation.The patient had been aware of diarrhea and constipation for three weeks.I had never experienced similar symptoms before.There is no particular medical history.My mother was diagnosed with colon cancer when she was 60 years old.",objectiveEn:"Vital signs were blood pressure 118/72, pulse 80 beats, respiratory rate 16 beats, SpO 99%, and body temperature 36.5C, and no abnormalities were observed in the vital signs.Intestinal peristalsis sounds were slightly increased.Palpation revealed an elastic hard mass slightly to the left of the midline of the lower abdomen.The surface of the tumor was smooth and mobile, and no tenderness was observed when the tumor was pressed.The liver and spleen were not touched.Upon rectal examination, no mass was palpable, and the stool was mucus and bloody.A&P rectal examination revealed mucus and blood in the stool, so colorectal cancer was most likely.Differential diagnoses include irritable bowel syndrome, autonomic neuropathy due to diabetes, drug-induced symptoms, and hypothyroidism.Irritable bowel syndrome is ruled out because the patient had a sudden onset 3 weeks ago and constipation is the main symptom, and there is no dry mouth or polyuria, which would suggest diabetes.Since there are no oral medications, the possibility of drug-induced symptoms is low.In the future, abdominal X-rays and abdominal CT will be taken to confirm the location of the mass and the presence or absence of intestinal obstruction.Also, check for progress of anemia and electrolyte abnormalities by taking a blood sample.#Colon cancer #Irritable bowel syndrome #Diabetes #Drug-induced #Hypothyroidism #Electrolyte abnormality",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"3  ",textEn:"Since I had diarrhea 3 weeks ago, I have had repeated episodes of constipation and diarrhea.Nothing like this has ever happened before."},{label:"R",cue:"location or radiation",textJa:"",textEn:"It hurts around my navel."}],history:{pastMedicalHistory:["Medical history: I have not had constipation since I was young.I've never been sick."],medications:["Medication history: I have not taken any medications."],allergies:[],familyHistory:["Family history: My mother had colon cancer when she was 60 years old."],socialHistory:["Preferences Smoking I don't smoke.","Food: I don't often drink sweet soft drinks."]},otherHistory:["I think I had diarrhea about 4 times a day.I haven't really checked the color or thinness of the stool.The pain comes in waves, and sometimes it doesn't hurt.There are no vibrations.","I don't feel nauseous.","Stomach bloat: I don't feel refreshed because I haven't passed stool.","Gas is coming out.","I haven't taken my temperature, but I don't have any cold symptoms.","Weight: Although I don't do any particular exercise, I have lost 5 kg in one year.","I'm not particularly thirsty.","The frequency of urination has not increased.","I undergo a health check every year.","Fecal occult blood test was performed only once out of two times.","Alcohol: I drink about one go of shochu a day.For about 30 years."]},{id:"abdominal-distension-32",nightNumber:32,titleJa:"",titleEn:"abdominal distension",categoryId:"gastrointestinal",categoryRoman:"IV",categoryOrder:4,symptomOrder:6,symptomLabelJa:"",symptomLabelEn:"abdominal distension",symptomVariant:null,patient:{name:"Issei Okada",age:66,gender:"male",demographicsJa:"66",demographicsEn:"66-year-old male",chiefComplaintJa:"",chiefComplaintEn:"abdominal distension",vitalsJa:" 146/60mmHg 76 /  36.7",vitalsEn:"Consciousness clear, blood pressure 146/60mmHg, pulse 76 beats/min, body temperature 36.7"},caseNotes:{summaryEn:"66-year-old male with abdominal distension.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"3  ",textEn:"Three weeks ago, my belt started to get tighter, and my stomach started to swell.I have never felt bloated."},{label:"S",cue:"associated symptoms",textJa:"15kg     25  20    ",textEn:"My weight increased by 5 kg in one month.I feel tired but have no other symptoms.My stomach quickly becomes bloated, but I am able to eat little by little.Medical history: At the age of 25, the patient suffered from bleeding from a duodenal ulcer and received a blood transfusion.He was diagnosed with hepatitis 20 years ago and has been seeing a nearby doctor.Health checkup I undergo regular health checkups.Even at my local doctor, I receive follow-up checks on my liver function every few months."},{label:"S",cue:"associated symptoms",textJa:"66 4020 15kg ",textEn:"A 66-year-old man visited our hospital with the chief complaint of abdominal distension for three weeks.He received a blood transfusion 40 years ago for bleeding from a duodenal ulcer, and 20 years ago he was diagnosed with chronic hepatitis and visited a nearby hospital.My weight has increased by 5 kg in the past month.There is no history of eating raw meat or taking any new drugs."},{label:"O",cue:"symptom onset and context",textJa:"166cm60kg  146/60 mmHg  76/  36.7    A&P  CT  32 32   (+) (+)      (250/L) ()     CT  ",textEn:"Height: 166cm, weight: 60kg.Clear consciousness.Vitals were normal: blood pressure 146/60 mmHg, pulse 76 beats/min, body temperature 36.7C. Physical examination revealed yellowing of the bulbar conjunctiva.A spider-like hemangioma on the anterior chest and erythema on the palms were observed, the abdomen was distended, and the spleen was palpated.The liver is not palpable.Edema was observed in the lower legs.A&P Based on the past history and physical findings, the most likely explanation is that chronic hepatitis has developed into decompensated cirrhosis.Blood samples including hepatobiliary enzymes, abdominal ultrasound, and abdominal CT are performed to confirm the size of the liver and the presence of liver cancer.Consider using diuretics and albumin preparations for edema.32nd night: Abdominal distension 32nd night: Abdominal distention Spider-like hemangioma Erythema on the palms (+) Bilateral lower leg edema (+) Idiopathic bacterial peritonitis A condition in which infectious ascites occurs despite the absence of inflammation, tumor, or intestinal perforation of the abdominal organs.Most cases have a background of decompensated liver cirrhosis.There is a risk of developing septic shock, so early diagnosis and treatment are important.[Test/Diagnosis] The number of neutrophils in ascites is important.[Ascites puncture] Neutrophils  (250/L or more) [Bacterial culture] Negative (no bacteria identified) *In recent years, many cases have been identified.[Cytology] Denies cancer. [Blood] Inflammatory reaction. [Abdominal CT] Excludes secondary peritonitis. [Approach] Consider causes from multiple angles, including hepatosplenomegaly, ascites, and ileus."},{label:"QB",cue:"detail",textJa:"100C7-9 32_ IV. IV. ",textEn:"100C7-9 32nd night_Abdominal distension IV. Symptoms related to the digestive system  IV. Symptoms related to the digestive system "}],history:{pastMedicalHistory:[],medications:["Medication history: I am not taking any medicines or supplements."],allergies:[],familyHistory:[],socialHistory:["Meal: I don't eat wild game.Yellowing of bulbar conjunctiva (+) #cirrhosis Dr.Yamanaka/Kamata radio talk Abdominal distension Liver not palpable (no hepatomegaly) Spleen dullness expanded Spleen palpable"]},otherHistory:[]},{id:"jaundice-31",nightNumber:31,titleJa:"",titleEn:"jaundice",categoryId:"gastrointestinal",categoryRoman:"IV",categoryOrder:4,symptomOrder:7,symptomLabelJa:"",symptomLabelEn:"jaundice",symptomVariant:null,patient:{name:"Kana Sugiyama",age:55,gender:"female",demographicsJa:"55",demographicsEn:"55-year-old female",chiefComplaintJa:"",chiefComplaintEn:"jaundice",vitalsJa:" 116/60mmHg 64/  18/ 36.3",vitalsEn:"Consciousness clear, blood pressure 116/60mmHg, pulse 64 beats/min, respiratory rate 18/min, body temperature 36.3"},caseNotes:{summaryEn:"55-year-old female with jaundice.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"1 1",textEn:"A week ago, I was told that the whites of my eyes were yellow.I've been feeling tired for about a month."},{label:"S",cue:"associated symptoms",textJa:"   1 BC   1 TNF- ",textEn:"I feel sluggish.I haven't taken his temperature, but he doesn't feel feverish.Past medical history: The patient was diagnosed with ulcerative colitis 1 year ago and is currently undergoing treatment.I was tested for hepatitis B and C during the endoscopy and was told that it was safe, so I am not worried.Medication history: The patient had been treated with steroids for ulcerative colitis for 1 year.Treatment with anti-TNF- antibody drugs was started six months ago."},{label:"QB",cue:"detail",textJa:"112A50 Dr  ()  ",textEn:"112A50 Dr.Yamanaka/Kamata radio talk Abdomen is flat and soft Abdominal tenderness (-) Liver and spleen are not palpable"},{label:"S",cue:"associated symptoms",textJa:"55 1 TNF-  1 B HBs ",textEn:"A 55-year-old woman visited our hospital with a chief complaint of jaundice.One year ago, I had bloody stools and abdominal pain.The patient was diagnosed with ulcerative colitis.Initially, the patient was treated with corticosteroids, but this was ineffective, and he began taking anti-TNF- antibody drugs for the past six months.The symptoms of ulcerative colitis had improved, but jaundice developed one week ago.The patient is not taking any medications other than those for ulcerative colitis.My mother and brother are hepatitis B carriers.When treatment for ulcerative colitis was started, HBs antigen was negative.He has no history of smoking, and only drinks occasionally."},{label:"O",cue:"symptom onset and context",textJa:"152cm45kg  116/60mmHg  64/  18/ 36.3  A&P BTNF-de novo ()CT 31 31       Dr. 01:08  38:18",textEn:"Height: 152cm, weight: 45kg.Clear consciousness.Vitals were blood pressure 116/60 mmHg, pulse 64 beats/min, respiratory rate 18 breaths/min, and body temperature 36.3C. Physical examination revealed yellowing of the bulbar conjunctiva.There were no noteworthy findings on abdominal examination.A&P: De novo hepatitis is most likely because the mother and brother are hepatitis B carriers and have a history of taking anti-TNF- antibody drugs.Future tests include blood count, biochemistry (particularly to check liver function), ultrasound, and CT.Night 31: Jaundice Night 31: Jaundice <<Approach>> Do not overlook any medical history that may cause liver damage.Lower leg edema (-)  Free talk Dr. Kamata, dislocated fracture in Italy 01:08 Overseas price of acetaminophen 38:18"}],history:{pastMedicalHistory:[],medications:[],allergies:[],familyHistory:["Family history: Mother and brother are hepatitis B carriers."],socialHistory:["Meal: I don't eat mushrooms.","Preferences: I only drink alcohol at gatherings.I don't smoke.Anemia in the palpebral conjunctiva (-) Yellow staining in the bulbar conjunctiva (+) #de novo hepatitis B"]},otherHistory:["De novo hepatitis B Hepatitis caused by HBV reactivation in a person with a past HBV infection (HBs antigen negative and HBc antibody or HBs antibody positive).- It may be seen when steroids, anti-rheumatic drugs, biological preparations, immunosuppressive drugs, and anticancer drugs are used, so tests for HB-related markers and liver function should be performed before using these drugs.If the patient has a history of HBV infection (or is positive for a trace amount of HBV), follow-up tests should be performed even during drug administration, considering the risk of reactivation.- Appropriate response and treatment are important as the disease is more likely to become fulminant and the mortality rate is higher than normal acute hepatitis B.31st night_Jaundice IV. Symptoms related to the digestive system  IV. Symptoms related to the digestive system "]},{id:"palpitations-11",nightNumber:11,titleJa:"",titleEn:"palpitations",categoryId:"cardiopulmonary",categoryRoman:"V",categoryOrder:5,symptomOrder:1,symptomLabelJa:"",symptomLabelEn:"palpitations",symptomVariant:null,patient:{name:"Sora Takahashi",age:78,gender:"male",demographicsJa:"78",demographicsEn:"78-year-old male",chiefComplaintJa:"",chiefComplaintEn:"palpitations",vitalsJa:" 152/90 76/  16/SpO 98%(room air) 36.2",vitalsEn:"Blood pressure 152/90, pulse 76/min irregular, respiratory rate 16/min, SpO 98% (room air), body temperature 36.2"},caseNotes:{summaryEn:"78-year-old male with palpitations.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"3  ",textEn:"Symptoms have been occurring for 3 days.The symptoms appeared while I was cleaning up the house.This is the first time something like this has happened."},{label:"P",cue:"provoking or relieving factors",textJa:"  ",textEn:"I had palpitations for a long time, but eventually stopped feeling them.My heart is pounding again today."},{label:"Q",cue:"symptom quality or severity",textJa:"",textEn:"I feel like my pulse is irregular."},{label:"S",cue:"associated symptoms",textJa:" ",textEn:"I feel different than usual, but I don't feel tired easily."},{label:"T",cue:"time course",textJa:"",textEn:"I still have palpitations."}],history:{pastMedicalHistory:["Medical history: There is a history of hypertension.I have never been told that I have heart failure or diabetes."],medications:[],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:["Health checkup I go to my family doctor once a year.","Other I am cleaning up my surroundings due to the end of my life, but I am not particularly stressed."]},{id:"vomiting-blood-20",nightNumber:20,titleJa:"",titleEn:"vomiting blood)",categoryId:"cardiopulmonary",categoryRoman:"V",categoryOrder:5,symptomOrder:2,symptomLabelJa:"",symptomLabelEn:"vomiting blood)",symptomVariant:null,patient:{name:"Moe Ishikawa",age:27,gender:"female",demographicsJa:"27",demographicsEn:"27-year-old female",chiefComplaintJa:"",chiefComplaintEn:"Chest pain, difficulty breathing",vitalsJa:" 112/64 mmHg  120/  32/SpO 88%(room air) 38.0",vitalsEn:"Blood pressure 112/64 mmHg, pulse 120/min, respiratory rate 32/min, SpO 88% (room air), body temperature 38.0"},caseNotes:{summaryEn:"27-year-old female with Chest pain, difficulty breathing.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"  ",textEn:"My right chest hurts since yesterday.I came home from office work and was preparing a meal when I suddenly felt pain."},{label:"Q",cue:"symptom quality or severity",textJa:"  ",textEn:"The front of my right chest hurts.It hurts when I breathe.I can't take a deep breath."},{label:"S",cue:"associated symptoms",textJa:" ",textEn:"I don't cough much.It's hard to breathe."},{label:"T",cue:"time course",textJa:" ",textEn:"I tried to see what was going on, but it didn't get any better.This is the first time something like this has happened."},{label:"QB",cue:"detail",textJa:"117F 71-73 Dr ()",textEn:"117F 71-73 Dr.Yamanaka/Kamata radio talk jugular vein tension (+)"},{label:"S",cue:"associated symptoms",textJa:"27   3-4",textEn:"A 27-year-old woman visited our hospital with the chief complaint of right anterior chest pain.Yesterday, I noticed sudden right anterior chest pain, followed by pleural stimulation pain during inspiration.The patient visited the hospital because of increasing chest pain and difficulty breathing.He has no past medical history and has been taking pills for the past 3-4 months."},{label:"O",cue:"symptom onset and context",textJa:"163cm60kg",textEn:"Height: 163cm, weight: 60kg.Clear consciousness."}],history:{pastMedicalHistory:["Medical history: I have never been sick."],medications:["Medication history: I have been taking the pill for 3-4 months."],allergies:[],familyHistory:[],socialHistory:["Preferences: I don't smoke.I only drink alcohol once in a while.","Life history I work in an office.Eyelid/bulbar conjunctiva abnormality (-) #pulmonary embolism #pulmonary infarction"]},otherHistory:["Blood pressure 112/64 mmHg, pulse 120 beats/min, respiratory rate 32 breaths/min, SpO 88% (room air), body temperature 38.0C.Physical examination revealed distended jugular veins.Auscultation revealed no abnormalities in breath sounds, but an increase in the sound II was observed.Edema was observed in the right lower leg.Pulmonary embolism is most likely due to the thrombotic tendency caused by taking the A&P pill and the physical findings.Since acute coronary syndrome is a differential diagnosis, an electrocardiogram is taken.Diagnosis is performed by blood sampling, blood gas, electrocardiogram, echocardiogram, and chest imaging tests.","Heart sound II hyperencephalon","Breathing sounds Pleural friction sound (-) Edema in the right lower leg (+)  Free talk - How to enjoy summer 1:03 - Dr. Kamata on a long-term flight 35:10 29th night: Difficulty breathing  29th night: Dyspnea  [Approach] Don't overlook the risk factors for pulmonary embolism.Acute epiglottitis, suffocation, bronchial asthma, acute respiratory distress syndrome (ARDS), pneumonia, chronic obstructive pulmonary disease (COPD), interstitial lung disease, pulmonary tuberculosis, tension pneumothorax, spontaneous pneumothorax, heart failure, anaphylaxis Night 29_Difficulty breathing  V. Symptoms related to breathing/circulation  V. Symptoms related to breathing/circulation "]},{id:"difficulty-breathing-2-30",nightNumber:30,titleJa:"",titleEn:"Difficulty breathing",categoryId:"cardiopulmonary",categoryRoman:"V",categoryOrder:5,symptomOrder:3,symptomLabelJa:"",symptomLabelEn:"difficulty breathing",symptomVariant:2,patient:{name:"Taichi Kato",age:75,gender:"male",demographicsJa:"75",demographicsEn:"75-year-old male",chiefComplaintJa:"",chiefComplaintEn:"Difficulty breathing on exertion",vitalsJa:" 142/56 mmHg  92/  24/SpO 90%(room air) 36.6",vitalsEn:"Blood pressure 142/56 mmHg, pulse 92 beats/min, respiratory rate 24 breaths/min, SpO 90% (room air), body temperature 36.6"},caseNotes:{summaryEn:"75-year-old male with Difficulty breathing on exertion.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"2-3  11 ",textEn:"For the past 2-3 years, I have had difficulty breathing when walking.It gradually became difficult to breathe.This has happened once before, but it got better after about a week."},{label:"S",cue:"associated symptoms",textJa:" ",textEn:"I have a cough and phlegm.I have no chest pain."},{label:"T",cue:"time course",textJa:"  1",textEn:"Since last year, I have been unable to walk up stairs or hills without taking a break.A week ago, I started having more difficulty breathing than usual."},{label:"QB",cue:"detail",textJa:"Dr ",textEn:"Dr.Radio talk by Yamanaka and Kamata: Jugular vein distension (-)"},{label:"S",cue:"associated symptoms",textJa:"75 1  1 50140",textEn:"A 75-year-old man visited our hospital with a chief complaint of dyspnea.Several years ago, I became aware of dyspnea on exertion, and since a year ago, I have been unable to climb hills or stairs without taking a break.The patient had been experiencing difficulty breathing, purulent sputum, and cough for a week, and as the symptoms did not improve, he visited our hospital.There is a history of hypertension.He has a history of smoking 40 cigarettes a day for 50 years.Drinking is opportunistic drinking."},{label:"O",cue:"symptom onset and context",textJa:"163cm65kg  142/56 mmHg  92/  24/SpO 90%(room air) 36.6  wheeze A&P 1COPD  XCT",textEn:"Height: 163cm, weight: 65kg.Clear consciousness.Vitals were blood pressure 142/56 mmHg, pulse 92 beats/min, respiratory rate 24 breaths/min, SpO 90% (room air), and body temperature 36.6C.Physical examination revealed no distention of the jugular veins, but thickening of the sternocleidomastoid muscle.Auscultation revealed no abnormalities in heart sounds, but wheezes were heard in the breath sounds, which were found to be attenuated throughout the lung fields.A&P Since the chronic course of dyspnea worsened acutely within 1 week, acute exacerbation due to bacterial infection of COPD is most likely.Tests include blood tests, blood gases, and chest X-rays and CT."}],history:{pastMedicalHistory:["Past medical history: When I was 60 years old, I was told that I had high blood pressure."],medications:["Medication history: I am taking medication for high blood pressure.allergy"],allergies:[],familyHistory:[],socialHistory:["Note: No one around me has a cold.","Preferences: I have been smoking 40 cigarettes a day since I was 25 years old.I only drink alcohol once a week.Eyelid/bulbar conjunctival abnormality (-) #Acute exacerbation of COPD"]},otherHistory:["I have no allergies.","Sternocleidomastoid muscle hypertrophy","Heart sounds No abnormality","wheeze Breath sounds decreased throughout the lung field 30th night: Dyspnea  30th night: Dyspnea  [Approach] Be careful of acute exacerbation of chronic disease.30th night_Difficulty breathing  117F 62-64 V. Symptoms related to breathing/circulation  V. Symptoms related to breathing/circulation "]},{id:"cough-39",nightNumber:39,titleJa:"",titleEn:"cough",categoryId:"cardiopulmonary",categoryRoman:"V",categoryOrder:5,symptomOrder:4,symptomLabelJa:"",symptomLabelEn:"cough",symptomVariant:null,patient:{name:"Yuto Ando",age:43,gender:"male",demographicsJa:"43",demographicsEn:"43-year-old male",chiefComplaintJa:"",chiefComplaintEn:"cough",vitalsJa:"",vitalsEn:"Clear consciousness, no abnormalities"},caseNotes:{summaryEn:"43-year-old male with cough.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"6 4 ",textEn:"I had cold symptoms for 6 weeks.I started coughing 4 weeks ago, and it feels like wheezing."},{label:"Q",cue:"symptom quality or severity",textJa:"        ",textEn:"Cough occurs more often at night or early in the morning than during the day.I tend to cough when I breathe in cold air.I don't find it easier to cough when I talk.Movement does not make you cough more easily.Past medical history Six months ago, it was noted that the patient had high blood pressure.A gastric camera revealed a gastric ulcer.I have no contact with anyone with tuberculosis, and no one in my family has tuberculosis."},{label:"QB",cue:"detail",textJa:"108C23 Dr   wheeze",textEn:"108C23 Dr.Yamanaka/Kamata radio talk: No abnormality in heart sounds; wheeze heard in both lung fields"},{label:"S",cue:"associated symptoms",textJa:"43 64   CaACE",textEn:"A 43-year-old man visited our hospital with a chief complaint of persistent cough.I had cold symptoms 6 weeks ago, and after those symptoms subsided, I had a persistent cough for 4 weeks.In addition to coughing, he was also aware of wheezing.Symptoms are especially worse at night and early in the morning.His past medical history is gastric ulcer and hypertension, and he is taking oral gastric medicine and Ca channel blocker.There is no history of taking ACE inhibitors."},{label:"O",cue:"symptom onset and context",textJa:" wheeze A&P   X 39 39       01:12  33:36 39_ V. V. ",textEn:"No abnormalities were found in his vitals.Auscultation revealed wheeze in both lung fields.A&P: Bronchial asthma is most likely because the patient has had a persistent cough since after a cold, and there is diurnal variation in symptoms, and wheezing can be heard.To rule out tuberculosis or pneumonia, a chest X-ray is taken to confirm that there are no imaging findings suggestive of pneumonia or tuberculosis.Night 39: Cough Night 39: Cough [Approach] Diurnal fluctuations in cough are a characteristic of bronchial asthma. Free talk Enjoyment of medical treatment in the countryside 01:12 Do cough suppressants work?33:36 Night 39_Cough V. Symptoms related to breathing/circulation  V. Symptoms related to breathing/circulation "}],history:{pastMedicalHistory:[],medications:["Medication history: The patient is taking stomach medications and Ca channel blockers to lower blood pressure."],allergies:[],familyHistory:[],socialHistory:["Preferences: I have smoked one pack of cigarettes a day for over 20 years.#bronchial asthma"]},otherHistory:[]},{id:"bloody-sputum-hemoptysis-10",nightNumber:10,titleJa:"",titleEn:"bloody sputum/hemoptysis",categoryId:"cardiopulmonary",categoryRoman:"V",categoryOrder:5,symptomOrder:5,symptomLabelJa:"",symptomLabelEn:"bloody sputum/hemoptysis",symptomVariant:null,patient:{name:"Ren Miura",age:78,gender:"male",demographicsJa:"78",demographicsEn:"78-year-old male",chiefComplaintJa:"",chiefComplaintEn:"Slight fever, bloody sputum",vitalsJa:"112 /68  72 16SpO 97%(room air) 37.6",vitalsEn:"Blood pressure 112/68, heart rate 72 times, respiratory rate 16 times, SpO 97% (room air), body temperature 37.6."},caseNotes:{summaryEn:"78-year-old male with Slight fever, bloody sputum.",objectiveEn:"",planEn:""},presentIllness:[],history:{pastMedicalHistory:["Past medical history: Until retirement, he underwent medical checkups.He was diagnosed with high blood pressure and hyperglycemia."],medications:["Medication history: I am taking medication for high blood pressure.Preferences: I used to smoke until 10 years ago.20 videos/day when young, around 10 videos/day after retirement"],allergies:[],familyHistory:[],socialHistory:["Work history: Worked as a high school mathematics teacher","Travel history: I traveled a lot when I was young.I haven't traveled abroad in the past three years.","Note: I have never been told that I have tuberculosis.There were no people around me with tuberculosis."]},otherHistory:["misc O/T Sputum since 2 months ago, slight fever of about 37.0 since 1 month, bloody sputum since 1 week.This is the first time I have experienced such symptoms.","I'm losing weight. I've lost about 5 kg in 2 months, going from 60 kg to 55 kg.sweat while sleeping"]},{id:"dizziness-14",nightNumber:14,titleJa:"",titleEn:"dizziness",categoryId:"neuro-psych",categoryRoman:"VI",categoryOrder:6,symptomOrder:1,symptomLabelJa:"",symptomLabelEn:"dizziness",symptomVariant:null,patient:{name:"Sayaka Morita",age:60,gender:"female",demographicsJa:"60",demographicsEn:"60-year-old female",chiefComplaintJa:"",chiefComplaintEn:"dizziness",vitalsJa:" 132/78  84/  16/SpO 98%(room air) 36.6",vitalsEn:"Blood pressure 132/78, pulse 84/min, respiratory rate 16/min, SpO 98% (room air), body temperature 36.6"},caseNotes:{summaryEn:"60-year-old female with dizziness.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"  ",textEn:"I felt dizzy when I woke up in the morning.I felt dizzy yesterday and today.I have never experienced dizziness like this before."},{label:"Q",cue:"symptom quality or severity",textJa:"1 ",textEn:"It lasted about a minute.I felt dizzy and felt like the ceiling was spinning."},{label:"S",cue:"associated symptoms",textJa:"  ",textEn:"There is no tinnitus or difficulty hearing.You can put proper strength into your limbs.My head doesn't hurt."},{label:"T",cue:"time course",textJa:"",textEn:"I don't feel dizzy now."},{label:"S",cue:"associated symptoms",textJa:"60  1 ",textEn:"A 60-year-old woman came to our hospital with a chief complaint of dizziness.Yesterday and this morning, when I woke up and tried to get up, I felt dizzy and felt like the ceiling was spinning.The dizziness lasted about 1 minute and subsided with rest.There was no hearing loss, and there were no findings suggestive of gastrointestinal bleeding.There is no history of smoking."},{label:"O",cue:"symptom onset and context",textJa:" 132/78  84/  16/SpO 98%(room air) 36.6 A&P 1  BPPV Dix-HallpikeBPPVEpley Barre() Mingazzini() ()  () ()  #(BPPV)",textEn:"Upon arrival, the patient was conscious, his vital signs were 132/78, pulse 84 beats/min, respiratory rate 16/min, SpO 98% (room air), and body temperature 36.6C, and there were no abnormalities in his neurological findings.Walking is also possible.A&P Dizziness lasts only 1 minute and subsides with rest.There are no cochlear symptoms or cranial nerve symptoms, so peripheral vertigo is suspected.Among peripheral vertigo, benign paroxysmal positional vertigo (BPPV) is most likely.Perform the Dix-Hallpike method to check whether there is any improvement.If BPPV is diagnosed, treatment is performed using the Epley method.Upper extremity Barre sign () Mingazzini sign () Gastrointestinal bleeding () Facial symmetry Facial paresthesia () Dysarthria () Role play #Benign paroxysmal positional vertigo (BPPV)"},{label:"QB",cue:"detail",textJa:"109C2829Dr 14_ VI. VI. ",textEn:"109C28, 29Dr.Yamanaka/Kamata Radio Talk 14th Night_Dizziness VI. Symptoms related to nerves and psyche  VI. Symptoms related to nerves and psyche "}],history:{pastMedicalHistory:["Past medical history: At the age of 28, the patient developed pyelonephritis."],medications:[],allergies:[],familyHistory:[],socialHistory:["Eating I'm hungry, but I can't eat much because I'm afraid of getting dizzy.","Preferences: I don't smoke.Occasional drinking.","Notes: I defecated yesterday, but it was the same as usual. Exclusion of presyncope 17:11 Many patients come to the hospital complaining of feeling dizzy or feeling faint.- First, rule out presyncope due to dehydration or bleeding.Gastrointestinal bleeding and cardiovascular disease (aortic dissection and myocardial infarction) are important for emergency presyncope. Exclude central vertigo 18:43 For central vertigo, hemorrhage/infarction in the cerebellum or brainstem is the most dangerous and risk factor.Check to see if you have arteriosclerosis or lifestyle-related diseases.Check if you have walked to the examination room  Check for cerebellar symptoms.-Central vertigo can be ruled out because the duration of the dizziness is short and subsides with rest. When central vertigo is suspected 41:00 Infarction includes infarction of the internal carotid artery system and vertebrobasilar artery system.Infarctions that cause dizziness often occur in the vertebrobasilar artery system.Since cerebral infarctions where the only symptom is dizziness are rare, check for other neurological findings.- In the case of disorders of the vertebrobasilar artery system, gait disturbance, dysarthria, diplopia, homonymous hemianopsia, cross-sensory disturbance, and dysphagia are often observed.-It is important to examine the infarction of the vertebrobasilar artery system, as it is quite possible that the imaging test on the same day will be negative. Correctly detect nystagmus 47:16 Check nystagmus using Frenzel glasses.If vertical nystagmus or gaze-induced nystagmus occurs, suspect central vertigo  immediately obtain CT/MRI. Diagnosis of cerebellar infarction 51:23 - Cerebellar ataxia can be easily confirmed by stressing the patient with leg-to-leg walking, finger-tapping, and finger-nose-finger tests. Free talk Awesome person I met at the outpatient clinic the other day 1:00 Use Frenzel to check for nystagmus ~ Don't overlook nystagmus ~ 47:30 How to identify cerebellar infarction 51:20"]},otherHistory:[]},{id:"muscle-weakness-27",nightNumber:27,titleJa:"",titleEn:"muscle weakness",categoryId:"neuro-psych",categoryRoman:"VI",categoryOrder:6,symptomOrder:2,symptomLabelJa:"",symptomLabelEn:"muscle weakness",symptomVariant:null,patient:{name:"Hayato Nakajima",age:32,gender:"male",demographicsJa:"32",demographicsEn:"32-year-old male",chiefComplaintJa:"",chiefComplaintEn:"muscle weakness",vitalsJa:" 138/82 mmHg 88/  20/SpO 99%(room air),  36.2",vitalsEn:"Blood pressure 138/82 mmHg, pulse 88/min, respiratory rate 20/min, SpO 99% (room air), body temperature 36.2"},caseNotes:{summaryEn:"32-year-old male with muscle weakness.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"   103 ",textEn:"Since the day before yesterday, I have not had any strength in my legs and it is difficult to move them.I haven't felt any strength in my arm since yesterday afternoon.I can't move my arms or legs today.I had a slight fever for 10 days, but it got better in about 3 days."},{label:"S",cue:"associated symptoms",textJa:"   ",textEn:"There was no cough or diarrhea.I don't feel stuffy.Objects do not appear twice.There is no need to become unconscious."}],history:{pastMedicalHistory:["Past medical history: No abnormalities have been detected during medical examinations."],medications:[],allergies:[],familyHistory:[],socialHistory:["Meals: I often cook and eat by myself.I ate it recently.","Preferences: I only drink alcohol when I have the chance.I don't smoke.Note: No one around me has similar symptoms.I haven't been to the mountains.There is no sexual activity between people of the same sex."]},otherHistory:[]},{id:"gait-disorder-35",nightNumber:35,titleJa:"",titleEn:"Gait disorder",categoryId:"neuro-psych",categoryRoman:"VI",categoryOrder:6,symptomOrder:3,symptomLabelJa:"",symptomLabelEn:"Gait disorder",symptomVariant:null,patient:{name:"Chika Hoshino",age:75,gender:"female",demographicsJa:"75",demographicsEn:"75-year-old female",chiefComplaintJa:"",chiefComplaintEn:"Gait disorder",vitalsJa:"JCS -2  114/68mmHg 60/ 16 /SpO2 98%(room air)36.2",vitalsEn:"JCS -2, blood pressure 114/68mmHg, pulse rate 60 times/min, respiratory rate 16 times/min, SpO2 98% (room air), body temperature 36.2"},caseNotes:{summaryEn:"75-year-old female with Gait disorder.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"2   2",textEn:"About two weeks ago, we started talking less and even at home I was stumbling.I feel more dazed than usual.Two months ago, I was hit by a car and fell down."},{label:"S",cue:"associated symptoms",textJa:"  ",textEn:"There were no major injuries.He speaks less than usual, and does not utter words on his own.I'm in a daze."},{label:"S",cue:"associated symptoms",textJa:"75 22 ",textEn:"A 75-year-old woman visited our hospital with a chief complaint of gait disturbance.Two months ago, I was hit by a car and suffered bruises on my head and shoulders.For the past two weeks, the patient has had difficulty walking, sometimes stumbles, speaks less, and has a decreased level of consciousness."},{label:"O",cue:"symptom onset and context",textJa:"156cm62kg",textEn:"Height 156cm, weight 62kg"},{label:"QB",cue:"detail",textJa:"103B56-58",textEn:"103B56-58"}],history:{pastMedicalHistory:["Medical history: I had been told that my pulse was slow.#Chronic subdural hematomaDr.Yamanaka/Kamata radio talk Abdomen flat/soft No tenderness"],medications:[],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:["Vitals Consciousness level JCS-2, blood pressure 114/68 mmHg, pulse rate 60 beats/min, respiratory rate 16 breaths/min, SpO2 98% (room air), body temperature 36.2C Physical examination revealed a Levine 3/6 systolic murmur at the apex of the heart.A&P Since there was a history of trauma 2 months ago, we considered the possibility of chronic subdural hematoma.In addition, mild cerebral infarction such as lacunar infarction and sepsis are also possible.In the future, blood tests and plain CT of the head will be performed.Night 35 Walking disorder Night 35 Walking disorder Decrease in spontaneity Decrease in spontaneous speech","Heart sounds Levine 3/6 systolic murmur at the apex","Breathing sounds No abnormalities  Free talk Study method during student days 01:47 Case examined by Dr. Kamata 37:32 ApproachBe careful of chronic trauma and chronic subdural hematoma.","Pupil: Same size, perfect circle","Light reflex is rapid No abnormalities in palpebral conjunctiva and bulbar conjunctiva Unilateral upper and lower limb weakness Dry skin No edema on face and lower legs Infectious diseases such as cerebral infarction and sepsis Night 35_Gait disturbance VI. Symptoms related to nerves/psychiatry  VI. Symptoms related to nerves/psychiatry "]},{id:"sensory-impairment-36",nightNumber:36,titleJa:"",titleEn:"sensory impairment",categoryId:"neuro-psych",categoryRoman:"VI",categoryOrder:6,symptomOrder:4,symptomLabelJa:"",symptomLabelEn:"sensory impairment",symptomVariant:null,patient:{name:"Minato Murakami",age:68,gender:"male",demographicsJa:"68",demographicsEn:"68-year-old male",chiefComplaintJa:"",chiefComplaintEn:"sensory impairment",vitalsJa:" 128/72mmHg 65/ 18 /SpO2 97%(room air) 36.2",vitalsEn:"Blood pressure 128/72mmHg, pulse 65/min, respiratory rate 18/min, SpO2 97% (room air), body temperature 36.2"},caseNotes:{summaryEn:"68-year-old male with sensory impairment.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:" 3 2 ",textEn:"About six months ago, I felt like my eyesight was getting worse.Three days ago, my vision became even more blurry and I couldn't see.About two years ago, I started feeling numbness in the soles of my feet, and it felt like I was walking on hot sand."},{label:"Q",cue:"symptom quality or severity",textJa:"  ",textEn:"It is difficult to see in both eyes, but the symptoms are more severe in the right eye.Numbness in both legs.I don't have numbness in my hands, only my feet."},{label:"S",cue:"associated symptoms",textJa:"8kg   2-3 2-3",textEn:"My weight increased by about 8 kg.I haven't changed much lately, but I'm starting to gain weight.I often feel constipated or have diarrhea.No erection for 2-3 years.My throat gets dry easily and I have to go to the bathroom 2-3 times during the night."},{label:"S",cue:"associated symptoms",textJa:"68 23 20",textEn:"68 year old male.The patient came to our hospital with chief complaints of numbness in the soles of both feet for the past 2 years and blurred vision in the right eye for the past 3 days.Although he had been diagnosed with urine sugar for 20 years, he had stopped visiting the hospital and receiving medical examinations."},{label:"O",cue:"symptom onset and context",textJa:"172cm72kg",textEn:"Height: 172cm, weight: 72kg"},{label:"QB",cue:"detail",textJa:"117E43-44 B  36_ VI. VI. ",textEn:"117E43-44 Alcohol, vitamin B group deficiency, Guillain-Barre syndrome, malignant tumor Night 36_Sensory disorder VI. Symptoms related to nerves and psychiatry  VI. Symptoms related to nerves and psychiatry "}],history:{pastMedicalHistory:["Past medical history: No illness."],medications:[],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:["When I had a health check 20 years ago, I was told that I had sugar in my urine.I have not had any medical examinations since then.Meals I got divorced 10 years ago and am alone, so I often get by with bento boxes from convenience stores.3 or 2 meals.Preferences: I have smoked about 15 cigarettes a day for about 50 years.When I was young, I smoked a pack.As for alcohol, I drink one 350 cc bottle of beer or one go of shochu every day.#DiabetesDr.Yamanaka/Kamata radio talk No abnormal findings in chest and abdomen","Vitals: Blood pressure 128/72 mmHg, pulse 65 beats/min, respiratory rate 18 breaths/min, SpO2 97% (room air), body temperature 36.2C Physical examination revealed no abnormal findings in the chest and abdomen.Fundus examination revealed soft vitiligo and new blood vessels in the fundus of both eyes.Vitreous hemorrhage was observed in the right eye.Drinking is 350ml of beer or 1 cup of shochu.I smoked 15 cigarettes for 48 years.A&P Diabetes is possible.In addition to blood tests, a urine test will be performed.Night 36: Sensory disorder Night 36: Sensory disorder Soft vitiligo and new blood vessels on the fundus of both eyes Vitreous hemorrhage in the right eye  Free talk - Recommended overseas travel destinations 00:41 - Actual cases of diabetes 39:58 [Approach] Observe the neurological findings characteristic of diabetes."]},{id:"difficulty-swallowing-34",nightNumber:34,titleJa:"",titleEn:"difficulty swallowing",categoryId:"neuro-psych",categoryRoman:"VI",categoryOrder:6,symptomOrder:5,symptomLabelJa:"",symptomLabelEn:"difficulty swallowing",symptomVariant:null,patient:{name:"Misaki Adachi",age:72,gender:"female",demographicsJa:"72",demographicsEn:"72-year-old female",chiefComplaintJa:"",chiefComplaintEn:"difficulty swallowing",vitalsJa:" 132/72mmHg 60/ 18 /SpO2 96%(room air) 36.4",vitalsEn:"Blood pressure 132/72mmHg, pulse 60/min, respiratory rate 18/min, SpO2 96% (room air), body temperature 36.4"},caseNotes:{summaryEn:"72-year-old female with difficulty swallowing.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"2  2",textEn:"I have had difficulty swallowing for the past 2 months.I felt stuck when eating a chunk of meat.This never happened until two months ago."},{label:"Q",cue:"symptom quality or severity",textJa:"  ",textEn:"I felt a tightness in the front of my chest.I feel stuck when I eat something hard.I can drink drinks without getting stuck."},{label:"S",cue:"associated symptoms",textJa:"  ",textEn:"I haven't measured my weight, but a friend told me that I've lost weight.I have never had difficulty speaking or being unable to move my body."},{label:"T",cue:"time course",textJa:"",textEn:"I am still concerned about the difficulty in swallowing."},{label:"S",cue:"associated symptoms",textJa:"72 2 ",textEn:"A 72-year-old woman visited our hospital with the chief complaint of difficulty swallowing.For the past 2 months, I have noticed difficulty swallowing solid foods.People around me point out that I have lost weight."},{label:"QB",cue:"detail",textJa:"110I61 34_ VI. VI. ",textEn:"110I61 34th night_Difficulty swallowing VI. Symptoms related to nerves/psychiatry  VI. Symptoms related to nerves/psychiatry "}],history:{pastMedicalHistory:["Past medical history: No illness.I have never had radiation therapy."],medications:["Medication History: Three years ago, I was told that my blood pressure was high, so I have been avoiding salt intake and exercising, but I am not taking any medications.Preferences: I smoke about 5 cigarettes a day.When I was young, I smoked a pack.I drink Japanese sake every day.I turn red when I drink alcohol.allergy"],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:["I took a health check 3 years ago, but haven't had one since.","Hay Fever.#Esophageal cancer (advanced cancer) Dr.Yamanaka/Kamata radio talk Abdomen flat/soft No tenderness","Vitals: Blood pressure 132/72 mmHg, pulse 60 beats/min, respiratory rate 18 breaths/min, SpO2 96% (room air), body temperature 36.4C Physical examination revealed no abnormalities in the eyelids or bulbar conjunctiva, and no superficial lymph nodes were palpated.I have a history of smoking since I was young, and currently smoke 5 cigarettes a day.I also drink alcohol every day.A&P I would like to rule out esophageal cancer first.In addition to blood tests, upper gastrointestinal endoscopy is performed.Night 34 Difficulty swallowing Night 34 Difficulty swallowing Esophageal endoscopy Elevated lesions (+) Superficial lymph nodes are not palpable  Free talk What makes a good doctor 00:39 How to overcome adversity 11:59 Liquor situation in Myanmar 28:19 Life as a trainee in Myanmar 35:07 ApproachAn aggressive interview that leads to a diagnosis among a wide variety of causes.Dysphagia Symptoms caused by impaired swallowing movement due to organic or functional factors.Patients experience difficulty swallowing, a feeling of being stuffed, or a feeling of tightness in the chest.It may also be accompanied by pain when swallowing.[Cause/Classification] 1.Oropharyngeal dysphagia (difficulty swallowing, easy to swallow)","a.Organic disorders: pharyngeal cancer, tonsillitis, Zenker diverticulum, Plummer-Vinson syndrome, etc.","b.Functional disorders Cerebrovascular disease, Parkinson's disease, amyotrophic lateral sclerosis, myasthenia gravis, muscular dystrophy, botulism, tetanus, etc. 2.Esophageal dysphagia (feeling like something is stuck)","a.Organic disorders Esophageal cancer, reflux esophagitis, Plummer-Vinson syndrome (esophageal web), hiatal hernia, gastric cancer, aortic aneurysm, thymoma, etc.","b.Functional disorders: achalasia, scleroderma, esophageal spasm, etc."]},{id:"cognitive-impairment-38",nightNumber:38,titleJa:"",titleEn:"cognitive impairment",categoryId:"neuro-psych",categoryRoman:"VI",categoryOrder:6,symptomOrder:6,symptomLabelJa:"",symptomLabelEn:"cognitive impairment",symptomVariant:null,patient:{name:"Nanami Ueno",age:65,gender:"female",demographicsJa:"65",demographicsEn:"65-year-old female",chiefComplaintJa:"",chiefComplaintEn:"Amnesia, visited the hospital with her husband",vitalsJa:"JCS-135.494/48mmHg52/ 12SpO2 93%(room air)",vitalsEn:"JCS-1, body temperature 35.4, blood pressure 94/48mmHg, pulse rate 52 times/min, respiratory rate 12 times, SpO2 93% (room air)"},caseNotes:{summaryEn:"65-year-old female with Amnesia, visited the hospital with her husband.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"3    2  ",textEn:"For about 3 months now, I don't want to leave the house because I'm tired and have worries.I often say that I get tired easily, but it doesn't really bother me.I used to have trouble remembering the names of my old friends, but it started to become more noticeable about two weeks ago, and it's becoming vague.I forget to turn off the lights and don't know where I left my seal."},{label:"S",cue:"associated symptoms",textJa:"  2    ",textEn:"Movement has become sluggish.Last night, we were arguing loudly even though no one was there.I don't feel like doing anything and feel lethargic.For the past two weeks, I've started getting cold.I don't seem to have a headache, but my constipation has gotten worse.She may have gained weight, but it is unknown.I didn't say I wanted to die."},{label:"S",cue:"associated symptoms",textJa:"6532 ",textEn:"A 65-year-old woman with no particular medical history presented to the outpatient clinic with the chief complaint of amnesia, withdrawal and fatigue since 3 months ago, forgetfulness and slowness of movement since 2 weeks ago, and suspected visual and auditory hallucinations since last night."},{label:"QB",cue:"detail",textJa:"  110A21     38_ VI. VI. ",textEn:"Edema on the face Edema on both lower legs 110A21  Differential diagnosis of other cognitive disorders Chronic subdural hematoma, normal pressure hydrocephalus, vitamin deficiency, epilepsy Night 38_Cognitive impairment VI. Symptoms related to nerves/psychiatry  VI. Symptoms related to nerves/psychiatry "}],history:{pastMedicalHistory:[],medications:[],allergies:[],familyHistory:[],socialHistory:["Meals: Some amount of food is being eaten.","Sleep I am sleeping well, but lately I have been feeling dizzy after eating. #Hypothyroidism Dr.Yamanaka/Kamata radio talk No abdominal abnormalities"]},otherHistory:["Vitals Consciousness level JCS1-1, height 154cm, weight 67kg, weight gain of 3kg over 1 year.Blood pressure was 94/48 mmHg, pulse was normal at 52 beats, respiratory rate was 12 beats, and SpO was 93%.Physical examination revealed edema on the face and bilateral lower legs, no abnormalities in heart sounds and breath sounds, and no abnormalities in the abdomen.Neurological findings showed a decrease in manual muscle strength test scores of 4/5 in the proximal limbs, bulging of the quadriceps muscle belly, a delayed relaxation phase of the Achilles tendon reflex, and a negative Babinski reflex.The Hasegawa evaluation scale shows a decline of 18/30, and the MMSE shows a decline of 20/30.A&P The most likely cause is hypothyroidism.Differential diagnoses include chronic subdural hematoma, normal pressure hydrocephalus, vitamin deficiency, epilepsy, depression and delirium, and MCI amnestic type mild cognitive impairment.Tests include thyroid hormone deficiency due to hypothyroidism, vitamin deficiencies (particularly B group vitamin B12 and folic acid), normal pressure hydrocephalus, and subdural hematoma, so a CT scan of the head is performed.Night 38 Cognitive disorder Night 38 Cognitive disorder Decreased activity","Heart sounds and breathing sounds No abnormalities  Free talk The last moments of a patient at a home visit 01:47 An interesting story about hypothyroidism 37:32 ApproachFirst, exclude treatable dementia."]},{id:"anxiety-depression-37",nightNumber:37,titleJa:"",titleEn:"Anxiety/depression",categoryId:"neuro-psych",categoryRoman:"VI",categoryOrder:6,symptomOrder:7,symptomLabelJa:"",symptomLabelEn:"Anxiety/depression",symptomVariant:null,patient:{name:"Risa Kawai",age:33,gender:"female",demographicsJa:"33",demographicsEn:"33-year-old female",chiefComplaintJa:"",chiefComplaintEn:"I don't feel like doing anything",vitalsJa:"120/76mmHg72 18/SpO2 99%(room air) 36.5",vitalsEn:"Consciousness clear, blood pressure 120/76 mmHg, pulse 72 beats, respiratory rate 18 breaths/min, SpO2 99% (room air), body temperature 36.5"},caseNotes:{summaryEn:"33-year-old female with I don't feel like doing anything.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"1",textEn:"I haven't felt like doing anything for about a year now."},{label:"Q",cue:"symptom quality or severity",textJa:"   8kg 45kg",textEn:"I don't want to go out, so I stay at home most of the time. I don't have any hope for the future. I've lost interest in hobbies. I can't do the things I know I need to do.I got tired easily.I can't sleep.I lost 8kg to 45kg.No appetite.I can't even concentrate."},{label:"S",cue:"associated symptoms",textJa:"    2          ",textEn:"Sweat during heart palpitations, headache. Worried about small details, not good at speaking in front of people, repeatedly checking keys. Medical history: It's not a serious illness, but over the past two years or so I've been feeling scared a lot.It all started while I was driving a car when I suddenly felt short of breath and my heart was pounding, and I thought I was going to pass out and die.I get scared when I remember it.I visited a clinic near my home and was told that I was fine, but I was worried about similar symptoms such as heart pounding, shortness of breath, dizziness, and cold sweats, so I visited various departments.However, I was told that it would be okay.The symptoms continued, and I was so scared that I was unable to go out for daily necessities.I often feel unwell before menstruation, experiencing palpitations and dizziness."},{label:"S",cue:"associated symptoms",textJa:"33 2 1 ",textEn:"A 33-year-old woman visited the hospital with the chief complaint of not feeling like doing anything.About two years ago, I suddenly started having trouble breathing, had palpitations, and was worried that I might die.Even after visiting various departments, the cause is still not clear.About a year ago, I became depressed and could no longer enjoy the things I used to enjoy.Patients experience fatigue, decreased appetite, weight loss, and insomnia."},{label:"O",cue:"symptom onset and context",textJa:" A&P   TSH 37 37       00:35  37:57  ",textEn:`No abnormalities A&P Suspected depression and anxiety disorder, which often co-occurs.Differential diagnoses include hyperthyroidism, arrhythmia, and pheochromocytoma.Test TSH for blood tests and thyroid function tests.Night 37: Anxiety/Depression Night 37: Anxiety/Depression Normal consciousness No thyroid abnormalities No chest abnormalities  Free talk - Snow in Aizu in winter 00:35 - Things students should know 37:57 [Approach] Don't overlook "I can't enjoy the things I used to enjoy."`},{label:"QB",cue:"detail",textJa:"103G65-67   37_ VI. VI. ",textEn:"103G65-67 No head abnormality No limb abnormality 37th night_Anxiety/Depression VI. Nervous/psychological related symptoms  VI. Nervous/psychological related symptoms "}],history:{pastMedicalHistory:[],medications:["No medication history"],allergies:[],familyHistory:[],socialHistory:["Life history: I had a cheerful personality, had many friends, and had no problems at work.Dr.Yamanaka/Kamata radio talk No abdominal abnormalities"]},otherHistory:[]},{id:"rash-41",nightNumber:41,titleJa:"",titleEn:"rash",categoryId:"other-common",categoryRoman:"VII",categoryOrder:7,symptomOrder:1,symptomLabelJa:"",symptomLabelEn:"rash",symptomVariant:null,patient:{name:"Miyu Furutani",age:70,gender:"female",demographicsJa:"70",demographicsEn:"70-year-old female",chiefComplaintJa:"",chiefComplaintEn:"rash",vitalsJa:" 120/80mmHg 100/ 16/ 37.8SpO2 98%(room air)",vitalsEn:"Blood pressure 120/80mmHg, heart rate 100 times/min, respiratory rate 16 times/min, body temperature 37.8, SpO2 98% (room air)"},caseNotes:{summaryEn:"70-year-old female with rash.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"35  3  ",textEn:"I started having skin symptoms three days ago.I had a sore throat and headache for the past 5 days, so I took an over-the-counter cold medicine.Three days ago, I started having a fever, my joints started to hurt, the skin all over my body turned red, and my mouth started to hurt.This is the first time something like this has happened."},{label:"Q",cue:"symptom quality or severity",textJa:"",textEn:"My eyes also turned red.The skin is not itchy."},{label:"S",cue:"associated symptoms",textJa:"70 5 3",textEn:"A 70-year-old woman came to our hospital complaining of skin rash all over her body and pain in her mouth.The patient had been suffering from a headache and sore throat for 5 days, and took an over-the-counter cold medicine.Three days ago, he developed fever, arthralgia, redness of the eyes, pain and erosion in the oral cavity, and skin rash on the face, trunk, and extremities."},{label:"QB",cue:"detail",textJa:"102A33  ()",textEn:"102A33 Intraoral erosion(+)"}],history:{pastMedicalHistory:["Past medical history Although the patient was diagnosed with high blood pressure and high cholesterol, he was not taking any medication."],medications:["Medication history: I have taken this drug before.Life history: She lives with her husband, but has no symptoms.No contact with children.I received the coronavirus vaccine one month ago.#Drug rash Dr.Yamanaka/Kamata radio talk"],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:["O Vitals Blood pressure 120/80mmHg, heart rate 100 beats/min, respiratory rate 16 breaths/min, body temperature 37.8C, SpO2 98% A&P Since there is mucosal erosion, it is most likely that he is suffering from severe drug eruption such as SJS or TEN.Check the distribution of the rash over the whole body and check for the presence of Nikolsky phenomenon.Also check the mucous membranes in the oral cavity, conjunctiva, and genitals.Blood tests are performed to check liver and kidney function.It is necessary to stop taking the drug that caused the drug eruption.Treatment focuses on supportive care, including appropriate fluid replacement.Night 41: Rash Night 41: Rash  Free talk - Important things in future medical care 01:19 [Approach] Be aware that familiar drugs can cause drug eruptions.","Conjunctival hyperemia (+) Whole body rash (+) Night 41_ Rash VII. Other common symptoms  VII. Other common symptoms "]},{id:"hematuria-24",nightNumber:24,titleJa:"",titleEn:"hematuria",categoryId:"other-common",categoryRoman:"VII",categoryOrder:7,symptomOrder:2,symptomLabelJa:"",symptomLabelEn:"hematuria",symptomVariant:null,patient:{name:"Ryusei Uchida",age:35,gender:"male",demographicsJa:"35",demographicsEn:"35-year-old male",chiefComplaintJa:"",chiefComplaintEn:"hematuria",vitalsJa:" 132/60 mmHg72 ",vitalsEn:"Blood pressure 132/60 mmHg, pulse 72 beats."},caseNotes:{summaryEn:"35-year-old male with hematuria.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"   ",textEn:"I ran a marathon yesterday and completed it for the first time, and about 3 hours after I finished running, I suddenly started passing dark red urine.This is the first time something like this has happened.I have been taking good care of my health recently and have had no particular problems."},{label:"S",cue:"associated symptoms",textJa:"",textEn:"My legs are sore and my muscles are sore."}],history:{pastMedicalHistory:["Medical history: I have never been to a hospital.I have never had a serious illness."],medications:["Medication history: I do not take any medications on a regular basis."],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:["Health checkup Nothing was pointed out during the health checkup."]},{id:"oliguria-23",nightNumber:23,titleJa:"",titleEn:"oliguria",categoryId:"other-common",categoryRoman:"VII",categoryOrder:7,symptomOrder:3,symptomLabelJa:"",symptomLabelEn:"oliguria",symptomVariant:null,patient:{name:"Keito Mochizuki",age:52,gender:"male",demographicsJa:"52",demographicsEn:"52-year-old male",chiefComplaintJa:"",chiefComplaintEn:"oliguria",vitalsJa:" 124/84 mmHg 20SpO 99% 36.7",vitalsEn:"Blood pressure 124/84 mmHg, respiratory rate 20 times, SpO 99%, body temperature 36.7"},caseNotes:{summaryEn:"52-year-old male with oliguria.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"  ",textEn:"While standing on a stepladder to change a light bulb at home, I slipped and hit my groin.I was urinating normally until yesterday."},{label:"P",cue:"provoking or relieving factors",textJa:"",textEn:"I don't drink alcohol or take cold medicine."},{label:"Q",cue:"symptom quality or severity",textJa:" ",textEn:"The pain has subsided, but there is a slight ache and a bloated feeling in the lower abdomen."},{label:"S",cue:"associated symptoms",textJa:" ",textEn:"My testicles were not swollen, but there was a small amount of bleeding from where my urine came out."}],history:{pastMedicalHistory:["Past medical history: Slightly high cholesterol.allergy"],medications:[],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:["History: No allergies."]},{id:"urinary-incontinence-40",nightNumber:40,titleJa:"",titleEn:"urinary incontinence",categoryId:"other-common",categoryRoman:"VII",categoryOrder:7,symptomOrder:4,symptomLabelJa:"",symptomLabelEn:"urinary incontinence",symptomVariant:null,patient:{name:"Ken Tanaka",age:68,gender:"male",demographicsJa:"68",demographicsEn:"68-year-old male",chiefComplaintJa:"",chiefComplaintEn:"urinary incontinence",vitalsJa:" 144/88mmHg 68/  36.4",vitalsEn:"Blood pressure 144/88mmHg, heart rate 68 beats/min normal, body temperature 36.4"},caseNotes:{summaryEn:"68-year-old male with urinary incontinence.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"1 ",textEn:"About a month ago, I started leaking urine.Until then, there was no leakage of urine."},{label:"Q",cue:"symptom quality or severity",textJa:" 22    ",textEn:"Urine leaks without you noticing.About two years ago, I started going to the bathroom twice during the night while I was sleeping.There is no feeling of residual urine.If I try to get it out, it will come out, but it is harder to get it out than before.I urinate a little."},{label:"S",cue:"associated symptoms",textJa:"     10  ",textEn:"The stool passes normally.There is no depression or forgetfulness.I don't drink much water, and I don't have any problems with being thirsty.Past history: Diabetes since 10 years ago.No heart or kidney disease was pointed out.Snoring has never been noted either."},{label:"S",cue:"associated symptoms",textJa:"10682 21 ",textEn:"A 68-year-old man was being treated with hypoglycemic drugs for diabetes for 10 years.A patient came to our hospital with the chief complaint of urinary incontinence.Two years ago, the patient started going to the toilet twice after going to bed, and had been experiencing urinary incontinence for one month before visiting the hospital.There was no feeling of residual urine, difficulty urinating, or fecal impaction.His past medical history was only diabetes, but no depression, dementia, heart failure, renal failure, or sleep apnea syndrome."},{label:"O",cue:"symptom onset and context",textJa:"160cm66kg",textEn:"Height 160cm, weight 66kg"},{label:"QB",cue:"detail",textJa:"102B54-56     40_ VII.     VII. ",textEn:"102B54-56 No lower leg edema Direct auscultation Palpable egg-sized prostate No induration felt, no tenderness 40th night_urinary incontinence VII. Other common symptoms VII. Other common symptoms"}],history:{pastMedicalHistory:[],medications:["Medication History The patient was diagnosed with diabetes 10 years ago, and has been taking medication to lower blood sugar ever since.#neurogenic bladder, #prostatic hypertrophy, #prostate cancer Dr.Yamanaka/Kamata Radio Talk Abdomen Elastic Soft A fist-sized mass was palpated in the lower abdomen."],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:[`Vitals: Blood pressure 144/88 mmHg, pulse 68 beats/min, body temperature 36.4C Physical examination revealed no edema in the lower legs, and a fist-sized mass was palpable in the lower abdomen.Direct auscultation revealed a prostate gland the size of a hen's egg, but no induration or tenderness was felt.A&P Diabetic neurogenic bladder is most likely.In addition, since there is a possibility that the condition may be associated with benign prostatic hyperplasia or prostate cancer, PSA is measured with a blood test.In addition, it is useful to confirm the presence of enlarged prostate by abdominal ultrasound and to measure urinary flow.Night 40 Urinary Incontinence Night 40 Urinary Incontinence  Free talk - The power of "home" for patients 00:38 - The appeal of community medicine 10:28 [Approach] Remember that there are many causes.`]},{id:"menstrual-abnormalities-42",nightNumber:42,titleJa:"",titleEn:"menstrual abnormalities",categoryId:"other-common",categoryRoman:"VII",categoryOrder:7,symptomOrder:5,symptomLabelJa:"",symptomLabelEn:"menstrual abnormalities",symptomVariant:null,patient:{name:"Hina Yasuda",age:35,gender:"female",demographicsJa:"35",demographicsEn:"35-year-old female",chiefComplaintJa:"",chiefComplaintEn:"Menstrual pain, menorrhagia",vitalsJa:"",vitalsEn:""},caseNotes:{summaryEn:"35-year-old female with Menstrual pain, menorrhagia.",objectiveEn:"",planEn:""},presentIllness:[{label:"O",cue:"symptom onset and context",textJa:"3   ",textEn:"For about 3 years, the pain during menstruation has been getting worse.I had been taking over-the-counter painkillers, but the drugs stopped working six months ago, and my daily life began to be affected."},{label:"Q",cue:"symptom quality or severity",textJa:"288   ",textEn:"It lasts about 8 days in a 28-day cycle.I fall asleep during menstruation.I have heavy menstrual flow, and even if I wear a night napkin during the day, I may experience some leakage."},{label:"S",cue:"associated symptoms",textJa:"      #####PID Dr  15cm  ",textEn:"During the week of menstruation, I find it difficult to climb stairs.Gender: Last menstrual period is recorded using an app.My whole lower back hurts during menstruation.There is no pain after menstruation ends.There is no pain during sexual intercourse.I have two children.8 years old and 6 years old.#adenomyosis, #endometriosis, #uterine fibroid, #ectopic pregnancy, #PID Dr.Yamanaka/Kamata radio talk Uterus Swollen to 15 cm Hard and movable Appendages cannot be touched"},{label:"S",cue:"associated symptoms",textJa:"353 28 8 3 2",textEn:"35 year old female.A patient visited our hospital complaining of menstrual pain and excessive menstruation for the past 3 years.The menstrual cycle is 28 days long and lasts 8 days.From about three years ago to about six months ago, my menstrual pain worsened, and painkillers were no longer working.I am a multiparous woman with two children."},{label:"O",cue:"symptom onset and context",textJa:"15cm",textEn:"The uterus was swollen to 15 cm.Hard and has good mobility."},{label:"MRI",cue:"detail",textJa:" A&P PID  hCG MRI 42 42   ",textEn:"Point-like hyperintensities were observed within the myometrium.A&P The differential diagnosis includes adenomyosis, endometriosis, uterine fibroids, ectopic pregnancy, and PID.Physical examination includes a pelvic examination to check for cervical tenderness, uterine mobility, and swelling.Because the anemia is advanced, a blood test and a urine test are performed to check for bacteriuria and hCG.Diagnosis requires evaluation using images, so ultrasound and MRI are performed.42nd night: Menstrual abnormality 42nd night: Menstrual abnormality [Approach] Proceed with differential diagnosis based on the characteristics of menstruation and the presence or absence of childbirth."},{label:"QB",cue:"detail",textJa:"115F37          Douglas          (70%)    (510%)         ( )",textEn:"115F37 Pathology Symptoms Diagnosis Endometriosis Ovarian Common site Douglas fossa Sacral uterine ligament, etc. Endometrial tissue occurs ectopically Uterine fibroids Uterine adenomyosis Endometrial tissue infiltrates into the muscle layer Multiparous women and history of intrauterine manipulation Risk  Intramuscular fibroid (approximately 70%) Benign tumor that develops in uterine smooth muscle Submucosal fibroids (approx. 5-10%) *Ovarian lesions caused by endometriosis *Chocolate cysts Menstrual pain, chronic pelvic pain, sexual pain, defecation pain, infertility, etc. Menstrual pain, menstrual pain, infertility, etc. Menstrual pain, excessive menstruation, infertility, etc. When enlarged, pressure symptoms (frequent urination, urinary dysfunction, constipation, etc.)"}],history:{pastMedicalHistory:[],medications:[],allergies:[],familyHistory:[],socialHistory:[]},otherHistory:["Internal examination/rectal examination Uterine retroversion, limited mobility","Internal examination/rectal examination Tenderness in Douglas fossa","Internal examination: Swollen, elastic, hard uterus  Estrogen-dependent diseases that often occur during sexual maturity (Quoted from Q Assist Internal Medicine/Surgery ``Obstetrics and Gynecology'')  Subserosal fibroids (approximately 10-20%) * 60-70% are multiple (however,  has the risk of pedicle torsion) * Symptoms  are the strongest, and  are rare.42nd night_menstrual abnormalities VII.Other common symptoms VII.Other common symptoms"]}],eP=["Stay fully in character as the patient; never mention simulations or AI.","Respond in natural English (or provide a short Japanese sentence first only if explicitly requested).","Keep answers concise (13 sentences) but feel free to elaborate for open-ended questions.","Do not invent new medical facts beyond the scenario. If unsure, admit it as the patient would.","Politely ask for clarification if the clinician's question is unclear."],tP={I:"Clearly uncomfortable from pain but cooperative and appreciative of clear explanations.",II:"May be groggy or worried about episodes; speaks slowly but answers honestly.",III:"Feverish and fatigued yet polite, answering in short sentences.",IV:"Anxious about digestive symptoms but still courteous and forthcoming.",V:"Short of breath or light-headed; tries to conserve energy with brief answers.",VI:"Concerned about neurologic changes, occasionally pauses to find words.",VII:"Mildly anxious about new symptoms but generally calm and cooperative."},yl={categories:X1,scenarios:Z1,instructions:eP,personalities:tP},nP=yl.instructions,sP=yl.personalities,rP="Once the clinician explains the plan, thank them and ask briefly what to expect next.",fn=t=>(t||"").replace(/\s+/g," ").replace(/\s+([,.;:])/g,"$1").trim(),Qa=t=>{const e=fn(t);return e&&e.charAt(0).toUpperCase()+e.slice(1)},iP=new Map(yl.categories.map(t=>[t.id,t])),aP=t=>t.map(e=>({cue:e.cue,detail:fn(e.textEn)})).filter(e=>!!e.detail),oP=t=>{var E,C;const e=iP.get(t.categoryId);if(!e)throw new Error(`Unknown category ${t.categoryId}`);const n=t.patient.gender==="female"||t.patient.gender==="male"?t.patient.gender:"other",s=aP(t.presentIllness),r=s.length>0?s.map(w=>w.detail):[Qa(t.caseNotes.summaryEn)||Qa(t.patient.chiefComplaintEn)],i=[...t.history.socialHistory??[],...t.otherHistory??[]].map(fn).filter(Boolean),o={presentIllness:r,pastMedicalHistory:(t.history.pastMedicalHistory??[]).map(fn).filter(Boolean),medications:(t.history.medications??[]).map(fn).filter(Boolean),allergies:(t.history.allergies??[]).map(fn).filter(Boolean),socialHistory:i,familyHistory:(t.history.familyHistory??[]).map(fn).filter(Boolean)},c={demographicsJa:t.patient.demographicsJa,demographicsEn:fn(t.patient.demographicsEn),chiefComplaintJa:t.patient.chiefComplaintJa,chiefComplaintEn:Qa(t.patient.chiefComplaintEn),vitalsJa:fn((E=t.patient.vitalsJa)==null?void 0:E.replace(/^[:]\s*/,"")),vitalsEn:fn(t.patient.vitalsEn),notesEn:[fn(t.caseNotes.summaryEn),fn(t.caseNotes.objectiveEn),fn(t.caseNotes.planEn)].filter(Boolean)},u=`${t.symptomLabelJa} / ${Qa(t.symptomLabelEn)}`,h=((C=c.notesEn)==null?void 0:C[0])||`${c.demographicsEn} with ${c.chiefComplaintEn}.`,m=o.presentIllness[0]||h,p={spontaneous:o.presentIllness.slice(0,2),ifAsked:s.slice(2).map(w=>({cue:w.cue,detail:w.detail}))},g={id:e.id,roman:e.roman,labelJa:e.label_ja,labelEn:e.label_en,order:e.order,symptomOrder:t.symptomOrder,symptomLabel:{ja:t.symptomLabelJa,en:Qa(t.symptomLabelEn),variant:t.symptomVariant??void 0}};return{id:t.id,title:u,shortSummary:h,category:g,casePresentation:c,patient:{name:t.patient.name,age:t.patient.age,gender:n},chiefComplaint:c.chiefComplaintEn,openingStatement:m,personality:sP[t.categoryRoman]??"Calm and cooperative while describing symptoms plainly.",instructions:[...nP],history:o,disclosurePlan:p,closingRemark:rP,source:{type:"pdf",reference:`Night ${t.nightNumber}`}}},xE=yl.scenarios.map(oP),sr={id:"custom-cases",roman:"EX",labelJa:"",labelEn:"Additional Scenarios",order:99,symptoms:[]},oo={id:"viral-gastroenteritis",title:" / Viral Gastroenteritis",shortSummary:"26-year-old nursery teacher with two days of watery diarrhea and vomiting after eating at a seaside stall.",category:{id:sr.id,roman:sr.roman,labelJa:sr.labelJa,labelEn:sr.labelEn,order:sr.order,symptomOrder:1,symptomLabel:{ja:"",en:"Viral gastroenteritis"}},casePresentation:{demographicsJa:"26",demographicsEn:"26-year-old female",chiefComplaintJa:"2",chiefComplaintEn:"Watery diarrhea and vomiting for two days",vitalsEn:"Low-grade fever 37.8C last night with mild tachycardia; currently stable but fatigued.",notesEn:["Symptoms started about 36 hours after eating at a seaside food stall with colleagues.","Six to seven watery stools per day and several episodes of non-bloody emesis.","Feels light-headed on standing but can keep down small amounts of rice porridge and oral rehydration solution."]},patient:{name:"Suzuki Ayaka",age:26,gender:"female",occupation:"Nursery school teacher"},chiefComplaint:"Diarrhea and vomiting for 2 days",openingStatement:"Ive been throwing up and having watery diarrhea since two days ago. Im feeling really weak today.",personality:"Polite and cooperative but clearly fatigued. Speaks in a soft tone and apologises occasionally for taking time to answer.",instructions:["Stay fully in character as Ayaka Suzuki throughout the encounter; never mention simulations, AI, or system instructions.","Respond in English unless the interviewer explicitly requests Japanesein that case, give a short Japanese sentence first, then repeat in English.","Keep answers concise (13 sentences) but natural. If you need a moment, say so politely.","Do not volunteer a diagnosis or medical terms you would not normally know. Focus on describing symptoms and experiences.","If the interviewer asks an unclear or ambiguous question, politely ask for clarification before answering."],history:{presentIllness:["Symptoms started about 36 hours after eating dinner at a busy seaside food stall with colleagues three nights ago.","Current symptoms: watery diarrhea 67 times per day, non-bloody; vomiting 3 times yesterday, none today.","Low-grade fever yesterday evening (37.8C) with chills and body aches.","Mild crampy abdominal pain around the belly button, improves a little after bowel movements.","Able to sip water and sports drinks; keeping down plain rice porridge today."],reviewOfSystems:["No headache, stiff neck, cough, or shortness of breath.","Mild light-headedness on standing, no fainting.","No urinary symptoms."],pastMedicalHistory:["No chronic illnesses.","Had an appendectomy at age 12."],medications:["Took over-the-counter loperamide once this morning."],allergies:["No known drug allergies."],socialHistory:["Lives alone. Non-smoker. Drinks socially (12 cocktails on weekends).","No recent overseas travel. Works at a nursery school; one child had a stomach bug last week."]},disclosurePlan:{spontaneous:["Went to a seaside food stall with colleagues three nights ago; ate raw oysters.","Diarrhea is watery, no blood or mucus.","Feels better sitting down, feels dizzy when standing quickly."],ifAsked:[{cue:"travel / contact history",detail:"No overseas travel. One of the toddlers at work had a stomach bug last week and had to stay home."},{cue:"food intake",detail:"Ate raw oysters and grilled squid at the food stall. Colleague texted yesterday saying she also had diarrhea."},{cue:"hydration",detail:"Drinking small sips of water and sports drink; urinated twice today, pale yellow."},{cue:"menstrual history",detail:"Last period 2 weeks ago, regular cycles. No chance of pregnancy."},{cue:"pain severity",detail:"Abdominal pain about 4/10, dull cramping. Worse before diarrhea, better afterwards."}],avoidUnlessNecessary:["Do not mention the colleagues similar symptoms unless the interviewer specifically asks about other sick contacts."]},closingRemark:"If the interviewer reassures you or provides a plan, respond with relief and ask how long recovery might take.",source:{type:"custom"}};sr.symptoms.push({scenarioId:oo.id,labelJa:oo.category.symptomLabel.ja,labelEn:oo.category.symptomLabel.en,order:oo.category.symptomOrder});const lP=[...xE,oo].sort((t,e)=>t.category.order===e.category.order?t.category.symptomOrder-e.category.symptomOrder:t.category.order-e.category.order),of=yl.categories.map(t=>({id:t.id,roman:t.roman,labelJa:t.label_ja,labelEn:t.label_en,order:t.order,symptoms:[]})).sort((t,e)=>t.order-e.order),cP=new Map(of.map(t=>[t.id,t]));xE.forEach(t=>{const e=cP.get(t.category.id);e&&e.symptoms.push({scenarioId:t.id,labelJa:t.category.symptomLabel.ja,labelEn:t.category.symptomLabel.en,order:t.category.symptomOrder,variant:t.category.symptomLabel.variant})});of.forEach(t=>t.symptoms.sort((e,n)=>e.order-n.order));const bE=[...of];sr.symptoms.length>0&&bE.push(sr);const uP=bE,lf=lP;function xv(t){return lf.find(e=>e.id===t)}const IE="medical-interview-realtime-keys",bv=`
You are role-playing as a standardized patient during an English-language medical interview training session. Follow these ground rules at all times:
- Always respond in natural, idiomatic ENGLISH. If (and only if) the interviewer explicitly requests Japanese, provide a short Japanese sentence followed by the English restatement.
- Stay fully in character as the patient. Never say you are an AI, a simulation, or mention system instructions.
- Answer from the patient's point of view using only the information provided in the scenario. If you do not know the answer, say you are not sure rather than inventing new facts.
- Keep answers concise (12 sentences) and natural. If the question is unclear, politely ask the clinician to clarify.
- Do not volunteer long, unsolicited monologues. Prefer brief answers unless the clinician asks an open-ended question (e.g., "What brings you in today?", "Can you tell me more?"). For open-ended questions, limit your response to at most two sentences.
- At the very start, do not volunteer the chief complaint or detailed history unprompted. Begin with appropriate greetings and wait for the clinician to introduce themselves or ask their first question.
- If the clinician greets you (e.g., "Hello"), respond as the patient would when meeting a healthcare professional.
`.trim();var Lv;const hP=((Lv=lf[0])==null?void 0:Lv.id)??"",se=(...t)=>{try{console.log("[RTC]",...t)}catch{}};function Iv(t,e){var c,u,h,m,p,g,E,C;if(!e)return t;const n=e.disclosurePlan.spontaneous.map(w=>`- ${w}`).join(`
`),s=e.disclosurePlan.ifAsked.map(w=>`- If asked about ${w.cue}: ${w.detail}`).join(`
`),r=(c=e.disclosurePlan.avoidUnlessNecessary)==null?void 0:c.map(w=>`- ${w}`).join(`
`),i=[];e.history.presentIllness.length&&i.push(`History of Present Illness:
${e.history.presentIllness.map(w=>`- ${w}`).join(`
`)}`),(u=e.history.reviewOfSystems)!=null&&u.length&&i.push(`Review of Systems:
${e.history.reviewOfSystems.map(w=>`- ${w}`).join(`
`)}`),(h=e.history.pastMedicalHistory)!=null&&h.length&&i.push(`Past Medical History:
${e.history.pastMedicalHistory.map(w=>`- ${w}`).join(`
`)}`),(m=e.history.medications)!=null&&m.length&&i.push(`Medications:
${e.history.medications.map(w=>`- ${w}`).join(`
`)}`),(p=e.history.allergies)!=null&&p.length&&i.push(`Allergies:
${e.history.allergies.map(w=>`- ${w}`).join(`
`)}`),(g=e.history.socialHistory)!=null&&g.length&&i.push(`Social History:
${e.history.socialHistory.map(w=>`- ${w}`).join(`
`)}`),(E=e.history.familyHistory)!=null&&E.length&&i.push(`Family History:
${e.history.familyHistory.map(w=>`- ${w}`).join(`
`)}`);const o=[];return e.casePresentation&&(o.push("Case presentation context:",`- Demographics: ${e.casePresentation.demographicsEn}`,`- Chief complaint: ${e.casePresentation.chiefComplaintEn}`),e.casePresentation.vitalsEn&&o.push(`- Vitals: ${e.casePresentation.vitalsEn}`),(C=e.casePresentation.notesEn)!=null&&C.length&&e.casePresentation.notesEn.forEach(w=>o.push(`- ${w}`))),[t,"",`PATIENT PROFILE:
- Name: ${e.patient.name}
- Age: ${e.patient.age}
- Gender: ${e.patient.gender}
${e.patient.occupation?`- Occupation: ${e.patient.occupation}`:""}
- Chief complaint: ${e.chiefComplaint}
- Personality: ${e.personality}`,"",`Role-play opening line (use this verbatim unless the interviewer sets the scene differently):
"${e.openingStatement}"`,"","Scenario-specific behaviour guidelines:",...e.instructions.map(w=>`- ${w}`),"",...o.length?o:[],o.length?"":void 0,...i,"","Information disclosure plan:","Share the following spontaneously early in the interview:",n||"- (none)","","Only reveal these details if the interviewer asks the corresponding topic:",s||"- (none)","",r?`Avoid mentioning unless explicitly required:
${r}`:void 0,e.closingRemark?`Closing behaviour: ${e.closingRemark}`:void 0].filter(Boolean).join(`
`)}const Wr={openai:"",gemini:""},dP="gpt-4o-realtime-preview",mP="https://api.openai.com/v1/realtime",pP="gemini-1.5-flash-latest",Ev="/api/gemini",fP={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},_c=t=>t>=.85?"A":t>=.7?"B":t>=.55?"C":t>=.4?"D":"E",Gh=t=>{switch(t){case"A":return 1;case"B":return 2;case"C":return 3;case"D":return 4;default:return 5}},ym=t=>{try{return t.normalize("NFKC").toLowerCase().replace(/[\u2018\u2019]/g,"'").replace(/[^a-z0-9\s']/g," ").replace(/\s+/g," ").trim()}catch{return t.toLowerCase().replace(/[^a-z0-9\s']/g," ").replace(/\s+/g," ").trim()}},gP=/(what|when|where|why|how|could you|would you|can you|tell me|describe|share|explain|do you|have you|are you|is there|would you mind)/i,yP=/(please|could you|would you|may i|would you mind|let me|can i)/i,vP=/(pain|symptom|problem|issue|concern|stomach|abdomen|diarrhea|vomiting|fever|medication|treatment|history|anything else|other|name|allergy|medicines?|full name|duration|severity)/i,EE=["thanks","thank you","thank you so much","thank you very much","thanks a lot","thanks so much","see you","see you later","take care","goodbye","bye","got it","okay","ok","alright","sure","of course","understood","yeah","yep","yup","right","uh huh","uh-huh","mm hmm","mm-hmm"],Zl=["Thank you for letting me know; I appreciate the details.","I understandlet's work together to sort this out.","Please tell me if anything changes or gets worse."],ec=["Could you describe it in a little more detail?","Would you mind walking me through how it has changed over time?","Is there anything else about it that stands out to you?"],wP=t=>{const e=t.trim(),n=[],s=[];if(!e)return`: 
: Could you repeat that sentence?
: 1) Could you say that again? 2) Im sorry, could you repeat that? 3) Would you mind rephrasing it?`;const r=e.toLowerCase(),i=ym(e),o=e.split(/\s+/).length,c=gP.test(r)||/\?$/.test(e.trim()),u=yP.test(r),h=vP.test(r),m=EE.some(C=>i===C||i.startsWith(`${C} `)),p=/\b(the|a|an|that|those|these|and|or|but|to|with|for|about|on|at|in|of)$/i.test(r);if(m&&!c)return`: 
: Keep using courteous phrases such as "Thank you for your time today."
: 1) ${Zl[0]} 2) ${Zl[1]} 3) ${Zl[2]}`;if(c&&!u&&(n.push(""),s.push('Add a polite opener such as "Could you" or "Would you mind".')),c&&!h&&(n.push(""),s.push('Name the focus, e.g., "Could you describe the abdominal pain in a bit more detail?"')),o>24&&(n.push("2"),s.push("Split the question into two shorter clauses.")),o<4&&c&&(n.push(""),s.push('Add one detail such as "about your stomach pain" for clarity.')),p&&(n.push(""),s.push(`Follow through with the final noun, e.g., "...you'd like to add?"`)),/(gonna|wanna|kinda|sorta)/.test(r)&&(n.push(""),s.push('Use complete forms such as "going to" or "want to".')),!n.length)return`: 
: Keep balancing greetings with direct questions such as "Could you tell me more about the pain?"
: 1) ${ec[0]} 2) ${ec[1]} 3) ${ec[2]}`;const g=s.length>0?`: ${s[0]}${s.length>1?" "+s.slice(1).join(" "):""}`:"Rephrase slightly to smooth out the sentence.",E=c?ec:Zl;return`: ${n.join(" / ")}
: ${g}
: 1) ${E[0]} 2) ${E[1]} 3) ${E[2]}`},xP=t=>t?EE.some(e=>t===e||t.startsWith(`${e} `)||t.endsWith(` ${e}`)):!1,bP=/(pain|stomach|abdomen|vomit|vomiting|diarrhea|nausea|fever|chills|rash|oyster|raw|ate|food|colleague|symptom|medication|bathroom|bowel|cramp|weak|tired|tough|better|worse|name|threw up|throwing up|vomited)/i,IP=[/(i (was|have|had|felt|feel|got|ate|took|started|noticed|saw))/i,/(i('?m| am)\s+(feeling|having|experiencing|dealing|struggling|suffering))/i,/(my (pain|stomach|abdomen|appetite|friend|colleague|symptoms|name))/i,/(it('s| is)?\s+(been|getting|hurting|feeling|tough|pretty))/i,/(there (is|was) (some|a))/i,/^(yeah|yes|sure|of course)[, ]+(it('s| is)|i('?m| am))/i,/^my name is(?!.*doctor)/i],EP=/^(hi|hello|good (morning|afternoon|evening)|nice to (meet|see) you|pleased to meet you)/i,_P=(t,e)=>{if(!e)return!1;const n=t.toLowerCase();return bP.test(n)?IP.some(s=>s.test(t)):!1},kP=(t,e)=>!t||!e?!1:!!(t===e||t.length>8&&e.length>8&&(t.includes(e)||e.includes(t))),SP=(t,e,n)=>{if(!e||kP(e,n)||_P(t,e))return"skip";const s=e.split(" ").length;return xP(e)||EP.test(t)||s<=2?"append-only":"full"},TP=(t,e)=>{const n=t.filter(w=>w.role==="user").map(w=>w.text.toLowerCase()),s=n.some(w=>/your .*name|full name|may i have your name/.test(w)),r=n.some(w=>/(what brings you|tell me more|could you tell me|can you tell me|how can i help)/.test(w)),i=n.some(w=>/(anything (else|other)|did i miss|any other concerns?)/.test(w)),o=n.some(w=>/(let me|allow me).*(summaris|summariz)|if i (understood|understand)|just to confirm/.test(w)),c=[/(when|since|how long)/,/(where|location|radiat)/,/(severity|scale|how bad)/,/(character|what kind|describe)/,/(associated|other) symptoms/,/(past medical|history of)/,/(medication|drug|prescription)/,/(allerg)/,/(social history|smok|drink|occupation)/,/(family history)/],u=c.reduce((w,k)=>n.some(y=>k.test(y))?w+1:w,0),h=(s?.25:0)+(r?.25:0)+(i?.25:0)+(o?.25:0),m=u/c.length,p=_c(.6*h+.4*m),g=_c(.5+(r?.15:0)+(i?.15:0)+(o?.2:0)),E=_c(Math.max(.2,1-e/10)),C={content:r?"Asked open questions and covered core history items.":"Add more open questions / summaries for better structure.",attitude:i?"Checked for additional concerns which shows active listening.":"Try confirming if the patient has anything else to add.",english:e>0?"Some phrasing issues detected; shorter, direct questions help.":"Fluent phrasing detected in fallback evaluation."};return C.overall=h>.6?"Solid structure detected in fallback scoring.":"Add greeting, open questions, and closing confirmation for clearer flow.",{contentGrade:p,attitudeGrade:g,englishGrade:E,reasons:C}},NP=(t,e)=>{const{contentGrade:n,attitudeGrade:s,englishGrade:r,reasons:i}=TP(t,e),c=1-(Gh(n)*.4+Gh(s)*.3+Gh(r)*.3-1)/4,u=_c(c);return{content:n,attitude:s,english:r,overall:u,reasons:i,timestamp:Date.now()}};function tc(t){if(t)return{openai:t.openai??Wr.openai??"",gemini:t.gemini??Wr.gemini??""};if(typeof window>"u")return{...Wr};try{const e=window.localStorage.getItem(IE);if(!e)return{...Wr};const n=JSON.parse(e);return{openai:n.openai??Wr.openai??"",gemini:n.gemini??Wr.gemini??""}}catch{return{...Wr}}}const Kh=t=>typeof t=="number"?t<50:!0,jP=t=>{const e=t==null?void 0:t.patient.age,n=t==null?void 0:t.patient.gender;return n==="male"?Kh(e)?{openai:"alloy",gemini:"en-US-Chirp3-HD-Charon"}:{openai:"ash",gemini:"en-US-Chirp3-HD-Charon"}:n==="female"?Kh(e)?{openai:"ballad",gemini:"en-US-Chirp3-HD-Leda"}:{openai:"sage",gemini:"en-US-Chirp3-HD-Leda"}:n==="non-binary"?{openai:Kh(e)?"ballad":"sage",gemini:"en-US-Chirp3-HD-Leda"}:{openai:"sage",gemini:"en-US-Chirp3-HD-Leda"}},CP={openai:{id:"openai",label:"ChatGPT Realtime mini (OpenAI)",createAnswer:async({apiKey:t,offer:e,systemPrompt:n})=>{const s=`${mP}?model=${encodeURIComponent(dP)}`,r={"Content-Type":"application/sdp"};r.Authorization=`Bearer ${t}`;const i=await fetch(s,{method:"POST",headers:r,body:e.sdp??""}),o=await i.text();if(!i.ok)throw new Error(`OpenAI Realtime API error: ${o||i.statusText||"unknown error"}`);return o},dataChannelLabel:"oai-events",onDataChannelOpen:(t,e,n)=>{var i,o;const s=e.trim(),r={};if(s&&(r.instructions=s),(i=n==null?void 0:n.voicePreferences)!=null&&i.openai&&(r.voice=n.voicePreferences.openai),!!Object.keys(r).length)try{t.send(JSON.stringify({type:"session.update",session:r}))}catch(c){console.warn("Failed to send OpenAI session.update payload:",c);try{t.send(JSON.stringify({type:"response.create",response:{conversation:"default",instructions:s,...(o=n==null?void 0:n.voicePreferences)!=null&&o.openai?{voice:n.voicePreferences.openai}:{}}}))}catch(u){console.warn("Fallback OpenAI instruction send failed:",u)}}},supportsFeedback:!0},gemini:{id:"gemini",label:"Gemini Live 2.5 Flash (Google)",createAnswer:async({apiKey:t,offer:e})=>{var h;const n=`${Ev}?model=${encodeURIComponent(pP)}`,s=Ev.startsWith("/"),r={"Content-Type":"application/sdp"},i=s?n:`${n}&key=${encodeURIComponent(t)}`;s&&(r["X-Api-Key"]=t);const o=await fetch(i,{method:"POST",headers:r,body:e.sdp??""});if((o.headers.get("content-type")??"").includes("application/json")){const m=await o.json();if(!o.ok){const g=((h=m==null?void 0:m.error)==null?void 0:h.message)||o.statusText||"unknown error";throw new Error(`Gemini live API error: ${g}`)}const p=(m==null?void 0:m.sdp)??(m==null?void 0:m.answer)??(m==null?void 0:m.sessionDescription);if(typeof p!="string"||!p)throw new Error("Gemini live API responded without a valid session description.");return p}const u=await o.text();if(!o.ok)throw new Error(`Gemini live API error: ${u||o.statusText||"unknown error"}`);return u},dataChannelLabel:"client-events",onDataChannelOpen:(t,e,n)=>{var i;const s=(i=n==null?void 0:n.voicePreferences)==null?void 0:i.gemini;if(s)try{t.send(JSON.stringify({type:"client_event",clientEvent:{eventType:"SET_VOICE",speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:s}}}}}))}catch(o){console.warn("Failed to set Gemini voice preference:",o)}const r=e.trim();if(r)try{t.send(JSON.stringify({type:"input_text",text:r}))}catch(o){console.warn("Failed to send Gemini instruction payload:",o);try{t.send(r)}catch(c){console.warn("Fallback Gemini instruction send failed:",c)}}},supportsFeedback:!0}};function _E(){const{currentUser:t,userData:e,updateApiKeys:n}=wE(),[s,r]=I.useState("openai"),[i,o]=I.useState("idle"),[c,u]=I.useState(null),[h,m]=I.useState(bv),p=I.useMemo(()=>t&&(e!=null&&e.apiKeys)?tc(e.apiKeys):tc(),[t,e]),[g,E]=I.useState(p),[C,w]=I.useState(hP),k=I.useMemo(()=>C?xv(C)??null:null,[C]),y=I.useRef(k??null),[x,j]=I.useState(null),[R,L]=I.useState(null),[U,S]=I.useState([]),[v,N]=I.useState([]),[T,P]=I.useState(null),[A,_]=I.useState(""),[re,ye]=I.useState(!1),[Re,De]=I.useState(!1),[V,M]=I.useState(!1),[J,ne]=I.useState(!1),Z=typeof window<"u"&&!!(window.SpeechRecognition||window.webkitSpeechRecognition),Be=I.useRef(null),Ve=I.useRef(!1),Xe=I.useRef(null);I.useEffect(()=>{y.current=k??null},[k]),I.useEffect(()=>{ms.current=U},[U]),I.useEffect(()=>{W.current=v},[v]),I.useEffect(()=>{oe.current=Re,!Re&&Pt.current&&(clearTimeout(Pt.current),Pt.current=null)},[Re]);const Te=I.useCallback(()=>{Pt.current&&clearTimeout(Pt.current),se("scheduleLocalScoreFallback armed"),Pt.current=setTimeout(()=>{if(!oe.current)return;se("scheduleLocalScoreFallback fired - using local transcript scoring");const X=NP(ms.current,W.current.length);P(X),Jt.current=!1,De(!1),ye(!1),ne(!0)},5e3)},[P,De,ye,ne]),Ze=I.useRef(null),nt=I.useRef(null),_t=I.useRef(null),Vs=I.useRef(null),dn=I.useRef("openai"),Vn=I.useRef(bv),Xt=I.useRef(new Map),_n=I.useRef(new Map),mn=I.useRef(!1),$t=I.useRef(null),Jt=I.useRef(!1),Fs=I.useRef(0),Oe=I.useRef([]),Le=I.useRef(new Map),kn=I.useRef(new Map),Pt=I.useRef(null),ms=I.useRef([]),W=I.useRef([]),oe=I.useRef(!1),ze=I.useRef(!1),yt=I.useRef(!1),Ne=I.useRef(!1),Rt=I.useRef({raw:"",normalized:""});I.useEffect(()=>{if(t&&(e!=null&&e.apiKeys)){Ve.current=!0;const X=tc(e.apiKeys);E(X),setTimeout(()=>{Ve.current=!1},0)}else if(!t){Ve.current=!0;const X=tc();E(X),setTimeout(()=>{Ve.current=!1},0)}},[t,e]),I.useEffect(()=>{if(!Ve.current)return Xe.current&&clearTimeout(Xe.current),Xe.current=setTimeout(()=>{const X=()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(IE,JSON.stringify(g))}catch(G){console.warn("Failed to persist realtime API keys:",G)}};t&&n?n(g).catch(G=>{console.warn("Failed to save API keys to Firebase:",G),X()}):X(),Xe.current=null},1e3),()=>{Xe.current&&clearTimeout(Xe.current)}},[g,t,n]),I.useEffect(()=>{dn.current=s},[s]),I.useEffect(()=>{Vn.current=h},[h]);const Zt=I.useCallback((X="idle")=>{se("cleanup invoked",{nextStatus:X}),$t.current&&(clearTimeout($t.current),$t.current=null),Pt.current&&(clearTimeout(Pt.current),Pt.current=null),mn.current=!1,Jt.current=!1,oe.current=!1;const G=Ze.current;if(G){se("closing peer connection",{connectionState:G.connectionState,iceConnectionState:G.iceConnectionState,signalingState:G.signalingState});try{G.onconnectionstatechange=null,G.onicecandidate=null,G.ontrack=null,G.close()}catch(te){console.warn("Peer connection close error:",te)}}if(Ze.current=null,nt.current){se("closing data channel",{readyState:nt.current.readyState,label:nt.current.label});try{const te=nt.current;te.onopen=null,te.onmessage=null,te.onclose=null,te.onerror=null,te.close()}catch(te){console.warn("Data channel close error:",te)}}nt.current=null,_t.current&&_t.current.getTracks().forEach(te=>te.stop()),_t.current=null,L(null),Vs.current&&Vs.current.getTracks().forEach(te=>te.stop()),Vs.current=null,j(null),Xt.current.clear(),_n.current.clear(),_(""),ye(!1),De(!1),M(!1),ne(!1),Oe.current=[],Le.current.clear(),kn.current.clear(),ze.current=!1,yt.current=!1,Ne.current=!1,o(X)},[o]),Hs=I.useCallback(()=>{const X=nt.current;if(!X||X.readyState!=="open"){se("requestScoring skipped - data channel unavailable");return}se("requestScoring");const G=`You are an examiner scoring an English-language medical interview. Evaluate ONLY the ongoing conversation in this realtime session so far (use the current session state; do not request a transcript). Output EXACTLY one line starting with [SCORE] followed by a compact JSON object.

Three categories (grade AE each) and an overall AE:
1) content: Name1OPQRST/PMH////
2) attitude: //
3) english: 

Rules:
- Judge based only on clinician turns present in this session.
- Provide reasons.content / reasons.attitude / reasons.english / reasons.overall as short Japanese bullet-style strings (2) that describe strengths and. Mention key examples.
- Provide metrics such as openQuestions, safetyNetUsed, summaryGiven, empathyMoments, fillerWords, translationRequests.
- Output JSON with keys: content, attitude, english, overall, reasons, metrics. Grades must be one of ["A","B","C","D","E"]. No extra text.`;try{Jt.current=!0,dn.current==="openai"?(Oe.current.push({purpose:"score"}),X.send(JSON.stringify({type:"response.create",response:{modalities:["text"],instructions:G+`
Respond only with one line: [SCORE] {json}`}}))):X.send(JSON.stringify({type:"input_text",text:G+`
Respond only with one line: [SCORE] {json}`}))}catch(te){console.warn("Failed to request scoring:",te),Jt.current=!1}},[]),Ei=I.useCallback(()=>{if(ze.current){se("requestTranscript skipped - pending request in flight");return}const X=nt.current;if(!X||X.readyState!=="open"){se("requestTranscript skipped - data channel unavailable");return}const G='Transcribe exactly what the clinician (human user) just said. Respond immediately with "[TRANSCRIPT] " followed by the verbatim English text only. Do not add commentary or translations.';ze.current=!0,se("requestTranscript dispatch",{provider:dn.current});try{dn.current==="openai"?(Oe.current.push({purpose:"transcript"}),X.send(JSON.stringify({type:"response.create",response:{modalities:["text"],instructions:G}}))):X.send(JSON.stringify({type:"input_text",text:`[TRANSCRIPT_REQUEST] ${G}`}))}catch(te){ze.current=!1,se("requestTranscript failed",te),console.warn("Failed to request transcript:",te)}},[]),Gn=I.useCallback(()=>{if(ze.current){se("scheduleTranscriptRequest skipped - already pending");return}if(Ne.current){yt.current=!0,se("scheduleTranscriptRequest queued until assistant response finishes");return}Ei()},[Ei]),ja=I.useCallback(()=>{if(se("stopCall invoked"),u(null),o("ending"),_t.current)try{_t.current.getTracks().forEach(X=>X.stop())}catch{}mn.current=!0,De(!0);try{Hs()}catch(X){console.warn("requestScoring failed:",X),Zt("idle")}Te(),$t.current&&clearTimeout($t.current),$t.current=setTimeout(()=>{mn.current&&(mn.current=!1,ye(!0),De(!1),ne(!0),se("ending fallback timer fired without remote score"),Zt("idle"))},6e3)},[Zt,Hs,Te]),Ca=I.useCallback(X=>{var G;return!!((G=g[X])!=null&&G.trim())},[g]),ps=I.useCallback((X,G)=>{E(te=>({...te,[X]:G}))},[]),_i=I.useCallback((X,G)=>{const te=nt.current;if(!te||te.readyState!=="open")return;const me=X.trim();if(!me)return;se("requestFeedback",me);const z=(G==null?void 0:G.timestamp)??Date.now(),ke={purpose:"feedback",utterance:me,utteranceTimestamp:z,utteranceId:G==null?void 0:G.utteranceId},vt=`The clinician just said: """${me}""". Provide feedback in Japanese with the following structure:

1. : Brief Japanese explanation of any grammatical or phrasing problems or unnatural phrasing. If there is no error, state that explicitly.
2. : Provide one improved English sentence that would sound natural.
3. : Provide three concise English paraphrases, numbered 1)3), that express the same intent politely.

Keep the overall response short. Return plain text that begins with "[FEEDBACK]" and never include audio.`;try{dn.current==="openai"?(Oe.current.push({purpose:"feedback",utterance:me,utteranceTimestamp:z,utteranceId:G==null?void 0:G.utteranceId}),te.send(JSON.stringify({type:"response.create",response:{conversation:"feedback",modalities:["text"],instructions:vt,metadata:ke}}))):(Oe.current.push({purpose:"feedback",utterance:me,utteranceTimestamp:z,utteranceId:G==null?void 0:G.utteranceId}),te.send(JSON.stringify({type:"input_text",text:`[FEEDBACK_REQUEST] ${vt}`})))}catch(lt){console.warn("Failed to request feedback:",lt)}N(lt=>{const Tn={id:`local-feedback-${Date.now()}`,provider:"local",text:`[Fallback] ${wP(me)}`,timestamp:Date.now(),utterance:me,utteranceTimestamp:z,utteranceId:G==null?void 0:G.utteranceId};return[...lt,Tn].slice(-50)}),M(!0)},[]),fs=I.useCallback(X=>{S(G=>[...G,X].slice(-50)),X.role==="assistant"&&(Rt.current={raw:X.text,normalized:ym(X.text)})},[]),ki=I.useCallback(X=>{N(G=>[...G,X].slice(-50))},[]),Sn=I.useCallback((X,G="remote")=>{const te=X.trim();if(!te)return;const me=ym(te),z=SP(te,me,Rt.current.normalized);if(z==="skip"){se("clinician transcript skipped (likely patient/echo)",{text:te,source:G});return}const ke=Date.now(),vt=`${G}-clinician-${ke}`;fs({id:vt,role:"user",text:te,timestamp:ke}),z==="full"&&_i(te,{utteranceId:vt,timestamp:ke});const lt=Date.now();if(!Jt.current&&lt-Fs.current>8e3)try{Hs()}catch(Tn){console.warn("requestScoring failed:",Tn)}},[fs,_i,Hs]),Aa=I.useCallback(()=>{if(!Z||Be.current||typeof window>"u")return;const X=window.SpeechRecognition||window.webkitSpeechRecognition;if(X)try{const G=new X;G.lang="en-US",G.continuous=!0,G.interimResults=!1,G.onresult=te=>{for(let me=te.resultIndex;me<te.results.length;me++){const z=te.results[me];z.isFinal&&z[0]&&Sn(z[0].transcript||"","local")}},G.onerror=te=>{console.warn("Speech recognition error:",te.error)},G.onend=()=>{if(Be.current===G&&i==="connected")try{G.start()}catch(te){console.warn("Speech recognition restart error:",te)}},G.start(),Be.current=G}catch(G){console.warn("Speech recognition init failed:",G)}},[Sn,Z,i]),ot=I.useCallback(()=>{const X=Be.current;if(X){X.onresult=null,X.onerror=null,X.onend=null;try{X.stop()}catch(G){console.warn("Speech recognition stop error:",G)}Be.current=null}},[]);I.useEffect(()=>{if(Z)return i==="connected"?Aa():ot(),()=>{ot()}},[Z,Aa,ot,i]);const Si=I.useCallback((X,G)=>{var Tn,Dt,Us,Bs,gs,ys,le,Ce,kt,Ur,en,Pa,Ti,qs,Kn,Ni,wl,Ra;const te=X.data;let me=null;if(typeof te=="string")me=te;else if(te instanceof ArrayBuffer)try{me=new TextDecoder().decode(te)}catch{me=null}if(!me)return;let z=null;try{z=JSON.parse(me)}catch{z=null}if(!z||typeof z!="object"||!z.type){const Q=me.trim();if(Q.startsWith("[FEEDBACK]"))se("feedback payload (text only)",Q),ki({id:`feedback-${Date.now()}`,provider:dn.current,text:Q.replace(/^\[FEEDBACK\]\s*/,"").trim(),timestamp:Date.now()});else if(Q.startsWith("[SCORE]")){se("score payload (text only)",Q);const ce=Q.replace(/^\[SCORE\]\s*/,"").trim();try{const ue=JSON.parse(ce),ie={content:ue.content,attitude:ue.attitude,english:ue.english,overall:ue.overall,reasons:ue.reasons,metrics:ue.metrics,timestamp:Date.now(),raw:ue};P(ie),Jt.current=!1,Fs.current=Date.now(),se("score payload parsed",{grades:ie,raw:ue}),$t.current&&(clearTimeout($t.current),$t.current=null),mn.current&&(mn.current=!1,Zt("idle")),ye(!1),De(!1)}catch(ue){console.warn("Failed to parse score JSON:",ue)}}else se("unparsed text payload",Q);return}const ke=(Q,ce,ue)=>{var Qn,wt;if(!Q||typeof ce!="string")return;const ie=_n.current.get(Q)||{text:"",isFeedback:!1,isScore:!1,isTranscript:!1};ie.text+=ce;const Br=ie.text.trim();se("response delta captured",{responseId:Q,chars:ce.length,totalChars:ie.text.length});const tn=Q&&Le.current.get(Q)||((Qn=ue==null?void 0:ue.metadata)==null?void 0:Qn.purpose)||(ue==null?void 0:ue.conversation);!ie.isFeedback&&Br.startsWith("[FEEDBACK]")&&(ie.isFeedback=!0),!ie.isScore&&Br.startsWith("[SCORE]")&&(ie.isScore=!0),!ie.isTranscript&&Br.startsWith("[TRANSCRIPT]")&&(ie.isTranscript=!0);const ct=(wt=ue==null?void 0:ue.metadata)==null?void 0:wt.purpose,nn=ue==null?void 0:ue.conversation,Ot=Q?Le.current.get(Q):void 0;(ct==="feedback"||nn==="feedback"||Ot==="feedback")&&(ie.isFeedback=!0),(ct==="score"||ct==="scoring"||nn==="scoring"||Ot==="score")&&(ie.isScore=!0),(Ot==="transcript"||ct==="transcript"||nn==="transcript")&&(ie.isTranscript=!0),!tn&&!ie.isFeedback&&!ie.isScore&&!ie.isTranscript&&(Ne.current=!0),!ie.isFeedback&&!ie.isScore&&!ie.isTranscript&&_(ie.text),_n.current.set(Q,ie)},vt=(Q,ce)=>{if(!Q)return;const ue=_n.current.get(Q);if(!ue)return;const ie=ue.text.trim(),qr=Le.current.get(Q)||(ue.isFeedback?"feedback":ue.isScore?"score":ue.isTranscript?"transcript":ie.startsWith("[FEEDBACK]")?"feedback":ie.startsWith("[SCORE]")?"score":ie.startsWith("[TRANSCRIPT]")?"transcript":void 0),tn=kn.current.get(Q),ct=ce&&typeof ce.metadata=="object"?ce.metadata:null,nn=(typeof(ct==null?void 0:ct.utterance)=="string"?ct.utterance:void 0)??(tn==null?void 0:tn.utterance),Ot=(typeof(ct==null?void 0:ct.utteranceTimestamp)=="number"?ct.utteranceTimestamp:void 0)??(tn==null?void 0:tn.utteranceTimestamp),Qn=(typeof(ct==null?void 0:ct.utteranceId)=="string"?ct.utteranceId:void 0)??(tn==null?void 0:tn.utteranceId);if(ue.isFeedback&&ie){const wt=ie.trim();if(!(/^\[FEEDBACK\]/.test(wt)||/[:]/.test(wt))){se("dropping response marked as feedback without markers",{responseId:Q,text:wt.slice(0,140)}),M(!0),kn.current.delete(Q),_n.current.delete(Q),Le.current.delete(Q),_("");return}ki({id:Q,provider:dn.current,text:wt.replace(/^\[FEEDBACK\]\s*/,"").trim(),timestamp:Date.now(),utterance:nn,utteranceTimestamp:Ot,utteranceId:Qn}),M(!1)}else if(ue.isScore&&ie){const wt=ie.replace(/^\[SCORE\]\s*/,"").trim();try{const Wt=JSON.parse(wt),Ae={content:Wt.content,attitude:Wt.attitude,english:Wt.english,overall:Wt.overall,reasons:Wt.reasons,metrics:Wt.metrics,timestamp:Date.now(),raw:Wt};P(Ae),Jt.current=!1,Fs.current=Date.now(),ye(!1),De(!1),ne(!1),se("score payload parsed (finalized)",{grades:Ae,raw:Wt})}catch(Wt){console.warn("Failed to parse score JSON:",Wt)}}else if(qr==="transcript"&&ie){ze.current=!1;const wt=ie.replace(/^\[TRANSCRIPT\]\s*/i,"");wt&&Sn(wt,"remote")}else ie&&fs({id:Q,role:"assistant",text:ie,timestamp:Date.now()});kn.current.delete(Q),_n.current.delete(Q),_(""),se("response finalized",{responseId:Q,purpose:qr,length:ie.length,scorePending:Jt.current}),ue.isTranscript&&(ze.current=!1,yt.current&&!Ne.current&&(yt.current=!1,Gn())),qr||(Ne.current=!1,yt.current&&!ze.current&&(yt.current=!1,Gn())),ue.isScore&&mn.current&&(mn.current=!1,Zt("idle")),Le.current.delete(Q)},lt=z.type;if(lt==="input_audio_buffer.speech_stopped"){Gn();return}switch(lt){case"conversation.item.created":{const Q=(Tn=z.item)==null?void 0:Tn.id;if(typeof Q=="string"){const ce=(Dt=z.item)==null?void 0:Dt.role;Xt.current.set(Q,{role:ce==="user"||ce==="assistant"||ce==="system"?ce:"assistant",text:""})}break}case"conversation.item.deleted":{const Q=z.item_id;typeof Q=="string"&&Xt.current.delete(Q);break}case"conversation.item.input_audio_transcription.delta":{const Q=z.item_id,ce=z.delta;if(se("transcription.delta",z),typeof Q=="string"&&typeof ce=="string"){const ue=Xt.current.get(Q)||{role:"assistant",text:""};ue.text=(ue.text||"")+ce,Xt.current.set(Q,ue)}break}case"conversation.item.input_audio_transcription.completed":{const Q=z.item_id;if(se("transcription.completed",z),typeof Q=="string"){const ce=Xt.current.get(Q);(ce==null?void 0:ce.role)==="user"&&ce.text.trim()&&Sn(ce.text,"remote")}break}case"response.output_text.delta":{se("response.delta",z);const Q=typeof z.response_id=="string"?z.response_id:typeof((Us=z.response)==null?void 0:Us.id)=="string"?z.response.id:null;ke(Q,z.delta,z.response);break}case"response.content_part.added":case"response.content_part.delta":{const Q=typeof z.response_id=="string"?z.response_id:typeof((Bs=z.response)==null?void 0:Bs.id)=="string"?z.response.id:null,ce=z.content_part||z.part,ue=typeof(ce==null?void 0:ce.text)=="string"?ce.text:typeof(ce==null?void 0:ce.content)=="string"?ce.content:void 0;ke(Q,ue,z.response);break}case"response.output_item.added":{const Q=typeof z.response_id=="string"?z.response_id:typeof((gs=z.response)==null?void 0:gs.id)=="string"?z.response.id:null,ce=z.item;let ue;if(ce!=null&&ce.content&&Array.isArray(ce.content))for(const ie of ce.content)typeof(ie==null?void 0:ie.text)=="string"?ue=(ue||"")+ie.text:(ie==null?void 0:ie.type)==="output_text"&&typeof(ie==null?void 0:ie.content)=="string"&&(ue=(ue||"")+ie.content);ke(Q,ue,z.response);break}case"response.audio_transcript.delta":{const Q=typeof z.response_id=="string"?z.response_id:typeof((ys=z.response)==null?void 0:ys.id)=="string"?z.response.id:null;(z.audio_role||z.role||((le=z.item)==null?void 0:le.role)||((Ce=z.response)==null?void 0:Ce.role))==="user"&&typeof z.delta=="string"?Sn(z.delta,"remote"):ke(Q,z.delta,z.response);break}case"response.audio_transcript.done":case"response.audio.done":case"response.audio_transcript.generated":break;case"response.completed":{se("response.completed",z);const Q=typeof z.response_id=="string"?z.response_id:typeof((kt=z.response)==null?void 0:kt.id)=="string"?z.response.id:null;vt(Q,z.response);break}case"response.output_item.done":case"response.content_part.done":{const Q=typeof z.response_id=="string"?z.response_id:typeof((Ur=z.response)==null?void 0:Ur.id)=="string"?z.response.id:null;vt(Q,z.response);break}case"response.done":{const Q=typeof z.response_id=="string"?z.response_id:typeof((en=z.response)==null?void 0:en.id)=="string"?z.response.id:((qs=(Ti=(Pa=z.response)==null?void 0:Pa.output)==null?void 0:Ti[0])==null?void 0:qs.response_id)??null;vt(Q,z.response);break}case"response.created":{const Q=(Kn=z.response)==null?void 0:Kn.id;if(typeof Q=="string"){const ce=Oe.current.shift();ce&&(Le.current.set(Q,ce.purpose),(ce.utterance||ce.utteranceTimestamp||ce.utteranceId)&&kn.current.set(Q,{utterance:ce.utterance,utteranceTimestamp:ce.utteranceTimestamp,utteranceId:ce.utteranceId}))}break}case"error":{const Q=((Ni=z.error)==null?void 0:Ni.message)||((wl=z.error)==null?void 0:wl.code)||"Realtime provider error";console.error("Realtime session error:",z.error||z),u(Q),((Ra=z.error)==null?void 0:Ra.code)==="conversation_already_has_active_response"&&(ze.current=!1,yt.current=!0);break}default:{se("unhandled datachannel message",z);break}}},[ki,fs,_i,Ei,Gn,Sn]),Fr=I.useCallback(async({provider:X,scenarioId:G}={})=>{var Us,Bs,gs,ys;if(se("startCall invoked",{preferredProvider:X,requestedScenarioId:G,currentProvider:s}),!((Us=navigator.mediaDevices)!=null&&Us.getUserMedia)){u(""),o("error"),se("startCall aborted: getUserMedia not supported");return}if(G){const le=xv(G);le&&(y.current=le,w(le.id),se("scenario set for call",{scenarioId:le.id}))}const te=X??s,me=CP[te];if(!me){u(""),o("error"),se("startCall aborted: provider config missing",{targetProvider:te});return}const z=(Bs=g[te])==null?void 0:Bs.trim();if(!z){u("API"),o("error"),se("startCall aborted: missing API key",{targetProvider:te});return}if(Ze.current){console.warn("Call already active; ignoring duplicate start request."),se("startCall ignored because pcRef already exists");return}dn.current=te,r(te),o("connecting"),u(null),S([]),N([]),ms.current=[],W.current=[],P(null),M(!1),ne(!1),Xt.current.clear(),_n.current.clear(),Pt.current&&(clearTimeout(Pt.current),Pt.current=null);const ke=new RTCPeerConnection(fP);se("RTCPeerConnection created",{provider:te}),Ze.current=ke,ke.addEventListener("signalingstatechange",()=>{se("signalingstatechange",ke.signalingState)}),ke.addEventListener("iceconnectionstatechange",()=>{se("iceconnectionstatechange",ke.iceConnectionState)}),ke.addEventListener("icegatheringstatechange",()=>{se("icegatheringstatechange",ke.iceGatheringState)}),ke.addEventListener("icecandidateerror",le=>{se("icecandidateerror",le)}),ke.addEventListener("connectionstatechange",()=>{if(!Ze.current)return;const le=Ze.current.connectionState;se("connectionstatechange",le),le==="connected"?o("connected"):le==="failed"?(u(""),Zt("error")):(le==="disconnected"||le==="closed")&&Zt("idle")}),ke.addEventListener("track",le=>{const[Ce]=le.streams;Ce&&(se("remote media track received"),Vs.current=Ce,j(Ce))});const vt=jP(y.current),lt=Iv(Vn.current,y.current);ke.addEventListener("datachannel",le=>{var Ur;const Ce=le.channel;if(!Ce)return;se("datachannel event (remote)",{label:Ce.label,readyState:Ce.readyState}),nt.current=Ce;const kt=en=>Si(en,me.supportsFeedback);Ce.addEventListener("message",kt),Ce.addEventListener("close",()=>{Ce.removeEventListener("message",kt),nt.current===Ce&&(nt.current=null)}),Ce.addEventListener("error",en=>{console.warn("Data channel error:",en)}),Ce.readyState==="open"?(se("remote data channel already open"),(Ur=me.onDataChannelOpen)==null||Ur.call(me,Ce,lt,{voicePreferences:vt})):me.onDataChannelOpen&&Ce.addEventListener("open",()=>{var en;se("remote data channel opened"),(en=me.onDataChannelOpen)==null||en.call(me,Ce,lt,{voicePreferences:vt})},{once:!0})});try{const le=await navigator.mediaDevices.getUserMedia({audio:!0});_t.current=le,L(le),se("microphone stream acquired",{trackCount:le.getTracks().length}),le.getTracks().forEach(Ce=>ke.addTrack(Ce,_t.current))}catch(le){console.error("Failed to obtain microphone:",le),se("startCall aborted: getUserMedia failed",le),u(""),Zt("error");return}let Tn=null;if(me.dataChannelLabel)try{Tn=ke.createDataChannel(me.dataChannelLabel),se("created outgoing data channel",{label:me.dataChannelLabel}),nt.current=Tn;const le=Tn,Ce=kt=>Si(kt,me.supportsFeedback);le.addEventListener("message",Ce),le.addEventListener("close",()=>{le.removeEventListener("message",Ce),nt.current===le&&(nt.current=null)}),le.addEventListener("error",kt=>{console.warn("Data channel error:",kt)}),le.readyState==="open"?(se("outgoing data channel already open"),(gs=me.onDataChannelOpen)==null||gs.call(me,le,lt,{voicePreferences:vt})):me.onDataChannelOpen&&le.addEventListener("open",()=>{var kt;se("outgoing data channel opened"),(kt=me.onDataChannelOpen)==null||kt.call(me,le,lt,{voicePreferences:vt})},{once:!0})}catch(le){console.warn("Data channel creation failed:",le),se("data channel creation failed",le)}const Dt=await ke.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!1});await ke.setLocalDescription(Dt),se("local description set",{sdpBytes:((ys=Dt.sdp)==null?void 0:ys.length)??0});try{const le=Iv(Vn.current,y.current),kt={type:"answer",sdp:await me.createAnswer({apiKey:z,offer:Dt,systemPrompt:le})};await ke.setRemoteDescription(kt),se("remote description set")}catch(le){console.error("Realtime call negotiation failed:",le),se("startCall failed during answer exchange",le),u(le instanceof Error?le.message:String(le)),Zt("error");return}},[g,Zt,Si,s,r,w]),Hr=I.useCallback(()=>u(null),[]),th=I.useMemo(()=>({provider:s,status:i,error:c,remoteStream:x,localStream:R,systemPrompt:h,transcriptEntries:U,feedbackEntries:v,scoreResult:T,endedWithoutScore:re,awaitingFinalScore:Re,pendingAssistantText:A,feedbackFallbackActive:V,scoreFallbackActive:J,scenarioId:C,activeScenario:k}),[s,i,c,x,R,h,U,v,T,re,A,V,J,C,k]),nh=I.useCallback(X=>g[X]??"",[g]);return I.useEffect(()=>()=>{Zt("idle")},[Zt]),{...th,startCall:Fr,stopCall:ja,setProvider:r,setSystemPrompt:m,hasApiKey:Ca,setApiKey:ps,getApiKey:nh,clearError:Hr,feedbackEntries:v,transcriptEntries:U,scoreResult:T,endedWithoutScore:re,awaitingFinalScore:Re,pendingAssistantText:A,feedbackFallbackActive:V,scoreFallbackActive:J,availableScenarios:lf,scenarioId:C,setScenarioId:w,activeScenario:k,requestScoring:Hs}}const AP=({open:t,onClose:e})=>{const{theme:n,setTheme:s}=jS(),{layout:r,setLayout:i}=Ls(),{currentUser:o,signUp:c,signIn:u,signInWithGoogle:h,logout:m}=wE(),{setApiKey:p,getApiKey:g}=_E(),[E,C]=I.useState(!1),[w,k]=I.useState(!1),[y,x]=I.useState(!1),[j,R]=I.useState(""),[L,U]=I.useState(""),[S,v]=I.useState(""),[N,T]=I.useState(""),[P,A]=I.useState(""),[_,re]=I.useState(!1);I.useEffect(()=>{if(w){const M=g("openai"),J=g("gemini");v(M),T(J)}else v(""),T("")},[w]);const ye=()=>{A(""),re(!0),p("openai",S),p("gemini",N),k(!1),setTimeout(()=>{re(!1)},1100)},Re=async M=>{M.preventDefault(),A(""),re(!0);try{y?await c(j,L):await u(j,L),R(""),U(""),C(!1),A("")}catch(J){A(J.message||"")}finally{re(!1)}},De=async()=>{A(""),re(!0);try{await h(),C(!1),A("")}catch(M){A(M.message||"Google")}finally{re(!1)}},V=async()=>{try{await m(),C(!1)}catch(M){A(M.message||"")}};return t?a.jsx("div",{className:"settings-modal",onClick:M=>M.target===M.currentTarget&&e(),children:a.jsxs("div",{className:"settings-content",children:[a.jsxs("div",{className:"settings-header",children:[a.jsx("h2",{children:""}),a.jsx("button",{className:"close-button",onClick:e,"aria-label":"",children:""})]}),a.jsxs("div",{className:"settings-item",children:[a.jsx("span",{className:"settings-label",children:""}),a.jsxs("label",{className:"toggle-switch",children:[a.jsx("input",{type:"checkbox",checked:n==="dark",onChange:M=>s(M.target.checked?"dark":"auto")}),a.jsx("span",{className:"toggle-slider"})]})]}),a.jsxs("div",{className:"settings-item",children:[a.jsx("span",{className:"settings-label",children:""}),a.jsx("div",{className:"layout-options",children:["auto","two-column","single-column"].map(M=>a.jsxs("label",{className:"radio-option",children:[a.jsx("input",{type:"radio",name:"layoutMode",value:M,checked:r===M,onChange:()=>i(M)}),a.jsx("span",{children:M==="auto"?"":M==="two-column"?"2":"1"})]},M))})]}),a.jsxs("div",{className:"settings-item settings-api-keys-section",children:[a.jsxs("div",{className:"settings-auth-header",children:[a.jsx("span",{className:"settings-label",children:"API"}),!w&&a.jsx("button",{type:"button",className:"settings-auth-toggle",onClick:()=>{k(!0),A("")},children:"API"})]}),w&&a.jsxs("div",{className:"settings-auth-content",children:[a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{htmlFor:"api-key-openai",className:"auth-label",children:"OpenAI API"}),a.jsx("input",{id:"api-key-openai",type:"password",className:"auth-input",value:S,onChange:M=>v(M.target.value),placeholder:"sk- ",autoComplete:"off",spellCheck:!1}),a.jsx("p",{className:"auth-hint",children:""})]}),a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{htmlFor:"api-key-gemini",className:"auth-label",children:"Gemini API"}),a.jsx("input",{id:"api-key-gemini",type:"password",className:"auth-input",value:N,onChange:M=>T(M.target.value),placeholder:"AI... ",autoComplete:"off",spellCheck:!1}),a.jsx("p",{className:"auth-hint",children:""})]}),a.jsxs("div",{className:"settings-api-keys-actions",children:[a.jsx("button",{type:"button",className:"auth-button auth-button-primary",onClick:ye,disabled:_,children:_?"...":""}),a.jsx("button",{type:"button",className:"settings-auth-close",onClick:()=>{k(!1),A("")},children:""})]}),P&&a.jsx("p",{className:"auth-error",style:{marginTop:"12px"},children:P}),a.jsx("p",{className:"auth-hint",style:{marginTop:"12px",fontSize:"12px"},children:o?"APIFirebase":"APILocalStorage"})]})]}),a.jsxs("div",{className:"settings-item settings-auth-section",children:[a.jsxs("div",{className:"settings-auth-header",children:[a.jsx("span",{className:"settings-label",children:""}),!E&&a.jsx("button",{type:"button",className:"settings-auth-toggle",onClick:()=>{C(!0),A("")},children:o?"":""})]}),E&&a.jsx("div",{className:"settings-auth-content",children:o?a.jsxs("div",{className:"auth-content",children:[a.jsxs("div",{className:"auth-user-info",children:[a.jsx("p",{className:"auth-email",children:o.email}),a.jsx("p",{className:"auth-hint",children:"APIFirebase"})]}),a.jsx("button",{className:"auth-button auth-button-logout",onClick:V,disabled:_,children:""}),a.jsx("button",{type:"button",className:"settings-auth-close",onClick:()=>{C(!1),A("")},children:""})]}):a.jsxs("div",{children:[a.jsxs("form",{onSubmit:Re,className:"auth-form",children:[P&&a.jsx("div",{className:"auth-error",children:P}),a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{htmlFor:"auth-email",className:"auth-label",children:""}),a.jsx("input",{id:"auth-email",type:"email",className:"auth-input",value:j,onChange:M=>R(M.target.value),required:!0,autoComplete:"email",placeholder:"example@email.com"})]}),a.jsxs("div",{className:"auth-field",children:[a.jsx("label",{htmlFor:"auth-password",className:"auth-label",children:""}),a.jsx("input",{id:"auth-password",type:"password",className:"auth-input",value:L,onChange:M=>U(M.target.value),required:!0,autoComplete:y?"new-password":"current-password",placeholder:"6",minLength:6})]}),a.jsx("button",{type:"submit",className:"auth-button auth-button-primary",disabled:_,children:_?"...":y?"":""}),a.jsx("div",{className:"auth-divider",children:a.jsx("span",{children:""})}),a.jsxs("button",{type:"button",className:"auth-button auth-button-google",onClick:De,disabled:_,children:[a.jsx("span",{className:"auth-google-icon",children:""}),"Google"]}),a.jsx("div",{className:"auth-switch",children:a.jsx("button",{type:"button",className:"auth-switch-link",onClick:()=>{x(!y),A("")},children:y?"":""})})]}),a.jsx("button",{type:"button",className:"settings-auth-close",onClick:()=>{C(!1),A(""),R(""),U("")},children:""})]})})]})]})}):null};function PP(t){return t>=4.5?"A":t>=3.5?"B":t>=2.5?"C":t>=1.5?"D":"E"}function RP(t){const e=t.toLowerCase();return/what brings you (in|here)/.test(e)||/tell me more/.test(e)||/could you tell me/.test(e)||/can you tell me/.test(e)||/how can i help/.test(e)||/what happened/.test(e)||/what seems to be/.test(e)}function DP(t){const n=t.filter(k=>k.role==="user").map(k=>k.text).join(`
`).split(/\n+/),s=k=>n.some(y=>k.test(y.toLowerCase())),r=s(/(what is|could you tell me|may i have).*(your ).*(full )?name/),i=n.some(k=>RP(k)),o=s(/(anything|something) else|did i miss anything|any other (concern|issue|questions?)/),c=s(/(let me|allow me).*(summaris|summariz)|just to (confirm|make sure)|if i (understood|understand)/),u=[/(when|since|how long)/,/(where|location|radiat)/,/(how (bad|severe)|severity|\bscale\b|rate.*(pain|discomfort))/,/(character|what kind|quality)/,/(associated|other) symptoms||together with/,/past medical|history of|previous( illnesses| conditions)/,/medications?|drugs? you take|prescriptions?/,/allerg(y|ies)/,/social history|smok(e|ing)|alcohol|drink|work|occupation|sex(ual)? history/,/family history/],h=u.reduce((k,y)=>k+(s(y)?1:0),0),m=u.length,p=m===0?0:h/m,g=[r,i,o,c],C=.6*(g.filter(Boolean).length/g.length)+.4*p,w=PP(C*5);return{askedName:r,askedOpen:i,askedAnythingElse:o,didSummary:c,coverageMatched:h,coverageTotal:m,coverageRate:p,suggestedContent:w}}const _v=({transcriptEntries:t,feedbackEntries:e,scenarioTitle:n,scoreResult:s})=>{var c,u,h,m;const r=I.useMemo(()=>DP(t),[t]),i=(s==null?void 0:s.overall)??null,o=I.useMemo(()=>{const p=e.length;return p>=10?"":p>=5?"":p>=1?"":""},[e.length]);return a.jsxs("div",{className:"call-section",children:[a.jsx("h3",{children:""}),n&&a.jsxs("p",{className:"call-hint",children:[": ",n]}),a.jsxs("div",{className:"grading-grid",children:[a.jsxs("div",{className:"grading-col",children:[a.jsx("h4",{children:""}),a.jsxs("ul",{className:"grading-checklist",children:[a.jsxs("li",{children:[a.jsx("input",{type:"checkbox",readOnly:!0,checked:r.askedName}),a.jsx("span",{children:""})]}),a.jsxs("li",{children:[a.jsx("input",{type:"checkbox",readOnly:!0,checked:r.askedOpen}),a.jsx("span",{children:""})]}),a.jsxs("li",{children:[a.jsx("input",{type:"checkbox",readOnly:!0,checked:r.askedAnythingElse}),a.jsx("span",{children:""})]}),a.jsxs("li",{children:[a.jsx("input",{type:"checkbox",readOnly:!0,checked:r.didSummary}),a.jsx("span",{children:""})]})]}),a.jsxs("p",{className:"call-hint",children:[": ",r.coverageMatched,"/",r.coverageTotal,"",Math.round(r.coverageRate*100),"%"]}),a.jsxs("p",{className:"call-hint",children:[": ",r.suggestedContent]}),a.jsxs("p",{className:"call-field-label",children:["AI: ",(s==null?void 0:s.content)??""]}),((c=s==null?void 0:s.reasons)==null?void 0:c.content)&&a.jsxs("p",{className:"call-hint",children:[": ",s.reasons.content]})]}),a.jsxs("div",{className:"grading-col",children:[a.jsx("h4",{children:""}),a.jsxs("ul",{className:"grading-checklist",children:[a.jsx("li",{children:""}),a.jsx("li",{children:""}),a.jsx("li",{children:""}),a.jsx("li",{children:""}),a.jsx("li",{children:""}),a.jsx("li",{children:""}),a.jsx("li",{children:""})]}),a.jsxs("p",{className:"call-field-label",children:["AI: ",(s==null?void 0:s.attitude)??""]}),((u=s==null?void 0:s.reasons)==null?void 0:u.attitude)&&a.jsxs("p",{className:"call-hint",children:[": ",s.reasons.attitude]})]}),a.jsxs("div",{className:"grading-col",children:[a.jsx("h4",{children:""}),a.jsx("p",{className:"call-hint",children:": "}),a.jsxs("p",{className:"call-hint",children:[": ",e.length]}),a.jsxs("p",{className:"call-hint",children:[": ",o]}),a.jsxs("p",{className:"call-field-label",children:["AI: ",(s==null?void 0:s.english)??""]}),((h=s==null?void 0:s.reasons)==null?void 0:h.english)&&a.jsxs("p",{className:"call-hint",children:[": ",s.reasons.english]})]})]}),a.jsxs("div",{className:"grading-overall",children:[a.jsx("span",{className:"grading-overall-label",children:":"}),i?a.jsx("span",{className:`grading-overall-grade grade-${i.toLowerCase()}`,children:i}):a.jsx("span",{className:"call-hint",children:""}),((m=s==null?void 0:s.reasons)==null?void 0:m.overall)&&a.jsxs("span",{className:"call-hint",children:[": ",s.reasons.overall]})]})]})},OP=({open:t,onClose:e,result:n,awaiting:s,failed:r,fallback:i})=>{var o,c,u;return t?a.jsx("div",{className:"call-modal",role:"dialog","aria-modal":"true","aria-label":"",children:a.jsxs("div",{className:"call-modal-content",children:[a.jsxs("div",{className:"call-modal-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:""}),a.jsx("p",{className:"call-subtitle",children:""})]}),a.jsx("button",{type:"button",className:"call-modal-close",onClick:e,"aria-label":"",children:""})]}),s&&!n?a.jsx("div",{className:"call-section",children:a.jsx("p",{className:"call-hint",children:""})}):n?a.jsxs("div",{className:"call-section",children:[a.jsxs("h3",{children:[": ",a.jsx("span",{className:`grading-overall-grade grade-${n.overall.toLowerCase()}`,children:n.overall})]}),a.jsxs("ul",{className:"grading-checklist",children:[a.jsxs("li",{children:[": ",n.content," ",(o=n.reasons)!=null&&o.content?` ${n.reasons.content}`:""]}),a.jsxs("li",{children:[": ",n.attitude," ",(c=n.reasons)!=null&&c.attitude?` ${n.reasons.attitude}`:""]}),a.jsxs("li",{children:[": ",n.english," ",(u=n.reasons)!=null&&u.english?` ${n.reasons.english}`:""]})]}),i&&a.jsx("p",{className:"call-hint",children:" Realtime API "})]}):r?a.jsx("div",{className:"call-section",children:a.jsx("p",{className:"call-hint",children:"API"})}):null]})}):null},LP=[{id:"openai",label:"ChatGPT Realtime mini",description:"OpenAI Realtime API "},{id:"gemini",label:"Gemini Live 2.5 Flash",description:"Google Gemini Live API "}],MP={idle:"",connecting:"",connected:"",ending:"",error:""},VP=()=>{const[t,e]=I.useState(!1),{provider:n,status:s,error:r,remoteStream:i,localStream:o,startCall:c,stopCall:u,setProvider:h,hasApiKey:m,setApiKey:p,getApiKey:g,clearError:E,feedbackEntries:C,transcriptEntries:w,scoreResult:k,endedWithoutScore:y,awaitingFinalScore:x,feedbackFallbackActive:j,scoreFallbackActive:R,availableScenarios:L,scenarioId:U,setScenarioId:S,activeScenario:v,pendingAssistantText:N}=_E(),T=s==="connecting"||s==="connected"||s==="ending",[P,A]=I.useState(!1),[_,re]=I.useState(()=>{if(typeof window>"u")return!1;const W=window.innerWidth,oe=window.innerHeight||1;return W/oe>1.2});I.useEffect(()=>{const W=()=>{const oe=window.innerWidth,ze=window.innerHeight||1;re(oe/ze>1.2)};return window.addEventListener("resize",W),window.addEventListener("orientationchange",W),()=>{window.removeEventListener("resize",W),window.removeEventListener("orientationchange",W)}},[]);const[ye,Re]=I.useState(Math.min(520,Math.floor((typeof window<"u"?window.innerWidth:1200)*.45)));I.useEffect(()=>{if(!(t&&_||T&&_)){document.body.style.marginRight="";return}return document.body.style.marginRight=`${ye}px`,()=>{document.body.style.marginRight=""}},[t,_,s,ye]);const De=t&&_||T&&_;I.useEffect(()=>{if(typeof window>"u")return;const W=Math.max(320,Math.floor(window.innerWidth*.8));Re(oe=>Math.min(Math.max(320,oe),W))},[_]);const V=I.useRef(!1),M=I.useCallback(W=>{V.current=!0,W.preventDefault()},[]);I.useEffect(()=>{const W=ze=>{if(!V.current)return;const yt=window.innerWidth,Ne=ze.clientX,Rt=Math.max(320,Math.min(yt-200,yt-Ne));Re(Rt)},oe=()=>{V.current=!1};return window.addEventListener("mousemove",W),window.addEventListener("mouseup",oe),()=>{window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",oe)}},[]);const J=I.useRef(null);I.useEffect(()=>{if(!J.current)return;const W=J.current;if(i){W.srcObject=i;const oe=()=>{W.play().catch(ze=>console.warn("Autoplay prevented for remote stream:",ze))};W.readyState>=HTMLMediaElement.HAVE_ENOUGH_DATA?oe():W.onloadedmetadata=oe}else W.pause(),W.srcObject=null},[i]),I.useCallback(()=>{e(!0)},[]);const ne=I.useCallback(()=>{e(!1)},[]);I.useEffect(()=>{if(!t)return;const W=oe=>{oe.key==="Escape"&&ne()};return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)},[t,ne]);const Z=I.useCallback(W=>{W.target===W.currentTarget&&ne()},[ne]),Be=I.useCallback(W=>{E(),h(W)},[h,E]);I.useCallback(async()=>{await c({provider:n})},[c,n]),s==="connecting"||m(n);const Ve=I.useMemo(()=>MP[s]||s,[s]);g(n),I.useCallback(W=>{E(),p(n,W.target.value)},[n,p,E]);const Xe=I.useCallback(W=>{E(),S(W)},[E,S]),Te=I.useCallback(()=>{if(!L.length)return;const W=L[Math.floor(Math.random()*L.length)];Xe(W.id)},[L,Xe]);I.useEffect(()=>{A(!1)},[U]);const[Ze,nt]=I.useState(0);I.useEffect(()=>{t&&nt(C.length)},[t,C.length]);const _t=Math.max(0,C.length-Ze),Vs=["call-launcher",s==="connected"?"is-active":"",_t>0?"has-unread":""].filter(Boolean).join(" "),dn=I.useCallback(()=>{u()},[u]),Vn=I.useCallback(W=>{const oe=new Date(W),ze=oe.getHours().toString().padStart(2,"0"),yt=oe.getMinutes().toString().padStart(2,"0");return`${ze}:${yt}`},[]),Xt=()=>{var ze,yt;const W=v==null?void 0:v.casePresentation,oe=((ze=v==null?void 0:v.source)==null?void 0:ze.type)==="pdf"?` ${v.source.reference??""}`.trim():((yt=v==null?void 0:v.source)==null?void 0:yt.type)==="custom"?"Custom scenario":void 0;return a.jsxs("div",{className:"call-section",children:[a.jsx("h3",{children:""}),a.jsx("p",{className:"call-hint",children:""}),!T&&a.jsx("div",{className:"call-provider-options",children:LP.map(Ne=>a.jsxs("button",{type:"button",className:`call-provider-button ${n===Ne.id?"is-active":""}`,onClick:()=>Be(Ne.id),"aria-pressed":n===Ne.id,children:[a.jsx("span",{className:"call-provider-label",children:Ne.label}),a.jsx("span",{className:"call-provider-description",children:Ne.description})]},Ne.id))}),a.jsxs("div",{className:"call-scenario-actions",children:[a.jsx("button",{type:"button",className:"call-random-button",onClick:Te,children:" "}),a.jsxs("span",{className:"call-scenario-count",children:["",L.length,""]})]}),a.jsx("div",{className:"call-symptom-browser",children:uP.map(Ne=>a.jsxs("div",{className:"call-symptom-category",children:[a.jsxs("div",{className:"call-symptom-category-header",children:[a.jsxs("span",{className:"call-symptom-category-roman",children:[Ne.roman,"."]}),a.jsxs("div",{children:[a.jsx("div",{className:"call-symptom-category-label-ja",children:Ne.labelJa}),a.jsx("div",{className:"call-symptom-category-label-en",children:Ne.labelEn})]})]}),a.jsx("div",{className:"call-symptom-list",children:Ne.symptoms.map(Rt=>a.jsxs("button",{type:"button",className:`call-symptom-pill ${U===Rt.scenarioId?"is-active":""}`,onClick:()=>Xe(Rt.scenarioId),"aria-pressed":U===Rt.scenarioId,children:[a.jsxs("span",{className:"call-symptom-pill-order",children:[Rt.order,"."]}),a.jsxs("span",{className:"call-symptom-pill-label",children:[a.jsx("span",{className:"call-symptom-pill-label-ja",children:Rt.labelJa}),a.jsx("span",{className:"call-symptom-pill-label-en",children:Rt.labelEn}),Rt.variant?a.jsxs("span",{className:"call-symptom-pill-variant",children:["(",Rt.variant,")"]}):null]})]},Rt.scenarioId))})]},Ne.id))}),v&&W&&a.jsxs("div",{className:"call-case-card",children:[a.jsxs("button",{type:"button",className:`call-case-toggle ${P?"is-open":""}`,onClick:()=>A(Ne=>!Ne),"aria-expanded":P,children:[a.jsx("span",{children:" / Case Presentation"}),a.jsx("span",{className:"call-case-toggle-icon",children:P?"":""})]}),a.jsxs("div",{className:`call-collapsible ${P?"is-open":""}`,children:[a.jsxs("ul",{className:"call-case-list",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Patient:"})," ",`${W.demographicsJa}${W.demographicsJa?" / ":""}${W.demographicsEn}`]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Chief complaint:"})," ",`${W.chiefComplaintJa??""}${W.chiefComplaintJa?" / ":""}${W.chiefComplaintEn}`]}),W.vitalsJa||W.vitalsEn?a.jsxs("li",{children:[a.jsx("strong",{children:"Vitals:"})," ",`${W.vitalsJa??""}${W.vitalsJa?" / ":""}${W.vitalsEn??""}`]}):null,v.shortSummary?a.jsxs("li",{children:[a.jsx("strong",{children:"Summary:"})," ",v.shortSummary]}):null]}),W.notesEn&&W.notesEn.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"call-case-notes-label",children:"Key exam / assessment hints"}),a.jsx("ul",{className:"call-case-notes",children:W.notesEn.map(Ne=>a.jsx("li",{children:Ne},Ne))})]}),oe&&a.jsx("p",{className:"call-case-source",children:oe})]})]})]})},_n=I.useMemo(()=>{for(let W=w.length-1;W>=0;W--){const oe=w[W];if(oe.role==="assistant"&&oe.text)return oe.text}return""},[w]),mn=N||_n,$t=I.useCallback(W=>W==="openai"?"OpenAI":W==="gemini"?"Gemini":"Local",[]),Jt=()=>{const W=w.length>0||!!N;return a.jsxs("div",{className:"call-live-panels",children:[a.jsxs("div",{className:"call-section call-live-panel",children:[a.jsx("h3",{children:""}),W?a.jsx("div",{className:"call-scroll-block",children:a.jsxs("ul",{className:"call-transcript-list",children:[w.map(oe=>a.jsxs("li",{className:"call-transcript-item",children:[a.jsxs("span",{className:"call-transcript-meta",children:[a.jsx("span",{className:`call-transcript-role role-${oe.role}`,children:oe.role==="user"?"":oe.role==="assistant"?"":""}),a.jsx("time",{dateTime:new Date(oe.timestamp).toISOString(),children:Vn(oe.timestamp)})]}),a.jsx("p",{className:"call-transcript-text",children:oe.text})]},oe.id)),N&&a.jsxs("li",{className:"call-transcript-item",children:[a.jsxs("span",{className:"call-transcript-meta",children:[a.jsx("span",{className:"call-transcript-role role-assistant",children:""}),a.jsx("time",{children:Vn(Date.now())})]}),a.jsx("p",{className:"call-transcript-text",children:N})]})]})}):a.jsx("p",{className:"call-hint",children:""})]}),a.jsxs("div",{className:"call-section call-live-panel",children:[a.jsx("h3",{children:""}),C.length===0?a.jsx("p",{className:"call-hint",children:""}):a.jsx("div",{className:"call-scroll-block",children:a.jsx("ul",{className:"call-feedback-list",children:C.map(oe=>a.jsxs("li",{className:"call-feedback-item",children:[a.jsxs("div",{className:"call-feedback-header",children:[a.jsx("span",{className:"call-feedback-provider",children:$t(oe.provider)}),a.jsx("time",{dateTime:new Date(oe.timestamp).toISOString(),children:Vn(oe.timestamp)})]}),oe.utterance&&a.jsxs("div",{className:"call-feedback-source",children:[a.jsxs("span",{className:"call-feedback-source-label",children:["",oe.utteranceTimestamp?`${Vn(oe.utteranceTimestamp)}`:""]}),a.jsxs("p",{className:"call-feedback-source-text",children:["",oe.utterance,""]})]}),a.jsx("p",{className:"call-feedback-text",children:oe.text})]},oe.id))})})]})]})},Fs=w.length>0||!!N,Oe=T||Fs||C.length>0,Le=!T,kn=I.useCallback(()=>{if(s==="connecting"||s==="connected"||s==="ending"){u();return}if(!t){e(!0);return}(s==="idle"||s==="error")&&c({provider:n})},[s,t,c,u,n]),[Pt,ms]=I.useState(!1);return I.useEffect(()=>{(x||k||y)&&(s==="idle"||s==="ending")&&ms(!0)},[x,k,y,s]),a.jsxs(a.Fragment,{children:[a.jsxs("button",{type:"button",className:Vs,"aria-label":"",onClick:kn,children:["",_t>0&&a.jsx("span",{className:"call-launcher-badge",children:_t>9?"9+":_t})]}),(s==="connected"||s==="connecting"||s==="ending")&&!t&&a.jsxs("div",{className:`call-mini-status call-mini-status-${s}`,children:[a.jsxs("div",{className:"call-mini-details",children:[a.jsx("span",{className:"call-mini-status-label",children:Ve}),_t>0&&a.jsxs("span",{className:"call-mini-feedback",children:[" ",_t]})]}),a.jsxs("div",{className:"call-mini-actions",children:[a.jsx("button",{type:"button",className:"call-mini-button",onClick:()=>e(!0),children:""}),a.jsx("button",{type:"button",className:"call-mini-button is-danger",onClick:dn,disabled:s==="connecting",children:""})]})]}),a.jsx("audio",{ref:J,className:"call-audio",autoPlay:!0,playsInline:!0,hidden:!0}),t&&!De&&a.jsx("div",{className:"call-modal",onMouseDown:Z,children:a.jsxs("div",{className:"call-modal-content",role:"dialog","aria-modal":"true","aria-label":"",children:[a.jsxs("div",{className:"call-modal-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:""}),a.jsx("p",{className:"call-subtitle",children:""})]}),a.jsx("button",{type:"button",className:"call-modal-close",onClick:ne,"aria-label":"",children:""})]}),j&&a.jsx("div",{className:"call-warning",children:""}),R&&a.jsx("div",{className:"call-warning",children:"API"}),a.jsxs("div",{className:"call-status-row",children:[a.jsx("span",{className:`call-status-badge call-status-${s}`,children:Ve}),o&&s==="connected"&&a.jsx("span",{className:"call-mic-indicator",children:" "})]}),Le&&Xt(),Oe&&a.jsxs(a.Fragment,{children:[Jt(),a.jsx(_v,{transcriptEntries:w,feedbackEntries:C,scenarioTitle:v==null?void 0:v.title,scoreResult:k})]}),r&&a.jsx("p",{className:"call-error",children:r}),a.jsxs("div",{className:"call-actions",children:[a.jsx("button",{type:"button",className:"call-button call-button-primary",onClick:()=>c({provider:n}),disabled:s==="connecting"||s==="connected",children:s==="connecting"?"":s==="connected"?"":""}),a.jsx("button",{type:"button",className:"call-button",onClick:u,disabled:s!=="connected"&&s!=="connecting",children:""})]})]})}),De&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"call-dock",style:{width:ye},children:[a.jsxs("div",{className:"call-dock-header",children:[a.jsx("strong",{children:""}),a.jsx("div",{className:"spacer"}),a.jsx("span",{className:`call-status-badge call-status-${s}`,children:Ve}),a.jsx("button",{type:"button",className:"call-modal-close",onClick:dn,"aria-label":"",children:""})]}),a.jsxs("div",{className:"call-dock-body",children:[j&&a.jsx("div",{className:"call-warning",children:""}),R&&a.jsx("div",{className:"call-warning",children:"API"}),Le&&Xt(),Oe&&a.jsxs(a.Fragment,{children:[Jt(),a.jsx(_v,{transcriptEntries:w,feedbackEntries:C,scenarioTitle:v==null?void 0:v.title,scoreResult:k})]})]})]}),a.jsx("div",{className:"call-dock-resizer",style:{left:`calc(100vw - ${ye+4}px)`},onMouseDown:M})]}),(s==="connected"||s==="connecting")&&mn&&a.jsx("div",{className:"call-subtitles",children:mn}),a.jsx(OP,{open:Pt,onClose:()=>ms(!1),result:k,awaiting:x&&!k&&!y,failed:y&&!k,fallback:R})]})},F=({title:t,level:e=2,defaultCollapsed:n=!0,children:s,fullWidth:r=!1,className:i=""})=>{const[o,c]=I.useState(n),u=I.useId(),h=`h${e}`,m=["section",r?"section-full":"",i||""].filter(Boolean).join(" ");return a.jsxs("div",{className:m,children:[a.jsx(h,{className:o?"collapsed":"",role:"button","aria-expanded":!o,"aria-controls":u,onClick:()=>c(!o),children:t}),a.jsx("div",{id:u,className:`section-content ${o?"collapsed":"expanded"}`,"aria-hidden":o,children:s})]})};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zo(){return Zo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Zo.apply(this,arguments)}var or;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(or||(or={}));const kv="popstate";function FP(t){t===void 0&&(t={});function e(s,r){let{pathname:i,search:o,hash:c}=s.location;return vm("",{pathname:i,search:o,hash:c},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:fu(r)}return UP(e,n,null,t)}function at(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function kE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HP(){return Math.random().toString(36).substr(2,8)}function Sv(t,e){return{usr:t.state,key:t.key,idx:e}}function vm(t,e,n,s){return n===void 0&&(n=null),Zo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Na(e):e,{state:n,key:e&&e.key||s||HP()})}function fu(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Na(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function UP(t,e,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,c=or.Pop,u=null,h=m();h==null&&(h=0,o.replaceState(Zo({},o.state,{idx:h}),""));function m(){return(o.state||{idx:null}).idx}function p(){c=or.Pop;let k=m(),y=k==null?null:k-h;h=k,u&&u({action:c,location:w.location,delta:y})}function g(k,y){c=or.Push;let x=vm(w.location,k,y);h=m()+1;let j=Sv(x,h),R=w.createHref(x);try{o.pushState(j,"",R)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;r.location.assign(R)}i&&u&&u({action:c,location:w.location,delta:1})}function E(k,y){c=or.Replace;let x=vm(w.location,k,y);h=m();let j=Sv(x,h),R=w.createHref(x);o.replaceState(j,"",R),i&&u&&u({action:c,location:w.location,delta:0})}function C(k){let y=r.location.origin!=="null"?r.location.origin:r.location.href,x=typeof k=="string"?k:fu(k);return x=x.replace(/ $/,"%20"),at(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let w={get action(){return c},get location(){return t(r,o)},listen(k){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(kv,p),u=k,()=>{r.removeEventListener(kv,p),u=null}},createHref(k){return e(r,k)},createURL:C,encodeLocation(k){let y=C(k);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:g,replace:E,go(k){return o.go(k)}};return w}var Tv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Tv||(Tv={}));function BP(t,e,n){return n===void 0&&(n="/"),qP(t,e,n)}function qP(t,e,n,s){let r=typeof e=="string"?Na(e):e,i=cf(r.pathname||"/",n);if(i==null)return null;let o=SE(t);zP(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=nR(i);c=ZP(o[u],h)}return c}function SE(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,o,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(at(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let h=Ir([s,u.relativePath]),m=n.concat(u);i.children&&i.children.length>0&&(at(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),SE(i.children,e,m,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:YP(h,i.index),routesMeta:m})};return t.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))r(i,o);else for(let u of TE(i.path))r(i,o,u)}),e}function TE(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=TE(s.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),r&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function zP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:XP(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const $P=/^:[\w-]+$/,JP=3,WP=2,GP=1,KP=10,QP=-2,Nv=t=>t==="*";function YP(t,e){let n=t.split("/"),s=n.length;return n.some(Nv)&&(s+=QP),e&&(s+=WP),n.filter(r=>!Nv(r)).reduce((r,i)=>r+($P.test(i)?JP:i===""?GP:KP),s)}function XP(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function ZP(t,e,n){let{routesMeta:s}=t,r={},i="/",o=[];for(let c=0;c<s.length;++c){let u=s[c],h=c===s.length-1,m=i==="/"?e:e.slice(i.length)||"/",p=eR({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},m),g=u.route;if(!p)return null;Object.assign(r,p.params),o.push({params:r,pathname:Ir([i,p.pathname]),pathnameBase:aR(Ir([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=Ir([i,p.pathnameBase]))}return o}function eR(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=tR(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:s.reduce((h,m,p)=>{let{paramName:g,isOptional:E}=m;if(g==="*"){let w=c[p]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const C=c[p];return E&&!C?h[g]=void 0:h[g]=(C||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:t}}function tR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),kE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(s.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function nR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function cf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function sR(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?Na(t):t;return{pathname:n?n.startsWith("/")?n:rR(n,e):e,search:oR(s),hash:lR(r)}}function rR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Qh(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function NE(t,e){let n=iR(t);return e?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function jE(t,e,n,s){s===void 0&&(s=!1);let r;typeof t=="string"?r=Na(t):(r=Zo({},t),at(!r.pathname||!r.pathname.includes("?"),Qh("?","pathname","search",r)),at(!r.pathname||!r.pathname.includes("#"),Qh("#","pathname","hash",r)),at(!r.search||!r.search.includes("#"),Qh("#","search","hash",r)));let i=t===""||r.pathname==="",o=i?"/":r.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!s&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;r.pathname=g.join("/")}c=p>=0?e[p]:"/"}let u=sR(r,c),h=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||m)&&(u.pathname+="/"),u}const Ir=t=>t.join("/").replace(/\/\/+/g,"/"),aR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),oR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,lR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function cR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const CE=["post","put","patch","delete"];new Set(CE);const uR=["get",...CE];new Set(uR);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function el(){return el=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},el.apply(this,arguments)}const uf=I.createContext(null),hR=I.createContext(null),bi=I.createContext(null),Zu=I.createContext(null),Ii=I.createContext({outlet:null,matches:[],isDataRoute:!1}),AE=I.createContext(null);function dR(t,e){let{relative:n}=e===void 0?{}:e;vl()||at(!1);let{basename:s,navigator:r}=I.useContext(bi),{hash:i,pathname:o,search:c}=RE(t,{relative:n}),u=o;return s!=="/"&&(u=o==="/"?s:Ir([s,o])),r.createHref({pathname:u,search:c,hash:i})}function vl(){return I.useContext(Zu)!=null}function eh(){return vl()||at(!1),I.useContext(Zu).location}function PE(t){I.useContext(bi).static||I.useLayoutEffect(t)}function mR(){let{isDataRoute:t}=I.useContext(Ii);return t?SR():pR()}function pR(){vl()||at(!1);let t=I.useContext(uf),{basename:e,future:n,navigator:s}=I.useContext(bi),{matches:r}=I.useContext(Ii),{pathname:i}=eh(),o=JSON.stringify(NE(r,n.v7_relativeSplatPath)),c=I.useRef(!1);return PE(()=>{c.current=!0}),I.useCallback(function(h,m){if(m===void 0&&(m={}),!c.current)return;if(typeof h=="number"){s.go(h);return}let p=jE(h,JSON.parse(o),i,m.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ir([e,p.pathname])),(m.replace?s.replace:s.push)(p,m.state,m)},[e,s,o,i,t])}function RE(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=I.useContext(bi),{matches:r}=I.useContext(Ii),{pathname:i}=eh(),o=JSON.stringify(NE(r,s.v7_relativeSplatPath));return I.useMemo(()=>jE(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function fR(t,e){return gR(t,e)}function gR(t,e,n,s){vl()||at(!1);let{navigator:r}=I.useContext(bi),{matches:i}=I.useContext(Ii),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=eh(),m;if(e){var p;let k=typeof e=="string"?Na(e):e;u==="/"||(p=k.pathname)!=null&&p.startsWith(u)||at(!1),m=k}else m=h;let g=m.pathname||"/",E=g;if(u!=="/"){let k=u.replace(/^\//,"").split("/");E="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let C=BP(t,{pathname:E}),w=bR(C&&C.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:Ir([u,r.encodeLocation?r.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:Ir([u,r.encodeLocation?r.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,n,s);return e&&w?I.createElement(Zu.Provider,{value:{location:el({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:or.Pop}},w):w}function yR(){let t=kR(),e=cR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:r},n):null,null)}const vR=I.createElement(yR,null);class wR extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?I.createElement(Ii.Provider,{value:this.props.routeContext},I.createElement(AE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xR(t){let{routeContext:e,match:n,children:s}=t,r=I.useContext(uf);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Ii.Provider,{value:e},s)}function bR(t,e,n,s){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(r=n)==null?void 0:r.errors;if(c!=null){let m=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);m>=0||at(!1),o=o.slice(0,Math.min(o.length,m+1))}let u=!1,h=-1;if(n&&s&&s.v7_partialHydration)for(let m=0;m<o.length;m++){let p=o[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=m),p.route.id){let{loaderData:g,errors:E}=n,C=p.route.loader&&g[p.route.id]===void 0&&(!E||E[p.route.id]===void 0);if(p.route.lazy||C){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((m,p,g)=>{let E,C=!1,w=null,k=null;n&&(E=c&&p.route.id?c[p.route.id]:void 0,w=p.route.errorElement||vR,u&&(h<0&&g===0?(TR("route-fallback"),C=!0,k=null):h===g&&(C=!0,k=p.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,g+1)),x=()=>{let j;return E?j=w:C?j=k:p.route.Component?j=I.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=m,I.createElement(xR,{match:p,routeContext:{outlet:m,matches:y,isDataRoute:n!=null},children:j})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?I.createElement(wR,{location:n.location,revalidation:n.revalidation,component:w,error:E,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var DE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(DE||{}),OE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(OE||{});function IR(t){let e=I.useContext(uf);return e||at(!1),e}function ER(t){let e=I.useContext(hR);return e||at(!1),e}function _R(t){let e=I.useContext(Ii);return e||at(!1),e}function LE(t){let e=_R(),n=e.matches[e.matches.length-1];return n.route.id||at(!1),n.route.id}function kR(){var t;let e=I.useContext(AE),n=ER(),s=LE();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function SR(){let{router:t}=IR(DE.UseNavigateStable),e=LE(OE.UseNavigateStable),n=I.useRef(!1);return PE(()=>{n.current=!0}),I.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,el({fromRouteId:e},i)))},[t,e])}const jv={};function TR(t,e,n){jv[t]||(jv[t]=!0)}function NR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function sn(t){at(!1)}function jR(t){let{basename:e="/",children:n=null,location:s,navigationType:r=or.Pop,navigator:i,static:o=!1,future:c}=t;vl()&&at(!1);let u=e.replace(/^\/*/,"/"),h=I.useMemo(()=>({basename:u,navigator:i,static:o,future:el({v7_relativeSplatPath:!1},c)}),[u,c,i,o]);typeof s=="string"&&(s=Na(s));let{pathname:m="/",search:p="",hash:g="",state:E=null,key:C="default"}=s,w=I.useMemo(()=>{let k=cf(m,u);return k==null?null:{location:{pathname:k,search:p,hash:g,state:E,key:C},navigationType:r}},[u,m,p,g,E,C,r]);return w==null?null:I.createElement(bi.Provider,{value:h},I.createElement(Zu.Provider,{children:n,value:w}))}function CR(t){let{children:e,location:n}=t;return fR(wm(e),n)}new Promise(()=>{});function wm(t,e){e===void 0&&(e=[]);let n=[];return I.Children.forEach(t,(s,r)=>{if(!I.isValidElement(s))return;let i=[...e,r];if(s.type===I.Fragment){n.push.apply(n,wm(s.props.children,i));return}s.type!==sn&&at(!1),!s.props.index||!s.props.children||at(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=wm(s.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xm(){return xm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},xm.apply(this,arguments)}function AR(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function PR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function RR(t,e){return t.button===0&&(!e||e==="_self")&&!PR(t)}const DR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],OR="6";try{window.__reactRouterVersion=OR}catch{}const LR="startTransition",Cv=g_[LR];function MR(t){let{basename:e,children:n,future:s,window:r}=t,i=I.useRef();i.current==null&&(i.current=FP({window:r,v5Compat:!0}));let o=i.current,[c,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:h}=s||{},m=I.useCallback(p=>{h&&Cv?Cv(()=>u(p)):u(p)},[u,h]);return I.useLayoutEffect(()=>o.listen(m),[o,m]),I.useEffect(()=>NR(s),[s]),I.createElement(jR,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:s})}const VR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mt=I.forwardRef(function(e,n){let{onClick:s,relative:r,reloadDocument:i,replace:o,state:c,target:u,to:h,preventScrollReset:m,viewTransition:p}=e,g=AR(e,DR),{basename:E}=I.useContext(bi),C,w=!1;if(typeof h=="string"&&FR.test(h)&&(C=h,VR))try{let j=new URL(window.location.href),R=h.startsWith("//")?new URL(j.protocol+h):new URL(h),L=cf(R.pathname,E);R.origin===j.origin&&L!=null?h=L+R.search+R.hash:w=!0}catch{}let k=dR(h,{relative:r}),y=HR(h,{replace:o,state:c,target:u,preventScrollReset:m,relative:r,viewTransition:p});function x(j){s&&s(j),j.defaultPrevented||y(j)}return I.createElement("a",xm({},g,{href:C||k,onClick:w||i?s:x,ref:n,target:u}))});var Av;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Av||(Av={}));var Pv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Pv||(Pv={}));function HR(t,e){let{target:n,replace:s,state:r,preventScrollReset:i,relative:o,viewTransition:c}=e===void 0?{}:e,u=mR(),h=eh(),m=RE(t,{relative:o});return I.useCallback(p=>{if(RR(p,n)){p.preventDefault();let g=s!==void 0?s:fu(h)===fu(m);u(t,{replace:g,state:r,preventScrollReset:i,relative:o,viewTransition:c})}},[h,u,m,s,r,n,t,i,o,c])}const UR="/medical-interview-english/".replace(/\/$/,""),Rv=t=>{const e=t.replace(/^\/+/,""),n=`${UR}/${e}`.replace(/^\/\//,"/");return n.startsWith("/")?n:`/${n}`};async function BR(t){const e=await fetch(t,{mode:"cors"});if(!e.ok)throw new Error(`Failed to fetch ${t}: ${e.status}`);return await e.text()}const qR=({url:t,title:e,enableAudio:n=!1,backTo:s="/",backLabel:r=" "})=>{const i=I.useRef(null),[o,c]=I.useState(null),[u,h]=I.useState(!0);I.useEffect(()=>{let g=!0;return(async()=>{try{h(!0);const E=await BR(t);if(!g)return;const w=new DOMParser().parseFromString(E,"text/html").querySelector(".container");if(!w)throw new Error("container not found in external HTML");const k=w.querySelector(".back-link");k&&k.parentElement&&k.parentElement.removeChild(k);const y=w.querySelector("h1");y&&y.parentElement&&y.parentElement.removeChild(y),i.current&&(i.current.innerHTML=w.innerHTML,$R(i.current)),setTimeout(()=>{try{zR(i.current),n&&JR(i.current)}catch(x){console.error(x)}},0)}catch(E){console.error(E),c(E.message||String(E))}finally{h(!1)}})(),()=>{g=!1}},[t,n]);const{layout:m}=Ls(),p=m==="two-column"?"layout-two-column":m==="single-column"?"layout-single-column":"";return a.jsxs("div",{className:`container ${p}`,children:[a.jsx(mt,{to:s,className:"back-link",children:r}),a.jsx("h1",{children:e}),u&&a.jsx("p",{children:"..."}),o&&a.jsxs("p",{className:"description",children:[": ",o]}),a.jsx("div",{ref:i,className:"injected"})]})};function zR(t){const e=Array.from(t.querySelectorAll("h2, h3, h4"));e.forEach(u=>u.classList.add("collapsible"));function n(u){return u===2?/^H2$/:u===3?/^H[23]$/:/^H[234]$/}function s(u){return u==="H2"?2:u==="H3"?3:4}function r(u,h){let m=u;for(;m&&!h.test(m.tagName);){const p=m;p.style.display="none",p.style.maxHeight="0px",p.style.overflow="hidden",p.style.opacity="0",p.style.margin="0",m=m.nextElementSibling}return m}function i(u,h){let m=u;for(;m&&!h.test(m.tagName);){const p=m;if(/^H[2-4]$/.test(p.tagName)){p.style.display="",p.style.maxHeight="",p.style.overflow="",p.style.opacity="",p.style.margin="",p.classList.add("collapsed"),m=r(p.nextElementSibling,n(s(p.tagName)));continue}else p.style.display="",p.style.maxHeight="",p.style.overflow="",p.style.opacity="",p.style.margin="";m=m.nextElementSibling}}function o(u,h){const m=s(u.tagName),p=n(m);h?(u.classList.add("collapsed"),r(u.nextElementSibling,p)):(u.classList.remove("collapsed"),i(u.nextElementSibling,p))}function c(u){if(u._indentAnnotated)return;u._indentAnnotated=!0;const h=s(u.tagName);u.classList.add(`heading-l${h}`);const m=n(h);let p=u.nextElementSibling;const g=Math.max(0,h-2);for(;p&&!m.test(p.tagName);){const E=p;/^H[2-4]$/.test(E.tagName)||E.classList.add(`indent-${g}`),p=p.nextElementSibling}}e.forEach(u=>{u.classList.contains("initialized")||(u.classList.add("initialized"),c(u),o(u,!0),u.addEventListener("click",h=>{h.stopPropagation();const m=u.classList.contains("collapsed");o(u,!m)}))})}function $R(t){if(!t)return;const e=Array.from(t.querySelectorAll("li.question-item")),n=/\(([^()]+)\)/g;e.forEach(s=>{const r=document.createTreeWalker(s,NodeFilter.SHOW_TEXT,null),i=[];let o=r.nextNode();for(;o;)o.nodeType===Node.TEXT_NODE&&i.push(o),o=r.nextNode();i.forEach(c=>{const u=c.textContent??"";if(n.lastIndex=0,!n.test(u))return;n.lastIndex=0;const h=c.parentElement;if(!h||h.closest(".paraphrase"))return;const m=document.createDocumentFragment();let p=0,g;for(;(g=n.exec(u))!==null;){const E=g.index??0,C=E+g[0].length;E>p&&m.appendChild(document.createTextNode(u.slice(p,E)));const w=document.createElement("span");w.className="paraphrase",w.textContent=g[0],m.appendChild(w),p=C}p<u.length&&m.appendChild(document.createTextNode(u.slice(p))),h.replaceChild(m,c)})})}async function JR(t){const e=Rv("audio/audio_map.json");let n={};try{n=await fetch(e).then(c=>c.json())}catch{console.warn("Failed to load audio_map.json; audio disabled");return}let s=null,r=null;function i(){r&&(r.pause(),r=null),s&&(s.classList.remove("playing"),s=null)}function o(c){const u=new Set,h=c.replace(/\s+/g," ").trim();h&&u.add(h);const m=h.replace(/\s*\(ai\)\s*$/i,"").trim();return m&&u.add(m),Array.from(u)}t.querySelectorAll("li.question-item").forEach(c=>{const u=c;u.addEventListener("click",()=>{var g;const h=u.dataset.text||((g=u.textContent)==null?void 0:g.trim())||"";let m;for(const E of o(h))if(n[E]){m=n[E];break}if(!m){console.warn("Audio not found for:",h);return}const p=Rv(`audio/${m}`);if(s===u&&r&&!r.paused){r.pause(),u.classList.remove("playing");return}i(),r=new Audio(p),s=u,u.classList.add("playing"),r.addEventListener("ended",()=>i()),r.addEventListener("error",()=>i()),r.play()})})}const hf=({src:t,title:e})=>a.jsxs("div",{className:"iframe-wrapper",style:{height:"80vh"},children:[a.jsx("iframe",{title:e,src:t,style:{width:"100%",height:"100%",border:"1px solid var(--border-color)",borderRadius:8}}),a.jsx("p",{className:"description",children:": iframeReact"})]}),WR="/medical-interview-english/".replace(/\/$/,""),Nn=t=>{const e=t.replace(/^\/+/,""),n=`${WR}/${e}`.replace(/^\/\//,"/");return n.startsWith("/")?n:`/${n}`},GR=()=>{const{layout:t}=Ls(),[e,n]=I.useState(!1),s=I.useMemo(()=>Nn("legacy/chest.html"),[]),r=I.useMemo(()=>({neck:Nn("images/chest/chest-01-neck.jpg"),anterior:Nn("images/chest/chest-02-anterior.jpg"),heartPalpation:Nn("images/chest/chest-03-heart-palpation.jpg"),heartAuscultation:Nn("images/chest/chest-04-heart-auscultation.jpg"),lungPercussionAnterior:Nn("images/chest/chest-05-lung-percussion-anterior.jpg"),lungAuscultationAnterior:Nn("images/chest/chest-06-lung-auscultation-anterior.jpg"),backInspection:Nn("images/chest/chest-07-back-inspection.jpg"),lungPercussionPosterior:Nn("images/chest/chest-08-lung-percussion-posterior.jpg"),lungAuscultationPosterior:Nn("images/chest/chest-09-lung-auscultation-posterior.jpg")}),[]),[i,o]=I.useState(null),c=I.useRef(null),[u,h]=I.useState(null);I.useEffect(()=>{(async()=>{try{const E=await fetch(Nn("audio/audio_map.json"));if(!E.ok)return;const C=await E.json();o(C)}catch{}})()},[]);const m=g=>{if(!i)return;const E=i[g];if(!E)return;const C=Nn(`audio/${E}`);c.current&&(c.current.pause(),c.current=null);const w=new Audio(C);c.current=w,h(g);const k=()=>{c.current===w&&(c.current=null),h(y=>y===g?null:y)};w.addEventListener("ended",k),w.addEventListener("error",k),w.play().catch(k)},p=t==="two-column"?"layout-two-column":t==="single-column"?"layout-single-column":"";return a.jsxs("div",{className:`container ${p}`,children:[a.jsx(mt,{to:"/physical-exam",className:"back-link",children:" "}),a.jsx("h1",{children:""}),a.jsxs(F,{title:"Neck Vessels",level:2,children:[a.jsxs(F,{title:"Inspection",level:3,children:[a.jsx("p",{children:""}),a.jsxs("div",{className:"figure-row",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{src:r.neck,alt:"",loading:"lazy"})}),a.jsxs("ul",{children:[a.jsx("li",{className:`question-item ${u==="First, I'm just going to have a look at your neck."?"playing":""}`,onClick:()=>m("First, I'm just going to have a look at your neck."),children:a.jsxs("div",{className:"question-text",children:[`"First, I'm just going to `,a.jsx("b",{children:"have a look at your neck"})," ",a.jsx("span",{className:"paraphrase",children:"(examine, inspect, check)"}),'."']})}),a.jsx("li",{className:`question-item ${u==="Could you turn your head that way, please?"?"playing":""}`,onClick:()=>m("Could you turn your head that way, please?"),children:a.jsxs("div",{className:"question-text",children:['"Could you ',a.jsx("b",{children:"turn your head"})," ",a.jsx("span",{className:"paraphrase",children:"(look this way)"}),' that way, please?"']})})]})]})]}),a.jsxs(F,{title:"Auscultation",level:3,children:[a.jsx("p",{children:"bruit"}),a.jsxs("ul",{children:[a.jsx("li",{className:`question-item ${u==="Now, I'll use my stethoscope to listen to the carotid arteries on both sides of your neck."?"playing":""}`,onClick:()=>m("Now, I'll use my stethoscope to listen to the carotid arteries on both sides of your neck."),children:a.jsxs("div",{className:"question-text",children:[`"Now, I'll use my `,a.jsx("b",{children:"stethoscope"})," ",a.jsx("span",{className:"paraphrase",children:"(chest piece)"})," to ",a.jsx("b",{children:"listen to"})," ",a.jsx("span",{className:"paraphrase",children:"(auscultate)"})," the ",a.jsx("b",{children:"carotid arteries"})," ",a.jsx("span",{className:"paraphrase",children:"(neck arteries)"}),' on both sides of your neck."']})}),a.jsx("li",{className:`question-item ${u==="I apologize if my stethoscope is a little cold."?"playing":""}`,onClick:()=>m("I apologize if my stethoscope is a little cold."),children:a.jsxs("div",{className:"question-text",children:['"I apologize if my ',a.jsx("b",{children:"stethoscope"}),' is a little cold."']})}),a.jsx("li",{className:`question-item ${u==="Please let me know if it is."?"playing":""}`,onClick:()=>m("Please let me know if it is."),children:a.jsxs("div",{className:"question-text",children:['"Please ',a.jsx("b",{children:"let me know"}),' if it is."']})}),a.jsx("li",{className:`question-item ${u==="I'm going to place the stethoscope on your neck now."?"playing":""}`,onClick:()=>m("I'm going to place the stethoscope on your neck now."),children:a.jsxs("div",{className:"question-text",children:[`"I'm going to place the `,a.jsx("b",{children:"stethoscope"}),' on your neck now."']})}),a.jsx("li",{className:`question-item ${u==="It might be slightly cool. Is that okay?"?"playing":""}`,onClick:()=>m("It might be slightly cool. Is that okay?"),children:a.jsxs("div",{className:"question-text",children:['"It might be ',a.jsx("b",{children:"slightly cool"}),'. Is that okay?"']})}),a.jsx("li",{className:`question-item ${u==="Could you please take a breath in and then hold it for a few seconds?"?"playing":""}`,onClick:()=>m("Could you please take a breath in and then hold it for a few seconds?"),children:a.jsxs("div",{className:"question-text",children:['"Could you please ',a.jsx("b",{children:"take a breath in and then hold it"})," ",a.jsx("span",{className:"paraphrase",children:"(inhale and hold your breath)"}),' for a few seconds?"']})}),a.jsx("li",{className:`question-item ${u==="take a breath in and then hold it"?"playing":""}`,onClick:()=>m("take a breath in and then hold it"),children:a.jsxs("div",{className:"question-text",children:['"',a.jsx("b",{children:"Take a breath in and then hold it"})," ",a.jsx("span",{className:"paraphrase",children:"(inhale and hold)"}),'."']})})]})]}),a.jsx(F,{title:"Palpation",level:3,children:a.jsx("p",{children:"thrill"})})]}),a.jsxs(F,{title:"Inspection of the Anterior Chest",level:2,children:[a.jsx("p",{children:""}),a.jsxs("div",{className:"figure-row",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{src:r.anterior,alt:"",loading:"lazy"})}),a.jsx("ul",{children:a.jsx("li",{className:`question-item ${u==="First, I'm going to look at your entire chest area."?"playing":""}`,onClick:()=>m("First, I'm going to look at your entire chest area."),children:a.jsxs("div",{className:"question-text",children:[`"First, I'm going to `,a.jsx("b",{children:"look at your entire chest area"})," ",a.jsx("span",{className:"paraphrase",children:"(inspect your chest)"}),'."']})})})]})]}),a.jsxs(F,{title:"Heart",level:2,children:[a.jsxs(F,{title:"Palpation",level:3,children:[a.jsx("p",{children:"thrill"}),a.jsxs("div",{className:"figure-row",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{src:r.heartPalpation,alt:"",loading:"lazy"})}),a.jsxs("ul",{children:[a.jsx("li",{className:`question-item ${u==="Im going to check where your heartbeat is on this side. ()"?"playing":""}`,onClick:()=>m("Im going to check where your heartbeat is on this side. ()"),children:a.jsxs("div",{className:"question-text",children:['"Im going to ',a.jsx("b",{children:"check where your heartbeat is"})," ",a.jsx("span",{className:"paraphrase",children:"(locate the apical beat)"})," on this side."," ",a.jsx("span",{className:"paraphrase",children:"()"}),'"']})}),a.jsx("li",{className:`question-item ${u==="Now Im going to put my hand on your chest. ()"?"playing":""}`,onClick:()=>m("Now Im going to put my hand on your chest. ()"),children:a.jsxs("div",{className:"question-text",children:['"Now Im going to ',a.jsx("b",{children:"put my hand on your chest"})," ",a.jsx("span",{className:"paraphrase",children:"(feel the chest wall motion)"}),"."," ",a.jsx("span",{className:"paraphrase",children:"()"}),'"']})})]})]})]}),a.jsxs(F,{title:"Auscultation",level:3,children:[a.jsx("p",{children:"4III"}),a.jsxs("div",{className:"figure-row",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{src:r.heartAuscultation,alt:"",loading:"lazy"})}),a.jsxs("ul",{children:[a.jsx("li",{className:`question-item ${u==="Now, I will listen to your heart with my stethoscope."?"playing":""}`,onClick:()=>m("Now, I will listen to your heart with my stethoscope."),children:a.jsxs("div",{className:"question-text",children:['"Now, I will ',a.jsx("b",{children:"listen to your heart"})," ",a.jsx("span",{className:"paraphrase",children:"(auscultate your heart)"})," with my ",a.jsx("b",{children:"stethoscope"}),'."']})}),a.jsx("li",{className:`question-item ${u==="it might be slightly cool."?"playing":""}`,onClick:()=>m("it might be slightly cool."),children:a.jsxs("div",{className:"question-text",children:['"it might be ',a.jsx("b",{children:"slightly cool"}),'."']})}),a.jsx("li",{className:`question-item ${u==="Please let me know if it is too cold."?"playing":""}`,onClick:()=>m("Please let me know if it is too cold."),children:a.jsxs("div",{className:"question-text",children:['"Please ',a.jsx("b",{children:"let me know"})," if it is ",a.jsx("b",{children:"too cold"}),'."']})})]})]})]})]}),a.jsxs(F,{title:"Lungs  Anterior",level:2,children:[a.jsxs(F,{title:"Inspection",level:3,children:[a.jsx("p",{children:""}),a.jsx("div",{className:"section-figure",children:a.jsx("img",{src:r.lungAuscultationAnterior,alt:"",loading:"lazy"})})]}),a.jsxs(F,{title:"Percussion",level:3,children:[a.jsx("p",{children:""}),a.jsxs("div",{className:"figure-row",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{src:r.lungPercussionAnterior,alt:"",loading:"lazy"})}),a.jsx("ul",{children:a.jsx("li",{className:`question-item ${u==="Now I'm going to tap along your ribs on your back."?"playing":""}`,onClick:()=>m("Now I'm going to tap along your ribs on your back."),children:a.jsxs("div",{className:"question-text",children:[`"Now I'm going to `,a.jsx("b",{children:"tap along your ribs"})," ",a.jsx("span",{className:"paraphrase",children:"(percuss your chest)"}),' on your back."']})})})]})]}),a.jsxs(F,{title:"Auscultation",level:3,children:[a.jsx("p",{children:""}),a.jsxs("div",{className:"figure-row",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{src:r.lungAuscultationAnterior,alt:"",loading:"lazy"})}),a.jsxs("ul",{children:[a.jsx("li",{className:`question-item ${u==="Now Im going to listen to your lungs; please take a deep breath in and out through your mouth."?"playing":""}`,onClick:()=>m("Now Im going to listen to your lungs; please take a deep breath in and out through your mouth."),children:a.jsxs("div",{className:"question-text",children:['"Now Im going to ',a.jsx("b",{children:"listen to your lungs"})," ",a.jsx("span",{className:"paraphrase",children:"(auscultate your lungs)"}),'; please take a deep breath in and out through your mouth."']})}),a.jsx("li",{className:`question-item ${u==="Deep breath."?"playing":""}`,onClick:()=>m("Deep breath."),children:a.jsxs("div",{className:"question-text",children:['"',a.jsx("b",{children:"Deep breath"}),'."'," ",a.jsx("span",{className:"paraphrase",children:"()"})]})}),a.jsx("li",{className:`question-item ${u==="Again."?"playing":""}`,onClick:()=>m("Again."),children:a.jsxs("div",{className:"question-text",children:['"',a.jsx("b",{children:"Again"}),'."'," ",a.jsx("span",{className:"paraphrase",children:"()"})]})}),a.jsx("li",{className:`question-item ${u==="In."?"playing":""}`,onClick:()=>m("In."),children:a.jsxs("div",{className:"question-text",children:['"',a.jsx("b",{children:"In"}),'."'," ",a.jsx("span",{className:"paraphrase",children:"()"})]})}),a.jsx("li",{className:`question-item ${u==="out."?"playing":""}`,onClick:()=>m("out."),children:a.jsxs("div",{className:"question-text",children:['"',a.jsx("b",{children:"out"}),'."'," ",a.jsx("span",{className:"paraphrase",children:"()"})]})}),a.jsx("li",{className:`question-item ${u==="Okay, breathe normally."?"playing":""}`,onClick:()=>m("Okay, breathe normally."),children:a.jsxs("div",{className:"question-text",children:['"Okay, ',a.jsx("b",{children:"breathe normally"}),'."'," ",a.jsx("span",{className:"paraphrase",children:"()"})]})})]})]})]}),a.jsx(F,{title:"",level:3,children:a.jsx("p",{children:" egophony, bronchophony, tactile fremitus "})})]}),a.jsxs(F,{title:"Inspection of the Back",level:2,children:[a.jsx("p",{children:""}),a.jsx("div",{className:"figure-row",children:a.jsx("div",{className:"section-figure",children:a.jsx("img",{src:r.backInspection,alt:"",loading:"lazy"})})})]}),a.jsxs(F,{title:"Lungs  Posterior",level:2,children:[a.jsxs(F,{title:"Inspection",level:3,children:[a.jsx("p",{children:""}),a.jsx("div",{className:"figure-row",children:a.jsx("div",{className:"section-figure",children:a.jsx("img",{src:r.lungAuscultationPosterior,alt:"",loading:"lazy"})})})]}),a.jsxs(F,{title:"Percussion",level:3,children:[a.jsx("p",{children:""}),a.jsxs("div",{className:"figure-row",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{src:r.lungPercussionPosterior,alt:"",loading:"lazy"})}),a.jsx("ul",{children:a.jsx("li",{className:`question-item ${u==="Now I'm going to tap along your ribs on your back."?"playing":""}`,onClick:()=>m("Now I'm going to tap along your ribs on your back."),children:a.jsxs("div",{className:"question-text",children:[`"Now I'm going to `,a.jsx("b",{children:"tap along your ribs"})," ",a.jsx("span",{className:"paraphrase",children:"(percuss your chest)"}),' on your back."']})})})]})]}),a.jsxs(F,{title:"Auscultation",level:3,children:[a.jsx("p",{children:""}),a.jsxs("div",{className:"figure-row",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{src:r.lungAuscultationPosterior,alt:"",loading:"lazy"})}),a.jsxs("ul",{children:[a.jsx("li",{className:`question-item ${u==="Now Im going to listen to your lungs in the back; please take a deep breath in and out through your mouth."?"playing":""}`,onClick:()=>m("Now Im going to listen to your lungs in the back; please take a deep breath in and out through your mouth."),children:a.jsxs("div",{className:"question-text",children:['"Now Im going to ',a.jsx("b",{children:"listen to your lungs in the back"})," ",a.jsx("span",{className:"paraphrase",children:"(auscultate your lungs posteriorly)"}),'; please take a deep breath in and out through your mouth."']})}),a.jsx("li",{className:`question-item ${u==="Deep breath."?"playing":""}`,onClick:()=>m("Deep breath."),children:a.jsxs("div",{className:"question-text",children:['"',a.jsx("b",{children:"Deep breath"}),'."'," ",a.jsx("span",{className:"paraphrase",children:"()"})]})}),a.jsx("li",{className:`question-item ${u==="Again."?"playing":""}`,onClick:()=>m("Again."),children:a.jsxs("div",{className:"question-text",children:['"',a.jsx("b",{children:"Again"}),'."'," ",a.jsx("span",{className:"paraphrase",children:"()"})]})})]})]})]})]}),a.jsxs(F,{title:"YouTube",level:2,children:[a.jsx("p",{children:""}),a.jsxs("ul",{children:[a.jsx("li",{children:a.jsx("a",{href:"https://youtu.be/mCW8aPGgHQA?si=0l-1WXzSnuSD7XB3",target:"_blank",rel:"noreferrer",children:"Chest Examination Video 1"})}),a.jsx("li",{children:a.jsx("a",{href:"https://youtu.be/CyQqxXZyQVw?si=ttLPDPnnqSH2ep1z",target:"_blank",rel:"noreferrer",children:"Chest Examination Video 2"})})]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",marginBottom:12},children:[a.jsx("button",{type:"button",className:"auth-button auth-button-primary",onClick:()=>n(g=>!g),children:e?"":""}),a.jsx(mt,{to:"/chest/old",className:"back-link",children:""})]}),e&&a.jsx(F,{title:"Chest legacy",level:2,fullWidth:!0,children:a.jsx(hf,{src:s,title:""})})]})},KR="/medical-interview-english/".replace(/\/$/,""),Ee=t=>{const e=t.replace(/^\/+/,""),n=`${KR}/${e}`.replace(/^\/\//,"/");return n.startsWith("/")?n:`/${n}`},QR=()=>{const{layout:t}=Ls(),[e,n]=I.useState(!1),s=I.useMemo(()=>Ee("legacy/head-neck.html"),[]),r=I.useMemo(()=>({faceOverview:Ee("images/head-neck/sd01-060-010.jpg"),hair1:Ee("images/head-neck/sd01-056-010.jpg"),hair2:Ee("images/head-neck/sd01-060-020.jpg"),hair3:Ee("images/head-neck/sd01-060-030.jpg"),hair4:Ee("images/head-neck/sd01-061-010.jpg"),palpebral:Ee("images/head-neck/sd01-062-010.jpg"),bulbar:Ee("images/head-neck/sd01-062-020.jpg"),exophthalmos1:Ee("images/head-neck/sd01-062-030.jpg"),exophthalmos2:Ee("images/head-neck/sd01-065-070.jpg"),otoscope:Ee("images/head-neck/sd01-066-030.jpg"),sinus1:Ee("images/head-neck/sd01-066-040.jpg"),sinus2:Ee("images/head-neck/sd01-071-020.jpg"),sinus3:Ee("images/head-neck/sd01-071-030.jpg"),oralOverview:Ee("images/head-neck/image.png"),teeth:Ee("images/head-neck/sd01-072-020.jpg"),buccal:Ee("images/head-neck/sd01-072-030.jpg"),tongue:Ee("images/head-neck/sd01-072-040.jpg"),floorOfMouth:Ee("images/head-neck/sd01-072-040 1.jpg"),salivary1:Ee("images/head-neck/sd01-076-030.jpg"),salivary2:Ee("images/head-neck/sd01-076-040.jpg"),parotid:Ee("images/head-neck/sd01-076-010.jpg"),submandibular:Ee("images/head-neck/sd01-076-020.jpg"),lymph1:Ee("images/head-neck/sd01-083-020.jpg"),lymph2:Ee("images/head-neck/sd01-084-010.jpg"),lymph3:Ee("images/head-neck/sd01-085-010.jpg"),lymph4:Ee("images/head-neck/sd01-086-010.jpg"),supraclavicular:Ee("images/head-neck/sd01-088-030.jpg"),thyroidOverview:Ee("images/head-neck/sd01-078-020.jpg"),thyroidInspect:Ee("images/head-neck/sd01-077-010.jpg"),thyroidPalpation:Ee("images/head-neck/sd01-077-030.jpg"),thyroidAuscultation:Ee("images/head-neck/sd01-077-040.jpg")}),[]),[i,o]=I.useState(null),[c,u]=I.useState(null),h=I.useRef(null),[m,p]=I.useState(null),g=(y,x)=>({src:y,alt:x,loading:"lazy",className:"zoomable",onClick:()=>o({src:y,alt:x})});I.useEffect(()=>{(async()=>{try{const x=await fetch(Ee("audio/audio_map.json"));if(!x.ok)return;const j=await x.json();u(j)}catch{}})()},[]);const E=y=>{if(!c)return;const x=c[y];if(!x)return;const j=Ee(`audio/${x}`);h.current&&(h.current.pause(),h.current=null);const R=new Audio(j);h.current=R,p(y);const L=()=>{h.current===R&&(h.current=null),p(U=>U===y?null:U)};R.addEventListener("ended",L),R.addEventListener("error",L),R.play().catch(L)},C=y=>a.jsx("ul",{children:y.map(x=>{const j=typeof x=="string"?x:x.text,R=typeof x=="string"?x:x.content??x.text;return a.jsx("li",{className:`question-item ${m===j?"playing":""}`,"data-text":j,onClick:()=>E(j),children:a.jsx("div",{className:"question-text",children:R})},j)})}),w=()=>a.jsx("ul",{children:a.jsx("li",{className:"question-item","data-text":"",children:a.jsx(mt,{to:"/neurological",className:"question-text",children:""})})}),k=t==="two-column"?"layout-two-column":t==="single-column"?"layout-single-column":"";return a.jsxs("div",{className:`container ${k}`,children:[a.jsx(mt,{to:"/physical-exam",className:"back-link",children:" "}),a.jsx("h1",{children:""}),a.jsxs(F,{title:" (Head and Face)",level:2,children:[a.jsx(F,{title:" (Observation of Face and Facial Expression)",level:3,children:a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.faceOverview,"")})}),a.jsxs("div",{className:"text-block",children:[a.jsxs("ul",{children:[a.jsx("li",{className:`question-item ${m==="I will start by examining your head."?"playing":""}`,"data-text":"I will start by examining your head.",onClick:()=>E("I will start by examining your head."),children:a.jsxs("div",{className:"question-text",children:["I will start by"," ",a.jsx("b",{children:"examining your head"})," ",a.jsx("span",{className:"paraphrase",children:"(having a look at your head)"}),"."]})}),a.jsx("li",{className:`question-item ${m==="Please tell me right away if you feel any pain."?"playing":""}`,"data-text":"Please tell me right away if you feel any pain.",onClick:()=>E("Please tell me right away if you feel any pain."),children:a.jsxs("div",{className:"question-text",children:["Please"," ",a.jsx("b",{children:"tell me right away"})," ",a.jsx("span",{className:"paraphrase",children:"(let me know immediately)"})," ","if you feel any pain."]})})]}),a.jsx("p",{children:"()"})]})]})}),a.jsxs(F,{title:" (Observation of Hair)",level:3,children:[a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.hair1,"")})}),a.jsx("div",{className:"text-block",children:a.jsx("ul",{children:a.jsx("li",{className:`question-item ${m==="I am going to gently feel your hair now."?"playing":""}`,"data-text":"I am going to gently feel your hair now.",onClick:()=>E("I am going to gently feel your hair now."),children:a.jsxs("div",{className:"question-text",children:["I am going to"," ",a.jsx("b",{children:"gently feel your hair"})," ",a.jsx("span",{className:"paraphrase",children:"(touch your hair lightly)"})," ","now."]})})})})]}),a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.hair2,"")})}),a.jsx("div",{className:"text-block",children:a.jsx("p",{children:"()"})})]}),a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.hair3,"")})}),a.jsx("div",{className:"text-block",children:C([{text:"I will press lightly here; please let me know if any area is tender.",content:a.jsxs(a.Fragment,{children:["I will"," ",a.jsx("b",{children:"press lightly"})," ",a.jsx("span",{className:"paraphrase",children:"(apply gentle pressure)"})," ","here; please"," ",a.jsx("b",{children:"let me know"})," ",a.jsx("span",{className:"paraphrase",children:"(tell me)"})," ","if any area is tender."]})}])})]}),a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.hair4,"")})}),a.jsx("div",{className:"text-block",children:a.jsx("p",{children:""})})]})]}),a.jsx(F,{title:" (Palpation of Scalp and Skull)",level:3})]}),a.jsxs(F,{title:" (Eyes)",level:2,children:[C([{text:"Now I would like to examine your eyes.",content:a.jsxs(a.Fragment,{children:["Now I would like to"," ",a.jsx("b",{children:"examine your eyes"})," ",a.jsx("span",{className:"paraphrase",children:"(check your eyes)"}),"."]})}]),a.jsx(F,{title:" (Palpebral Conjunctiva)",level:3,children:a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.palpebral,"")})}),a.jsxs("div",{className:"text-block",children:[C([{text:"I am going to touch around your eyes; please tell me if it feels cold or uncomfortable.",content:a.jsxs(a.Fragment,{children:["I am going to"," ",a.jsx("b",{children:"touch around your eyes"})," ",a.jsx("span",{className:"paraphrase",children:"(feel gently around your eyes)"}),"; please"," ",a.jsx("b",{children:"tell me"})," ",a.jsx("span",{className:"paraphrase",children:"(let me know)"})," ","if it feels cold or uncomfortable."]})}]),a.jsx("p",{children:"()"})]})]})}),a.jsx(F,{title:" (Bulbar Conjunctiva)",level:3,children:a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.bulbar,"")})}),a.jsxs("div",{className:"text-block",children:[C([{text:"Please look up, and then look down.",content:a.jsxs(a.Fragment,{children:["Please"," ",a.jsx("b",{children:"look up"})," ",a.jsx("span",{className:"paraphrase",children:"(raise your eyes)"}),", and then"," ",a.jsx("b",{children:"look down"})," ",a.jsx("span",{className:"paraphrase",children:"(lower your eyes)"}),"."]})}]),a.jsx("p",{children:"()"})]})]})}),a.jsxs(F,{title:" (Exophthalmos)",level:3,children:[a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.exophthalmos1,"")})}),a.jsx("div",{className:"text-block",children:C([{text:"I will look at your eyes from the side.",content:a.jsxs(a.Fragment,{children:["I will"," ",a.jsx("b",{children:"look at your eyes from the side"})," ",a.jsx("span",{className:"paraphrase",children:"(view your eyes from the side)"}),"."]})}])})]}),a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.exophthalmos2,"")})}),a.jsx("div",{className:"text-block",children:C([{text:"While I stand behind you, could you gently look up for me?",content:a.jsxs(a.Fragment,{children:["While I stand behind you, could you"," ",a.jsx("b",{children:"gently look up"})," ",a.jsx("span",{className:"paraphrase",children:"(raise your gaze a little)"})," ","for me?"]})}])})]})]}),a.jsx(F,{title:" (Pupil and Iris)",level:3,children:a.jsx("p",{children:"()"})}),a.jsx(F,{title:" (Visual Field Test)",level:3,children:w()}),a.jsx(F,{title:" (Extraocular Movements)",level:3,children:w()}),a.jsx(F,{title:" (Pupillary Light Reflex)",level:3,children:w()}),a.jsx(F,{title:" (Fundoscopic Examination)",level:3,children:w()})]}),a.jsxs(F,{title:" (Ears)",level:2,children:[C([{text:"Next, I would like to examine your ears.",content:a.jsxs(a.Fragment,{children:["Next, I would like to"," ",a.jsx("b",{children:"examine your ears"})," ",a.jsx("span",{className:"paraphrase",children:"(take a look at your ears)"}),"."]})},{text:"I will use this instrument, an otoscope, to look inside your ears. Please tell me if you feel any pain.",content:a.jsxs(a.Fragment,{children:["I will use this instrument, an"," ",a.jsx("b",{children:"otoscope"})," ",a.jsx("span",{className:"paraphrase",children:"(ear scope)"})," ","to"," ",a.jsx("b",{children:"look inside your ears"})," ",a.jsx("span",{className:"paraphrase",children:"(examine your ear canals)"}),". Please"," ",a.jsx("b",{children:"tell me"})," ",a.jsx("span",{className:"paraphrase",children:"(let me know)"})," ","if you feel any pain."]})}]),a.jsxs(F,{title:" (Observation of Auricle)",level:3,children:[C([{text:"Please turn your head slightly this way.",content:a.jsxs(a.Fragment,{children:["Please"," ",a.jsx("b",{children:"turn your head"})," ",a.jsx("span",{className:"paraphrase",children:"(turn your face)"})," ","slightly this way."]})}]),a.jsx("p",{children:"()"})]}),a.jsx(F,{title:" (Palpation of Auricle)",level:3,children:C([{text:"I am going to gently pull on your ear; please let me know if it hurts.",content:a.jsxs(a.Fragment,{children:["I am going to"," ",a.jsx("b",{children:"gently pull on your ear"})," ",a.jsx("span",{className:"paraphrase",children:"(tug your ear lightly)"}),"; please"," ",a.jsx("b",{children:"let me know"})," ",a.jsx("span",{className:"paraphrase",children:"(tell me)"})," ","if it hurts."]})}])}),a.jsx(F,{title:" (Hearing Test)",level:3,children:a.jsx("p",{children:"*"})}),a.jsx(F,{title:" (Otoscopic Examination)",level:3,children:a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.otoscope,"")})}),a.jsx("div",{className:"text-block",children:C([{text:"Please turn your head to the other side, and then face straight ahead.",content:a.jsxs(a.Fragment,{children:["Please"," ",a.jsx("b",{children:"turn your head to the other side"})," ",a.jsx("span",{className:"paraphrase",children:"(look the other way)"}),", and then"," ",a.jsx("b",{children:"face straight ahead"})," ",a.jsx("span",{className:"paraphrase",children:"(look straight ahead)"}),"."]})}])})]})})]}),a.jsxs(F,{title:" (Nose and Paranasal Sinuses)",level:2,children:[C([{text:"Next, I will examine your nose and sinuses.",content:a.jsxs(a.Fragment,{children:["Next, I will"," ",a.jsx("b",{children:"examine your nose and sinuses"})," ",a.jsx("span",{className:"paraphrase",children:"(check your nose and sinus areas)"}),"."]})}]),a.jsx(F,{title:" (Observation of Nose)",level:3,children:a.jsx("p",{children:"()"})}),a.jsxs(F,{title:" (Examination of Paranasal Sinuses)",level:3,children:[a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.sinus1,"")})}),a.jsxs("div",{className:"text-block",children:[C([{text:"I am going to press on your face; please tell me if you feel any pain.",content:a.jsxs(a.Fragment,{children:["I am going to"," ",a.jsx("b",{children:"press on your face"})," ",a.jsx("span",{className:"paraphrase",children:"(press gently over your sinuses)"}),"; please"," ",a.jsx("b",{children:"tell me"})," ",a.jsx("span",{className:"paraphrase",children:"(let me know)"})," ","if you feel any pain."]})}]),a.jsx("p",{children:"(()())"})]})]}),a.jsx("div",{className:"figure-row",children:[r.sinus2,r.sinus3].map(y=>a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(y,"")})},y))})]}),a.jsx(F,{title:" (Nasal Obstruction Test)",level:3,children:a.jsx("p",{children:""})}),a.jsx(F,{title:" (Nasal Cavity Examination)",level:3,children:a.jsx("p",{children:""})})]}),a.jsxs(F,{title:" (Lips, Oral Cavity, and Pharynx)",level:2,children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.oralOverview,"")})}),C(["Next, I will examine your mouth and throat. Please relax."]),a.jsx(F,{title:" (Observation of Lips)",level:3,children:a.jsx("p",{children:"()"})}),a.jsxs(F,{title:"/ (Observation of Teeth and Gingiva)",level:3,children:[C([{text:"I am going to use this tongue depressor to gently touch inside your mouth.",content:a.jsxs(a.Fragment,{children:["I am going to use this"," ",a.jsx("b",{children:"tongue depressor"})," ",a.jsx("span",{className:"paraphrase",children:"(wooden stick)"})," ","to"," ",a.jsx("b",{children:"gently touch inside your mouth"})," ",a.jsx("span",{className:"paraphrase",children:"(examine the inside of your mouth)"}),"."]})},{text:"Please tell me if you feel any pain.",content:a.jsxs(a.Fragment,{children:["Please"," ",a.jsx("b",{children:"tell me"})," ",a.jsx("span",{className:"paraphrase",children:"(let me know)"})," ","if you feel any pain."]})},{text:"Please open your mouth.",content:a.jsxs(a.Fragment,{children:["Please"," ",a.jsx("b",{children:"open your mouth"})," ",a.jsx("span",{className:"paraphrase",children:"(open wide)"}),"."]})}]),a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.teeth,"")})}),a.jsx("div",{className:"text-block",children:a.jsx("p",{children:"() ()"})})]})]}),a.jsx(F,{title:" (Observation of Buccal Mucosa)",level:3,children:a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.buccal,"")})})}),a.jsxs(F,{title:" (Observation of Tongue)",level:3,children:[C([{text:"Please stick out your tongue.",content:a.jsxs(a.Fragment,{children:["Please"," ",a.jsx("b",{children:"stick out your tongue"})," ",a.jsx("span",{className:"paraphrase",children:"(put your tongue out)"}),"."]})},{text:"Please move your tongue to the left, and then to the right.",content:a.jsxs(a.Fragment,{children:["Please"," ",a.jsx("b",{children:"move your tongue to the left and then to the right"})," ",a.jsx("span",{className:"paraphrase",children:"(move your tongue side to side)"}),"."]})}]),a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.tongue,"")})}),a.jsx("div",{className:"text-block",children:a.jsx("p",{children:"()"})})]})]}),a.jsxs(F,{title:" (Observation of Floor of Mouth)",level:3,children:[C([{text:"Please place the tip of your tongue behind your upper front teeth.",content:a.jsxs(a.Fragment,{children:["Please"," ",a.jsx("b",{children:"place the tip of your tongue behind your upper front teeth"})," ",a.jsx("span",{className:"paraphrase",children:"(rest your tongue tip on the back of your front teeth)"}),"."]})}]),a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.floorOfMouth,"")})}),a.jsx("div",{className:"text-block",children:a.jsx("p",{children:"()"})})]}),C([{text:"Okay, you can relax now.",content:a.jsxs(a.Fragment,{children:[a.jsx("b",{children:"Okay, you can relax now"})," ",a.jsx("span",{className:"paraphrase",children:"(you can rest now)"}),"."]})}])]}),a.jsx(F,{title:" (Observation of Hard Palate)",level:3,children:C(["Now please open your mouth slightly and look up a little."])}),a.jsxs(F,{title:" (Observation of Soft Palate, Posterior Pharynx and Palatine Tonsils)",level:3,children:[C(["I will gently press your tongue down with this depressor. If you feel nauseated, please let me know. Please say 'ah' so I can see the back of your throat clearly."]),a.jsx("p",{children:"()"})]})]}),a.jsxs(F,{title:" (Salivary Glands)",level:2,children:[C([{text:"I will gently feel the salivary glands that produce saliva; please tell me if anything is painful.",content:a.jsxs(a.Fragment,{children:["I will"," ",a.jsx("b",{children:"gently feel the salivary glands"})," ",a.jsx("span",{className:"paraphrase",children:"(palpate the glands that make saliva)"}),"; please"," ",a.jsx("b",{children:"tell me"})," ",a.jsx("span",{className:"paraphrase",children:"(let me know)"})," ","if anything is painful."]})}]),a.jsxs("div",{className:"figure-row",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.salivary1,"1")})}),a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.salivary2,"2")})})]}),a.jsxs(F,{title:" (Palpation of Parotid Gland)",level:3,children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.parotid,"")})}),a.jsx("p",{children:"()"})]}),a.jsxs(F,{title:" (Palpation of Submandibular Gland)",level:3,children:[C([{text:"Please tuck your chin in slightly.",content:a.jsxs(a.Fragment,{children:["Please"," ",a.jsx("b",{children:"tuck your chin in slightly"})," ",a.jsx("span",{className:"paraphrase",children:"(slightly pull your chin back)"}),"."]})}]),a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.submandibular,"")})}),a.jsx("p",{children:"()"})]})]}),a.jsxs(F,{title:" (Lymph Nodes)",level:2,children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.lymph1,"")})}),C(["Next, I will examine the lymph nodes in your head and neck."]),C(["Please let me know if anything is painful."]),a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.lymph2,"")})}),C(["Please tuck your chin in slightly."]),a.jsxs("div",{className:"figure-row",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.lymph3,"")})}),a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.lymph4,"")})})]}),a.jsx("p",{children:"()"}),a.jsx(F,{title:" (Supraclavicular Nodes)",level:3,children:a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.supraclavicular,"")})})}),a.jsx(F,{title:" (Other Lymph Nodes)",level:3,children:a.jsx("p",{children:""})})]}),a.jsxs(F,{title:" (Thyroid Gland)",level:2,children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.thyroidOverview,"")})}),a.jsxs(F,{title:" (Inspection of Thyroid)",level:3,children:[C(["Next, I will examine your thyroid gland at the front of your neck.","First, please swallow."]),a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.thyroidInspect,"")})}),a.jsx("p",{children:"()"}),a.jsx("p",{children:"()"})]}),a.jsxs(F,{title:" (Palpation of Thyroid Isthmus and Lobes)",level:3,children:[a.jsx("p",{children:"()"}),C(["Please swallow once more."]),a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.thyroidPalpation,"")})}),a.jsx("p",{children:"()"})]}),a.jsxs(F,{title:" (Auscultation of Thyroid)",level:3,children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...g(r.thyroidAuscultation,"")})}),a.jsx("p",{children:"()"})]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",marginBottom:12},children:[a.jsx("button",{type:"button",className:"auth-button auth-button-primary",onClick:()=>n(y=>!y),children:e?"":""}),a.jsx(mt,{to:"/head-neck/old",className:"back-link",children:""})]}),e&&a.jsx(F,{title:"Head & Neck legacy",level:2,fullWidth:!0,children:a.jsx(hf,{src:s,title:""})}),i&&a.jsxs("div",{className:"lightbox",onClick:()=>o(null),children:[a.jsx("img",{src:i.src,alt:i.alt}),a.jsx("p",{className:"lightbox-caption",children:""})]})]})},YR="/medical-interview-english/".replace(/\/$/,""),Zn=t=>{const e=t.replace(/^\/+/,""),n=`${YR}/${e}`.replace(/^\/\//,"/");return n.startsWith("/")?n:`/${n}`},XR=()=>{const{layout:t}=Ls(),e=I.useRef(null),[n,s]=I.useState(!1),r=I.useMemo(()=>Zn("legacy/neurological.html"),[]),i=I.useMemo(()=>({visualField:Zn("images/neurological/1.jpg"),softPalate:Zn("images/neurological/2.jpg"),sternocleidomastoid:Zn("images/neurological/3.jpg"),keepHandsSteady:Zn("images/neurological/4.jpg"),moveArm:Zn("images/neurological/5.jpg"),involuntary:Zn("images/neurological/6.jpg"),pushLegDown:Zn("images/neurological/7.jpg")}),[]),[o,c]=I.useState(null),[u,h]=I.useState(null),m=I.useRef(null),p=I.useRef(null);I.useEffect(()=>{(async()=>{try{const k=await fetch(Zn("audio/audio_map.json"));if(!k.ok)return;const y=await k.json();h(y)}catch{}})()},[]);const g=I.useCallback((w,k)=>{if(!u)return;const y=u[w];if(!y)return;const x=Zn(`audio/${y}`);m.current&&(m.current.pause(),m.current=null),p.current&&(p.current.classList.remove("playing"),p.current=null);const j=new Audio(x);m.current=j,k&&(p.current=k,k.classList.add("playing"));const R=()=>{var L;m.current===j&&(m.current=null),p.current===k&&((L=p.current)==null||L.classList.remove("playing"),p.current=null)};j.addEventListener("ended",R),j.addEventListener("error",R),j.play().catch(R)},[u]);I.useEffect(()=>{const w=e.current;if(!w)return;const k=y=>{var L;const x=y.target,j=x==null?void 0:x.closest("li.question-item");if(!j)return;const R=(L=j.dataset.text)==null?void 0:L.trim();R&&g(R,j)};return w.addEventListener("click",k),()=>{w.removeEventListener("click",k)}},[g]);const E=(w,k)=>({src:w,alt:k,loading:"lazy",className:"zoomable",onClick:()=>c({src:w,alt:k})}),C=t==="two-column"?"layout-two-column":t==="single-column"?"layout-single-column":"";return a.jsxs("div",{ref:e,className:`container ${C}`,children:[a.jsx(mt,{to:"/physical-exam",className:"back-link",children:" "}),a.jsx("h1",{children:""}),a.jsxs(F,{title:" (Cranial Nerve Examination)",level:2,children:[a.jsxs(F,{title:" (Visual Field)",level:3,children:[a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...E(i.visualField,"")})}),a.jsx("div",{className:"text-block",children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'm going to test your visual fields.",children:a.jsxs("div",{className:"question-text",children:["I'm going to test"," ",a.jsx("span",{className:"paraphrase",children:"(check, examine, assess)"})," ","your ",a.jsx("b",{children:"visual fields"})," ",a.jsx("span",{className:"paraphrase",children:"(peripheral vision, side vision)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Please cover your left eye with your left hand.",children:a.jsxs("div",{className:"question-text",children:["Please"," ",a.jsx("span",{className:"paraphrase",children:"(Could you, Would you)"})," ",a.jsx("b",{children:"cover your left eye"})," with your left hand."]})}),a.jsx("li",{className:"question-item","data-text":"Please look straight at my eye.",children:a.jsxs("div",{className:"question-text",children:["Please"," ",a.jsx("span",{className:"paraphrase",children:"(Could you, Would you)"})," ",a.jsx("b",{children:"look straight at my eye"})," ",a.jsx("span",{className:"paraphrase",children:"(look directly at me, keep your eyes on mine)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"I am going to put my hands like this.",children:a.jsxs("div",{className:"question-text",children:["I am going to ",a.jsx("b",{children:"put my hands like this"})," ",a.jsx("span",{className:"paraphrase",children:"()"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"If my finger moves, please point to the finger.",children:a.jsxs("div",{className:"question-text",children:["If my finger moves, please ",a.jsx("b",{children:"point to the finger"}),"."]})})]})})]}),a.jsx("p",{className:"description",children:""})]}),a.jsx(F,{title:" (Extraocular Movements and Nystagmus)",level:3,children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'm going to test your eye movements.",children:a.jsxs("div",{className:"question-text",children:["I'm going to test"," ",a.jsx("span",{className:"paraphrase",children:"(check, examine, assess)"})," your"," ",a.jsx("b",{children:"eye movements"})," ",a.jsx("span",{className:"paraphrase",children:"(ocular movements, extraocular movements)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Please follow my finger with your eyes.",children:a.jsxs("div",{className:"question-text",children:["Please"," ",a.jsx("span",{className:"paraphrase",children:"(Could you, Would you)"})," ",a.jsx("b",{children:"follow my finger"})," with your eyes"," ",a.jsx("span",{className:"paraphrase",children:"(track my finger, watch my finger)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Keep your head still.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Keep your head still"})," ",a.jsx("span",{className:"paraphrase",children:"(Don't move your head, Hold your head steady)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Just move your eyes.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Just move your eyes"})," ",a.jsx("span",{className:"paraphrase",children:"(Only your eyes, Move only your eyes)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Tell me if you see double.",children:a.jsxs("div",{className:"question-text",children:["Tell me if you see ",a.jsx("b",{children:"double"})," ",a.jsx("span",{className:"paraphrase",children:"(two images, diplopia)"}),"."]})})]})}),a.jsx(F,{title:" (Palpebral Fissure, Pupil, and Light Reflex)",level:3,children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'm going to check your pupil reflexes.",children:a.jsxs("div",{className:"question-text",children:["I'm going to check"," ",a.jsx("span",{className:"paraphrase",children:"(test, examine, assess)"})," your"," ",a.jsx("b",{children:"pupil reflexes"})," ",a.jsx("span",{className:"paraphrase",children:"(pupillary responses, light reflexes)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Please look at my nose.",children:a.jsxs("div",{className:"question-text",children:["Please"," ",a.jsx("span",{className:"paraphrase",children:"(Could you, Would you)"})," ",a.jsx("b",{children:"look at my nose"})," ",a.jsx("span",{className:"paraphrase",children:"(look straight ahead, look at me)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"I'm going to shine a light in your eyes.",children:a.jsxs("div",{className:"question-text",children:["I'm going to ",a.jsx("b",{children:"shine a light"})," ",a.jsx("span",{className:"paraphrase",children:"(point a light, flash a light)"})," ","in your eyes."]})}),a.jsx("li",{className:"question-item","data-text":"This might be bright.",children:a.jsxs("div",{className:"question-text",children:["This might be ",a.jsx("b",{children:"bright"})," ",a.jsx("span",{className:"paraphrase",children:"(a bit uncomfortable, glaring)"}),"."]})})]})}),a.jsx(F,{title:" (Fundoscopic Examination)",level:3,children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'm going to look at the back of your eyes.",children:a.jsxs("div",{className:"question-text",children:["I'm going to look at"," ",a.jsx("span",{className:"paraphrase",children:"(examine, check)"})," the"," ",a.jsx("b",{children:"back of your eyes"})," ",a.jsx("span",{className:"paraphrase",children:"(retina, fundus)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"I am going to use this ophthalmoscope.",children:a.jsxs("div",{className:"question-text",children:["I am going to use this ",a.jsx("b",{children:"ophthalmoscope"})," ",a.jsx("span",{className:"paraphrase",children:"(eye instrument, eye scope)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Please look straight ahead.",children:a.jsxs("div",{className:"question-text",children:["Please"," ",a.jsx("span",{className:"paraphrase",children:"(Could you, Would you)"})," ",a.jsx("b",{children:"look straight ahead"})," ",a.jsx("span",{className:"paraphrase",children:"(look forward, focus forward)"}),"."]})})]})}),a.jsx(F,{title:" (Facial Sensation)",level:3,children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'm going to test the sensation on your face using this tissue paper.",children:a.jsxs("div",{className:"question-text",children:["I'm going to test"," ",a.jsx("span",{className:"paraphrase",children:"(check, examine, assess)"})," the"," ",a.jsx("b",{children:"sensation"})," ",a.jsx("span",{className:"paraphrase",children:"(feeling, sense of touch)"})," ","on your face using this tissue paper."]})}),a.jsx("li",{className:"question-item","data-text":"Close your eyes.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Close your eyes"})," ",a.jsx("span",{className:"paraphrase",children:"(Shut your eyes, Keep your eyes closed)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Do you feel this?",children:a.jsxs("div",{className:"question-text",children:["Do you ",a.jsx("b",{children:"feel this"})," ",a.jsx("span",{className:"paraphrase",children:"(sense this, notice this)"}),"?"]})}),a.jsx("li",{className:"question-item","data-text":"Is it the same on both sides?",children:a.jsxs("div",{className:"question-text",children:["Is it the ",a.jsx("b",{children:"same on both sides"})," ",a.jsx("span",{className:"paraphrase",children:"(equal bilaterally, symmetric)"}),"?"]})})]})}),a.jsx(F,{title:" (Facial Muscles)",level:3,children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'm going to test your facial muscles.",children:a.jsxs("div",{className:"question-text",children:["I'm going to test"," ",a.jsx("span",{className:"paraphrase",children:"(check, examine, assess)"})," your"," ",a.jsx("b",{children:"facial muscles"})," ",a.jsx("span",{className:"paraphrase",children:"(face muscles, facial movements)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Please smile for me.",children:a.jsxs("div",{className:"question-text",children:["Please"," ",a.jsx("span",{className:"paraphrase",children:"(Could you, Would you)"})," ",a.jsx("b",{children:"smile"})," ",a.jsx("span",{className:"paraphrase",children:"(show me a smile, give me a big smile)"})," ","for me."]})}),a.jsx("li",{className:"question-item","data-text":"Show me your teeth.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Show me your teeth"})," ",a.jsx("span",{className:"paraphrase",children:"(Open your mouth and show your teeth)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Puff your cheeks out.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Puff your cheeks out"})," ",a.jsx("span",{className:"paraphrase",children:"(Blow your cheeks up, Fill your cheeks with air)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Raise your eyebrows.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Raise your eyebrows"})," ",a.jsx("span",{className:"paraphrase",children:"(Lift your eyebrows, Make a surprised face)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Close your eyes tight.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Close your eyes tight"})," ",a.jsx("span",{className:"paraphrase",children:"(Squeeze your eyes shut, Shut your eyes tightly)"}),"."]})})]})}),a.jsx(F,{title:" (Soft Palate and Posterior Pharynx Movement)",level:3,children:a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...E(i.softPalate,"")})}),a.jsx("div",{className:"text-block",children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"Open your mouth and say ah.",children:a.jsxs("div",{className:"question-text",children:["Open your mouth"," ",a.jsx("span",{className:"paraphrase",children:"(Open wide)"})," and"," ",a.jsx("b",{children:"say ah"})," ",a.jsx("span",{className:"paraphrase",children:"(make an ah sound)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"I am going to use this stick to gently press your tongue.",children:a.jsxs("div",{className:"question-text",children:["I am going to use this stick to gently ",a.jsx("b",{children:"press your tongue"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"I'm looking at the back of your throat.",children:a.jsxs("div",{className:"question-text",children:["I'm looking at"," ",a.jsx("span",{className:"paraphrase",children:"(examining, inspecting)"})," the"," ",a.jsx("b",{children:"back of your throat"})," ",a.jsx("span",{className:"paraphrase",children:"(pharynx, throat)"}),"."]})})]})})]})}),a.jsx(F,{title:" (Tongue)",level:3,children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"Please stick your tongue out.",children:a.jsxs("div",{className:"question-text",children:["Please"," ",a.jsx("span",{className:"paraphrase",children:"(Could you, Would you)"})," ",a.jsx("b",{children:"stick your tongue out"})," ",a.jsx("span",{className:"paraphrase",children:"(put your tongue out, show me your tongue)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Move your tongue left and right.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Move your tongue"})," ",a.jsx("span",{className:"paraphrase",children:"(Shift your tongue)"})," left and right"," ",a.jsx("span",{className:"paraphrase",children:"(side to side, back and forth)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Push your tongue against the inside of your cheek.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Push your tongue"})," against"," ",a.jsx("span",{className:"paraphrase",children:"(Press your tongue to)"})," the"," ","inside of your cheek"," ",a.jsx("span",{className:"paraphrase",children:"(side of your mouth)"}),"."]})})]})}),a.jsx(F,{title:" (Sternocleidomastoid)",level:3,children:a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...E(i.sternocleidomastoid,"")})}),a.jsx("div",{className:"text-block",children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'm going to test your neck muscles.",children:a.jsxs("div",{className:"question-text",children:["I'm going to test"," ",a.jsx("span",{className:"paraphrase",children:"(check, examine, assess)"})," your"," ",a.jsx("b",{children:"neck muscles"})," ",a.jsx("span",{className:"paraphrase",children:"(neck strength)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Please shrug your shoulders.",children:a.jsxs("div",{className:"question-text",children:["Please"," ",a.jsx("span",{className:"paraphrase",children:"(Could you, Would you)"})," ",a.jsx("b",{children:"shrug your shoulders"})," ",a.jsx("span",{className:"paraphrase",children:"(lift your shoulders, raise your shoulders)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Turn your head to the left.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Turn your head"})," ",a.jsx("span",{className:"paraphrase",children:"(Move your head, Rotate your head)"})," ","to the left ",a.jsx("span",{className:"paraphrase",children:"(left side)"}),"."," ",a.jsx("span",{className:"paraphrase",children:"()"})]})}),a.jsx("li",{className:"question-item","data-text":"I am going to pull your chin back with my left hand.",children:a.jsxs("div",{className:"question-text",children:["I am going to ",a.jsx("b",{children:"pull your chin back"})," with my left hand."]})}),a.jsx("li",{className:"question-item","data-text":"Don't let me turn your head.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Don't let me turn your head"})," ",a.jsx("span",{className:"paraphrase",children:"(Try not to let me, Resist when I)"})," ","."]})}),a.jsx("li",{className:"question-item","data-text":"Now turn to the right.",children:a.jsxs("div",{className:"question-text",children:["Now ",a.jsx("b",{children:"turn to the right"})," ",a.jsx("span",{className:"paraphrase",children:"(move, rotate)"}),"."," ",a.jsx("span",{className:"paraphrase",children:"()"})]})})]})})]})})]}),a.jsxs(F,{title:" (Upper Extremity Motor Examination)",level:2,children:[a.jsxs(F,{title:"Barr (Barr Sign - Upper Extremities)",level:3,children:[a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"Please hold your arms out in front of you like holding a pizza.",children:a.jsxs("div",{className:"question-text",children:["Please"," ",a.jsx("span",{className:"paraphrase",children:"(Could you, Would you)"})," ",a.jsx("b",{children:"hold your arms out"})," ",a.jsx("span",{className:"paraphrase",children:"(extend your arms, stretch your arms forward)"})," ","in front of you like holding a pizza."]})}),a.jsx("li",{className:"question-item","data-text":"Close your eyes.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Close your eyes"})," ",a.jsx("span",{className:"paraphrase",children:"(Shut your eyes, Keep your eyes closed)"}),"."]})})]}),a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...E(i.keepHandsSteady,"Keep your hands steady")})}),a.jsx("div",{className:"text-block",children:a.jsx("ul",{children:a.jsx("li",{className:"question-item","data-text":"Keep your hands steady.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Keep your hands steady"})," ",a.jsx("span",{className:"paraphrase",children:"(Hold your hands still, Don't let your hands drift)"}),"."]})})})})]})]}),a.jsx(F,{title:" (Grip Strength and Manual Muscle Testing of Upper Extremities)",level:3,children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'm going to test your arm strength.",children:a.jsxs("div",{className:"question-text",children:["I'm going to test"," ",a.jsx("span",{className:"paraphrase",children:"(check, examine, assess)"})," your"," ",a.jsx("b",{children:"arm strength"})," ",a.jsx("span",{className:"paraphrase",children:"(muscle strength, power)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Squeeze my fingers as hard as you can.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Squeeze my fingers"})," ",a.jsx("span",{className:"paraphrase",children:"(Grip, Hold)"})," as hard as you can"," ",a.jsx("span",{className:"paraphrase",children:"(with all your strength, as tightly as possible)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Hold your elbows up in the air.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Hold your elbows up"})," ",a.jsx("span",{className:"paraphrase",children:"(Lift your elbows, Raise your elbows)"})," ","in the air."]})}),a.jsx("li",{className:"question-item","data-text":"Don't let me push your arms down.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Don't let me push your arms down"})," ",a.jsx("span",{className:"paraphrase",children:"(Try not to let me, Resist when I)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Pull my hand up towards your chin.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Pull my hand up"})," ",a.jsx("span",{className:"paraphrase",children:"(Bring my hand up)"})," towards your chin."]})}),a.jsx("li",{className:"question-item","data-text":"Spread your fingers wide apart.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Spread your fingers"})," ",a.jsx("span",{className:"paraphrase",children:"(Separate your fingers, Open your fingers)"})," ","wide apart."]})}),a.jsx("li",{className:"question-item","data-text":"Don't let me squeeze them together.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Don't let me squeeze them together"})," ",a.jsx("span",{className:"paraphrase",children:"(Resist when I push them together)"}),"."]})})]})}),a.jsxs(F,{title:" (Muscle Tone - Elbow Joint)",level:3,children:[a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'm going to check your muscle tone.",children:a.jsxs("div",{className:"question-text",children:["I'm going to check"," ",a.jsx("span",{className:"paraphrase",children:"(test, examine, assess)"})," your"," ",a.jsx("b",{children:"muscle tone"})," ",a.jsx("span",{className:"paraphrase",children:"(muscle stiffness, muscle tension)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Please relax your arm.",children:a.jsxs("div",{className:"question-text",children:["Please"," ",a.jsx("span",{className:"paraphrase",children:"(Could you, Would you)"})," ",a.jsx("b",{children:"relax your arm"})," ",a.jsx("span",{className:"paraphrase",children:"(let your arm go limp, don't tense up)"}),"."]})})]}),a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...E(i.moveArm,"")})}),a.jsx("div",{className:"text-block",children:a.jsx("ul",{children:a.jsx("li",{className:"question-item","data-text":"I'm going to move your arm.",children:a.jsxs("div",{className:"question-text",children:["I'm going to ",a.jsx("b",{children:"move your arm"})," ",a.jsx("span",{className:"paraphrase",children:"(bend, flex)"}),"."]})})})})]})]}),a.jsx(F,{title:" (Involuntary Movements of Upper Body)",level:3,children:a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...E(i.involuntary,"")})}),a.jsx("div",{className:"text-block",children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'm going to look for any involuntary movements.",children:a.jsxs("div",{className:"question-text",children:["I'm going to look for any ",a.jsx("b",{children:"involuntary movements"})," ",a.jsx("span",{className:"paraphrase",children:"(abnormal movements, tremors, twitches)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Please put your hands on your knees like this, and just relax.",children:a.jsxs("div",{className:"question-text",children:["Please ",a.jsx("b",{children:"put your hands on your knees"})," like this, and just relax."]})}),a.jsx("li",{className:"question-item","data-text":"Spread your fingers a little like this, hold your hand out in front of you, and leave it like this.",children:a.jsxs("div",{className:"question-text",children:["Spread your fingers a little like this,"," ",a.jsx("b",{children:"hold your hand out in front of you"}),", and leave it like this."]})}),a.jsx("li",{className:"question-item","data-text":"Turn your wrist up and hold it there like this.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Turn your wrist up"})," and hold it there like this."]})}),a.jsx("li",{className:"question-item","data-text":"Do you notice any tremors or shaking?",children:a.jsxs("div",{className:"question-text",children:["Do you notice any ",a.jsx("b",{children:"tremors"})," ",a.jsx("span",{className:"paraphrase",children:"(shaking, shivering)"})," ","or shaking?"]})})]})})]})}),a.jsx(F,{title:" (Finger-to-Nose Test)",level:3,children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'm going to test your coordination.",children:a.jsxs("div",{className:"question-text",children:["I'm going to test"," ",a.jsx("span",{className:"paraphrase",children:"(check, examine, assess)"})," your"," ",a.jsx("b",{children:"coordination"})," ",a.jsx("span",{className:"paraphrase",children:"(motor control, accuracy)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Touch your nose with your finger, then touch my finger.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Touch your nose"})," ",a.jsx("span",{className:"paraphrase",children:"(Tap your nose)"})," with your finger, then touch my finger."]})}),a.jsx("li",{className:"question-item","data-text":"Keep going back and forth.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Keep going back and forth"})," ",a.jsx("span",{className:"paraphrase",children:"(Continue alternating, Repeat)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Now speed up.",children:a.jsxs("div",{className:"question-text",children:["Now ",a.jsx("b",{children:"speed up"})," ",a.jsx("span",{className:"paraphrase",children:"(go faster, increase your pace)"}),"."]})})]})}),a.jsx(F,{title:" (Pronation-Supination Test)",level:3,children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I want you to flip your hands over like this.",children:a.jsxs("div",{className:"question-text",children:["I want you to ",a.jsx("b",{children:"flip your hands over"})," ",a.jsx("span",{className:"paraphrase",children:"(turn your hands, rotate your hands)"})," ","like this."]})}),a.jsx("li",{className:"question-item","data-text":"Keep alternating palm up and palm down.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Keep alternating"})," ",a.jsx("span",{className:"paraphrase",children:"(Keep switching, Keep turning)"})," ","palm up and palm down."]})}),a.jsx("li",{className:"question-item","data-text":"Go faster.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Go faster"})," ",a.jsx("span",{className:"paraphrase",children:"(Speed up, Increase your pace)"}),"."]})})]})})]}),a.jsxs(F,{title:" (Standing and Gait Examination)",level:2,children:[a.jsx(F,{title:" (Standing and Gait - Normal and Tandem Walking)",level:3,children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'd like you to walk across the room.",children:a.jsxs("div",{className:"question-text",children:["I'd like you to ",a.jsx("b",{children:"walk across the room"})," ",a.jsx("span",{className:"paraphrase",children:"(walk to the other side, walk forward)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Now walk back towards me.",children:a.jsxs("div",{className:"question-text",children:["Now ",a.jsx("b",{children:"walk back"})," ",a.jsx("span",{className:"paraphrase",children:"(return, come back)"})," towards me."]})}),a.jsx("li",{className:"question-item","data-text":"Can you walk heel to toe?",children:a.jsxs("div",{className:"question-text",children:["Can you walk ",a.jsx("b",{children:"heel to toe"})," ",a.jsx("span",{className:"paraphrase",children:"(tandem walk, walk in a straight line)"}),"?"]})}),a.jsx("li",{className:"question-item","data-text":"Place one foot directly in front of the other.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Place one foot directly in front of the other"})," ",a.jsx("span",{className:"paraphrase",children:"(Put one foot right in front of the other)"}),"."]})})]})}),a.jsx(F,{title:"Romberg (Romberg Test)",level:3,children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'm going to test your balance.",children:a.jsxs("div",{className:"question-text",children:["I'm going to test"," ",a.jsx("span",{className:"paraphrase",children:"(check, examine, assess)"})," your"," ",a.jsx("b",{children:"balance"})," ",a.jsx("span",{className:"paraphrase",children:"(equilibrium, stability)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Please stand with your feet together.",children:a.jsxs("div",{className:"question-text",children:["Please"," ",a.jsx("span",{className:"paraphrase",children:"(Could you, Would you)"})," ",a.jsx("b",{children:"stand with your feet together"})," ",a.jsx("span",{className:"paraphrase",children:"(put your feet side by side)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Now close your eyes.",children:a.jsxs("div",{className:"question-text",children:["Now ",a.jsx("b",{children:"close your eyes"})," ",a.jsx("span",{className:"paraphrase",children:"(shut)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Try not to sway.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Try not to sway"})," ",a.jsx("span",{className:"paraphrase",children:"(Keep your balance, Stay still, Don't wobble)"}),"."]})})]})})]}),a.jsxs(F,{title:" (Lower Extremity Motor Examination)",level:2,children:[a.jsxs(F,{title:" (Manual Muscle Testing of Lower Extremities)",level:3,children:[a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"Now I'm going to test your leg strength.",children:a.jsxs("div",{className:"question-text",children:["Now I'm going to test"," ",a.jsx("span",{className:"paraphrase",children:"(check, examine, assess)"})," your"," ",a.jsx("b",{children:"leg strength"})," ",a.jsx("span",{className:"paraphrase",children:"(lower extremity strength, power)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Bring your knee up towards your chest.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Bring your knee up"})," ",a.jsx("span",{className:"paraphrase",children:"(Lift your knee, Raise your knee)"})," ","towards your chest."]})})]}),a.jsxs("div",{className:"figure-with-text",children:[a.jsx("div",{className:"section-figure",children:a.jsx("img",{...E(i.pushLegDown,"")})}),a.jsx("div",{className:"text-block",children:a.jsx("ul",{children:a.jsx("li",{className:"question-item","data-text":"Don't let me push your leg down.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Don't let me push your leg down"})," ",a.jsx("span",{className:"paraphrase",children:"(Try not to let me, Resist when I)"}),"."]})})})})]}),a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"Hold your leg out straight.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Hold your leg out straight"})," ",a.jsx("span",{className:"paraphrase",children:"(Extend your leg, Straighten your leg)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Push down on my hand with your foot.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Push down"})," ",a.jsx("span",{className:"paraphrase",children:"(Press down)"})," on my hand with your foot."]})}),a.jsx("li",{className:"question-item","data-text":"Pull your foot up towards your chin.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Pull your foot up"})," ",a.jsx("span",{className:"paraphrase",children:"(Flex your foot, Bring your foot up)"})," ","towards your chin."]})}),a.jsx("li",{className:"question-item","data-text":"Point your toes down.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Point your toes down"})," ",a.jsx("span",{className:"paraphrase",children:"(Push your foot down, Plantarflex your foot)"}),"."]})})]})]}),a.jsx(F,{title:" (Heel-to-Shin Test)",level:3,children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'm going to have you lie down for this test.",children:a.jsxs("div",{className:"question-text",children:["I'm going to have you ",a.jsx("b",{children:"lie down"})," ",a.jsx("span",{className:"paraphrase",children:"(ask you to lie down, need you to recline)"})," ","for this test."]})}),a.jsx("li",{className:"question-item","data-text":"Take your heel and run it up your shin.",children:a.jsxs("div",{className:"question-text",children:["Take your heel"," ",a.jsx("span",{className:"paraphrase",children:"(Use your heel)"})," and"," ",a.jsx("b",{children:"run it up your shin"})," ",a.jsx("span",{className:"paraphrase",children:"(slide it along your shin)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Start at your knee and go down to your ankle.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Start at your knee"})," and go down to your ankle."]})}),a.jsx("li",{className:"question-item","data-text":"Now do the other side.",children:a.jsxs("div",{className:"question-text",children:["Now do the ",a.jsx("b",{children:"other side"}),"."]})})]})})]}),a.jsx(F,{title:" (Sensory Examination)",level:2,children:a.jsx(F,{title:" (Tactile and Pain Sensation of Extremities)",level:3,children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'm going to test your sensation with this tissue paper.",children:a.jsxs("div",{className:"question-text",children:["I'm going to test"," ",a.jsx("span",{className:"paraphrase",children:"(check, examine, assess)"})," your"," ",a.jsx("b",{children:"sensation"})," ",a.jsx("span",{className:"paraphrase",children:"(feeling, sense of touch)"})," ","with this tissue paper."]})}),a.jsx("li",{className:"question-item","data-text":"Close your eyes.",children:a.jsxs("div",{className:"question-text",children:[a.jsx("b",{children:"Close your eyes"})," ",a.jsx("span",{className:"paraphrase",children:"(Shut your eyes, Keep your eyes closed)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Tell me when you feel this.",children:a.jsxs("div",{className:"question-text",children:["Tell me when you ",a.jsx("b",{children:"feel this"})," ",a.jsx("span",{className:"paraphrase",children:"(notice this, sense this)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Does this feel the same on both sides?",children:a.jsxs("div",{className:"question-text",children:["Does this feel the ",a.jsx("b",{children:"same on both sides"})," ",a.jsx("span",{className:"paraphrase",children:"(equal bilaterally, symmetric)"}),"?"]})}),a.jsx("li",{className:"question-item","data-text":"Now I'm going to use something sharp.",children:a.jsxs("div",{className:"question-text",children:["Now I'm going to use something ",a.jsx("b",{children:"sharp"})," ",a.jsx("span",{className:"paraphrase",children:"(pointed, prickly)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Tell me if this feels sharp or dull.",children:a.jsxs("div",{className:"question-text",children:["Tell me if this feels ",a.jsx("b",{children:"sharp or dull"})," ",a.jsx("span",{className:"paraphrase",children:"(pointed or blunt, prickly or smooth)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Do both sides feel equally sharp?",children:a.jsxs("div",{className:"question-text",children:["Do both sides feel ",a.jsx("b",{children:"equally sharp"})," ",a.jsx("span",{className:"paraphrase",children:"(the same, symmetric)"}),"?"]})})]})})}),a.jsxs(F,{title:" (Reflex Examination)",level:2,children:[a.jsx(F,{title:" (Tendon Reflexes)",level:3,children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'm going to check your reflexes.",children:a.jsxs("div",{className:"question-text",children:["I'm going to check"," ",a.jsx("span",{className:"paraphrase",children:"(test, examine, assess)"})," your"," ",a.jsx("b",{children:"reflexes"})," ",a.jsx("span",{className:"paraphrase",children:"(tendon reflexes)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Please relax.",children:a.jsxs("div",{className:"question-text",children:["Please"," ",a.jsx("span",{className:"paraphrase",children:"(Could you, Would you)"})," ",a.jsx("b",{children:"relax"})," ",a.jsx("span",{className:"paraphrase",children:"(let yourself go limp, don't tense up)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"I'm going to tap your chin with this hammer.",children:a.jsxs("div",{className:"question-text",children:["I'm going to ",a.jsx("b",{children:"tap your chin"})," ",a.jsx("span",{className:"paraphrase",children:"(strike, hit)"})," with this hammer ",a.jsx("span",{className:"paraphrase",children:"(reflex hammer)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Let your jaw muscle loose.",children:a.jsxs("div",{className:"question-text",children:["Let your ",a.jsx("b",{children:"jaw muscle loose"})," ",a.jsx("span",{className:"paraphrase",children:"(Relax your jaw muscle, Don't tighten your jaw muscle)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"I'm going to tap your elbow and inner elbow with this hammer.",children:a.jsxs("div",{className:"question-text",children:["I'm going to ",a.jsx("b",{children:"tap your elbow and inner elbow"})," ",a.jsx("span",{className:"paraphrase",children:"(strike, hit)"})," with this hammer ",a.jsx("span",{className:"paraphrase",children:"(reflex hammer)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Let your arm hang loose.",children:a.jsxs("div",{className:"question-text",children:["Let your ",a.jsx("b",{children:"arm hang loose"})," ",a.jsx("span",{className:"paraphrase",children:"(Relax your arm, Don't tighten your arm)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"I'm going to tap your knee with this hammer.",children:a.jsxs("div",{className:"question-text",children:["I'm going to ",a.jsx("b",{children:"tap your knee"})," ",a.jsx("span",{className:"paraphrase",children:"(strike, hit)"})," with this hammer ",a.jsx("span",{className:"paraphrase",children:"(reflex hammer)"}),"."]})}),a.jsx("li",{className:"question-item","data-text":"Let your leg hang loose.",children:a.jsxs("div",{className:"question-text",children:["Let your ",a.jsx("b",{children:"leg hang loose"})," ",a.jsx("span",{className:"paraphrase",children:"(Relax your leg, Don't tighten your leg)"}),"."]})})]})}),a.jsx(F,{title:" (Pathological Reflexes)",level:3,children:a.jsxs("ul",{children:[a.jsx("li",{className:"question-item","data-text":"I'm going to stroke the bottom of your foot with this toothpick.",children:a.jsxs("div",{className:"question-text",children:["I'm going to stroke"," ",a.jsx("span",{className:"paraphrase",children:"(scratch, rub)"})," the"," ",a.jsx("b",{children:"bottom of your foot"})," ",a.jsx("span",{className:"paraphrase",children:"(sole of your foot)"})," with this toothpick."]})}),a.jsx("li",{className:"question-item","data-text":"I'm checking for a Babinski sign.",children:a.jsxs("div",{className:"question-text",children:["I'm checking for a ",a.jsx("b",{children:"Babinski sign"})," ",a.jsx("span",{className:"paraphrase",children:"(abnormal reflex, plantar reflex)"}),"."]})})]})})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",marginBottom:12},children:[a.jsx("button",{type:"button",className:"auth-button auth-button-primary",onClick:()=>s(w=>!w),children:n?"":""}),a.jsx(mt,{to:"/neurological/old",className:"back-link",children:""})]}),n&&a.jsx(F,{title:"Neurological legacy",level:2,fullWidth:!0,children:a.jsx(hf,{src:r,title:""})}),o&&a.jsxs("div",{className:"lightbox",onClick:()=>c(null),children:[a.jsx("img",{src:o.src,alt:o.alt}),a.jsx("p",{className:"lightbox-caption",children:""})]})]})},ZR={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},e2="gpt-4o-realtime-preview",t2="https://api.openai.com/v1/realtime",n2="gemini-1.5-flash-latest",s2="https://generativelanguage.googleapis.com/v1beta/models",r2="You are a cooperative standardized patient speaking natural English. Keep replies short (1-2 sentences). Avoid role leakage.",i2=()=>{const t=new Date;return`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`},a2=()=>{const[t,e]=I.useState("openai"),[n,s]=I.useState(""),[r,i]=I.useState("idle"),[o,c]=I.useState(null),[u,h]=I.useState(r2),[m,p]=I.useState([]),[g,E]=I.useState(""),[C,w]=I.useState(t2),[k,y]=I.useState(e2),[x,j]=I.useState(s2),[R,L]=I.useState(n2),U=I.useRef(null),S=I.useRef(null),v=I.useRef(null),N=I.useRef(null),T=I.useCallback(V=>{p(M=>[...M,`${i2()} ${V}`].slice(-200))},[]),P=I.useMemo(()=>({openai:{id:"openai",label:"OpenAI Realtime",dataChannelLabel:"oai-events",describeEndpoint:()=>`${C}?model=${encodeURIComponent(k)}`,createAnswer:async({apiKey:V,offer:M})=>{const J=`${C}?model=${encodeURIComponent(k)}`,ne={"Content-Type":"application/sdp"};ne.Authorization=`Bearer ${V}`;const Z=await fetch(J,{method:"POST",headers:ne,body:M.sdp??""}),Be=await Z.text();if(!Z.ok)throw new Error(Be||Z.statusText||"OpenAI error");return Be},sendPrompt:(V,M)=>{try{V.send(JSON.stringify({type:"session.update",session:{instructions:M}}))}catch(J){console.warn("Failed to send OpenAI session instructions",J)}}},gemini:{id:"gemini",label:"Gemini Live",dataChannelLabel:"client-events",describeEndpoint:()=>`${x}/${encodeURIComponent(R)}:connect`,createAnswer:async({apiKey:V,offer:M})=>{var Xe;let J=`${x}/${encodeURIComponent(R)}:connect`;const ne={"Content-Type":"application/sdp"};J=`${J}?key=${encodeURIComponent(V)}`;const Z=await fetch(J,{method:"POST",headers:ne,body:M.sdp??""});if((Z.headers.get("content-type")??"").includes("application/json")){const Te=await Z.json();if(!Z.ok)throw new Error(((Xe=Te==null?void 0:Te.error)==null?void 0:Xe.message)||Z.statusText||"Gemini error");const Ze=(Te==null?void 0:Te.sdp)??(Te==null?void 0:Te.answer)??(Te==null?void 0:Te.sessionDescription);if(typeof Ze!="string"||!Ze)throw new Error("Gemini response missing SDP");return Ze}const Ve=await Z.text();if(!Z.ok)throw new Error(Ve||Z.statusText||"Gemini error");return Ve},sendPrompt:(V,M)=>{try{V.send(JSON.stringify({type:"input_text",text:M}))}catch(J){console.warn("Failed to send Gemini prompt",J)}}}}),[C,k,x,R]),A=I.useCallback(()=>{if(T("cleaning up connection"),i("idle"),S.current){try{S.current.close()}catch{}S.current=null}if(U.current){try{U.current.close()}catch{}U.current=null}v.current&&(v.current.getTracks().forEach(V=>V.stop()),v.current=null),N.current&&(N.current.srcObject=null)},[T]),_=I.useCallback(async()=>{if(!n.trim()){c("API");return}if(r==="connected"||r==="connecting"){c("");return}c(null),i("connecting"),T("starting simple realtime session");const V=P[t],M=new RTCPeerConnection(ZR);U.current=M,M.addEventListener("track",Z=>{const[Be]=Z.streams;Be&&N.current&&(N.current.srcObject=Be,T("remote audio stream attached"))}),M.addEventListener("connectionstatechange",()=>{T(`connection state: ${M.connectionState}`),M.connectionState==="connected"?i("connected"):M.connectionState==="failed"&&(c(""),i("error"))});try{const Z=await navigator.mediaDevices.getUserMedia({audio:!0});v.current=Z,Z.getTracks().forEach(Be=>M.addTrack(Be,v.current)),T("microphone stream ready")}catch{T("microphone access failed"),c(""),i("error"),A();return}let J=null;try{J=M.createDataChannel(V.dataChannelLabel),S.current=J,J.addEventListener("message",Z=>{T(`DC  ${Z.data}`)}),J.addEventListener("open",()=>{T("data channel opened"),V.sendPrompt(J,u)}),J.addEventListener("close",()=>{T("data channel closed")})}catch(Z){T(`Failed to create data channel: ${Z}`)}const ne=await M.createOffer({offerToReceiveAudio:!0});await M.setLocalDescription(ne);try{const Z=await V.createAnswer({apiKey:n,offer:ne});await M.setRemoteDescription({type:"answer",sdp:Z}),T("remote description applied")}catch(Z){console.error(Z),T(`API error: ${Z}`),c(Z instanceof Error?Z.message:String(Z)),A();return}},[n,t,u,r,T,A,P]),re=I.useCallback(()=>{A()},[A]),ye=I.useCallback(()=>{const V=S.current;if(!V||V.readyState!=="open"){T("data channel is not open");return}const M=g.trim();if(!M)return;const J=JSON.stringify(t==="openai"?{type:"response.create",response:{modalities:["text"],instructions:M}}:{type:"input_text",text:M});try{V.send(J),T(`DC  ${M}`),E("")}catch(ne){T(`send failed: ${ne}`)}},[T,g,t]),Re=I.useCallback(async()=>{if(!n.trim()){c("API");return}const V=P[t];T(`[diag] ${t} `);try{let M;if(t==="openai"){const ne=`https://api.openai.com/v1/models/${encodeURIComponent(k||"gpt-4o-realtime-preview")}`;M=await fetch(ne,{headers:{Authorization:`Bearer ${n}`}})}else{let ne=`${x}/${encodeURIComponent(R||"gemini-1.5-flash-latest")}`;ne=`${ne}?key=${encodeURIComponent(n)}`,M=await fetch(ne,{headers:{}})}const J=await M.clone().text().then(ne=>ne.slice(0,400)).catch(()=>"<no body>");T(`[diag] HTTP ${M.status} ${M.statusText} :: ${J}`),M.ok?c(null):c("")}catch(M){T(`[diag] failed: ${M}`),c(M instanceof Error?M.message:String(M))}T(`[diag] This session will POST to ${V.describeEndpoint()}`)},[n,t,P,k,x,R,T]),De=I.useMemo(()=>m.slice().reverse(),[m]);return a.jsxs("div",{className:"simple-realtime-debugger",children:[a.jsxs("div",{className:"srd-row",children:[a.jsxs("label",{children:["",a.jsxs("select",{value:t,onChange:V=>e(V.target.value),children:[a.jsx("option",{value:"openai",children:"OpenAI Realtime"}),a.jsx("option",{value:"gemini",children:"Gemini Live"})]})]}),a.jsxs("label",{className:"srd-flex",children:["API",a.jsx("input",{type:"password",value:n,onChange:V=>s(V.target.value),placeholder:"sk-..."})]}),a.jsxs("span",{className:`srd-status srd-status-${r}`,children:[": ",r]})]}),a.jsx("div",{className:"srd-row srd-advanced",children:t==="openai"?a.jsxs(a.Fragment,{children:[a.jsxs("label",{className:"srd-flex",children:["Realtime URL",a.jsx("input",{type:"text",value:C,onChange:V=>w(V.target.value)})]}),a.jsxs("label",{className:"srd-flex",children:["Model",a.jsx("input",{type:"text",value:k,onChange:V=>y(V.target.value)})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("label",{className:"srd-flex",children:["Gemini Base URL",a.jsx("input",{type:"text",value:x,onChange:V=>j(V.target.value)})]}),a.jsxs("label",{className:"srd-flex",children:["Model",a.jsx("input",{type:"text",value:R,onChange:V=>L(V.target.value)})]})]})}),a.jsxs("div",{className:"srd-hint-box",children:[a.jsxs("p",{children:[": ",a.jsx("code",{children:P[t].describeEndpoint()})]}),t==="gemini"?a.jsxs("p",{children:[" Google CloudRealtime"," ",a.jsx("code",{children:R})," ","X-Api-Key",a.jsx("code",{children:"?key="})," "]}):a.jsx("p",{children:" OpenAIRealtime`session.update` `response.create` "})]}),o&&a.jsx("p",{className:"srd-error",children:o}),a.jsxs("label",{className:"srd-flex",children:["",a.jsx("textarea",{value:u,onChange:V=>h(V.target.value),rows:3})]}),a.jsxs("div",{className:"srd-actions",children:[a.jsx("button",{onClick:_,disabled:r==="connecting"||r==="connected",children:""}),a.jsx("button",{onClick:re,disabled:r==="idle"||r==="error",children:""}),a.jsx("button",{onClick:Re,children:""})]}),a.jsx("audio",{ref:N,autoPlay:!0,controls:!0,playsInline:!0}),a.jsxs("div",{className:"srd-send-box",children:[a.jsx("textarea",{rows:2,value:g,onChange:V=>E(V.target.value),placeholder:""}),a.jsx("button",{onClick:ye,disabled:!g.trim(),children:""})]}),a.jsxs("div",{className:"srd-log",children:[a.jsx("strong",{children:""}),a.jsx("ul",{children:De.map((V,M)=>a.jsx("li",{children:V},M))})]})]})};function o2(t){const e=[];return t.split(`

`).forEach((n,s)=>{if(s>0&&e.push({type:"break",hasAudio:!1,start:-1,end:-1}),!n.trim())return;const r=/(\*\*[^*]+\*\*)|([^]+)|(\S+)/g;let i;for(;(i=r.exec(n))!==null;)i[1]?i[1].slice(2,-2).split(/\s+/).forEach(o=>{o&&e.push({type:"bold",word:o,hasAudio:!0,start:0,end:0})}):i[2]?e.push({type:"paren",text:i[2],hasAudio:!1,start:-1,end:-1}):i[3]&&e.push({type:"word",word:i[3],hasAudio:!0,start:0,end:0})}),e}function Yh(t){return t.toLowerCase().replace(/[.,;:!?'"()\[\]\-\/:]/g,"")}function l2(t,e){const n=[];let s=0;for(const r of t){const i=Yh(r);if(!i){n.push({start:-1,end:-1});continue}let o=s,c=0,u=1;for(let h=s;h<Math.min(s+6,e.length);h++){const m=Yh(e[h].word);if(m===i){o=h,c=1,u=1;break}let p=m;for(let g=h+1;g<Math.min(h+5,e.length)&&p.length<i.length+3;g++)if(p+=Yh(e[g].word),p===i){o=h,c=1,u=g-h+1;break}if(c===1)break;(i.startsWith(m)||m.startsWith(i)||i.includes(m))&&.5>c&&(o=h,c=.5)}if(o<e.length){const h=Math.min(o+u-1,e.length-1);n.push({start:e[o].start,end:e[h].end}),c>0&&(s=o+u)}else{const h=n.length>0?n[n.length-1]:{end:0};n.push({start:h.end,end:h.end+.3})}}return n}const ME=I.createContext(null),VE=({children:t})=>{const e=I.useRef([]),n=I.useRef({active:!1,ids:[],index:-1}),s=I.useRef(null),[r,i]=I.useState(!1),o=I.useCallback(()=>[...e.current].sort((w,k)=>w.order-k.order),[]),c=I.useCallback(()=>{const w=n.current.active;i(w),e.current.forEach(k=>k.setChainActive(w))},[]),u=I.useCallback(()=>{n.current={active:!1,ids:[],index:-1},c()},[c]),h=I.useCallback(()=>{const w=n.current;if(!w.active)return;if(w.index<0||w.index>=w.ids.length){u();return}const k=w.ids[w.index],x=o().find(j=>j.id===k);if(!x){w.index+=1,h();return}x.playFromStart(!0)},[o,u]),m=I.useCallback(()=>{const w=o();w.length&&(s.current&&s.current(),w.forEach(k=>k.unlockForChain()),n.current={active:!0,ids:w.map(k=>k.id),index:0},c(),h())},[o,c,h]),p=I.useCallback(w=>{const k=n.current;if(k.active&&k.ids[k.index]===w){if(k.index+=1,k.index>=k.ids.length){u();return}h()}},[u,h]),g=I.useCallback(w=>{e.current=e.current.filter(k=>k.id!==w.id),e.current.push(w),c()},[c]),E=I.useCallback(w=>{e.current=e.current.filter(k=>k.id!==w)},[]),C=I.useCallback(w=>{s.current=w},[]);return a.jsx(ME.Provider,{value:{registerPlayer:g,unregisterPlayer:E,startChainFromTop:m,stopChain:u,onPlayerEnded:p,isChainActive:r,stopGlobal:s.current,setStopGlobal:C},children:t})},FE=({text:t,audioSrc:e,timestampSrc:n,order:s=0})=>{const r=I.useId(),i=I.useRef(null),o=I.useRef(null),c=I.useRef([]),[u,h]=I.useState(!1),[m,p]=I.useState(!1),[g,E]=I.useState([]),[C,w]=I.useState(!1),k=I.useRef(!1),y=I.useContext(ME);I.useEffect(()=>{const A=o2(t);fetch(n).then(_=>_.json()).then(_=>{const re=A.filter(ye=>ye.hasAudio);if(_.length>0){const ye=l2(re.map(De=>De.word),_);let Re=0;A.forEach(De=>{var V,M;De.hasAudio&&(De.start=((V=ye[Re])==null?void 0:V.start)??0,De.end=((M=ye[Re])==null?void 0:M.end)??0,Re++)})}E(A),w(!0)}).catch(()=>{E(A),w(!0)})},[t,n]),I.useEffect(()=>{const A=new Audio(e);return A.preload="auto",A.playsInline=!0,i.current=A,A.addEventListener("ended",()=>{R(!1),y==null||y.setStopGlobal(null),y==null||y.onPlayerEnded(r)}),()=>{A.pause(),A.src="",o.current&&clearInterval(o.current)}},[e,r]);const x=I.useCallback(()=>{o.current&&clearInterval(o.current),o.current=window.setInterval(()=>{const A=i.current;if(!A)return;const _=A.currentTime;c.current.forEach(re=>{if(!re)return;const ye=parseFloat(re.dataset.start||"-1"),Re=ye>=0&&Math.abs(_-ye)<.3;re.classList.toggle("highlight",Re)})},80)},[]),j=I.useCallback(()=>{o.current&&(clearInterval(o.current),o.current=null),c.current.forEach(A=>{A&&A.classList.remove("highlight")})},[]),R=I.useCallback(A=>{k.current=A,h(A),A?x():j()},[x,j]),L=I.useCallback(()=>{const A=i.current;A&&(A.pause(),A.currentTime=0),R(!1),y==null||y.stopChain()},[R,y]),U=I.useCallback((A=!1)=>{A||y==null||y.stopChain(),y!=null&&y.stopGlobal&&y.stopGlobal!==L&&y.stopGlobal();const _=i.current;if(!_)return;_.currentTime=0;const re=_.play();re&&re.catch(()=>{R(!1),A&&(y==null||y.stopChain())}),R(!0),y==null||y.setStopGlobal(L)},[y,L,R]),S=I.useCallback(()=>{const A=i.current;if(A)try{const _=A.muted;A.muted=!0;const re=A.play();re&&typeof re.then=="function"?re.then(()=>{A.pause(),A.currentTime=0,A.muted=_}).catch(()=>{A.muted=_}):(A.pause(),A.currentTime=0,A.muted=_)}catch{}},[]);I.useEffect(()=>{if(y)return y.registerPlayer({id:r,playFromStart:U,unlockForChain:S,setChainActive:p,order:s}),()=>y.unregisterPlayer(r)},[y,r,U,S,s]);const v=I.useCallback(A=>{y==null||y.stopChain(),y!=null&&y.stopGlobal&&y.stopGlobal!==L&&y.stopGlobal();const _=i.current;if(!_)return;_.currentTime=A;const re=_.play();re&&re.catch(()=>R(!1)),R(!0),y==null||y.setStopGlobal(L)},[y,L,R]),N=I.useCallback(()=>{k.current?(L(),y==null||y.setStopGlobal(null)):U(!1)},[L,U,y]),T=I.useCallback(()=>{y&&(m?(y.stopChain(),y.stopGlobal&&y.stopGlobal()):y.startChainFromTop())},[y,m]);if(!C)return null;let P=0;return a.jsxs("div",{className:`audio-highlight-player ${u?"playing":""}`,children:[a.jsxs("div",{className:"ahp-controls",children:[a.jsx("span",{className:`ahp-indicator ${u?"active":""}`,onClick:N,children:u?" ":" "}),y&&a.jsx("span",{className:`ahp-chain-btn ${m?"active":""}`,onClick:T,children:m?" ":" "})]}),g.map((A,_)=>{if(A.type==="break")return a.jsx("br",{},_);if(A.type==="paren")return a.jsxs("span",{className:"audio-paren",children:[A.text," "]},_);const re=P++;return a.jsxs(yu.Fragment,{children:[a.jsx("span",{ref:ye=>{c.current[re]=ye},className:`audio-token ${A.type==="bold"?"audio-bold":"audio-word"}`,"data-start":A.start,onClick:()=>{A.start>=0&&v(A.start)},children:A.word})," "]},_)})]})},c2={intro:" **** 3",sadPrinciples:[{letter:"S",name:"Structure",meaning:"",point:"12"},{letter:"A",name:"Argument",meaning:"",point:"Pertinent positives & negatives"},{letter:"D",name:"Delivery",meaning:"",point:""}],twelveItems:["Patient Information  one-liner","HPI  ","PMH","PSH","Medications","Allergies","FH","SH","ROS","Physical Examination","Summary  one-liner + pertinent positives","DDx & Plan"],badPatterns:[{name:"Random-Walk",summary:"OPQRST",detail:'OPQRST"Where did you learn that?" '},{name:"Cherry-Picking",summary:"pertinent negatives",detail:""},{name:"Parrot-Style",summary:"",detail:""}],diagnosticFraming:[{step:1,content:"Patient Information",point:"Semantic qualifiersone-liner"},{step:2,content:"HPI",point:"Pertinent positives & negatives"},{step:3,content:"PMHROS & PE",point:"Cherry-Picking"},{step:4,content:"Summary",point:"One-liner + key pertinent positives"}],diagnosticFramingNote:"Summary",diagnosticFramingExample:{step1:`"Ms. Davis is a 28-year-old African American woman with no significant past medical history, who presented with a 3-week history of progressive bilateral joint pain associated with fatigue and a new-onset facial rash."
 "bilateral" "progressive" "photosensitive" semantic qualifiersSLE`,step4:`"In summary, Ms. Davis is a 28-year-old African American woman with a family history of SLE, who presented with a 3-week history of progressive, symmetric, inflammatory polyarthralgia affecting bilateral MCP and PIP joints with prolonged morning stiffness exceeding 2 hours, associated with a photosensitive malar rash sparing the nasolabial folds, painless oral ulcers on the hard palate, diffuse non-scarring alopecia, fatigue, and low-grade fevers, with physical findings of bilateral MCP and PIP synovitis and borderline hypertension."
 Patient Info + pertinent positives + SLE`},hpiConstruction:{principles:["History Taking **50%**1/3HPI","OPQRST ****     ",`**"Draw the picture of the patient's story"**`," ****"],opqrstNote:"OPQRSTOnset, Provoking & Palliating Factors, Quality, Region & Radiation, Severity, Timing",rheumatologyPoints:["****: acute vs insidious onset","**Morning stiffness**: >1 hour  inflammatory","****: symmetric/asymmetricsmall/largemono/oligo/poly","****: rash  oral ulcers  fatigue etc.","****: activity vs rest"]},pertinentPosNeg:{criterion:'"Is this information necessary for clinical decision making? If so, how?"',successCondition:""},semanticQualifiers:[{general:"joint pain",qualifier:"symmetric inflammatory polyarthralgia with prolonged morning stiffness",suggests:"RA"},{general:"joint pain",qualifier:"migratory polyarthralgia",suggests:"rheumatic fever, gonococcal"},{general:"rash on face",qualifier:"photosensitive malar rash sparing the nasolabial folds",suggests:"SLE"},{general:"muscle weakness",qualifier:"progressive symmetric proximal muscle weakness",suggests:"DM/PM"},{general:"finger color change",qualifier:"episodic triphasic digital color change (whitebluered)",suggests:"Raynaud's"}],languageUse:[{section:"CCHPI",language:"",reason:""},{section:"PMH ",language:"",reason:""}],learningRoadmap:["**35** ","**First Aid for the USMLE Step 2 CS** Practical CasesPatient Note"," ****"," **** "],learningMistake:`
 "no abnormal breathing sounds"   "Clear to auscultation bilaterally"
 "no stiff neck"   "The neck is supple."`},u2={title:": SLEFull Case Presentation",intro:`  
**** =   = `,fullCaseAudio:"audio/case-presentation/sle_full_case.mp3",sections:[{id:"sle-patient-info",title:"Patient Information",description:"Diagnostic Framing / ",text:"Ms. Davis is a **28-year-old African American woman** with **no significant past medical history**, who **presented with** a 3-week history of **progressive bilateral joint pain** associated with **fatigue** and a **new-onset facial rash**.",audioFile:"audio/case-presentation/sle_01_patient_info.mp3",timestampFile:"timestamps/case-presentation/sle_01_patient_info.json"},{id:"sle-hpi",title:"History of Present Illness",description:"HPI / Pertinent Negatives",text:`The patient **had been in her usual state of health** until approximately 3 weeks prior to presentation, when she noticed **gradual-onset** stiffness and pain in bilateral hands, predominantly in the **metacarpophalangeal and proximal interphalangeal joints**.MCPPIP The **morning stiffness** lasted approximately 2 hours and **improved with activity** throughout the day.

Two weeks prior to presentation, she developed worsening fatigue, **intermittent low-grade fevers** up to 37.8 degrees Celsius, and noticed several **painless sores on her hard palate**. She also noted progressive hair thinning over the preceding month, which was **diffuse** and **without associated scalp lesions**.

One week prior to presentation, she developed a rash on both cheeks that **worsened with sun exposure**. The rash was **non-pruritic** and **spared the nasolabial folds**.

**She denies** Raynaud's phenomenon, dry eyes, dry mouth, dyspnea, chest pain, cough, hemoptysis, abdominal pain, dysuria, or **foamy urine**. She denies recent travel, tick bites, new medications, or preceding viral illness. She has **no history of similar episodes**.`,audioFile:"audio/case-presentation/sle_02_hpi.mp3",timestampFile:"timestamps/case-presentation/sle_02_hpi.json",tip:{title:"",items:["321","Pertinent negatives Raynaud's, sicca, pulmonary, renal etc.",'Semantic qualifiers: "gradual-onset" "bilateral" "symmetric" "non-pruritic" "spared the nasolabial folds"']}},{id:"sle-pmh-ros",title:"PMHROS",description:" vs  / ",text:`Her past medical history is **unremarkable**. She has **no prior surgeries**. She is currently on a **combined oral contraceptive pill**. She takes no other medications or supplements. The patient has **no known drug allergies**.

Her **family history is significant for** systemic lupus erythematosus in her maternal aunt and hypothyroidism in her mother. Her father is **alive and well**.

The patient is a graduate student. She is single and lives alone. She **does not smoke**. She drinks alcohol **on a social basis**, approximately 2 glasses of wine per week. She **denies any illicit drug use**. She is sexually active with one male partner and uses oral contraceptive pills for contraception.

**Review of systems is negative except as mentioned in the history of present illness**.`,audioFile:"audio/case-presentation/sle_03_pmh_to_ros.mp3",timestampFile:"timestamps/case-presentation/sle_03_pmh_to_ros.json"},{id:"sle-pe",title:"Physical Examination",description:" / ",text:`Her temperature is 37.8 degrees Celsius. Her blood pressure is 142 over 88 millimeters of mercury. Her heart rate is 88 per minute with a **sinus rhythm**. Her respiratory rate is 16 per minute. Her oxygen saturation is 99 percent **on room air**.

The patient is a well-developed young woman **in no acute distress**. She is **alert, awake, and oriented times four**.

**The head is normocephalic and atraumatic**. A **malar rash** is present on bilateral cheeks, **erythematous and slightly raised**, **sparing the nasolabial folds**. Two **painless ulcers** are noted on the hard palate. **Diffuse non-scarring alopecia** is present. The **mucous membranes are moist**. **The neck is supple**. No **cervical lymphadenopathy**.

**Cardiovascular exam reveals** a **regular rate and rhythm**, **normal S1 and S2**, **no murmurs, rubs, or gallops**.

Chest is **clear to auscultation bilaterally**. No wheezes, rhonchi, or crackles.

The abdomen is **soft, non-distended, and non-tender**. **Positive bowel sounds in all four quadrants**. No **hepatosplenomegaly**.

**Musculoskeletal exam** reveals bilateral symmetric **swelling and tenderness** of the second through fourth metacarpophalangeal joints and second and third proximal interphalangeal joints bilaterally. **No joint deformity**. **No dactylitis**.

The extremities show **no cyanosis, clubbing, or edema**. No **palpable purpura**. No **livedo reticularis**. No digital ulcers.

**Cranial nerves II through XII are intact**. **No focal neurological deficits**.`,audioFile:"audio/case-presentation/sle_04_pe.mp3",timestampFile:"timestamps/case-presentation/sle_04_pe.json",tip:{title:"",items:["BP 142/88  ","malar rash, oral ulcers, alopecia, synovitis, purpura, livedo",""]}},{id:"sle-summary",title:"Summary",description:"Semantic Qualifiers / Diagnostic Framing Step 4",text:"In summary, Ms. Davis is a 28-year-old African American woman with a family history of systemic lupus erythematosus, who **presented with** a 3-week history of **progressive, symmetric, inflammatory polyarthralgia** affecting bilateral MCP and PIP joints with **prolonged morning stiffness exceeding 2 hours**, associated with a **photosensitive malar rash sparing the nasolabial folds**, **painless oral ulcers** on the hard palate, **diffuse non-scarring alopecia**, fatigue, and low-grade fevers, with physical findings of bilateral MCP and PIP **synovitis** and **borderline hypertension**.",audioFile:"audio/case-presentation/sle_05_summary.mp3",timestampFile:"timestamps/case-presentation/sle_05_summary.json",tip:{title:"",items:["Patient Information + pertinent positives ",'Semantic qualifiers : "photosensitive malar rash sparing the nasolabial folds"  SLE',': "borderline hypertension"  ']}},{id:"sle-ddx",title:"Differential Diagnosis",description:"Pertinent Positives & Negatives / ",text:`**My top differential diagnosis at this time would be** systemic lupus erythematosus, **because** the patient is a young African American woman presenting with **multiple organ system involvement** including arthritis, **malar rash with nasolabial fold sparing**, oral ulcers, alopecia, and possible **renal involvement** suggested by borderline hypertension, along with a family history of SLE.

**Mixed connective tissue disease** **is a diagnosis we would need to consider**, because of the **overlapping features** of inflammatory arthritis and systemic symptoms, though the presence of SLE-specific findings makes this **less likely**.

**Drug-induced lupus** is a diagnosis **we would need to exclude**, as the patient is on an oral contraceptive pill, though this typically presents with **anti-histone antibodies** and **rarely causes renal or dermatologic involvement**.

**Rheumatoid arthritis** is **less likely** given the prominent **extra-articular manifestations** including the malar rash and oral ulcers, **which are not characteristic of RA**.`,audioFile:"audio/case-presentation/sle_06_ddx.mp3",timestampFile:"timestamps/case-presentation/sle_06_ddx.json"},{id:"sle-plan",title:"Plan",description:"",text:"**I would like to order** a **CBC with differential**, **comprehensive metabolic panel**, **ESR**, and **CRP**. I would also like to check **ANA**, **anti-dsDNA**, **anti-Smith**, complement **C3 and C4**, **anti-Ro SSA**, **anti-La SSB**, and **anti-RNP** antibodies. I would like to obtain a **urinalysis with microscopy** to evaluate for **renal involvement**, given the borderline hypertension. I would also like to order a chest X-ray to evaluate for **pleural effusion or pericardial disease**. If the urinalysis reveals **proteinuria** or an **active sediment**, I would recommend a **24-hour urine collection** for protein and consider **nephrology consultation** for possible **renal biopsy**.",audioFile:"audio/case-presentation/sle_07_plan.mp3",timestampFile:"timestamps/case-presentation/sle_07_plan.json"}]},h2={title:": RAFull Case Presentation",intro:`  
**** =   = `,fullCaseAudio:"audio/case-presentation/ra_full_case.mp3",sections:[{id:"ra-patient-info",title:"Patient Information",description:"Diagnostic Framing / ",text:"Ms. Thompson is a **52-year-old Caucasian woman** with a history of **hypothyroidism**, who **presented with** a **6-week history** of progressive **bilateral symmetric small joint pain and swelling** with **prolonged morning stiffness**.",audioFile:"audio/case-presentation/ra_01_patient_info.mp3",timestampFile:"timestamps/case-presentation/ra_01_patient_info.json"},{id:"ra-hpi",title:"History of Present Illness",description:"HPI / Pertinent Negatives",text:`The patient **had been in her usual state of health** until approximately **6 weeks prior to presentation**, when she noticed **gradual-onset stiffness and aching** in bilateral hands, predominantly in the **metacarpophalangeal and proximal interphalangeal joints**.MCPPIP The **morning stiffness** lasted approximately **2 to 3 hours** daily and **improved with activity**.

Over the following 2 weeks, she noted **progressive swelling** of the affected joints and increasing **difficulty with fine motor tasks**, such as **buttoning clothes and opening jars**. She rated the pain as 5 out of 10 at onset, progressing to 7 out of 10 at presentation.

**Four weeks prior to presentation**, she developed similar stiffness and swelling in bilateral wrists. The symptoms have been **persistent and additive**, **without migratory pattern**.RA

She reports associated fatigue and **general malaise**. Over-the-counter ibuprofen provided **minimal relief**.

**She denies** rash, **photosensitivity**, oral or nasal ulcers, Raynaud's phenomenon, dry eyes, dry mouth, hair loss, **back pain or morning back stiffness**,SpA eye redness, **skin thickening**,SSc muscle weakness, dyspnea, chest pain, fever, or weight loss. She denies recent viral illness, tick bites, **preceding pharyngitis**, or new sexual contacts.`,audioFile:"audio/case-presentation/ra_02_hpi.mp3",timestampFile:"timestamps/case-presentation/ra_02_hpi.json",tip:{title:"",items:['"additive, without migratory pattern"  RA migratory rheumatic fever',"buttoning, opening jars ","Pertinent negatives : rash, Raynaud's, sicca, back pain, nail, skin  SLE/PsA/SpA "]}},{id:"ra-pmh-ros",title:"PMHROS",description:" vs  / ",text:`Her past medical history **is significant for** 5 years of hypothyroidism, **well controlled**. She has **no prior surgeries**. She is currently on **levothyroxine** 75 micrograms per day. The patient has **no known drug allergies**.

Her **family history is significant for** **rheumatoid arthritis** in her mother and **type 2 diabetes mellitus** in her father. **No family history of** psoriasis or **inflammatory bowel disease**.IBDPsA/

The patient works as a high school teacher. She is married and lives with her husband and two children. She has **never smoked**. She drinks one glass of wine on weekends **on a social basis**. She **denies illicit drug use**.

**Review of systems is negative except as mentioned in the history of present illness**.`,audioFile:"audio/case-presentation/ra_03_pmh_to_ros.mp3",timestampFile:"timestamps/case-presentation/ra_03_pmh_to_ros.json",tip:{title:"",items:["RA  ","psoriasis / IBD   PsA / enteropathic arthritis "]}},{id:"ra-pe",title:"Physical Examination",description:" / ",text:`Her temperature is 36.8 degrees Celsius. Her blood pressure is 128 over 78 millimeters of mercury. Her heart rate is 72 per minute with a **sinus rhythm**. Her respiratory rate is 14 per minute. Her oxygen saturation is 99 percent **on room air**.

The patient is a well-developed woman **in no acute distress**. She is **alert, awake, and oriented times four**.

**The head is normocephalic and atraumatic**. **No malar rash**.SLE **No oral or nasal ulcers**. **No alopecia**. The **mucous membranes are moist**. **The neck is supple**. No **cervical lymphadenopathy**.

**Cardiovascular exam reveals** a **regular rate and rhythm**, **normal S1 and S2**, **no murmurs, rubs, or gallops**.

Chest is **clear to auscultation bilaterally**. No wheezes, rhonchi, or crackles.

The abdomen is **soft, non-distended, and non-tender**. **Positive bowel sounds in all four quadrants**. No **hepatosplenomegaly**.

**Musculoskeletal exam** reveals bilateral symmetric **swelling and tenderness** of the second through fourth metacarpophalangeal joints, second and third proximal interphalangeal joints, and bilateral wrists. **Positive squeeze test**MCP of bilateral MCP joints. **Warm joints on palpation**. **No DIP joint involvement**.DIPPsA **No joint deformity**. No **swan neck** or **boutonniere deformity**.RA No **ulnar deviation**. No **subcutaneous nodules**. **No dactylitis**.PsA

The extremities show **no cyanosis, clubbing, or edema**. No **psoriatic plaques**. No **nail pitting**.PsA No **livedo reticularis**.

**Cranial nerves II through XII are intact**. **No focal neurological deficits**. **Manual muscle test: 5 out of 5** in all extremities.`,audioFile:"audio/case-presentation/ra_04_pe.mp3",timestampFile:"timestamps/case-presentation/ra_04_pe.json",tip:{title:"",items:["MSK","squeeze test  RA ","swan neck, boutonniere, ulnar deviation RA","PsA : no DIP involvement, no psoriatic plaques, no nail pitting, no dactylitis"]}},{id:"ra-summary",title:"Summary",description:"Semantic Qualifiers / Diagnostic Framing Step 4",text:"In summary, Ms. Thompson is a 52-year-old woman with hypothyroidism and a family history of rheumatoid arthritis, who presented with a **6-week history** of **progressive, symmetric, inflammatory polyarthralgia** predominantly affecting **bilateral MCP, PIP joints, and wrists**, with **prolonged morning stiffness exceeding 2 hours**, **functional impairment in fine motor tasks**, fatigue, and physical findings of bilateral symmetric **synovitis** with **positive squeeze test**, **notably without** DIP involvement, rash, oral ulcers, nail changes, or **psoriatic features**.",audioFile:"audio/case-presentation/ra_05_summary.mp3",timestampFile:"timestamps/case-presentation/ra_05_summary.json",tip:{title:"",items:['"6-week history"  ACR/EULAR6','"notably without..."  pertinent negatives Summary']}},{id:"ra-ddx",title:"Differential Diagnosis",description:"Pertinent Positives & Negatives / ",text:`**My top differential diagnosis at this time would be** rheumatoid arthritis, **because** the patient presents with **symmetric inflammatory polyarthritis** affecting the MCP, PIP, and wrist joints with **prolonged morning stiffness**, a **positive squeeze test**, family history of RA, and the absence of DIP involvement or **extra-articular features** suggesting other connective tissue diseases. The **duration of symptoms exceeding 6 weeks**6ACR/EULAR further supports this diagnosis.

**Systemic lupus erythematosus** is a diagnosis **we would need to consider**, given the symmetric small joint involvement, though the absence of rash, oral ulcers, photosensitivity, alopecia, and **serositis** makes this **less likely**.

**Psoriatic arthritis** in its **polyarticular form** is a diagnosis **we would need to exclude**, though the absence of psoriatic skin lesions, nail pitting, DIP involvement, and dactylitis **argues against it**.

**Viral arthritis**, particularly from **parvovirus B19** or hepatitis, should be excluded given the acute-onset symmetric small joint involvement, though the 6-week duration and progressive nature are **more consistent with RA**.`,audioFile:"audio/case-presentation/ra_06_ddx.mp3",timestampFile:"timestamps/case-presentation/ra_06_ddx.json"},{id:"ra-plan",title:"Plan",description:"",text:"**I would like to order** a **CBC with differential**, **comprehensive metabolic panel**, **ESR**, and **CRP**. I would like to check **rheumatoid factor** and **anti-CCP antibodies**.CCP I would also like to order **ANA** to evaluate for SLE. I would like to obtain **X-rays of bilateral hands and wrists** to evaluate for **erosive changes**. I would also check hepatitis B and C serologies and **parvovirus B19 IgM** to exclude viral etiologies. If the diagnosis is confirmed, I would discuss initiating **disease-modifying therapy**DMARD with the rheumatology team.",audioFile:"audio/case-presentation/ra_07_plan.mp3",timestampFile:"timestamps/case-presentation/ra_07_plan.json"}]},Dv=[{name:"Full Case",purpose:"",when:"",elements:12},{name:"SNAPPS",purpose:"",when:"",elements:6,background:"1990 Learner-Centered Education Case Western ReserveWolpaw2003 Academic Medicine"},{name:"I-PASS",purpose:"",when:"handoff",elements:5,background:"20002003handoff Boston Children's Hospital 2014landmark study23%30%"},{name:"SBAR",purpose:"",when:"call",elements:4,background:""}],d2=[{id:"gpa-snapps",title:"SNAPPS",text:`**S  Summarize the Case:**
This is a 58-year-old man with a history of **chronic sinusitis** on amlodipine for hypertension, who presented with a 4-week history of progressively worsening **hemoptysis**, bilateral joint pain affecting the knees and ankles, and **elevated creatinine** found on routine labs. On exam, he has bilateral **nasal crusting**, scattered **crackles** in bilateral lower lung fields, bilateral knee and ankle tenderness without effusion, and **palpable purpura** on the lower extremities. Vital signs show blood pressure of 148 over 92 millimeters of mercury and oxygen saturation of 94 percent on room air.

**N  Narrow the Differential:**
The **most likely diagnosis** is **granulomatosis with polyangiitis**, formerly known as Wegener's granulomatosis. **Differential diagnoses include** **microscopic polyangiitis** and **Goodpasture syndrome**.

**A  Analyze the Differential:**
Granulomatosis with polyangiitis **fits best because of** the triad of **upper airway involvement** with chronic sinusitis and nasal crusting, **lower airway involvement** with hemoptysis and crackles, and **renal involvement** with rising creatinine, along with palpable purpura suggesting **small vessel vasculitis**. Microscopic polyangiitis is possible but **less likely because** it typically **lacks the upper airway involvement** such as sinusitis and nasal crusting. Goodpasture syndrome **should be considered** given the **pulmonary-renal presentation**, but the upper airway involvement and palpable purpura are **not typical features**.

**P  Probe the Preceptor:**
I am unsure about the timing of **initiating immunosuppressive therapy**. Should we wait for the ANCA results and possible renal biopsy confirmation, or would it be appropriate to start **empiric treatment** with cyclophosphamide and glucocorticoids given the **severity of the presentation**?

**P  Plan the Management:**
I would order **c-ANCA and p-ANCA** with **PR3 and MPO antibodies**, **urinalysis with microscopy**, **anti-GBM antibodies**, CBC, CMP, ESR, CRP, and **chest CT**. I would consider urgent **nephrology consultation** for possible **renal biopsy**. If GPA is confirmed, I would initiate **induction therapy** with **high-dose glucocorticoids** and either **cyclophosphamide or rituximab**.

**S  Select a Case-Related Topic:**
For **self-directed learning**, I will review the current ACR EULAR guidelines on the management of **ANCA-associated vasculitis**, particularly the evidence comparing **rituximab versus cyclophosphamide** for induction therapy.`,audioFile:"audio/case-presentation/gpa_snapps.mp3",timestampFile:"timestamps/case-presentation/gpa_snapps.json"},{id:"gpa-ipass",title:"I-PASS",text:`**I  Illness Severity:**
This is a 58-year-old man with suspected **granulomatosis with polyangiitis**. Differential diagnoses include microscopic polyangiitis and Goodpasture syndrome. Given the **active hemoptysis** and **worsening renal function**, the illness severity is classified as **unstable**.

**P  Patient Summary:**
This is a 58-year-old man with a history of chronic sinusitis and hypertension on amlodipine, who presented with a 4-week history of **progressive hemoptysis**, bilateral knee and ankle pain, and **rising creatinine**. On exam, he has nasal crusting, bilateral lower lobe crackles, joint tenderness without effusion, and **palpable purpura** on the lower extremities. Blood pressure is 148 over 92, saturation 94 percent on room air.

**A  Action List:**
We have sent **ANCA with PR3 and MPO**, **anti-GBM antibodies**, urinalysis, CBC, CMP, ESR, and CRP. **Chest CT has been ordered**. Nephrology has been consulted for evaluation and possible renal biopsy. We have started **methylprednisolone 500 milligrams IV** while awaiting **confirmatory results**.

**S  Situation Awareness and Contingency Plan:**
The most likely diagnosis is GPA. If hemoptysis worsens or **oxygen requirements increase**, we should obtain urgent **pulmonary consultation** and consider **ICU transfer**. If creatinine continues to rise, we may need to proceed with **emergent renal biopsy** and initiation of cyclophosphamide or rituximab. Watch for **rapidly progressive glomerulonephritis**.

**S  Synthesis by Receiver:**
Please confirm this summary and let me know if you have **additional recommendations**.`,audioFile:"audio/case-presentation/gpa_ipass.mp3",timestampFile:"timestamps/case-presentation/gpa_ipass.json"},{id:"gpa-sbar",title:"SBAR",text:`**S  Situation:**
This is a 58-year-old man with **worsening hemoptysis** and **acute kidney injury**. He was **admitted yesterday** for suspected **ANCA-associated vasculitis**.

**B  Background:**
He has a history of chronic sinusitis and hypertension on amlodipine. He presented with hemoptysis, joint pain, palpable purpura, and creatinine **rising from 1.8 to 2.6** over the past 24 hours. **ANCA results are pending**.

**A  Assessment:**
**Most likely** granulomatosis with polyangiitis with **rapidly progressive renal involvement**. **Concerned for** **pulmonary hemorrhage** given increased hemoptysis and **new drop in oxygen saturation** to 91 percent.

**R  Recommendation:**
I recommend urgent nephrology and pulmonary consultation, **stat chest CT**,CT and consideration of initiating **pulse-dose steroids** and rituximab or cyclophosphamide **before biopsy results return** given the **clinical trajectory**.`,audioFile:"audio/case-presentation/gpa_sbar.mp3",timestampFile:"timestamps/case-presentation/gpa_sbar.json"}],m2=`:
- **SNAPPS**:   
- **I-PASS**:   contingency plan 
- **SBAR**:   4`,p2="58 ANCAGPA",f2=[{id:"vocab-a",title:"A. ",columns:["","",""],entries:[{jp:"",en:"presented with",example:"Ms. Davis is a 28-year-old woman who presented with a 3-week history of progressive bilateral joint pain."},{jp:"",en:"no significant past medical history",example:"Ms. Davis is a 28-year-old woman with no significant past medical history, who presented with joint pain."},{jp:"",en:"with a history of",example:"This is a 58-year-old man with a history of chronic sinusitis on amlodipine for hypertension."},{jp:"",en:"past medical history is significant for",example:"Her past medical history is significant for 5 years of hypothyroidism."},{jp:"",en:"past medical history is unremarkable",example:"Her past medical history is unremarkable."},{jp:"",en:"family history is significant for",example:"Her family history is significant for SLE in her maternal aunt."},{jp:"",en:"no prior surgeries",example:"She has no prior surgeries."},{jp:"",en:"no known drug allergies (NKDA)",example:"The patient has no known drug allergies."},{jp:"",en:"alive and well",example:"Her father is alive and well."},{jp:"",en:"drinks on a social basis",example:"She drinks alcohol on a social basis, approximately 2 glasses of wine per week."},{jp:"",en:"denies illicit drug use",example:"She denies any illicit drug use."},{jp:"HPI",en:"review of systems is negative except as mentioned in the HPI",example:"Review of systems is negative except as mentioned in the history of present illness."},{jp:"",en:"in summary",example:"In summary, Ms. Davis is a 28-year-old woman who presented with..."},{jp:"",en:"my top differential diagnosis at this time would be",example:"My top differential diagnosis at this time would be rheumatoid arthritis, because..."},{jp:"",en:"is a diagnosis we would need to consider",example:"Mixed connective tissue disease is a diagnosis we would need to consider."},{jp:"",en:"is a diagnosis we would need to exclude",example:"Drug-induced lupus is a diagnosis we would need to exclude."},{jp:"",en:"I would like to order",example:"I would like to order a CBC with differential, CMP, ESR, and CRP."},{jp:"",en:"was referred for further evaluation and treatment of",example:"Mr. Jones is a 58-year-old man who was referred to our department for further evaluation and treatment of hemoptysis and elevated creatinine."},{jp:"",en:"was transferred to",example:"The patient was transferred to our facility from an outside hospital for a higher level of care."}]},{id:"vocab-b",title:"B. ",columns:["","",""],entries:[{jp:"",en:"in no acute distress",example:"The patient is a well-developed woman in no acute distress."},{jp:"4",en:"alert, awake, and oriented times four",example:"She is alert, awake, and oriented times four."},{jp:"",en:"normocephalic and atraumatic",example:"The head is normocephalic and atraumatic."},{jp:"",en:"mucous membranes are moist",example:"The mucous membranes are moist."},{jp:"",en:"the neck is supple",example:"The neck is supple. No cervical lymphadenopathy."},{jp:"",en:"no cervical lymphadenopathy",example:"No cervical lymphadenopathy."},{jp:"",en:"regular rate and rhythm",example:"Cardiovascular exam reveals a regular rate and rhythm."},{jp:"III",en:"normal S1 and S2",example:"Normal S1 and S2. No murmurs, rubs, or gallops."},{jp:"",en:"no murmurs, rubs, or gallops",example:"No murmurs, rubs, or gallops."},{jp:"",en:"clear to auscultation bilaterally",example:"Chest is clear to auscultation bilaterally."},{jp:"",en:"no wheezes, rhonchi, or crackles",example:"No wheezes, rhonchi, or crackles."},{jp:"",en:"soft, non-distended, and non-tender",example:"The abdomen is soft, non-distended, and non-tender."},{jp:"4",en:"positive bowel sounds in all four quadrants",example:"Positive bowel sounds in all four quadrants."},{jp:"",en:"no hepatosplenomegaly",example:"No hepatosplenomegaly."},{jp:"",en:"no cyanosis, clubbing, or edema",example:"The extremities show no cyanosis, clubbing, or edema."},{jp:"IIXII",en:"cranial nerves II through XII are intact",example:"Cranial nerves II through XII are intact."},{jp:"",en:"no focal neurological deficits",example:"No focal neurological deficits."},{jp:"",en:"swelling and tenderness",example:"Musculoskeletal exam reveals bilateral symmetric swelling and tenderness of the MCP joints."},{jp:"",en:"no joint deformity",example:"No joint deformity. No swan neck or boutonniere deformity."},{jp:"",en:"warm joints on palpation",example:"Warm joints on palpation."},{jp:"",en:"full range of motion in all joints",example:"Full range of motion in all joints."},{jp:"5/5",en:"manual muscle test: 5 out of 5",example:"Manual muscle test: 5 out of 5 in all extremities."},{jp:"",en:"no rebound or guarding",example:"No rebound or guarding."},{jp:"",en:"no costovertebral angle tenderness",example:"No costovertebral angle tenderness."},{jp:"2",en:"capillary refill time less than 2 seconds",example:"Capillary refill time is less than 2 seconds."},{jp:"",en:"on room air",example:"Her oxygen saturation is 99 percent on room air."},{jp:"",en:"sinus rhythm",example:"Her heart rate is 72 per minute with a sinus rhythm."}]},{id:"vocab-c",title:"C. ",columns:["","",""],entries:[{jp:"",en:"had been in her/his usual state of health",example:"The patient had been in her usual state of health until approximately 6 weeks prior to presentation."},{jp:"",en:"__ weeks prior to presentation",example:"Three weeks prior to presentation, she noticed gradual-onset stiffness."},{jp:"",en:"over the following __ weeks",example:"Over the following 2 weeks, she noted progressive swelling of the affected joints."},{jp:"",en:"over the preceding month",example:"She noted progressive hair thinning over the preceding month."},{jp:"24",en:"over the past 24 hours",example:"Creatinine rising from 1.8 to 2.6 over the past 24 hours."},{jp:"1",en:"throughout the day",example:"The morning stiffness improved with activity throughout the day."},{jp:"",en:"improved with activity",example:"The stiffness improved with activity."},{jp:"",en:"worsened with sun exposure",example:"She developed a rash on both cheeks that worsened with sun exposure."},{jp:"5/107/10",en:"initially 5 out of 10, progressed to 7 out of 10",example:"She rated the pain as 5 out of 10 at onset, progressing to 7 out of 10 at presentation."},{jp:"",en:"persistent and additive",example:"The symptoms have been persistent and additive, without migratory pattern."},{jp:"",en:"without migratory pattern",example:"The joint involvement has been additive, without migratory pattern."},{jp:"",en:"admitted yesterday",example:"He was admitted yesterday for suspected ANCA-associated vasculitis."},{jp:"",en:"well controlled",example:"...5 years of hypothyroidism, well controlled."},{jp:"",en:"provided minimal relief",example:"Over-the-counter ibuprofen provided minimal relief."}]},{id:"vocab-d",title:"D. ",columns:["","",""],entries:[{jp:"",en:"denies",example:"She denies Raynaud's phenomenon, dry eyes, dry mouth, and foamy urine."},{jp:"",en:"reveals",example:"Musculoskeletal exam reveals bilateral symmetric swelling and tenderness of the MCP joints."},{jp:"",en:"is present / is noted",example:"Diffuse non-scarring alopecia is present. Two painless ulcers are noted on the hard palate."},{jp:"",en:"reports",example:"She reports associated fatigue and general malaise."},{jp:"",en:"is notable for",example:"The exam is notable for bilateral MCP synovitis with a positive squeeze test."},{jp:"",en:"with physical findings of",example:"She presented with inflammatory polyarthralgia, with physical findings of bilateral MCP and PIP synovitis and borderline hypertension."},{jp:"",en:"is classified as",example:"The illness severity is classified as unstable."},{jp:"",en:"notably without",example:"...notably without DIP involvement, rash, oral ulcers, or psoriatic features."},{jp:"",en:"suggested by",example:"The patient has possible renal involvement suggested by borderline hypertension."},{jp:"",en:"to evaluate for",example:"I would like to obtain a urinalysis with microscopy to evaluate for renal involvement."},{jp:"",en:"to exclude",example:"I would check parvovirus B19 IgM to exclude viral etiologies."},{jp:"",en:"evaluation for",example:"Nephrology has been consulted for evaluation and possible renal biopsy."}]},{id:"vocab-e",title:"E. ",columns:["","",""],entries:[{jp:"",en:"fits best because of",example:"GPA fits best because of the triad of upper airway, lower airway, and renal involvement."},{jp:"",en:"less likely",example:"SLE is less likely given the absence of rash, oral ulcers, and photosensitivity."},{jp:"",en:"given",example:"RA is less likely given the prominent extra-articular manifestations."},{jp:"",en:"argues against it",example:"The absence of psoriatic skin lesions, nail pitting, and dactylitis argues against it."},{jp:"",en:"not typical features / not characteristic of",example:"The malar rash and oral ulcers are not characteristic of RA."},{jp:"",en:"more consistent with",example:"The 6-week duration and progressive nature are more consistent with RA."},{jp:"",en:"suggesting",example:"Palpable purpura suggesting small vessel vasculitis."},{jp:"",en:"concerned for",example:"I am concerned for pulmonary hemorrhage given increased hemoptysis."},{jp:"",en:"should be considered",example:"Goodpasture syndrome should be considered given the pulmonary-renal presentation."},{jp:"",en:"overlapping features",example:"MCTD should be considered because of the overlapping features of inflammatory arthritis."},{jp:"",en:"multiple organ system involvement",example:"The patient presents with multiple organ system involvement including arthritis and malar rash."},{jp:"",en:"extra-articular manifestations",example:"RA is less likely given the prominent extra-articular manifestations."},{jp:"",en:"severity of the presentation",example:"We should start empiric treatment given the severity of the presentation."},{jp:"",en:"clinical trajectory",example:"I recommend initiating pulse-dose steroids given the clinical trajectory."}]},{id:"vocab-f",title:"F. Semantic Qualifiers",columns:["","",""],entries:[{jp:"",en:"progressive",example:"She presented with a 3-week history of progressive bilateral joint pain."},{jp:"",en:"bilateral",example:"She noticed bilateral symmetric swelling of the MCP joints."},{jp:"",en:"symmetric",example:"The joint involvement is symmetric, affecting bilateral wrists and hands."},{jp:"",en:"gradual-onset",example:"She noticed gradual-onset stiffness and aching in bilateral hands."},{jp:"",en:"acute-onset",example:"Viral arthritis should be excluded given the acute-onset symmetric small joint involvement."},{jp:"",en:"non-pruritic",example:"The rash was non-pruritic and spared the nasolabial folds."},{jp:"",en:"non-scarring",example:"Diffuse non-scarring alopecia is present."},{jp:"",en:"diffuse",example:"She noted diffuse hair thinning without associated scalp lesions."},{jp:"",en:"focal / localized",example:"No focal neurological deficits."},{jp:"",en:"intermittent",example:"She developed intermittent low-grade fevers up to 37.8 degrees Celsius."},{jp:"",en:"palpable",example:"He has palpable purpura on the lower extremities."},{jp:"",en:"prolonged",example:"She presented with prolonged morning stiffness exceeding 2 hours."},{jp:"",en:"inflammatory",example:"She has progressive, symmetric, inflammatory polyarthralgia."},{jp:"",en:"rapidly progressive",example:"I am concerned for GPA with rapidly progressive renal involvement."},{jp:"",en:"polyarticular",example:"Psoriatic arthritis in its polyarticular form is a diagnosis we would need to exclude."},{jp:"",en:"oligoarticular",example:"The patient presents with an oligoarticular pattern affecting the knees and ankles."},{jp:"",en:"monoarticular",example:"He presented with acute monoarticular arthritis of the first MTP joint."},{jp:"",en:"proximal",example:"She has proximal muscle weakness in bilateral upper and lower extremities."},{jp:"",en:"distal",example:"No distal interphalangeal joint involvement."},{jp:"",en:"borderline",example:"Physical findings include bilateral synovitis and borderline hypertension."}]},{id:"vocab-g",title:"G. ",columns:["","",""],entries:[{jp:"",en:"CBC with differential",example:"I would like to order a CBC with differential, CMP, ESR, and CRP."},{jp:"",en:"comprehensive metabolic panel (CMP)",example:"I would like to order a CBC with differential and a comprehensive metabolic panel."},{jp:"",en:"ESR (erythrocyte sedimentation rate)",example:"I would like to check ESR and CRP as inflammatory markers."},{jp:"",en:"urinalysis with microscopy",example:"I would like to obtain a urinalysis with microscopy to evaluate for renal involvement."},{jp:"24",en:"24-hour urine collection",example:"If proteinuria is found, I would recommend a 24-hour urine collection for protein."},{jp:"",en:"active sediment",example:"If the urinalysis reveals proteinuria or an active sediment, I would consult nephrology."},{jp:"",en:"erosive changes",example:"I would obtain X-rays of bilateral hands and wrists to evaluate for erosive changes."},{jp:"",en:"pleural effusion or pericardial disease",example:"I would order a chest X-ray to evaluate for pleural effusion or pericardial disease."},{jp:"",en:"consider __ consultation",example:"I would consider nephrology consultation for possible renal biopsy."},{jp:"",en:"while awaiting confirmatory results",example:"We have started methylprednisolone 500 mg IV while awaiting confirmatory results."},{jp:"",en:"before biopsy results return",example:"I recommend initiating pulse-dose steroids before biopsy results return."},{jp:"",en:"empiric treatment",example:"We should start empiric treatment with cyclophosphamide and glucocorticoids."},{jp:"",en:"induction therapy",example:"I would initiate induction therapy with high-dose glucocorticoids and rituximab."},{jp:"",en:"maintenance therapy",example:"After remission, we would transition to maintenance therapy with azathioprine."},{jp:"",en:"disease-modifying therapy",example:"I would discuss initiating disease-modifying therapy with the rheumatology team."},{jp:"",en:"pulse-dose steroids",example:"I recommend pulse-dose steroids and rituximab given the clinical trajectory."},{jp:"CT",en:"stat chest CT",example:"I recommend urgent consultation and a stat chest CT."}]},{id:"vocab-h1",title:"H-1. ",columns:["","","",""],entries:[{jp:"",en:"rheumatoid arthritis (RA)",example:"My top differential would be rheumatoid arthritis.",extra:"MCP/PIP/>1hRF/CCP"},{jp:"",en:"systemic lupus erythematosus (SLE)",example:"The most likely diagnosis is systemic lupus erythematosus.",extra:"ANA/dsDNA"},{jp:"",en:"systemic sclerosis (SSc) / scleroderma",example:"I would also consider systemic sclerosis given the skin tightening and Raynaud's.",extra:"Raynaud'sILD/PAHScl-70/"},{jp:"SSc",en:"limited cutaneous SSc (lcSSc)",example:"The skin changes limited to the distal extremities suggest limited cutaneous SSc.",extra:"CRESTPAH"},{jp:"SSc",en:"diffuse cutaneous SSc (dcSSc)",example:"The rapidly progressive proximal skin thickening is concerning for diffuse cutaneous SSc.",extra:"Scl-70/RNAIII"},{jp:"CREST",en:"CREST syndrome",example:"The patient has features consistent with CREST syndrome.",extra:"Calcinosis, Raynaud's, Esophageal dysmotility, Sclerodactyly, Telangiectasia"},{jp:"",en:"dermatomyositis (DM)",example:"Dermatomyositis should be considered given the proximal weakness and heliotrope rash.",extra:"GottronCK"},{jp:"",en:"polymyositis (PM)",example:"Polymyositis is less likely in the absence of skin findings.",extra:"CKDM"},{jp:"",en:"antisynthetase syndrome",example:"The triad of ILD, arthritis, and mechanic's hands raises concern for antisynthetase syndrome.",extra:"ILDmechanic's handsRaynaud'sJo-1"},{jp:"",en:"Sjgren's syndrome",example:"Sjgren's syndrome should be considered given the dry eyes and dry mouth.",extra:"()Ro/SSALa/SSB"},{jp:"",en:"mixed connective tissue disease (MCTD)",example:"MCTD is a diagnosis we would need to consider because of the overlapping features.",extra:"SLESScPMRNPRaynaud's"},{jp:"",en:"antiphospholipid syndrome (APS)",example:"We should evaluate for antiphospholipid syndrome given the history of recurrent thrombosis.",extra:"AC//2GP1"},{jp:"",en:"drug-induced lupus",example:"Drug-induced lupus is a diagnosis we would need to exclude.",extra:"//INH"},{jp:"",en:"psoriatic arthritis (PsA)",example:"Psoriatic arthritis in its polyarticular form should be excluded.",extra:"DIPdactylitis"},{jp:"",en:"ankylosing spondylitis (AS)",example:"The inflammatory back pain and sacroiliitis are consistent with ankylosing spondylitis.",extra:"HLA-B27"},{jp:"",en:"reactive arthritis",example:"Reactive arthritis should be considered given the preceding GI infection.",extra:"(/)HLA-B27"},{jp:"",en:"granulomatosis with polyangiitis (GPA)",example:"The most likely diagnosis is granulomatosis with polyangiitis.",extra:"(/)()c-ANCA/PR3"},{jp:"",en:"microscopic polyangiitis (MPA)",example:"Microscopic polyangiitis is possible but less likely because it lacks upper airway involvement.",extra:"(RPGN)(/ILD)p-ANCA/MPO"},{jp:"",en:"eosinophilic granulomatosis with polyangiitis (EGPA)",example:"EGPA should be considered given the asthma and eosinophilia.",extra:"p-ANCA/MPO(40%)"},{jp:"",en:"polyarteritis nodosa (PAN)",example:"Polyarteritis nodosa should be excluded given the medium vessel involvement.",extra:"ANCAHBV"},{jp:"",en:"giant cell arteritis (GCA)",example:"I am concerned for giant cell arteritis given the new-onset headache and jaw claudication.",extra:">50ESRPMR"},{jp:"",en:"Takayasu arteritis",example:"The absent radial pulse and bruit suggest Takayasu arteritis.",extra:""},{jp:"IgA",en:"IgA vasculitis (Henoch-Schnlein purpura)",example:"The palpable purpura, abdominal pain, and hematuria are consistent with IgA vasculitis.",extra:"IgA"},{jp:"",en:"Behet's disease",example:"Behet's disease should be considered given the recurrent oral and genital ulcers.",extra:""},{jp:"",en:"Goodpasture syndrome (anti-GBM disease)",example:"Goodpasture syndrome should be considered given the pulmonary-renal presentation.",extra:"RPGNGBM(GPA)"},{jp:"",en:"rapidly progressive glomerulonephritis (RPGN)",example:"We should watch for rapidly progressive glomerulonephritis.",extra:"Cr()"},{jp:"Still",en:"adult-onset Still's disease (AOSD)",example:"Adult-onset Still's disease should be considered given the quotidian fever and salmon-colored rash.",extra:""},{jp:"",en:"gout",example:"The acute monoarticular arthritis of the first MTP joint is consistent with gout.",extra:"1MTP()tophi"},{jp:"",en:"pseudogout (CPPD disease)",example:"Pseudogout should be considered given the acute knee arthritis and chondrocalcinosis.",extra:"()CPPD()X"},{jp:"",en:"rheumatic fever",example:"Rheumatic fever should be excluded given the preceding pharyngitis and migratory polyarthritis.",extra:"AJones"},{jp:"",en:"fibromyalgia",example:"Fibromyalgia is a diagnosis of exclusion after ruling out inflammatory etiologies.",extra:""},{jp:"",en:"lupus nephritis",example:"We should evaluate for lupus nephritis given the proteinuria and active sediment.",extra:"SLEISN/RPS(I-VI)dsDNA"}]},{id:"vocab-h2",title:"H-2. ",columns:["","","",""],entries:[{jp:"",en:"morning stiffness",example:"She reports morning stiffness lasting approximately 2 to 3 hours daily.",extra:">1h: RA/SLE<30min: OA"},{jp:"",en:"malar rash / butterfly rash",example:"A malar rash is present on bilateral cheeks, erythematous and slightly raised.",extra:"SLE"},{jp:"",en:"sparing the nasolabial folds",example:"The rash is sparing the nasolabial folds.",extra:"SLE"},{jp:"",en:"discoid rash",example:"She has a discoid rash with central scarring on the scalp.",extra:"SLE"},{jp:"",en:"photosensitivity",example:"The rash worsened with sun exposure, consistent with photosensitivity.",extra:"SLEDM"},{jp:"",en:"oral ulcers",example:"Two painless oral ulcers are noted on the hard palate.",extra:"SLE"},{jp:"",en:"painless ulcers on the hard palate",example:"Painless ulcers are noted on the hard palate.",extra:"SLE"},{jp:"",en:"diffuse non-scarring alopecia",example:"Diffuse non-scarring alopecia is present.",extra:"SLE"},{jp:"",en:"Raynaud's phenomenon",example:"She denies Raynaud's phenomenon.",extra:"SSc(95%)SLEMCTDDM"},{jp:"",en:"triphasic digital color change (whitebluered)",example:"She reports episodic triphasic digital color change, turning white then blue then red.",extra:"Raynaud's"},{jp:"",en:"synovitis",example:"Physical findings include bilateral MCP and PIP synovitis.",extra:"RASLEPsA"},{jp:"",en:"polyarthralgia",example:"She presented with progressive symmetric inflammatory polyarthralgia.",extra:"RASLE"},{jp:"",en:"polyarthritis",example:"The patient presents with symmetric inflammatory polyarthritis affecting the MCP and PIP joints.",extra:"RASLEPsA="},{jp:"",en:"dactylitis (sausage digits)",example:"No dactylitis is noted on exam.",extra:"PsASpA"},{jp:"",en:"palpable purpura",example:"He has palpable purpura on the lower extremities.",extra:"(GPA/MPA/IgA)"},{jp:"",en:"livedo reticularis",example:"No livedo reticularis is noted on exam.",extra:"APSSLEPAN"},{jp:"",en:"subcutaneous nodules / rheumatoid nodules",example:"No subcutaneous nodules are palpated.",extra:"RARF(tophi)"},{jp:"",en:"swan neck deformity",example:"No swan neck or boutonniere deformity is noted.",extra:"RAPIPDIP"},{jp:"",en:"boutonniere deformity",example:"No swan neck or boutonniere deformity is noted.",extra:"RAPIPDIP"},{jp:"",en:"ulnar deviation",example:"No ulnar deviation is present.",extra:"RAMCP"},{jp:"",en:"positive squeeze test",example:"Positive squeeze test of bilateral MCP joints.",extra:"RAMCP"},{jp:"",en:"nail pitting",example:"No nail pitting is noted on exam.",extra:"PsA"},{jp:"",en:"psoriatic plaques",example:"No psoriatic plaques are noted on skin exam.",extra:"PsA"},{jp:"",en:"hemoptysis",example:"He presented with progressively worsening hemoptysis.",extra:"GPAMPAGoodpasture"},{jp:"",en:"foamy urine",example:"She denies foamy urine.",extra:"RPGN"},{jp:"",en:"serositis",example:"We should evaluate for serositis including pleuritis and pericarditis.",extra:"SLERAFMF"},{jp:"",en:"pulmonary hemorrhage",example:"I am concerned for pulmonary hemorrhage given increased hemoptysis.",extra:"GPAMPAGoodpastureSLE"},{jp:"",en:"small vessel vasculitis",example:"Palpable purpura suggests small vessel vasculitis.",extra:"ANCA(GPA/MPA/EGPA)IgA"},{jp:"",en:"nasal crusting",example:"On exam, he has bilateral nasal crusting.",extra:"GPA"},{jp:"",en:"nasal septal perforation",example:"She has nasal septal perforation on anterior rhinoscopy.",extra:"GPA"},{jp:"",en:"difficulty with fine motor tasks",example:"She has increasing difficulty with fine motor tasks such as buttoning clothes and opening jars.",extra:"RASSc"},{jp:"",en:"sicca symptoms (dry eyes, dry mouth)",example:"She denies sicca symptoms including dry eyes and dry mouth.",extra:"Sjgren's/"},{jp:"",en:"skin thickening / skin tightening",example:"She denies skin thickening or tightening.",extra:"SScmodified Rodnan skin score "},{jp:"",en:"sclerodactyly",example:"No sclerodactyly is noted on hand exam.",extra:"SSc(lcSSc/dcSSc)CREST"},{jp:"",en:"Gottron's papules",example:"Gottron's papules are noted over the MCP and PIP joints.",extra:"DMMCP/PIP//"},{jp:"",en:"heliotrope rash",example:"A violaceous heliotrope rash is noted on the upper eyelids.",extra:"DM"},{jp:"",en:"mechanic's hands",example:"She has hyperkeratotic fissuring of the lateral fingers consistent with mechanic's hands.",extra:"DM"},{jp:"",en:"shawl sign",example:"An erythematous rash is noted over the upper back in a shawl sign distribution.",extra:"DMV"},{jp:"V",en:"V sign",example:"A photosensitive rash is noted on the anterior chest in a V sign pattern.",extra:"DMV"},{jp:"",en:"calcinosis",example:"Subcutaneous calcinosis is palpated over the elbows and fingertips.",extra:"SSc(CREST)DM"},{jp:"",en:"telangiectasia",example:"Multiple telangiectasias are noted on the face and hands.",extra:"SSc(CREST)"},{jp:"",en:"esophageal dysmotility",example:"She reports dysphagia consistent with esophageal dysmotility.",extra:"SSc2/3GERD"},{jp:"",en:"interstitial lung disease (ILD)",example:"High-resolution CT shows findings consistent with interstitial lung disease.",extra:"SScDM/PM()RASLE"},{jp:"",en:"pulmonary arterial hypertension (PAH)",example:"We should screen for pulmonary arterial hypertension with echocardiography.",extra:"SSc(lcSSc)SLEMCTD"},{jp:"",en:"scleritis",example:"Slit-lamp exam reveals scleritis with scleral thinning.",extra:"RAGPASLE"},{jp:"",en:"episcleritis",example:"She has mild episcleritis in the right eye.",extra:"RASLEIBD"},{jp:"",en:"uveitis",example:"She has anterior uveitis with photophobia and blurred vision.",extra:"AS/SpAJIA"},{jp:"",en:"mononeuritis multiplex",example:"He has foot drop and wrist drop consistent with mononeuritis multiplex.",extra:"PANEGPAGPA"},{jp:"",en:"erythema nodosum",example:"She has tender nodules on bilateral shins consistent with erythema nodosum.",extra:"IBD"},{jp:"",en:"pyoderma gangrenosum",example:"A rapidly enlarging ulcer with undermined borders suggests pyoderma gangrenosum.",extra:"IBDRAMDS(pathergy)"},{jp:"",en:"pericardial friction rub",example:"No pericardial friction rub is auscultated.",extra:"SLERA"},{jp:"",en:"sacroiliitis",example:"MRI shows bilateral sacroiliitis with bone marrow edema.",extra:"ASSpAPsAIBD"},{jp:"",en:"enthesitis",example:"He has tenderness at the Achilles insertion consistent with enthesitis.",extra:"SpAPsA"},{jp:"",en:"proximal muscle weakness",example:"She has proximal muscle weakness with difficulty rising from a chair.",extra:"DM/PM"},{jp:"",en:"dysphagia",example:"She reports progressive dysphagia for solids and liquids.",extra:"SScDM/PM"},{jp:"",en:"scleroderma renal crisis",example:"The acute hypertension and rising creatinine are concerning for scleroderma renal crisis.",extra:"dcSScRNAIIIACE"}]},{id:"vocab-h3",title:"H-3. ",columns:["","","",""],entries:[{jp:"",en:"ANA (antinuclear antibody)",example:"I would like to order an ANA as an initial screening test.",extra:"SLE(95%)SScSjgren'sDM/PM"},{jp:"ds-DNA",en:"anti-dsDNA antibody",example:"Her anti-dsDNA antibody was elevated at 1:320.",extra:"SLE"},{jp:"Smith",en:"anti-Smith antibody",example:"Anti-Smith antibody was positive, which is highly specific for lupus.",extra:"SLE30%"},{jp:"C3, C4",en:"complement C3 and C4",example:"Complement C3 and C4 levels were both decreased.",extra:"SLEC4"},{jp:"",en:"rheumatoid factor (RF)",example:"Rheumatoid factor was positive at 85 international units per milliliter.",extra:"RA70-80%Sjgren'sHCV"},{jp:"CCP",en:"anti-CCP antibody",example:"Anti-CCP antibody was strongly positive, supporting the diagnosis of rheumatoid arthritis.",extra:"RA95%RFRA"},{jp:"Ro/SSA",en:"anti-Ro/SSA antibody",example:"Anti-Ro/SSA antibody was positive.",extra:"Sjgren'sSLECHB"},{jp:"La/SSB",en:"anti-La/SSB antibody",example:"Anti-La/SSB antibody was also positive.",extra:"Sjgren'sRo/SSASLE"},{jp:"RNP",en:"anti-RNP antibody",example:"Anti-RNP antibody was positive at a high titer.",extra:"MCTDSLE"},{jp:"",en:"anti-histone antibody",example:"Anti-histone antibody was positive, consistent with drug-induced lupus.",extra:"INHdsDNA"},{jp:"Scl-70",en:"anti-Scl-70 (anti-topoisomerase I) antibody",example:"Anti-Scl-70 antibody was positive.",extra:"dcSScILD"},{jp:"",en:"anti-centromere antibody",example:"Anti-centromere antibody was positive.",extra:"lcSSc / CRESTPAHPBC"},{jp:"RNA III",en:"anti-RNA polymerase III antibody",example:"We should check anti-RNA polymerase III antibody given the rapid skin progression.",extra:"dcSSc"},{jp:"Jo-1",en:"anti-Jo-1 antibody",example:"Anti-Jo-1 antibody was positive, raising concern for antisynthetase syndrome.",extra:"ILD +  + mechanic's hands +  + Raynaud's + "},{jp:"MDA5",en:"anti-MDA5 antibody",example:"Anti-MDA5 antibody was positive.",extra:"CADMclinically amyopathic DMILD"},{jp:"Mi-2",en:"anti-Mi-2 antibody",example:"Anti-Mi-2 antibody was positive.",extra:"DM"},{jp:"SRP",en:"anti-SRP antibody",example:"Anti-SRP antibody was positive, suggesting immune-mediated necrotizing myopathy.",extra:"IMNM"},{jp:"c-ANCA / PR3",en:"c-ANCA / anti-PR3 antibody",example:"c-ANCA with anti-PR3 antibody was positive.",extra:"GPA90%"},{jp:"p-ANCA / MPO",en:"p-ANCA / anti-MPO antibody",example:"p-ANCA with anti-MPO antibody was positive.",extra:"MPAEGPAGPAANCA"},{jp:"GBM",en:"anti-GBM antibody",example:"Anti-GBM antibody should be sent to rule out Goodpasture syndrome.",extra:"GoodpastureIgGANCA"},{jp:"",en:"antiphospholipid antibodies",example:"I would like to check antiphospholipid antibodies given the recurrent thrombosis.",extra:"APSSLE30-40%"},{jp:"",en:"lupus anticoagulant",example:"Lupus anticoagulant was positive.",extra:"APSAPTT"},{jp:"",en:"anti-cardiolipin antibody",example:"Anti-cardiolipin antibody IgG was elevated.",extra:"APS"},{jp:"2GP1",en:"anti-2 glycoprotein I antibody",example:"Anti-2 glycoprotein I antibody was positive.",extra:"APS3(triple positive)"},{jp:"CK / ",en:"CPK / aldolase",example:"CPK was elevated at 5,200 units per liter with elevated aldolase.",extra:"DM/PM/IMNMCK"},{jp:"",en:"ferritin",example:"Ferritin was markedly elevated at 15,000 nanograms per milliliter.",extra:"MAS/HLHStill>10,000"},{jp:"",en:"direct Coombs test",example:"Direct Coombs test was positive, indicating autoimmune hemolytic anemia.",extra:"AIHASLECLLSLE"},{jp:"",en:"renal biopsy",example:"Nephrology was consulted for renal biopsy to classify the lupus nephritis.",extra:"ISN/RPSClass I-VIANCApauci-immune GNGoodpasture"},{jp:"",en:"skin biopsy",example:"A skin biopsy of the purpuric lesion showed leukocytoclastic vasculitis.",extra:"DM"},{jp:"",en:"muscle biopsy",example:"Muscle biopsy showed perifascicular atrophy consistent with dermatomyositis.",extra:"DMPMCD8+ TIMNM"},{jp:"",en:"salivary gland biopsy",example:"A minor salivary gland biopsy showed focal lymphocytic sialadenitis with a focus score of 3.",extra:"Sjgren'sfocus score 1IgG4"},{jp:"",en:"Schirmer's test",example:"Schirmer's test showed less than 5 millimeters of wetting in 5 minutes bilaterally.",extra:"Sjgren's5mm/5min"},{jp:"",en:"nailfold capillaroscopy",example:"Nailfold capillaroscopy showed enlarged capillary loops with areas of dropout.",extra:"SScDMRaynaud's vs"}]},{id:"vocab-h4",title:"H-4. ",columns:["","","",""],entries:[{jp:"",en:"methotrexate (MTX)",example:"She was started on methotrexate 15 milligrams weekly with folic acid supplementation.",extra:"RADMARD: ILD"},{jp:"",en:"hydroxychloroquine (HCQ)",example:"She is currently on hydroxychloroquine 200 milligrams twice daily.",extra:"TLRSLE: 1QT"},{jp:"",en:"sulfasalazine",example:"Sulfasalazine was added as a second DMARD.",extra:"5-ASA + RAMTXSpA: "},{jp:"",en:"leflunomide",example:"We switched to leflunomide after MTX intolerance.",extra:"RAMTX: "},{jp:" / ",en:"prednisone / prednisolone",example:"She is on prednisone 10 milligrams daily, which we plan to taper.",extra:": AVN"},{jp:"",en:"methylprednisolone (pulse therapy)",example:"We initiated methylprednisolone 1 gram IV daily for 3 days as pulse therapy.",extra:"500-1000mg/3ANCA"},{jp:"",en:"cyclophosphamide",example:"Induction therapy with cyclophosphamide was initiated for class IV lupus nephritis.",extra:"ANCA: "},{jp:"",en:"azathioprine",example:"She was transitioned to azathioprine for maintenance therapy.",extra:"SLEANCA: TPMT"},{jp:"",en:"mycophenolate mofetil (MMF)",example:"Mycophenolate mofetil 1 gram twice daily was started for lupus nephritis.",extra:"IMPDHSSc-ILD: "},{jp:"",en:"tacrolimus",example:"Low-dose tacrolimus was added as part of a multitarget therapy regimen.",extra:"multi-targetDM/PM: K"},{jp:"",en:"rituximab",example:"Rituximab was administered for refractory ANCA-associated vasculitis.",extra:"CD20BANCACYCRASLE: infusion reactionPML"},{jp:"",en:"belimumab",example:"Belimumab was added to her lupus regimen given persistent serologic activity.",extra:"BLyS/BAFFSLEFDASLE: infusion reaction"},{jp:"",en:"anifrolumab",example:"Anifrolumab was initiated for moderate-to-severe SLE with skin involvement.",extra:"IFNAR1IIFNSLE: "},{jp:"",en:"tocilizumab",example:"Tocilizumab was started for refractory rheumatoid arthritis.",extra:"IL-6RAGCAStill: CRP"},{jp:"",en:"abatacept",example:"She was switched to abatacept after inadequate response to TNF inhibitors.",extra:"TCTLA-4 IgRACCP: infusion reactionTNF"},{jp:"",en:"adalimumab",example:"Adalimumab 40 milligrams subcutaneously every 2 weeks was prescribed.",extra:"TNF-RAPsAASIBD: "},{jp:"",en:"etanercept",example:"Etanercept was chosen as a first-line biologic for her rheumatoid arthritis.",extra:"TNFRAPsAAS: IBDGPA"},{jp:"",en:"secukinumab",example:"Secukinumab was initiated for psoriatic arthritis with axial involvement.",extra:"IL-17APsAAS: IBDSpA"},{jp:"",en:"apremilast",example:"Apremilast was started for mild psoriatic arthritis.",extra:"PDE4PsA: "},{jp:"",en:"nintedanib",example:"Nintedanib was prescribed for progressive SSc-associated interstitial lung disease.",extra:"VEGFR/FGFR/PDGFRSSc-ILDIPF: "},{jp:"",en:"colchicine",example:"Colchicine 0.6 milligrams twice daily was started for acute gout.",extra:"FMF: "},{jp:"",en:"allopurinol",example:"Allopurinol 100 milligrams daily was initiated for urate-lowering therapy.",extra:": DRESS/SJSHLA-B*5801"},{jp:"",en:"febuxostat",example:"He was switched to febuxostat due to allopurinol hypersensitivity.",extra:"XO: CARES trial"}]}],g2=[{id:"tpl-patient-info",title:"1. Patient Information",sectionTitle:"Patient Information",blocks:[{type:"note",label:": ()1",content:`"Mr./Ms. ___ is a/an (age)-year-old (man/woman) with (risk factors), who presented with a (duration)-history of (chief complaint)."
-   with... 
-   "who was referred to our department for further evaluation and treatment of..."
-   "who was transferred to..."`},{type:"example",label:"",content:`"Ms. Smith is a 28-year-old African American woman with no significant medical history, who presented with a 3-week history of progressive bilateral symmetric small joint pain associated with fatigue and a photosensitive facial rash."

"Mr. Jones is a 58-year-old man with a history of chronic sinusitis, who was referred to our department for further evaluation of hemoptysis and elevated creatinine."`},{type:"info",label:": One-linerSemantic Qualifiers",content:`One-linerchief complaint semantic qualifiers
- "bilateral symmetric small joint pain"  RA/SLE
- "photosensitive facial rash"  SLE

1`}]},{id:"tpl-hpi",title:"2. HPI",sectionTitle:"HPI",blocks:[{type:"note",label:"",content:'"The patient had been in her/his usual state of health until () prior to the presentation, when she/he noticed ()."'},{type:"note",label:"",content:'"The (symptom) is aggravated/alleviated by ()."'},{type:"note",label:"",content:`Quality: "The patient describes the pain as ()."
Region: "The pain is located in ()."   "...and moves to ()."
Severity: "...rates the pain as () out of 10."   "initially (), progressed to ()."
Time: "The pain lasted for ()."`},{type:"example",label:": HPI",content:`Morning stiffness:
"She reports morning stiffness lasting approximately () hours, which improves with activity."

:
"The joint symptoms are bilateral and symmetric, predominantly affecting the (MCP/PIP/wrist) joints."
"The joint involvement has been migratory/additive over the past () weeks."

:
"She also noticed (a rash on her cheeks / oral ulcers / hair thinning / dry eyes and dry mouth) approximately () weeks ago."

Raynaud's:
"She reports episodic color changes in her fingers, turning white then blue then red, triggered by cold exposure."

:
"She has difficulty with (buttoning clothes / opening jars / gripping objects / climbing stairs)."`},{type:"info",label:": HPI",content:`- History Taking 50%1/3HPI
- OPQRST   
- "Draw the picture of the patient's story" 
- 
- : morning stiffnesssymmetric/asymmetric, small/large, mono/oligo/poly`}]},{id:"tpl-pmh",title:"36. PMH / PSH / Meds / Allergies",sectionTitle:"PMH / PSH / Meds / Allergies",blocks:[{type:"note",label:"PMH",content:`"Her/His past medical history is unremarkable."
"...is significant for () years of (disease)."`},{type:"note",label:"PSH",content:'"The patient underwent () at the age of ()."'},{type:"note",label:"Meds",content:`"She/He is currently on () mg per day of (drug name)."
"The patient takes no medications."`},{type:"note",label:"",content:'"NKDA." / "...known allergies to (), which caused ()."'},{type:"info",label:": ",content:`:
 "on immunosuppressants"   "on methotrexate 15 mg weekly and folic acid 1 mg daily"

: MTX, HCQ, sulfasalazine, prednisone, mycophenolate, azathioprine, cyclophosphamide, adalimumab, etanercept, rituximab, tocilizumab, belimumab

NG: "Vital signs are within normal limits" 

: "Blood tests"  CBC, CMP, ESR, CRP `}]},{id:"tpl-fh-sh-ros",title:"79. FH / SH / ROS",sectionTitle:"FH / SH / ROS",blocks:[{type:"note",label:"FH",content:`"Her/His family history is significant for (disease) in her/his (family member)."
"...is unremarkable."`},{type:"note",label:"SH: ",content:`"The patient is married and lives with her/his (husband/wife)."
"The patient works as a ()."
"The patient does not drink alcohol." / "...drinks () on a social basis."
"The patient has a () pack-year history of smoking." / "...does not smoke."`},{type:"note",label:"ROS",content:'"Review of systems is negative except as mentioned in the HPI."'},{type:"info",label:": ROS",content:`: 
: "Her family history is significant for SLE in her maternal aunt and hypothyroidism in her mother."

ROS  :
- Constitutional: fever, weight loss, fatigue, night sweats
- Skin: rash, photosensitivity, oral/nasal ulcers, hair loss, Raynaud's, skin tightening
- Eyes: dry eyes, red eyes, visual changes (uveitis/scleritis)
- Oral: dry mouth, oral ulcers
- Pulmonary: dyspnea, cough, hemoptysis, pleuritic chest pain
- Cardiac: pericardial chest pain, dyspnea on exertion
- GI: dysphagia (scleroderma), abdominal pain
- Renal: foamy urine, hematuria, edema
- MSK: joint pain/swelling, morning stiffness, back pain, muscle weakness
- Neuro: headache, seizures, numbness/tingling, cognitive changes`}]},{id:"tpl-summary",title:"11. Summary",sectionTitle:"Summary",blocks:[{type:"note",label:": Patient Info1",content:'"In summary, the patient is a/an (age)-year-old (man/woman) with (risk factors), who presented with a (duration)-history of (CC + significant HPI), associated with (pertinent positives)."'},{type:"example",label:"",content:'"In summary, this is a 28-year-old African American woman with a family history of SLE, who presented with a 3-week history of progressive, symmetric, inflammatory small joint pain with prolonged morning stiffness, associated with a photosensitive malar rash sparing the nasolabial folds, painless oral ulcers, non-scarring alopecia, and low-grade fevers, with physical findings of bilateral MCP and PIP synovitis and borderline hypertension."'},{type:"info",label:": Summary",content:`- Patient Information
-  Summary 
- Semantic qualifiers1
- Pertinent positives `}]},{id:"tpl-ddx-plan",title:"12. DDx & Plan",sectionTitle:"DDx & Plan",blocks:[{type:"note",label:": ",content:`"My top differential at this time would be (#1), because..."
"(#2) is a diagnosis we would need to consider, because..."
"(#3) is a diagnosis we would need to exclude, because..."`},{type:"note",label:": ",content:'"I would like to order (), because..."'},{type:"info",label:": ",content:`: ANA, anti-dsDNA, anti-Smith, C3/C4, RF, anti-CCP, ANCA (PR3/MPO), CPK/aldolase, anti-Ro/SSA, anti-La/SSB

: CBC with differential, CMP, ESR, CRP

: urinalysis with microscopy

: X-rays of bilateral hands and wrists / chest X-rayILD

: "Is this information necessary for clinical decision making? If so, how?" `}]},{id:"tpl-grammar",title:"",sectionTitle:"",blocks:[{type:"warning",label:"",content:`- :  48-year-old  48-years-old
- Vital signs : "vital signs are within normal limits"
- 1: 67 kilograms, 2 hours
- :  "The abdomen is soft"  "was soft"
- WNL :   "unremarkable for pathology"`}]}],y2=[{section:"Vital Signs",expressions:['"Her/his temperature is () degrees Celsius."','"Her/his blood pressure is () over () millimeters of mercury."','"Her/his heart rate is () per minute with a sinus rhythm."','"Her/his respiratory rate is () per minute."','"Her/his oxygen saturation is () percent on room air."']},{section:"General Appearance (GA)",expressions:['"The patient is in no acute distress (NAD)."','"The patient is in acute distress."']},{section:"Mental Status",expressions:['"She/He is alert, awake, and oriented times four (AAOx4)."']},{section:"HEENT",expressions:['"The head is normocephalic and atraumatic (NC/AT)."','"The extraocular muscles are intact (EOMI) bilaterally."','"The pupils are equal and round, react to light and accommodation (PERRLA) bilaterally."','"No conjunctival pallor."','"No conjunctival icterus."','"The mucous membranes are moist (MMM)."','"The neck is supple."','"No jugular venous distention (JVD)."','"No cervical lymphadenopathy (LAD)."','"No carotid bruits."'],rheumatologyAdditions:['"Malar rash present/absent, sparing the nasolabial folds."','"No oral or nasal ulcers." / "Painless ulcers noted on the hard palate."','"No alopecia." / "Diffuse non-scarring alopecia noted."','"No scleritis or episcleritis."','"No parotid gland enlargement."','"No nasal crusting or septal perforation."']},{section:"Cardiovascular (CV)",expressions:['"Regular rate and rhythm (RRR)."','"Normal S1 and S2."','"No murmurs, rubs, or gallops (m/r/g)."','"Point of maximal intensity (PMI) is not displaced."','"Capillary refill time (CRT) is less than 2 seconds."','"No hepatojugular reflux (HJR)."'],rheumatologyAdditions:['"No pericardial friction rub." (serositis)']},{section:"Pulmonary (Chest)",expressions:['"Clear to auscultation bilaterally (CTAB)."','"No wheezes, rhonchi, or crackles (w/r/c)."','"No egophony."','"Resonant to percussion."'],rheumatologyAdditions:['"No bibasilar crackles." (ILD)','"No decreased breath sounds at the bases." ()','"No pleural friction rub."']},{section:"Abdomen",expressions:['"Soft, non-distended, non-tender."','"No rebound or guarding."','"Positive bowel sounds in all four quadrants."','"No hepatosplenomegaly (HSM)."','"No costovertebral angle (CVA) tenderness."']},{section:"Musculoskeletal",expressions:['"Bilateral symmetric swelling and tenderness of (MCP 2-4 / PIP 2-3 / wrists / knees / ankles)."','"Positive squeeze test of bilateral MCP joints."','"Warm joints on palpation."','"No DIP joint involvement."','"No joint deformity."','"No swan neck or boutonnire deformity."','"No ulnar deviation."','"Full range of motion in all joints." / "Limited range of motion in () due to (pain/swelling)."','"No dactylitis (sausage digits)."','"No sclerodactyly."',`"No Heberden's or Bouchard's nodes."`,'"No calcinosis."','"No digital ulcers."','"No subcutaneous nodules." / "Rheumatoid nodules present at (location)."',`"No Gottron's papules."`,'"No heliotrope rash."',`"No mechanic's hands."`,'"Proximal muscle strength is 5/5 in bilateral upper and lower extremities."','"Manual muscle test (MMT): 5 out of 5 in all extremities."']},{section:"Skin",expressions:['"Intact, no lesions."','"No palpable purpura."','"No livedo reticularis."','"No psoriatic plaques."','"No nail pitting."','"No skin thickening or tightening."','"No erythema nodosum."','"No pyoderma gangrenosum."']},{section:"Neurological (Neuro)",expressions:['"Cranial Nerve II through XII are intact."','"No focal deficit."','"Deep tendon reflexes: symmetric 2+ in all extremities."','"Sensation: intact to pinprick and soft touch."'],rheumatologyAdditions:['"No mononeuritis multiplex." ()','"No peripheral neuropathy."']},{section:"Extremities (EXT)",expressions:['"No cyanosis, clubbing, or edema."','"Normal range of motion (ROM)."']}],v2="/medical-interview-english/".replace(/\/$/,"");function ko(t){const e=t.replace(/^\/+/,""),n=`${v2}/${e}`.replace(/^\/\//,"/");return n.startsWith("/")?n:`/${n}`}const w2=[{id:"overview",label:""},{id:"template",label:""},{id:"sle",label:"SLE"},{id:"ra",label:"RA"},{id:"formats",label:""},{id:"vocab",label:""}],lr=({type:t,label:e,children:n,defaultOpen:s=!1})=>a.jsxs("details",{className:`callout callout-${t}`,open:s||void 0,children:[a.jsx("summary",{children:e}),a.jsx("div",{className:"callout-content",children:n})]}),jn=({text:t})=>{const e=t.split(/(\*\*[^*]+\*\*)/g);return a.jsx(a.Fragment,{children:e.map((n,s)=>n.startsWith("**")&&n.endsWith("**")?a.jsx("strong",{children:n.slice(2,-2)},s):a.jsx(yu.Fragment,{children:n},s))})},Ov=({data:t})=>a.jsx(VE,{children:a.jsxs("div",{children:[a.jsx("p",{className:"description",children:a.jsx(jn,{text:t.intro})}),a.jsxs(F,{title:"1",level:3,defaultCollapsed:!1,children:[a.jsx("p",{style:{fontSize:"0.85em",color:"var(--text-color)",opacity:.7},children:""}),a.jsx("audio",{controls:!0,preload:"none",style:{width:"100%",maxWidth:480},children:a.jsx("source",{src:ko(t.fullCaseAudio),type:"audio/mpeg"})})]}),t.sections.map((e,n)=>a.jsxs(F,{title:e.title,level:2,defaultCollapsed:!1,children:[e.description&&a.jsxs("p",{style:{fontSize:"0.8em",opacity:.6,margin:"0 0 8px"},children:[" ",e.description]}),a.jsx(FE,{text:e.text,audioSrc:ko(e.audioFile),timestampSrc:ko(e.timestampFile),order:n}),e.tip&&a.jsx(lr,{type:"tip",label:e.tip.title,defaultOpen:!0,children:a.jsx("ul",{children:e.tip.items.map((s,r)=>a.jsx("li",{children:a.jsx(jn,{text:s})},r))})})]},e.id))]})}),x2=()=>{const t=c2;return a.jsxs("div",{children:[a.jsx("p",{className:"description",children:a.jsx(jn,{text:t.intro})}),a.jsx(F,{title:"Don't Make Your Attending SAD",level:2,children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:""}),a.jsx("th",{children:""}),a.jsx("th",{children:""})]})}),a.jsx("tbody",{children:t.sadPrinciples.map(e=>a.jsxs("tr",{children:[a.jsxs("td",{children:[a.jsx("strong",{children:e.letter}),"tructure / ",a.jsx("strong",{children:e.name})]}),a.jsx("td",{children:e.meaning}),a.jsx("td",{children:e.point})]},e.letter))})]})}),a.jsx(F,{title:"Full Case Presentation: 12",level:2,children:a.jsx("ol",{children:t.twelveItems.map((e,n)=>a.jsx("li",{children:a.jsx(jn,{text:e})},n))})}),a.jsxs(F,{title:"3",level:2,children:[a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:""}),a.jsx("th",{children:""})]})}),a.jsx("tbody",{children:t.badPatterns.map(e=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:e.name})}),a.jsx("td",{children:e.summary})]},e.name))})]}),a.jsx(lr,{type:"warning",label:"",children:t.badPatterns.map(e=>a.jsxs("p",{children:[a.jsx("strong",{children:e.name}),": ",e.detail]},e.name))})]}),a.jsxs(F,{title:"Diagnostic Framing: 4",level:2,children:[a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Step"}),a.jsx("th",{children:""}),a.jsx("th",{children:""})]})}),a.jsx("tbody",{children:t.diagnosticFraming.map(e=>a.jsxs("tr",{children:[a.jsx("td",{children:e.step}),a.jsx("td",{children:e.content}),a.jsx("td",{children:e.point})]},e.step))})]}),a.jsx("p",{children:a.jsx("strong",{children:t.diagnosticFramingNote})}),a.jsxs(lr,{type:"example",label:"Step 14SLE",children:[a.jsx("p",{children:a.jsx("strong",{children:"Step 1  Patient Information:"})}),a.jsx("blockquote",{children:a.jsx(jn,{text:t.diagnosticFramingExample.step1})}),a.jsx("p",{children:a.jsx("strong",{children:"Step 4  Summary:"})}),a.jsx("blockquote",{children:a.jsx(jn,{text:t.diagnosticFramingExample.step4})})]})]}),a.jsxs(F,{title:"HPI ",level:2,children:[a.jsx("ul",{children:t.hpiConstruction.principles.map((e,n)=>a.jsx("li",{children:a.jsx(jn,{text:e})},n))}),a.jsx(lr,{type:"tip",label:"OPQRST",children:a.jsx("p",{children:t.hpiConstruction.opqrstNote})}),a.jsx(F,{title:"HPI",level:3,children:a.jsx("ul",{children:t.hpiConstruction.rheumatologyPoints.map((e,n)=>a.jsx("li",{children:a.jsx(jn,{text:e})},n))})})]}),a.jsxs(F,{title:"Pertinent Positives & Negatives",level:2,children:[a.jsxs("p",{children:[" ",a.jsx("strong",{children:""})," "]}),a.jsxs("p",{children:[a.jsx("strong",{children:""}),": ",a.jsx("em",{children:t.pertinentPosNeg.criterion})]}),a.jsxs("p",{children:[a.jsx("strong",{children:""}),": ",t.pertinentPosNeg.successCondition]})]}),a.jsx(F,{title:"Semantic Qualifiers",level:2,children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:""}),a.jsx("th",{children:"Semantic Qualifier"}),a.jsx("th",{children:""})]})}),a.jsx("tbody",{children:t.semanticQualifiers.map((e,n)=>a.jsxs("tr",{children:[a.jsx("td",{children:e.general}),a.jsx("td",{children:e.qualifier}),a.jsx("td",{children:e.suggests})]},n))})]})}),a.jsx(F,{title:" vs ",level:2,children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:""}),a.jsx("th",{children:""}),a.jsx("th",{children:""})]})}),a.jsx("tbody",{children:t.languageUse.map((e,n)=>a.jsxs("tr",{children:[a.jsx("td",{children:e.section}),a.jsx("td",{children:e.language}),a.jsx("td",{children:e.reason})]},n))})]})}),a.jsxs(F,{title:"",level:2,children:[a.jsx("ol",{children:t.learningRoadmap.map((e,n)=>a.jsx("li",{children:a.jsx(jn,{text:e})},n))}),a.jsx(lr,{type:"tip",label:"",children:a.jsx(jn,{text:t.learningMistake})})]})]})},b2=()=>a.jsxs("div",{children:[a.jsx("p",{className:"description",children:"  "}),g2.map(t=>a.jsx(F,{title:t.sectionTitle,level:2,children:t.blocks.map((e,n)=>a.jsx(lr,{type:e.type,label:e.label,defaultOpen:e.type==="warning",children:a.jsx(jn,{text:e.content})},n))},t.id)),a.jsxs(F,{title:"PE   ",level:2,children:[a.jsx("p",{className:"description",children:"  "}),y2.map((t,e)=>a.jsxs(F,{title:t.section,level:3,children:[a.jsx("ul",{children:t.expressions.map((n,s)=>a.jsx("li",{children:n},s))}),t.rheumatologyAdditions&&t.rheumatologyAdditions.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("p",{children:a.jsx("strong",{children:" :"})}),a.jsx("ul",{children:t.rheumatologyAdditions.map((n,s)=>a.jsx("li",{children:n},s))})]})]},e))]})]}),I2=()=>a.jsx(VE,{children:a.jsxs("div",{children:[a.jsx(F,{title:"",level:2,defaultCollapsed:!1,children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:""}),a.jsx("th",{children:""}),a.jsx("th",{children:""}),a.jsx("th",{children:""})]})}),a.jsx("tbody",{children:Dv.map(t=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:t.name})}),a.jsx("td",{children:t.purpose}),a.jsx("td",{children:t.when}),a.jsx("td",{children:t.elements})]},t.name))})]})}),a.jsx(F,{title:"",level:2,defaultCollapsed:!1,children:a.jsx("p",{children:p2})}),d2.map((t,e)=>{const n=Dv.find(s=>t.title.includes(s.name));return a.jsxs(F,{title:t.title,level:2,defaultCollapsed:!1,children:[(n==null?void 0:n.background)&&a.jsx(lr,{type:"info",label:"",children:a.jsx("p",{children:n.background})}),a.jsx(FE,{text:t.text,audioSrc:ko(t.audioFile),timestampSrc:ko(t.timestampFile),order:e})]},t.id)}),a.jsx(lr,{type:"info",label:"",defaultOpen:!0,children:a.jsx(jn,{text:m2})})]})}),E2=()=>a.jsxs("div",{children:[a.jsx("p",{className:"description",children:"  "}),f2.map(t=>a.jsx(F,{title:t.title,level:2,children:a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{className:"vocab-table",children:[a.jsx("thead",{children:a.jsx("tr",{children:t.columns.map((e,n)=>a.jsx("th",{children:e},n))})}),a.jsx("tbody",{children:t.entries.map((e,n)=>a.jsxs("tr",{children:[a.jsx("td",{children:e.jp}),a.jsx("td",{children:e.en}),a.jsx("td",{children:e.example}),e.extra!==void 0&&a.jsx("td",{children:e.extra})]},n))})]})})},t.id))]}),_2=()=>{const{layout:t}=Ls(),[e,n]=I.useState("overview"),s=t==="two-column"?"layout-two-column":t==="single-column"?"layout-single-column":"";return a.jsxs("div",{className:`container ${s}`,children:[a.jsx(mt,{to:"/",className:"back-link",children:" "}),a.jsx("h1",{children:""}),a.jsx("p",{className:"description",children:""}),a.jsx("div",{className:"case-tabs",children:w2.map(r=>a.jsx("button",{className:`case-tab ${e===r.id?"active":""}`,onClick:()=>n(r.id),children:r.label},r.id))}),a.jsxs("div",{className:"case-tab-content",children:[e==="overview"&&a.jsx(x2,{}),e==="template"&&a.jsx(b2,{}),e==="sle"&&a.jsx(Ov,{data:u2}),e==="ra"&&a.jsx(Ov,{data:h2}),e==="formats"&&a.jsx(I2,{}),e==="vocab"&&a.jsx(E2,{})]})]})},k2=()=>{const{layout:t}=Ls();return a.jsxs("div",{className:`container ${t==="two-column"?"layout-two-column":t==="single-column"?"layout-single-column":""}`,children:[a.jsx("h1",{children:"de"}),a.jsxs("div",{className:"sections-grid",children:[a.jsxs(mt,{to:"/medical-interview",className:"section-card",children:[a.jsx("div",{className:"section-icon",children:""}),a.jsx("div",{className:"section-title",children:""}),a.jsx("div",{className:"section-subtitle",children:"Medical Interview"})]}),a.jsxs(mt,{to:"/physical-exam",className:"section-card",children:[a.jsx("div",{className:"section-icon",children:""}),a.jsx("div",{className:"section-title",children:""}),a.jsx("div",{className:"section-subtitle",children:"Physical Examination"})]}),a.jsxs(mt,{to:"/presentation",className:"section-card",children:[a.jsx("div",{className:"section-icon",children:""}),a.jsx("div",{className:"section-title",children:""}),a.jsx("div",{className:"section-subtitle",children:"Presentation"})]}),a.jsxs(mt,{to:"/debug",className:"section-card",children:[a.jsx("div",{className:"section-icon",children:""}),a.jsx("div",{className:"section-title",children:""}),a.jsx("div",{className:"section-subtitle",children:"Debug / Sandbox"})]})]})]})},S2=()=>{const[t,e]=I.useState(!1),n=I.useRef(null),[s,r]=I.useState(null),i=I.useRef(null),o=I.useRef({dragging:!1,moved:!1,isTouch:!1}),c=I.useRef({startX:0,startY:0,startLeft:0,startTop:0}),u=w=>{const k=n.current;if(!k)return w;const y=8,x=Math.max(y,window.innerWidth-k.offsetWidth-y),j=Math.max(y,window.innerHeight-k.offsetHeight-y),R=Math.min(Math.max(w.left,y),x),L=Math.min(Math.max(w.top,y),j);return{left:R,top:L}},h=w=>{const k=u(w);i.current=k,r(k)};I.useEffect(()=>{const w=n.current;if(!w)return;const k="ontouchstart"in window||navigator.maxTouchPoints>0;if(o.current.isTouch=k,!k)try{const R=localStorage.getItem("settingsButtonPosition");if(R){const L=JSON.parse(R);typeof L.left=="number"&&typeof L.top=="number"&&h({left:L.left,top:L.top})}}catch(R){console.warn("Failed to restore settings button position:",R)}if(k)return;const y=R=>{o.current.dragging=!0,o.current.moved=!1,w.classList.add("dragging");const L=w.getBoundingClientRect();c.current={startX:R.clientX,startY:R.clientY,startLeft:L.left,startTop:L.top},R.preventDefault()},x=R=>{if(!o.current.dragging)return;const{startX:L,startY:U,startLeft:S,startTop:v}=c.current,N=R.clientX-L,T=R.clientY-U;!o.current.moved&&(Math.abs(N)>2||Math.abs(T)>2)&&(o.current.moved=!0);const P=S+N,A=v+T,_=window.innerWidth-w.offsetWidth,re=window.innerHeight-w.offsetHeight,ye=Math.max(0,Math.min(P,_)),Re=Math.max(0,Math.min(A,re));h({left:ye,top:Re})},j=()=>{if(!o.current.dragging)return;o.current.dragging=!1,w.classList.remove("dragging");const R=i.current;if(R)try{localStorage.setItem("settingsButtonPosition",JSON.stringify(R))}catch(L){console.warn("Failed to save settings button position:",L)}};return w.addEventListener("mousedown",y),document.addEventListener("mousemove",x),document.addEventListener("mouseup",j),()=>{w.removeEventListener("mousedown",y),document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",j)}},[]);const m=()=>{if(o.current.moved){o.current.moved=!1;return}e(!0)},p=s?{left:`${s.left}px`,top:`${s.top}px`,right:"auto"}:void 0,g="/medical-interview-english/".replace(/\/$/,""),E=w=>{const k=w.replace(/^\/+/,""),y=`${g}/${k}`.replace(/^\/\//,"/");return y.startsWith("/")?y:`/${y}`},C=(w,k,y)=>a.jsx(qR,{title:w,url:k,enableAudio:y==null?void 0:y.enableAudio,backTo:y==null?void 0:y.backTo,backLabel:y==null?void 0:y.backLabel});return a.jsx(NS,{children:a.jsxs(CS,{children:[a.jsxs(MR,{basename:"/medical-interview-english/",children:[a.jsxs(CR,{children:[a.jsx(sn,{path:"/",element:a.jsx(k2,{})}),a.jsx(sn,{path:"/physical-exam",element:a.jsx(N2,{})}),a.jsx(sn,{path:"/medical-interview",element:C("",E("legacy/medical-interview.html"),{enableAudio:!0})}),a.jsx(sn,{path:"/head-neck",element:a.jsx(QR,{})}),a.jsx(sn,{path:"/head-neck/old",element:C("",E("legacy/head-neck.html"),{enableAudio:!0})}),a.jsx(sn,{path:"/chest",element:a.jsx(GR,{})}),a.jsx(sn,{path:"/chest/old",element:C("",E("legacy/chest.html"),{enableAudio:!0})}),a.jsx(sn,{path:"/abdomen",element:C("",E("legacy/abdomen.html"),{enableAudio:!0,backTo:"/physical-exam",backLabel:" "})}),a.jsx(sn,{path:"/neurological",element:a.jsx(XR,{})}),a.jsx(sn,{path:"/neurological/old",element:C("",E("legacy/neurological.html"),{enableAudio:!0})}),a.jsx(sn,{path:"/presentation",element:a.jsx(_2,{})}),a.jsx(sn,{path:"/presentation/old",element:C("",E("legacy/presentation.html"),{enableAudio:!0})}),a.jsx(sn,{path:"/debug",element:a.jsx(j2,{})})]}),a.jsx("button",{ref:n,style:p,className:"settings-button","aria-label":"",onClick:m,children:""}),a.jsx(AP,{open:t,onClose:()=>e(!1)})]}),a.jsx(VP,{})]})})},T2=()=>a.jsx(Y1,{children:a.jsx(S2,{})}),N2=()=>{const{layout:t}=Ls();return a.jsxs("div",{className:`container ${t==="two-column"?"layout-two-column":t==="single-column"?"layout-single-column":""}`,children:[a.jsx(mt,{to:"/",className:"back-link",children:" "}),a.jsx("h1",{children:""}),a.jsx("p",{className:"description",children:""}),a.jsxs("div",{className:"sections-grid",children:[a.jsxs(mt,{to:"/head-neck",className:"section-card",children:[a.jsx("div",{className:"section-icon",children:""}),a.jsx("div",{className:"section-title",children:""}),a.jsx("div",{className:"section-subtitle",children:"Head & Neck"})]}),a.jsxs(mt,{to:"/chest",className:"section-card",children:[a.jsx("div",{className:"section-icon",children:""}),a.jsx("div",{className:"section-title",children:""}),a.jsx("div",{className:"section-subtitle",children:"Chest"})]}),a.jsxs(mt,{to:"/abdomen",className:"section-card",children:[a.jsx("div",{className:"section-icon",children:""}),a.jsx("div",{className:"section-title",children:""}),a.jsx("div",{className:"section-subtitle",children:"Abdomen"})]}),a.jsxs(mt,{to:"/neurological",className:"section-card",children:[a.jsx("div",{className:"section-icon",children:""}),a.jsx("div",{className:"section-title",children:""}),a.jsx("div",{className:"section-subtitle",children:"Neurological"})]})]})]})},j2=()=>{const{layout:t}=Ls();return a.jsxs("div",{className:`container ${t==="two-column"?"layout-two-column":t==="single-column"?"layout-single-column":""}`,children:[a.jsx(mt,{to:"/",className:"back-link",children:" "}),a.jsx("h1",{children:"UI"}),a.jsxs(F,{title:"General Description",level:2,children:[a.jsx("p",{className:"description",children:"h2/h3/h4 "}),a.jsxs("ul",{className:"expanded",children:[a.jsx("li",{children:"auto/dark"}),a.jsx("li",{children:"auto/2/1"}),a.jsx("li",{children:""})]}),a.jsxs(F,{title:": h3 ",level:3,defaultCollapsed:!0,children:[a.jsx("p",{children:"h3 /"}),a.jsxs("ul",{className:"expanded",children:[a.jsx("li",{children:"A"}),a.jsx("li",{children:"B"})]}),a.jsx(F,{title:": h4 ",level:4,defaultCollapsed:!0,children:a.jsx("p",{children:"h4 "})})]})]}),a.jsxs(F,{title:"Realtime API ",level:2,defaultCollapsed:!0,children:[a.jsx("p",{children:"Realtime API API "}),a.jsx(a2,{})]})]})};Xh.createRoot(document.getElementById("root")).render(a.jsx(yu.StrictMode,{children:a.jsx(T2,{})}));
